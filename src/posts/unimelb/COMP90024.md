---
icon: pen-to-square
date: 2025-03-02
category:
  - Learning Records
tag:
  - Unimelb
---

# Cluster and Cloud Computing (COMP90024)

## Week 1
Over the past two decades, several major trends in research and computing have collectively enabled the rise of cloud computing:
1. **Virtualization** has allowed multiple virtual machines to run efficiently on a single physical host, maximizing hardware utilizationâ€”crucial for scalable cloud infrastructure.
2. **Distributed computing models**, such as grid and cluster computing, demonstrated how large tasks could be executed across multiple machines, forming the architectural basis of the cloud.
3. **Broadband Internet access** made it feasible to access remote resources with low latency, enabling the core idea of â€œcomputing over the internet.â€
4. **Utility computing** introduced the pay-as-you-go model, shifting IT investment from capital to operational expenditure, thus attracting cost-conscious enterprises.
5. **Scalability and elasticity** gave organizations the ability to dynamically adjust resources based on real-time demand, improving flexibility and cost-efficiency.
6. **Service-Oriented Architecture (SOA)** encouraged modular, reusable components, shaping how cloud services are designed and integrated.
7. **Data storage innovations**, such as SSDs and software-defined storage, improved data throughput and reliability, meeting the demands of large-scale cloud workloads.
8. **Security and privacy advancements**, including encryption, access control, and compliance standards, addressed growing concerns around trusting third-party providers.
9. **Open source software**, like OpenStack and Kubernetes, fueled rapid innovation and made cloud technologies more accessible to startups and researchers alike.
10. **Economic pressures** to cut costs and improve agility further accelerated cloud adoption, as organizations sought to benefit from economies of scale and specialized expertise.


### Cloud Characteristics

| ç‰¹å¾ | è‹±æ–‡åç§° | æ ¸å¿ƒæ¦‚å¿µ | ä¸»è¦ä¼˜åŠ¿ | å®ç°æ–¹å¼ | å…¸å‹åº”ç”¨åœºæ™¯ |
|------|----------|----------|----------|----------|--------------|
| **æŒ‰éœ€è‡ªåŠ©æœåŠ¡** | On-demand self-service | ç”¨æˆ·å¯è‡ªä¸»è·å–è®¡ç®—èµ„æºï¼Œæ— éœ€äººå·¥å¹²é¢„ | â€¢ æé«˜æ•ˆç‡<br>â€¢ é™ä½æˆæœ¬<br>â€¢ 24/7å¯ç”¨ | â€¢ è‡ªåŠ©æœåŠ¡é—¨æˆ·<br>â€¢ APIæ¥å£<br>â€¢ è‡ªåŠ¨åŒ–é…ç½®å·¥å…· | â€¢ å¼€å‘æµ‹è¯•ç¯å¢ƒå¿«é€Ÿåˆ›å»º<br>â€¢ ä¸´æ—¶è®¡ç®—èµ„æºéœ€æ±‚<br>â€¢ ä¸šåŠ¡é«˜å³°æœŸæ‰©å®¹ |
| **ç½‘ç»œåŒ–è®¿é—®** | Networked access | é€šè¿‡ç½‘ç»œæä¾›æœåŠ¡ï¼Œæ”¯æŒå¤šå¹³å°è®¿é—® | â€¢ éšæ—¶éšåœ°è®¿é—®<br>â€¢ è·¨å¹³å°å…¼å®¹<br>â€¢ é™ä½éƒ¨ç½²å¤æ‚åº¦ | â€¢ æ ‡å‡†ç½‘ç»œåè®®<br>â€¢ Webç•Œé¢<br>â€¢ ç§»åŠ¨åº”ç”¨<br>â€¢ APIæœåŠ¡ | â€¢ è¿œç¨‹åŠå…¬<br>â€¢ ç§»åŠ¨åº”ç”¨å¼€å‘<br>â€¢ è·¨åœ°åŸŸåä½œ |
| **èµ„æºæ± åŒ–** | Resource pooling | å¤šç§Ÿæˆ·å…±äº«èµ„æºæ± ï¼ŒåŠ¨æ€åˆ†é…èµ„æº | â€¢ èµ„æºåˆ©ç”¨ç‡é«˜<br>â€¢ æˆæœ¬åˆ†æ‘Š<br>â€¢ è§„æ¨¡ç»æµæ•ˆåº” | â€¢ è™šæ‹ŸåŒ–æŠ€æœ¯<br>â€¢ å¤šç§Ÿæˆ·æ¶æ„<br>â€¢ èµ„æºè°ƒåº¦ç®—æ³• | â€¢ å…±äº«ä¸»æœºæœåŠ¡<br>â€¢ ä¼ä¸šç§æœ‰äº‘<br>â€¢ å…¬æœ‰äº‘å¹³å° |
| **å¿«é€Ÿå¼¹æ€§** | Rapid elasticity | èµ„æºå¯å¿«é€Ÿæ‰©å±•å’Œæ”¶ç¼©ï¼Œæ”¯æŒè‡ªåŠ¨åŒ– | â€¢ å¿«é€Ÿå“åº”éœ€æ±‚å˜åŒ–<br>â€¢ é¿å…èµ„æºæµªè´¹<br>â€¢ åº”å¯¹çªå‘æµé‡ | â€¢ è‡ªåŠ¨æ‰©ç¼©å®¹<br>â€¢ è´Ÿè½½å‡è¡¡<br>â€¢ å®¹å™¨ç¼–æ’<br>â€¢ å¾®æœåŠ¡æ¶æ„ | â€¢ ç”µå•†ä¿ƒé”€æ´»åŠ¨<br>â€¢ è§†é¢‘ç›´æ’­<br>â€¢ æ¸¸æˆæœåŠ¡å™¨ |
| **å¯è®¡é‡æœåŠ¡** | Measured service | è‡ªåŠ¨ç›‘æ§ã€æ§åˆ¶å’ŒæŠ¥å‘Šèµ„æºä½¿ç”¨æƒ…å†µ | â€¢ æŒ‰ä½¿ç”¨é‡ä»˜è´¹<br>â€¢ æˆæœ¬é€æ˜åŒ–<br>â€¢ èµ„æºä¼˜åŒ– | â€¢ ç›‘æ§ç³»ç»Ÿ<br>â€¢ è®¡è´¹ç³»ç»Ÿ<br>â€¢ ä½¿ç”¨æŠ¥å‘Š<br>â€¢ èµ„æºé…é¢ç®¡ç† | â€¢ æŒ‰éœ€ä»˜è´¹æ¨¡å¼<br>â€¢ æˆæœ¬æ ¸ç®—<br>â€¢ èµ„æºç®¡ç† |

### åˆ†å¸ƒå¼ç³»ç»Ÿå‘å±•å†å²æ€»ç»“
åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ¼”è¿›æ˜¯ä¸€ä¸ªä¸æ–­åº”å¯¹æ›´å¤§è§„æ¨¡ã€æ›´å¤æ‚åä½œéœ€æ±‚çš„è¿‡ç¨‹ï¼Œå…¶å‘å±•å†ç¨‹å¤§è‡´å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š
1.  **æ—©æœŸæ¢ç´¢ä¸æ ‡å‡†åŒ–é˜¶æ®µï¼ˆå¤§è‡´åœ¨20ä¸–çºª80å¹´ä»£æœ«è‡³90å¹´ä»£åˆï¼‰**
    *   **æŒ‘æˆ˜**ï¼šæ—©æœŸåˆ†å¸ƒå¼ç³»ç»Ÿå®ç°å¤æ‚ï¼Œç¼ºä¹ç»Ÿä¸€æ ‡å‡†ï¼Œå¯¼è‡´ä¸åŒç³»ç»Ÿé—´éš¾ä»¥äº’æ“ä½œã€‚ä¾›åº”å•†å„è‡ªæä¾›è§£å†³æ–¹æ¡ˆï¼ˆå¦‚ AnsaWare, IBM Distributed SOM / Component Broker ç­‰ï¼‰ï¼Œå®¹æ˜“å½¢æˆæŠ€æœ¯é”å®šã€‚
    *   **æŠ€æœ¯å°è¯•**ï¼šä¸ºäº†è§£å†³äº’æ“ä½œæ€§é—®é¢˜ï¼Œå‡ºç°äº†åƒ ORBï¼ˆå¯¹è±¡è¯·æ±‚ä¸­ä»‹ï¼‰è¿™æ ·çš„æ ¸å¿ƒç»„ä»¶ã€‚ORB å……å½“å¯¹è±¡é—´çš„â€œä¿¡ä½¿â€ï¼Œè®©åˆ†å¸ƒå¼å¯¹è±¡èƒ½åƒæœ¬åœ°å¯¹è±¡ä¸€æ ·é€šä¿¡ã€‚è¿™å¯ä»¥çœ‹ä½œæ˜¯ RPCï¼ˆè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰æ€æƒ³çš„ä¸€ç§é¢å‘å¯¹è±¡ã€æ›´é«˜çº§çš„å®ç°ã€‚
    *   **æ ‡å‡†åŒ–åŠªåŠ›**ï¼šOMG ç»„ç»‡åˆ¶å®šäº† CORBAï¼ˆå…¬å…±å¯¹è±¡è¯·æ±‚ä»£ç†ä½“ç³»ç»“æ„ï¼‰æ ‡å‡†ã€‚CORBA æä¾›äº†ä¸€ä¸ªæ¡†æ¶ï¼Œå…è®¸ä¸åŒè¯­è¨€ç¼–å†™çš„ã€è¿è¡Œåœ¨ä¸åŒå¹³å°ä¸Šçš„åº”ç”¨ç¨‹åºè¿›è¡Œäº’æ“ä½œï¼Œé€šè¿‡ IDLï¼ˆæ¥å£å®šä¹‰è¯­è¨€ï¼‰å®šä¹‰æ¥å£ï¼Œç”Ÿæˆå®¢æˆ·ç«¯/æœåŠ¡ç«¯å­˜æ ¹å’Œéª¨æ¶ï¼Œå®ç°â€œç¼–å†™ä¸€æ¬¡ï¼Œåˆ°å¤„è¿è¡Œâ€çš„ç†æƒ³ã€‚CORBA æ¶æ„é€šå¸¸åŒ…æ‹¬è¿æ¥å±‚ã€å¯¹è±¡é€‚é…å™¨ã€ORB æ ¸å¿ƒç­‰ã€‚
2.  **äº’è”ç½‘æ™®åŠä¸å¯¹ç­‰è®¡ç®—é˜¶æ®µï¼ˆå¤§è‡´åœ¨1990å¹´ä»£ä¸­æœŸè‡³æœ«æœŸï¼‰**
    *   **èƒŒæ™¯**ï¼šäº’è”ç½‘çš„è¿…é€Ÿå‘å±•ï¼ˆå¦‚ 1993 å¹´äº’è”ç½‘å¼€å§‹æ™®åŠï¼‰æå¤§åœ°æ‰©å±•äº†åˆ†å¸ƒå¼ç³»ç»Ÿçš„è§„æ¨¡å’Œåº”ç”¨èŒƒå›´ã€‚
    *   **æ–°æ¨¡å¼**ï¼šå‡ºç°äº†å¯¹ç­‰è®¡ç®—ï¼ˆP2Pï¼‰æ¨¡å¼ï¼Œå¦‚æ–‡ä»¶å…±äº«åº”ç”¨ï¼Œæ”¹å˜äº†ä¼ ç»Ÿçš„å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„ã€‚
    *   **æ‰©å±•**ï¼šç³»ç»Ÿè§„æ¨¡ï¼ˆæœºå™¨æ•°é‡ã€å‚ä¸äººå‘˜ï¼‰å’Œåº”ç”¨é¢†åŸŸéƒ½åœ¨å¿«é€Ÿæ‰©å¤§ã€‚
3.  **ç½‘æ ¼è®¡ç®—ä¸ e-Research é˜¶æ®µï¼ˆå¤§è‡´åœ¨21ä¸–çºªåˆï¼‰**
    *   **ç›®æ ‡**ï¼šä¸ºäº†æ”¯æŒæ›´å¤§è§„æ¨¡çš„ç§‘å­¦ç ”ç©¶åˆä½œï¼ˆå³ e-Researchï¼‰ï¼Œç½‘æ ¼è®¡ç®—åº”è¿è€Œç”Ÿã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯â€œå°†è®¡ç®—å’Œæ•°æ®èµ„æºåƒç”µåŠ›ç½‘æ ¼ä¸€æ ·æŒ‰éœ€åˆ†é…â€ï¼Œå®ç°ç»„ç»‡ä¸ç»„ç»‡ä¹‹é—´çš„èµ„æºå…±äº«å’ŒååŒã€‚
    *   **ä»£è¡¨é¡¹ç›®**ï¼šGlobus Toolkit æ˜¯ç½‘æ ¼è®¡ç®—é¢†åŸŸçš„é‡è¦é¡¹ç›®ï¼Œç”± Ian Foster ç­‰äººä¸»å¯¼ã€‚æ—©æœŸç‰ˆæœ¬ï¼ˆå¦‚ GT2ï¼‰å…³æ³¨æ ¸å¿ƒå®‰å…¨ã€èµ„æºç®¡ç†å’Œæ•°æ®ç®¡ç†åŠŸèƒ½ã€‚åæ¥å‘å±•åˆ° GT3 å’Œ GT4ï¼Œé€æ¸å¼•å…¥äº† Web æœåŠ¡ç†å¿µï¼Œç‰¹åˆ«æ˜¯ GT3 æå‡ºäº†â€œGrid Servicesâ€çš„æ¦‚å¿µï¼Œè¯•å›¾å°†æœ‰çŠ¶æ€çš„æœåŠ¡ä¸ Web æœåŠ¡æ ‡å‡†ç»“åˆèµ·æ¥ã€‚
    *   **å…³é”®ç†å¿µ**ï¼šç½‘æ ¼è®¡ç®—è¯•å›¾è§£å†³è·¨ç»„ç»‡è¾¹ç•Œçš„èµ„æºå…±äº«å’ŒååŒé—®é¢˜ï¼Œæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿå‘æ›´å®è§‚ã€æ›´å¤æ‚åä½œåœºæ™¯çš„å»¶ä¼¸ã€‚è‹±å›½æ”¿åºœç­‰æœºæ„å¯¹æ­¤è¿›è¡Œäº†å¤§é‡æŠ•èµ„ã€‚
4.  **ç½‘æ ¼æŠ€æœ¯çš„æ¼”å˜ä¸åæ€é˜¶æ®µï¼ˆå¤§è‡´åœ¨2010å¹´ä»£åï¼‰**
    *   **Globus Toolkit çš„é€€å½¹**ï¼šç»è¿‡äºŒåå¹´çš„å‘å±•ï¼ŒGlobus Toolkit é¡¹ç›®åœ¨ 2018 å¹´å·¦å³åœæ­¢ä½œä¸ºå¼€æºå·¥å…·åŒ…ç»´æŠ¤ï¼Œä½†å…¶ç²¾ç¥å»¶ç»­åˆ°äº† Globus.org è¿™ä¸ªæˆç†Ÿçš„æ•°æ®ç®¡ç†æœåŠ¡ä¸­ã€‚
    *   **æŒ‘æˆ˜ä¸åæ€**ï¼šç½‘æ ¼æŠ€æœ¯çš„å®æ–½é¢ä¸´å›°éš¾ï¼Œå•†ä¸šåˆ©ç›Šä¹Ÿå¯èƒ½å½±å“æ ‡å‡†çš„åˆ¶å®šã€‚äººä»¬å¼€å§‹åæ€å…¶å¤æ‚æ€§ï¼Œå¹¶å¼•ç”¨â€œä½¿è½¯ä»¶å®‰å…¨ã€å¯é å’Œå¿«é€Ÿçš„å”¯ä¸€æ–¹æ³•æ˜¯ä½¿å…¶å°å‹åŒ–â€çš„è§‚ç‚¹ï¼Œå¯¹æ˜¯å¦åº”é‡‡ç”¨æ›´è½»é‡çº§çš„ Web æœåŠ¡æˆ–å…¶ä»–æŠ€æœ¯æ›¿ä»£éƒ¨åˆ†ç½‘æ ¼æŠ€æœ¯æå‡ºäº†ç–‘é—®ã€‚

**æ€»ç»“**ï¼š
åˆ†å¸ƒå¼ç³»ç»Ÿçš„å‘å±•å²æ˜¯ä¸€ä¸ªä»å…³æ³¨åº•å±‚é€šä¿¡å’Œæ ‡å‡†åŒ–ï¼Œåˆ°è¿½æ±‚å¯¹è±¡çº§äº’æ“ä½œï¼ˆCORBAï¼‰ï¼Œå†åˆ°æ‹¥æŠ±äº’è”ç½‘è§„æ¨¡å’Œå¯¹ç­‰æ¨¡å¼ï¼Œæœ€åå‘å±•åˆ°è§£å†³è·¨ç»„ç»‡èµ„æºå…±äº«ï¼ˆç½‘æ ¼è®¡ç®—ï¼‰çš„è¿‡ç¨‹ã€‚æ¯ä¸ªé˜¶æ®µéƒ½è¯•å›¾è§£å†³ä¸Šä¸€é˜¶æ®µé—ç•™çš„é—®é¢˜å’Œæ–°çš„æŒ‘æˆ˜ï¼ŒæŠ€æœ¯ä¹Ÿæ—¥è¶‹å¤æ‚ï¼Œä½†ä¹Ÿä¼´éšç€å¯¹ç®€åŒ–ã€è½»é‡åŒ–å’Œå®ç”¨æ€§çš„åæ€ã€‚è¿™ä¸ªå†å²æ¸…æ™°åœ°å±•ç¤ºäº†æŠ€æœ¯å¦‚ä½•ä¸æ–­æ¼”è¿›ä»¥é€‚åº”æ—¥ç›Šå¢é•¿çš„è¿æ¥å’Œåä½œéœ€æ±‚ã€‚

### Grid Computing

| æŒ‘æˆ˜é¢†åŸŸ | å…·ä½“é—®é¢˜ | æ¶‰åŠç»„ä»¶ | æŠ€æœ¯éš¾ç‚¹ | å½±å“ | è§£å†³æ–¹å‘ |
|----------|----------|----------|----------|------|----------|
| **ä¿¡æ¯ç³»ç»Ÿå¤šæ ·æ€§** | å¼‚æ„èµ„æºæ•´åˆå›°éš¾ | â€¢ æœåŠ¡å™¨<br>â€¢ CPU/å†…å­˜<br>â€¢ å­˜å‚¨è®¾å¤‡<br>â€¢ é˜Ÿåˆ—ç®¡ç†ç³»ç»Ÿ<br>â€¢ æ“ä½œç³»ç»Ÿ<br>â€¢ åº”ç”¨ç¨‹åº<br>â€¢ æ•°æ®åº“ | â€¢ ä¸åŒå‚å•†æ ‡å‡†<br>â€¢ å¤šç§æ¥å£åè®®<br>â€¢ å…¼å®¹æ€§é—®é¢˜<br>â€¢ ç‰ˆæœ¬ç®¡ç†å¤æ‚ | â€¢ ç®¡ç†å¤æ‚åº¦é«˜<br>â€¢ åè°ƒå›°éš¾<br>â€¢ ç»´æŠ¤æˆæœ¬å¢åŠ  | â€¢ æ ‡å‡†åŒ–æ¥å£<br>â€¢ ä¸­é—´ä»¶æŠ½è±¡<br>â€¢ ç»Ÿä¸€ç®¡ç†å¹³å° |
| **ç›‘æ§å‘ç°ç³»ç»Ÿ** | å®æ—¶çŠ¶æ€ç›‘æ§å›°éš¾ | â€¢ é˜Ÿåˆ—ç›‘æ§<br>â€¢ èµ„æºçŠ¶æ€æ£€æµ‹<br>â€¢ è´Ÿè½½è¯„ä¼°<br>â€¢ è¿è¡Œæ—¶é—´ç»Ÿè®¡ | â€¢ å®æ—¶æ€§è¦æ±‚é«˜<br>â€¢ å‡†ç¡®æ€§éš¾ä¿è¯<br>â€¢ å¤§è§„æ¨¡ç›‘æ§å¼€é”€<br>â€¢ çŠ¶æ€åŒæ­¥å»¶è¿Ÿ | â€¢ èµ„æºåˆ©ç”¨ç‡ä½<br>â€¢ è°ƒåº¦å†³ç­–é”™è¯¯<br>â€¢ æ€§èƒ½ä¼˜åŒ–å›°éš¾ | â€¢ åˆ†å¸ƒå¼ç›‘æ§<br>â€¢ æ™ºèƒ½é¢„æµ‹<br>â€¢ ç¼“å­˜æœºåˆ¶ |
| **ä½œä¸šè°ƒåº¦èµ„æºä¸­ä»‹** | å¤šçº¦æŸä¼˜åŒ–é—®é¢˜ | â€¢ è°ƒåº¦å™¨<br>â€¢ èµ„æºåˆ†é…å™¨<br>â€¢ è¿›ç¨‹é€šä¿¡ç®¡ç†<br>â€¢ è¯•ç‚¹ä½œä¸šç³»ç»Ÿ | â€¢ å¤šç›®æ ‡ä¼˜åŒ–<br>â€¢ åŠ¨æ€çº¦æŸå˜åŒ–<br>â€¢ èµ„æºç«äº‰å¤„ç†<br>â€¢ é€šä¿¡å¼€é”€ä¼˜åŒ– | â€¢ ä½œä¸šç­‰å¾…æ—¶é—´é•¿<br>â€¢ èµ„æºæµªè´¹<br>â€¢ ç³»ç»Ÿååé‡ä½ | â€¢ æ™ºèƒ½è°ƒåº¦ç®—æ³•<br>â€¢ é¢„ç•™æœºåˆ¶<br>â€¢ è´Ÿè½½å‡è¡¡ |
| **è™šæ‹Ÿç»„ç»‡æ”¯æŒ** | è·¨å­¦ç§‘éœ€æ±‚é€‚é… | â€¢ ç”¨æˆ·æ¥å£<br>â€¢ æƒé™ç®¡ç†<br>â€¢ èµ„æºè®¿é—®æ§åˆ¶<br>â€¢ åº”ç”¨é€‚é…å±‚ | â€¢ éœ€æ±‚å¤šæ ·åŒ–<br>â€¢ å®‰å…¨ç­–ç•¥å¤æ‚<br>â€¢ ç”¨æˆ·ä½“éªŒè¦æ±‚<br>â€¢ ä¸“ä¸šçŸ¥è¯†è¦æ±‚ | â€¢ ç”¨æˆ·æ»¡æ„åº¦ä½<br>â€¢ å­¦ä¹ æˆæœ¬é«˜<br>â€¢ åº”ç”¨æ¨å¹¿å›°éš¾ | â€¢ é¢†åŸŸä¸“ç”¨æ¥å£<br>â€¢ ç®€åŒ–æ“ä½œæµç¨‹<br>â€¢ è‡ªåŠ¨åŒ–å·¥å…· |
| **å±‚æ¬¡ç»“æ„åœ°ç†åˆ†å¸ƒ** | è·¨åœ°åŸŸååŒå¤æ‚ | â€¢ åº”ç”¨ç¨‹åºå±‚<br>â€¢ ä¸­é—´ä»¶å±‚<br>â€¢ èµ„æºå±‚<br>â€¢ ç»‡ç‰©å±‚<br>â€¢ ç½‘ç»œåŸºç¡€è®¾æ–½ | â€¢ ç½‘ç»œå»¶è¿Ÿ<br>â€¢ æ•°æ®ä¼ è¾“å¼€é”€<br>â€¢ æ•…éšœå®¹é”™<br>â€¢ ä¸€è‡´æ€§ç»´æŠ¤ | â€¢ å“åº”æ—¶é—´é•¿<br>â€¢ å¯é æ€§é™ä½<br>â€¢ ç®¡ç†å¤æ‚åº¦é«˜ | â€¢ åˆ†å±‚æ¶æ„ä¼˜åŒ–<br>â€¢ æœ¬åœ°åŒ–éƒ¨ç½²<br>â€¢ å®¹é”™æœºåˆ¶ |


## Week 2

### Horizontal and Vertical Scaling
- Horizontal scaling refers to adding more resources to a system, easy to add more, cost not so high. å¢åŠ æœåŠ¡å™¨æ•°é‡ more processors
- Vertical scaling refers to increasing the resources of a system, more complex, cost high. å¢åŠ å•ä¸ªæœåŠ¡å™¨èµ„æº faster processors

### Amdahl's Law ä¸ Gustafson-Barsis's Law 

#### Amdahl's Law (é˜¿å§†è¾¾å°”å®šå¾‹)

**æ ¸å¿ƒæ€æƒ³**ï¼šç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½æå‡å—åˆ°ç³»ç»Ÿä¸­æ— æ³•å¹¶è¡ŒåŒ–éƒ¨åˆ†çš„é™åˆ¶ã€‚

#### æ•°å­¦å…¬å¼
```
åŠ é€Ÿæ¯” S = 1 / (s + (1-s)/p)
```
å…¶ä¸­ï¼š
- s = ä¸²è¡Œéƒ¨åˆ†å æ€»æ‰§è¡Œæ—¶é—´çš„æ¯”ä¾‹
- p = å¤„ç†å™¨æ•°é‡
- (1-s) = å¯å¹¶è¡ŒåŒ–éƒ¨åˆ†çš„æ¯”ä¾‹

#### å…³é”®ç‰¹ç‚¹

| ç‰¹ç‚¹ | æè¿° | ç¤ºä¾‹ |
|------|------|------|
| **å›ºå®šé—®é¢˜è§„æ¨¡** | é—®é¢˜å¤§å°ä¿æŒä¸å˜ï¼Œå¢åŠ å¤„ç†å™¨æ•°é‡ | å¯¹åŒä¸€ä¸ª1000Ã—1000çš„çŸ©é˜µè¿›è¡Œè®¡ç®— |
| **ç†è®ºä¸Šé™** | æœ€å¤§åŠ é€Ÿæ¯” = 1/s | å¦‚æœ10%ä¸²è¡Œï¼Œæœ€å¤§åŠ é€Ÿæ¯” = 10 |
| **æ”¶ç›Šé€’å‡** | å¤„ç†å™¨æ•°é‡å¢åŠ ï¼Œè¾¹é™…æ”¶ç›Šé€’å‡ | ä»2æ ¸åˆ°4æ ¸æå‡æ˜æ˜¾ï¼Œä»64æ ¸åˆ°128æ ¸æå‡å¾®å° |
| **æ‚²è§‚é¢„æµ‹** | å¼ºè°ƒå¹¶è¡ŒåŒ–çš„å±€é™æ€§ | "å¹¶è¡Œè®¡ç®—æ— æ³•æ— é™æ‰©å±•" |

#### å®é™…åº”ç”¨åœºæ™¯
- **é€‚ç”¨äº**ï¼šé—®é¢˜è§„æ¨¡å›ºå®šçš„ä¼ ç»Ÿå¹¶è¡Œè®¡ç®—
- **å…¸å‹ä¾‹å­**ï¼šå›¾åƒå¤„ç†ã€æ•°å€¼è®¡ç®—ã€ç§‘å­¦ä»¿çœŸ
- **è®¾è®¡æŒ‡å¯¼**ï¼šä¼˜åŒ–ä¸²è¡Œéƒ¨åˆ†ï¼Œå‡å°‘åŒæ­¥å¼€é”€

#### Gustafson-Barsis's Law (å¤æ–¯å¡”å¤«æ£®-å·´è¥¿æ–¯å®šå¾‹)

**æ ¸å¿ƒæ€æƒ³**ï¼šåœ¨å›ºå®šæ—¶é—´å†…ï¼Œé€šè¿‡å¢åŠ å¤„ç†å™¨å¯ä»¥è§£å†³æ›´å¤§è§„æ¨¡çš„é—®é¢˜

#### æ•°å­¦å…¬å¼
```
åŠ é€Ÿæ¯” S = s + p(1-s) = p - s(p-1)
```
å…¶ä¸­ï¼š
- s = ä¸²è¡Œéƒ¨åˆ†å æ€»æ‰§è¡Œæ—¶é—´çš„æ¯”ä¾‹
- p = å¤„ç†å™¨æ•°é‡
- é‡ç‚¹ï¼šé—®é¢˜è§„æ¨¡éšå¤„ç†å™¨æ•°é‡å¢é•¿

#### å…³é”®ç‰¹ç‚¹

| ç‰¹ç‚¹ | æè¿° | ç¤ºä¾‹ |
|------|------|------|
| **å›ºå®šæ‰§è¡Œæ—¶é—´** | ä¿æŒæ‰§è¡Œæ—¶é—´ä¸å˜ï¼Œæ‰©å¤§é—®é¢˜è§„æ¨¡ | 1å°æ—¶å†…å¤„ç†æ›´å¤šæ•°æ® |
| **çº¿æ€§æ‰©å±•** | ç†è®ºä¸Šå¯ä»¥çº¿æ€§æ‰©å±• | å¤„ç†å™¨ç¿»å€ï¼Œé—®é¢˜è§„æ¨¡ç¿»å€ |
| **å®é™…å¯¼å‘** | æ›´ç¬¦åˆå®é™…åº”ç”¨éœ€æ±‚ | å¤©æ°”é¢„æŠ¥ã€å¤§æ•°æ®å¤„ç† |
| **ä¹è§‚é¢„æµ‹** | å¼ºè°ƒå¹¶è¡ŒåŒ–çš„æ½œåŠ› | "å¹¶è¡Œè®¡ç®—å¯ä»¥æœ‰æ•ˆæ‰©å±•" |

#### å®é™…åº”ç”¨åœºæ™¯
- **é€‚ç”¨äº**ï¼šé—®é¢˜è§„æ¨¡å¯æ‰©å±•çš„ç°ä»£è®¡ç®—
- **å…¸å‹ä¾‹å­**ï¼šå¤§æ•°æ®åˆ†æã€æœºå™¨å­¦ä¹ ã€äº‘è®¡ç®—
- **è®¾è®¡æŒ‡å¯¼**ï¼šè®¾è®¡å¯æ‰©å±•çš„ç®—æ³•å’Œç³»ç»Ÿæ¶æ„

#### ä¸¤å®šå¾‹çš„å¯¹æ¯”åˆ†æ

| å¯¹æ¯”ç»´åº¦ | Amdahl's Law | Gustafson-Barsis's Law |
|----------|--------------|----------------------|
| **é—®é¢˜è§„æ¨¡** | å›ºå®šä¸å˜ | éšå¤„ç†å™¨æ•°é‡å¢é•¿ |
| **æ—¶é—´çº¦æŸ** | æœ€å°åŒ–æ‰§è¡Œæ—¶é—´ | å›ºå®šæ‰§è¡Œæ—¶é—´ |
| **æ‰©å±•æ€§è§‚ç‚¹** | æ‚²è§‚ï¼šå¼ºè°ƒé™åˆ¶ | ä¹è§‚ï¼šå¼ºè°ƒæ½œåŠ› |
| **æœ€å¤§åŠ é€Ÿæ¯”** | 1/s (æœ‰ä¸Šé™) | p - s(p-1) (è¿‘ä¼¼çº¿æ€§) |
| **é€‚ç”¨åœºæ™¯** | ä¼ ç»ŸHPCåº”ç”¨ | ç°ä»£å¤§è§„æ¨¡è®¡ç®— |
| **è®¾è®¡é‡ç‚¹** | å‡å°‘ä¸²è¡Œéƒ¨åˆ† | å¢åŠ å¹¶è¡Œå·¥ä½œé‡ |

#### å®é™…åº”ç”¨ç¤ºä¾‹

 Amdahl's Law ç¤ºä¾‹
```
å‡è®¾ç¨‹åº90%å¯å¹¶è¡ŒåŒ–(s=0.1)ï¼š
- 1æ ¸ï¼šåŠ é€Ÿæ¯” = 1
- 2æ ¸ï¼šåŠ é€Ÿæ¯” = 1.82
- 4æ ¸ï¼šåŠ é€Ÿæ¯” = 3.08  
- 8æ ¸ï¼šåŠ é€Ÿæ¯” = 4.71
- æ— ç©·æ ¸ï¼šæœ€å¤§åŠ é€Ÿæ¯” = 10
```

 Gustafson-Barsis's Law ç¤ºä¾‹
```
å‡è®¾ç¨‹åº90%å¯å¹¶è¡ŒåŒ–(s=0.1)ï¼š
- 1æ ¸ï¼šåŠ é€Ÿæ¯” = 1
- 2æ ¸ï¼šåŠ é€Ÿæ¯” = 1.9
- 4æ ¸ï¼šåŠ é€Ÿæ¯” = 3.7
- 8æ ¸ï¼šåŠ é€Ÿæ¯” = 7.3
- ç»§ç»­å¢é•¿...
```

![Amdhal vs. Gustafson's Law](Amdhal_vs_Gustafsons_Law.png)

### Categories of Flynn's Taxonomy
| ç±»å‹       | å…¨ç§°                                  | ç‰¹ç‚¹                                 | ç¤ºä¾‹/å¤‡æ³¨                               |
| -------- | ----------------------------------- | ---------------------------------- | ----------------------------------- |
| **SISD** | Single Instruction, Single Data     | **å•æŒ‡ä»¤ã€å•æ•°æ®æµ**ï¼šä¸²è¡Œæ‰§è¡Œï¼Œ**æ— å¹¶è¡Œæ€§**ã€‚        | ä¼ ç»Ÿå†¯Â·è¯ºä¾æ›¼æ¶æ„ï¼ŒåŸºæœ¬å·²è¿‡æ—¶ã€‚                    |
| **MISD** | Multiple Instruction, Single Data   | **å¤šæŒ‡ä»¤ã€å•æ•°æ®æµ**ï¼šå¤šä¸ªå¤„ç†å•å…ƒå¯¹**ç›¸åŒæ•°æ®åšä¸åŒå¤„ç†**ã€‚ | å°‘è§ï¼Œé€šå¸¸ç”¨äºå®¹é”™ç³»ç»Ÿï¼ˆæ¯”å¦‚å¹¶è¡Œæ ¡éªŒï¼‰ã€‚                |
| **SIMD** | Single Instruction, Multiple Data   | **å•æŒ‡ä»¤ã€å¤šæ•°æ®æµ**ï¼šå¤šä¸ªå¤„ç†å™¨å¯¹**å¤šä¸ªæ•°æ®åšç›¸åŒæ“ä½œ**ã€‚  | å›¾åƒå¤„ç†ã€å¤šåª’ä½“åŠ é€Ÿï¼ˆå¦‚ GPUã€å‘é‡æŒ‡ä»¤ï¼‰ã€‚å¼ºè°ƒ**æ•°æ®çº§å¹¶è¡Œ**ã€‚ |
| **MIMD** | Multiple Instruction, Multiple Data | **å¤šæŒ‡ä»¤ã€å¤šæ•°æ®æµ**ï¼šå„å¤„ç†å™¨ç‹¬ç«‹è¿è¡Œï¼Œå¤„ç†ä¸åŒä»»åŠ¡å’Œæ•°æ®ã€‚   | ç°ä»£ä¸»æµæ¶æ„ï¼Œå¦‚å¤šæ ¸ CPUã€åˆ†å¸ƒå¼ç³»ç»Ÿã€‚å¼ºè°ƒ**ä»»åŠ¡å¹¶è¡Œ**ã€‚    |

### Implicit and Explicit Parallelism

| ç‰¹æ€§         | **éšå¼å¹¶è¡ŒåŒ–**                 | **æ˜¾å¼å¹¶è¡ŒåŒ–**                               |
| ---------- | ------------------------- | --------------------------------------- |
| ğŸ’¡ å®šä¹‰      | ç”±ç¼–è¯‘å™¨å’Œå¹¶è¡Œè¯­è¨€è‡ªåŠ¨è¯†åˆ«å’Œè°ƒåº¦ç¨‹åºä¸­çš„å¹¶è¡Œæ€§   | ç¨‹åºå‘˜æ‰‹åŠ¨æ§åˆ¶å¹¶è¡Œçš„å„ä¸ªæ–¹é¢                          |
| ğŸ” è°è´Ÿè´£å¹¶è¡ŒåŒ–ï¼Ÿ | **ç¼–è¯‘å™¨/è¿è¡Œæ—¶ç³»ç»Ÿ**è´Ÿè´£å¹¶è¡ŒåŒ–åˆ†æä¸è°ƒåº¦   | **ç¨‹åºå‘˜**è´Ÿè´£ä»»åŠ¡åˆ’åˆ†ã€è°ƒåº¦ã€é€šä¿¡ç­‰                    |
| âš™ï¸ å·¥ä½œå†…å®¹    | ç¼–è¯‘å™¨è¯†åˆ«å¯å¹¶è¡Œéƒ¨åˆ†ï¼Œå®‰æ’ä»»åŠ¡åˆ°å¤šæ ¸/çº¿ç¨‹ä¸Šè¿è¡Œ  | ç¨‹åºå‘˜éœ€è¦æŒ‡å®šçº¿ç¨‹/è¿›ç¨‹ã€é€šä¿¡æ–¹å¼ã€åŒæ­¥æœºåˆ¶ç­‰                 |
| ğŸ§  ç¨‹åºå‘˜è´Ÿæ‹…   | ä½ï¼Œå†™ä»£ç æ›´æ¥è¿‘ä¸²è¡Œé€»è¾‘              | é«˜ï¼Œè¦æ±‚ç¨‹åºå‘˜æœ‰å¹¶è¡Œè®¡ç®—çŸ¥è¯†                          |
| ğŸ§ª å®ç°éš¾åº¦    | ç¼–è¯‘å™¨è®¾è®¡å’Œè‡ªåŠ¨å¹¶è¡Œåˆ†æéš¾åº¦å¤§           | ç¨‹åºè®¾è®¡ã€è°ƒè¯•å’Œç»´æŠ¤éš¾åº¦å¤§                           |
| âœ… ä¼˜ç‚¹       | ç¼–ç¨‹ç®€å•ã€ä»£ç æ¸…æ™°ï¼Œä¾¿äºç»´æŠ¤            | æ§åˆ¶åŠ›å¼ºï¼Œå¯å®ç°æ›´é«˜æ€§èƒ½å’Œä¼˜åŒ–ç©ºé—´                       |
| âŒ ç¼ºç‚¹       | ç¼–è¯‘å™¨å¯èƒ½é”™è¿‡æŸäº›å¹¶è¡Œæœºä¼šï¼Œæ•ˆç‡å—é™        | ç¼–ç¨‹å¤æ‚ã€å®¹æ˜“å‡ºé”™ï¼Œè°ƒè¯•å›°éš¾                          |
| ğŸ§¾ ç¤ºä¾‹æŠ€æœ¯    | OpenMPï¼ˆæŸç§ç¨‹åº¦ä¸Šï¼‰ã€è‡ªåŠ¨å‘é‡åŒ–ã€å‡½æ•°å¼è¯­è¨€ | MPIã€OpenMPï¼ˆæ˜¾å¼æ–¹å¼ï¼‰ã€CUDAã€Pthreadsã€Java å¹¶å‘ç­‰ |

### OpenMP
- Widely used API for **shared-memory parallel programming**

#### ğŸ§± 1. å¹¶è¡Œæ„é€ ï¼ˆParallel Constructsï¼‰

ç”¨äºåˆ›å»ºå¤šä¸ªçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œä»£ç å—ï¼š

* `#pragma omp parallel`ï¼šå¼€å¯ä¸€ä¸ªå¹¶è¡ŒåŒºåŸŸã€‚
* `#pragma omp for`ï¼šå°†å¾ªç¯è¿­ä»£åˆ’åˆ†ç»™å¤šä¸ªçº¿ç¨‹ã€‚
* `#pragma omp sections`ï¼šå¤šä¸ªçº¿ç¨‹æ‰§è¡Œä¸åŒä»£ç å—ã€‚
* `#pragma omp single`ï¼šåªç”±ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚
* `#pragma omp task`ï¼šåŠ¨æ€åˆ›å»ºä»»åŠ¡ï¼Œä¾›çº¿ç¨‹æ‰§è¡Œã€‚

---

#### ğŸ‘¥ 2. çº¿ç¨‹ç®¡ç†

* `omp_set_num_threads(n)`ï¼šè®¾ç½®å¹¶è¡Œçº¿ç¨‹æ•°ã€‚
* `omp_get_num_threads()`ï¼šè·å–å½“å‰çº¿ç¨‹æ€»æ•°ã€‚
* `omp_get_thread_num()`ï¼šè·å–å½“å‰çº¿ç¨‹çš„ç¼–å·ã€‚

---

#### ğŸ”’ 3. åŒæ­¥æœºåˆ¶ï¼ˆé¿å…ç«æ€ï¼‰

* `#pragma omp critical`ï¼šä¸´ç•ŒåŒºï¼Œä¿è¯ä»£ç å—äº’æ–¥æ‰§è¡Œã€‚
* `#pragma omp atomic`ï¼šåŸå­æ“ä½œï¼Œé€‚åˆç®€å•æ•°å€¼æ“ä½œã€‚
* `#pragma omp barrier`ï¼šæ‰€æœ‰çº¿ç¨‹åœ¨æ­¤ç­‰å¾…åŒæ­¥ã€‚
* `omp_set_lock()/omp_unset_lock()`ï¼šæ˜¾å¼é”æ§åˆ¶ã€‚

---

#### ğŸ“¦ 4. æ•°æ®å…±äº«å±æ€§

* `shared`ï¼šå¤šä¸ªçº¿ç¨‹å…±äº«åŒä¸€å˜é‡ã€‚
* `private`ï¼šæ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±ç‹¬ç«‹å˜é‡ã€‚
* `firstprivate`ï¼šæ¯ä¸ªçº¿ç¨‹å¤åˆ¶ä¸»çº¿ç¨‹åˆå§‹å€¼ã€‚
* `reduction`ï¼šçº¿ç¨‹å±€éƒ¨å˜é‡å½’çº¦æˆä¸€ä¸ªï¼ˆå¦‚æ±‚å’Œï¼‰ã€‚

---

#### ğŸ” 5. å¾ªç¯è°ƒåº¦ç­–ç•¥

* **static**ï¼šå¹³å‡åˆ’åˆ†ï¼Œç¼–è¯‘æ—¶å†³å®šã€‚
* **dynamic**ï¼šè¿è¡Œæ—¶åŠ¨æ€åˆ†é…ï¼Œé€‚åˆè´Ÿè½½ä¸å‡ã€‚
* **guided**ï¼šå…ˆå¤§å—ï¼Œåå°å—ï¼Œæé«˜æ•ˆç‡ã€‚
* **auto**ï¼šç”±ç¼–è¯‘å™¨æˆ–è¿è¡Œæ—¶å†³å®šã€‚

### MPI
- Widely adopted approach for message passing in parallel systems
- Key functions:
  - MPI_Init : initiate MPI computation
  - MPI_Finalize : terminate computation
  - MPI_COMM_SIZE : determine number of processors
  - MPI_COMM_RANK : determine my process identifier
  - MPI_SEND : send a message
  - MPI_RECV : receive a message

### Parallelism in Hardware
| æ¶æ„                         | ç®€è¦æè¿°                                       |
| -------------------------- | ------------------------------------------ |
| **Basic CPU**              | æœ€åŸºæœ¬çš„å•æ ¸å¤„ç†å™¨ï¼Œä¸èƒ½è¿›è¡Œç¡¬ä»¶çº§åˆ«çš„å¹¶è¡Œè¿ç®—ã€‚                   |
| **Hardware Threading CPU** | å•ä¸ªæ ¸å¿ƒå¯åŒæ—¶æ”¯æŒå¤šä¸ªçº¿ç¨‹ï¼ˆå¦‚ Intel è¶…çº¿ç¨‹æŠ€æœ¯ï¼‰ï¼Œæå‡å¹¶å‘èƒ½åŠ›ã€‚       |
| **Multi-Core**             | å•ä¸ªç‰©ç†èŠ¯ç‰‡ä¸­åŒ…å«å¤šä¸ªç‹¬ç«‹æ ¸å¿ƒï¼Œæ¯ä¸ªæ ¸å¿ƒå¯ä»¥å¹¶è¡Œå¤„ç†ä»»åŠ¡ã€‚              |
| **SMPï¼ˆå¯¹ç§°å¤šå¤„ç†å™¨ï¼‰**            | ä¸€å°ç³»ç»Ÿä¸­æœ‰å¤šä¸ªç‰©ç† CPUï¼ˆä¸ä»…ä»…æ˜¯å¤šæ ¸ï¼‰ï¼Œé€šå¸¸åº”ç”¨äºé«˜ç«¯æœåŠ¡å™¨ã€HPC ç­‰é¢†åŸŸã€‚ |


### Erroneous Assumptions of Distributed Systems
| ç¼–å· | é”™è¯¯å‡è®¾                                      | è§£é‡Š             | å®é™…æƒ…å†µ                                                       |
| -- | ----------------------------------------- | ---------------- | ---------------------------------------------------------- |
| 1  | **The network is reliable**<br>ç½‘ç»œæ˜¯å¯é çš„     | ç¨‹åºå‘˜ä»¥ä¸ºç½‘ç»œä¼ è¾“ä¸€å®šæˆåŠŸ    | å®é™…ä¸Šï¼Œç½‘ç»œä¼š**ä¸¢åŒ…ã€å»¶è¿Ÿã€æ–­è¿**ï¼Œéœ€è®¾è®¡é‡è¯•æœºåˆ¶ã€å®¹é”™æœºåˆ¶                           |
| 2  | **Latency is zero**<br>å»¶è¿Ÿä¸ºé›¶               | ä»¥ä¸ºè¿œç¨‹è¯·æ±‚å’Œæœ¬åœ°ä¸€æ ·å¿«     | å®é™…ä¸Šï¼Œ**ç½‘ç»œå»¶è¿Ÿæ˜¾è‘—**ï¼Œåº”ä¼˜åŒ–è¯·æ±‚æ‰¹å¤„ç†ã€ç¼“å­˜ç­‰ç­–ç•¥                              |
| 3  | **Bandwidth is infinite**<br>å¸¦å®½æ˜¯æ— é™çš„       | è®¤ä¸ºå¯ä»¥éšæ„ä¼ è¾“å¤§é‡æ•°æ®     | å®é™…ä¸­å¸¦å®½æœ‰é™ï¼Œéœ€åš**å‹ç¼©ã€é™é€Ÿã€åˆ†é¡µ**ç­‰ä¼˜åŒ–                                  |
| 4  | **The network is secure**<br>ç½‘ç»œæ˜¯å®‰å…¨çš„       | é»˜è®¤æ•°æ®åœ¨ä¼ è¾“ä¸­ä¸ä¼šè¢«çªƒå¬æˆ–ç¯¡æ”¹ | å®é™…ç½‘ç»œæ˜¯ä¸å¯ä¿¡çš„ï¼Œå¿…é¡»ä½¿ç”¨**åŠ å¯†ã€è®¤è¯ã€æˆæƒæœºåˆ¶**                               |
| 5  | **Topology doesnâ€™t change**<br>ç½‘ç»œæ‹“æ‰‘ä¸ä¼šå˜    | è®¤ä¸ºæœåŠ¡åœ°å€ã€æœºå™¨åˆ†å¸ƒæ˜¯å›ºå®šçš„  | å®é™…ä¸ŠèŠ‚ç‚¹ä¼šé¢‘ç¹**ä¸Šçº¿/ä¸‹çº¿ã€å´©æºƒã€è¿ç§»**ï¼Œéœ€è®¾è®¡æœåŠ¡å‘ç°ã€å®¹é”™æœºåˆ¶                       |
| 6  | **There is one administrator**<br>åªæœ‰ä¸€ä¸ªç®¡ç†å‘˜ | å‡è®¾ç³»ç»Ÿç”±ä¸€ä¸ªäººæˆ–ä¸€æ–¹ç»´æŠ¤ç®¡ç†  | å®é™…ç³»ç»Ÿå¯èƒ½è·¨ç»„ç»‡ã€è·¨å›¢é˜Ÿï¼Œéœ€è®¾è®¡è‰¯å¥½çš„**æƒé™åˆ’åˆ†å’Œåè°ƒæœºåˆ¶**                          |
| 7  | **Transport cost is zero**<br>ä¼ è¾“æˆæœ¬ä¸ºé›¶      | è®¤ä¸ºè¿œç¨‹é€šä¿¡å’Œæœ¬åœ°è°ƒç”¨ä¸€æ ·ä¾¿å®œ  | å®é™…è¿œç¨‹è°ƒç”¨æˆæœ¬é«˜ï¼Œå°¤å…¶æ˜¯**å°è¯·æ±‚å¤šæ¬¡é¢‘ç¹è°ƒç”¨**ï¼Œä¼šé€ æˆæ€§èƒ½ç“¶é¢ˆ                         |
| 8  | **The network is homogeneous**<br>ç½‘ç»œæ˜¯åŒè´¨çš„  | å‡è®¾æ‰€æœ‰èŠ‚ç‚¹é…ç½®ã€ç³»ç»Ÿã€å¹³å°ä¸€è‡´ | å®é™…ä¸ŠèŠ‚ç‚¹å¯èƒ½ä½¿ç”¨**ä¸åŒæ“ä½œç³»ç»Ÿã€ç¡¬ä»¶æ¶æ„ã€ç½‘ç»œé…ç½®**ï¼Œéœ€è€ƒè™‘å…¼å®¹æ€§                       |
| 9  | **Time is ubiquitous**<br>å…¨ç³»ç»Ÿæ—¶é—´ä¸€è‡´         | è®¤ä¸ºæ‰€æœ‰æœºå™¨çš„æ—¶é’Ÿéƒ½æ˜¯åŒæ­¥çš„   | å®é™…å„èŠ‚ç‚¹æ—¶é—´å¯èƒ½**æ¼‚ç§»æˆ–ä¸åŒæ­¥**ï¼Œéœ€è¦ä½¿ç”¨å¦‚ NTPã€é€»è¾‘æ—¶é’Ÿã€Lamport æ—¶é—´æˆ³ç­‰æ–¹å¼å¤„ç†æ—¶é—´ä¸€è‡´æ€§é—®é¢˜ |


## Week 3
![HPC Cluster Design](HPC_Cluster_Design.png)

### Amdahl's Law and Gustafson's Law
#### **Key Differences**
| Law | Assumption | Best Use Case | Result |
|------|------------|---------------|--------|
| **Amdahl's Law** | Fixed problem size | Small-scale problems, focus on bottlenecks | Speedup limited by the serial part |
| **Gustafson's Law** | Scalable problem size | Large-scale problems, focus on parallel efficiency | Speedup can scale nearly linearly with the number of processors |
 
 **If you can make use of parallelisation you should make use of it! It will always generate some benefit, and the larger the problem the bigger the gain.**

| åç§°       | ç±»å‹     | åŠŸèƒ½                       |
| -------- | ------ | ------------------------ |
| `module` | ç¯å¢ƒç®¡ç†å™¨  | åŠ è½½è½¯ä»¶ï¼ˆå¦‚ MPIã€Pythonï¼‰åŠå…¶ä¾èµ–è·¯å¾„ |
| `Slurm`  | ä½œä¸šè°ƒåº¦ç³»ç»Ÿ | ç®¡ç†èµ„æºï¼Œæäº¤å¹¶å®‰æ’ä½œä¸šï¼ˆè¿è¡Œåœ¨å“ªå°æœºå™¨ï¼‰    |
| `MPI`    | å¹¶è¡Œç¼–ç¨‹æ¥å£ | ç¨‹åºä¸­ç”¨äº**å¤šèŠ‚ç‚¹é€šä¿¡**çš„æ¥å£å’Œæ ‡å‡†     |


### Environment Modules
Environment Modules is a tool used to dynamically manage and configure the userâ€™s shell environment in Unix-like systems. It is widely used in High-Performance Computing (HPC) environments to simplify the use of software packages and manage different software versions without conflicts. Module å‘½ä»¤å°±æ˜¯åœ¨å¤šç”¨æˆ·ã€å¤šè½¯ä»¶ç¯å¢ƒä¸‹ï¼Œæ–¹ä¾¿ä½ åŠ¨æ€åˆ‡æ¢/åŠ è½½ä¸åŒè½¯ä»¶ç‰ˆæœ¬å’Œä¾èµ–çš„å·¥å…·ï¼Œç‰¹åˆ«é€‚ç”¨äºç§‘ç ”æœåŠ¡å™¨å’Œè¶…çº§è®¡ç®—å¹³å°

Modules work by modifying environment variables (e.g., `PATH`, `LD_LIBRARY_PATH`, `MANPATH`, etc.) when a module is loaded or unloaded. This allows users to switch between different versions of the same software easily without modifying the system configuration.  

 ---

### ğŸ› ï¸ **Common `module` Commands**

| Command | Description | Example |
|---------|-------------|---------|
| `module help` | Displays help information about the `module` command, including available options and subcommands. | `module help` |
| `module avail` | Lists all available modules in the system. | `module avail` |
| `module whatis <modulefile>` | Shows a brief description of the specified module. | `module whatis gcc` |
| `module display <modulefile>` | Displays detailed information about what a module will modify in your environment (e.g., `PATH`, `MANPATH`, etc.). | `module display gcc/10.2.0` |
| `module load <modulefile>` | Loads the specified module and updates the environment accordingly. | `module load gcc/10.2.0` |
| `module unload <modulefile>` | Unloads the specified module and resets the environment. | `module unload gcc/10.2.0` |
| `module list` | Lists all currently loaded modules. | `module list` |
| `module purge` | Unloads all currently loaded modules. | `module purge` |
| `module switch <modulefile1> <modulefile2>` | This unloads one modulefile (modulefile1) and loads another (modulefile2). | `module switch gcc/9.3.0 gcc/10.2.0` |

---
### ğŸ› ï¸ **Common `slurm` Commands**
| Command       | Description                    | Example                                          |
|--------------|--------------------------------|--------------------------------------------------|
| `sbatch`     | Submit a job                   | `sbatch job.slurm`                               |
| `squeue`     | View job status                | `squeue -u <username>`                                         |
| `scancel`    | Cancel a job                   | `scancel 12345`                                  |
| `sinfo`      | View node status               | `sinfo`                                          |
| `sacct`      | View job history               | `sacct -u username`                              |
| `sstat`      | View running job status        | `sstat 12345`                                    |
| `scontrol`   | Manage jobs, nodes, partitions | `scontrol show job 12345`                        |
| `sprio`      | View job priority              | `sprio`                                          |
| `srun`       | Run a command interactively    | `srun --pty bash`                                |
| `sinteractive` | Start an interactive session | `sinteractive -n 4 -t 2:00:00 --mem=8G`         |


### Slurm Job Scripts
Example
``` bash
#!/bin/bash
#SBATCH --job-name=myjob        # ä½œä¸šå
#SBATCH --output=output.txt     # æ ‡å‡†è¾“å‡ºæ–‡ä»¶
#SBATCH --error=error.txt       # æ ‡å‡†é”™è¯¯è¾“å‡ºæ–‡ä»¶
#SBATCH --ntasks=1              # è¿è¡Œ1ä¸ªå¹¶è¡Œä»»åŠ¡ï¼ˆé€šå¸¸æŒ‡ MPI rank æ•°ï¼‰
#SBATCH --cpus-per-task=4      # æ¯ä¸ªä»»åŠ¡ä½¿ç”¨ 4 ä¸ªçº¿ç¨‹
#SBATCH --mem=4GB               # åˆ†é…çš„å†…å­˜
#SBATCH --time=01:00:00         # æœ€å¤§è¿è¡Œæ—¶é—´ï¼ˆ1å°æ—¶ï¼‰
#SBATCH --partition=standard    # åˆ†åŒºåç§°
#SBATCH --array=1-100           # æ•°ç»„ä»»åŠ¡ï¼Œå°†è¿™ä¸ªä½œä¸šæ‹†æˆ 100 ä¸ªå¹¶è¡Œå­ä»»åŠ¡ï¼ˆç¼–å·ä» 1-100ï¼‰ï¼Œå¯ç”¨äºå‚æ•°æ‰«æã€å¤§æ‰¹é‡å°ä»»åŠ¡
#SBATCH --dependency=afterok:12345:67890  # ä¾èµ–å…³ç³» è¡¨ç¤ºå½“å‰ä½œä¸šä¼šç­‰åˆ° Job ID 12345 å’Œ 67890 æˆåŠŸç»“æŸåæ‰ä¼šæ‰§è¡Œ

# ä¸‹é¢æ˜¯å®é™…æ‰§è¡Œçš„å‘½ä»¤
echo "Starting my job..."
srun my_program arg1 arg2    # æ‰§è¡Œçš„ç¨‹åºåŠå‚æ•°
```
#### Interactive Job
- åœ¨ HPC é›†ç¾¤ä¸­ï¼Œç”¨æˆ·ä¸èƒ½ç›´æ¥åœ¨ç™»å½•èŠ‚ç‚¹ï¼ˆlogin nodeï¼‰ä¸Šè¿è¡Œé‡è®¡ç®—è„šæœ¬ï¼Œå› ä¸ºè¿™æ ·ä¼šå½±å“å…¶ä»–ç”¨æˆ·ã€‚
- å¦‚æœä½ å¸Œæœ›ï¼š
  - æ‰‹åŠ¨è¿è¡Œä¸€ä¸ªè¾ƒå¤§çš„è„šæœ¬s l
  - è¿›è¡Œä»£ç æµ‹è¯•æˆ–è°ƒè¯•
  - å®æ—¶è§‚å¯Ÿè¿è¡Œè¿‡ç¨‹ï¼ˆè€Œä¸æ˜¯é€šè¿‡æäº¤ä½œä¸šç­‰å¾…ï¼‰
- ä½ å°±éœ€è¦ç”³è¯·ä¸€ä¸ªäº¤äº’å¼ä½œä¸š â€”â€” å®ƒä¼šæŠŠä½ â€œç™»å½•â€åˆ°ä¸€ä¸ªçœŸæ­£çš„ è®¡ç®—èŠ‚ç‚¹ï¼ˆcompute nodeï¼‰ ä¸Šã€‚
``` bash
sinteractive --nodes=1 --ntasks-per-node=2
```
| å‚æ•°                    | è¯´æ˜                                        |
| --------------------- | ----------------------------------------- |
| `sinteractive`        | æ˜¯ SpARTan é›†ç¾¤ä¸­ç”¨æ¥ç”³è¯·äº¤äº’å¼ä½œä¸šçš„å‘½ä»¤ï¼ˆæŸäº›ç³»ç»Ÿç”¨ `salloc`ï¼‰ |
| `--nodes=1`           | ç”³è¯· 1 ä¸ªè®¡ç®—èŠ‚ç‚¹                                |
| `--ntasks-per-node=2` | æ¯ä¸ªèŠ‚ç‚¹ç”³è¯· 2 ä¸ªâ€œä»»åŠ¡â€ï¼ˆé€šå¸¸ç­‰äº CPU æ ¸å¿ƒæ•°ï¼‰              |

### MPI 
MPI è¿›è¡Œå¹¶è¡Œç¼–ç¨‹ï¼Œè™½ç„¶æ›´å¤æ‚ã€æ›´ç¹çï¼Œä½†å®ƒèƒ½çªç ´å•æœºå†…å­˜é™åˆ¶ï¼Œå®ç°è·¨èŠ‚ç‚¹ã€è¶…å¤§è§„æ¨¡çš„å¹¶è¡Œè®¡ç®—ï¼Œæ˜¯é«˜æ€§èƒ½è®¡ç®—çš„æ ¸å¿ƒå·¥å…·ã€‚
#### MPI4Py
``` python
from mpi4py import MPI

nproc = MPI.COMM_WORLD.Get_size()  # è·å–é€šä¿¡å™¨çš„å¤§å°
iproc = MPI.COMM_WORLD.Get_rank()  # è·å–å½“å‰è¿›ç¨‹çš„æ’å
inode = MPI.Get_processor_name()   # è·å–å½“å‰MPIè¿›ç¨‹è¿è¡Œçš„èŠ‚ç‚¹å

if iproc == 0: 
    print("This code is a test for mpi4py.")

for i in range(0, nproc):
    MPI.COMM_WORLD.Barrier()  # åŒæ­¥æ‰€æœ‰è¿›ç¨‹
    if iproc == i:
        print('Rank %d out of %d' % (iproc, nproc))

MPI.Finalize()  # ç»“æŸMPIç¯å¢ƒ

```
- è¿è¡Œ `srun -n 4 python mpi_hello.py` æ¥è¿è¡Œè¿™ä¸ªç¨‹åºï¼Œå…¶ä¸­ `-n 4` è¡¨ç¤ºä½¿ç”¨ 4 ä¸ªè¿›ç¨‹ã€‚

``` pseudocode
Initialize MPI environment
Get total number of processes (size)
Get rank of this process (rank)

[å¯é€‰] If rank == 0:
    Prepare input data OR divide the task into chunks

Broadcast or scatter input/task to all processes

Each process:
    Perform local computation on its chunk of data

Gather or reduce results back to root process

If rank == 0:
    Merge results if necessary
    Output final result

Finalize MPI environment
```

### Common Linux Commands
| **Command**             | **Description**                                                   |
|-------------------------|-------------------------------------------------------------------|
| `less <filename>`       | Displays the contents of a file in a pager.                      |
| `touch <filename>`       | Creates an empty file. If the file already exists, it updates the file's timestamp. |
| `source <filename>`      | Sources the contents of a file into the current shell environment. |
| `scp <source> <destination>` | Securely copies files or directories to/from a remote host.      |
| `diff <file1> <file2>`   | Compares the differences between two files.                       |
| `sdiff <file1> <file2>`  | Displays the differences between two files side by side.          |
| `comm <file1> <file2>`   | Compares two sorted files and outputs common and different lines. |
| `find <path> <options>`  | Searches for files or directories within the specified path.      |
| `grep <pattern> <file>`  | Searches for lines in a file that match a given pattern.          |
| `tar -xvfh <archive>`    | Extracts a `.tar` file and shows the file list.                   |
| `ls -d <path>`           | Lists only the directory itself, not its contents.                |
| `cut <options>`          | Extracts specific columns from text.                              |
| `paste <file1> <file2>`  | Merges the contents of two files side by side by columns.         |
| `ls \| wc -l`             | Counts the number of files and directories in the current directory. |
| `tar -xvfh <archive.tar>`| Extracts a `.tar` archive and shows detailed information.        |
| `tar -cvf <archive.tar> <files>` | Creates a `.tar` archive.                                    |
| `ls -l`                  | Lists files in the current directory with detailed information like permissions, size, and modified time. |
| `tar -cvf <archive.tar> <files>` | Creates a `.tar` archive.                                    |
| `ls -l`                  | Displays detailed information about files in the current directory. |
| `tar -xvfh archive.tar`  | Extracts the contents of a `.tar` file and shows the files being extracted. |
| `ls \| wc -l`            | Counts the number of files and directories in the current directory. |
| `tar -cvf archive.tar`   | Creates a `.tar` file from specified files.                      |
| `ls -d */`               | Lists only the subdirectories in the current directory.          |
| `cut -f1 -d":" <file>`   | Extracts the first column of data before the colon (:) delimiter in a file. |

## Week 4
| ç‰¹æ€§       | å…¬æœ‰äº‘ï¼ˆPublic Cloudï¼‰                                                                   | ç§æœ‰äº‘ï¼ˆPrivate Cloud / On-Premiseï¼‰                                                        | æ··åˆäº‘ï¼ˆHybrid Cloudï¼‰                                                        |
| -------- | ----------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------- | ------------------------------------------------------------------------ |
| **ä¼˜ç‚¹**   | - æŒ‰éœ€è®¡è´¹ï¼ˆUtility computingï¼‰<br>- ä¸“æ³¨æ ¸å¿ƒä¸šåŠ¡<br>- æˆæœ¬æ›´ä½<br>- çµæ´»èµ„æºåˆ†é…ï¼ˆRight-sizingï¼‰<br>- æ™®æƒ è®¡ç®— | - å®Œå…¨æ§åˆ¶æƒ<br>- æ›´å¥½èµ„æºæ•´åˆ<br>- å®‰å…¨æ€§æ›´é«˜<br>- æ›´æ˜“äºå»ºç«‹ä¿¡ä»»                                            | - äº‘çªå‘ï¼ˆCloud-burstingï¼‰èƒ½åŠ›<br>- é«˜å³°æ—¶ç”¨å…¬æœ‰äº‘ï¼Œå¹³æ—¶ç”¨ç§æœ‰äº‘<br>- å…¼é¡¾å¼¹æ€§ä¸æ§åˆ¶                 |
| **ç¼ºç‚¹**   | - å®‰å…¨æ€§æ‹…å¿§<br>- æ§åˆ¶æƒç¼ºå¤±<br>- æ½œåœ¨å‚å•†é”å®šï¼ˆLock-inï¼‰<br>- äº‘å‚å•†å€’é—­é£é™©                                | - å¯èƒ½ä¸æ˜¯æ ¸å¿ƒä¸šåŠ¡ï¼ˆå¦‚ Netflix ä½¿ç”¨ Amazonï¼‰<br>- äººå‘˜/ç®¡ç†å¼€é”€<br>- ç¡¬ä»¶è€åŒ–é£é™©<br>- èµ„æºåˆ©ç”¨ç‡éš¾ä»¥è°ƒä¼˜<br>- å»ºè®¾æ•°æ®ä¸­å¿ƒæˆæœ¬é«˜ | - æ•°æ®/èµ„æºè¿ç§»å¤æ‚<br>- å¦‚ä½•å®æ—¶åˆ¤æ–­æ•°æ®å¯å¦è¿›å…¬æœ‰äº‘ï¼Ÿ<br>- çŸ­æœŸéœ€æ±‚å¯èƒ½å¯¼è‡´é«˜æˆæœ¬<br>- æ˜¯å¦ç¬¦åˆåˆè§„ï¼ˆå¦‚ PCI-DSSï¼‰ |
| **ä»£è¡¨ç¤ºä¾‹** | AWS, Microsoft Azure, Google Cloud                                                  | æœ¬åœ°éƒ¨ç½²ï¼šOpenStack, ç§æœ‰ VMware                                                              | Eucalyptus, VMware Cloud Foundationï¼ˆå¦‚ vSphereï¼‰                           |

| å±‚çº§\æ¨¡å‹      | **On-Premises**ï¼ˆæœ¬åœ°éƒ¨ç½²ï¼‰ | **IaaS**ï¼ˆåŸºç¡€è®¾æ–½å³æœåŠ¡ï¼‰             | **PaaS**ï¼ˆå¹³å°å³æœåŠ¡ï¼‰          | **SaaS**ï¼ˆè½¯ä»¶å³æœåŠ¡ï¼‰          |
| ---------- | --------------------- | ----------------------------- | ------------------------ | ------------------------ |
| **ç”¨æˆ·è´Ÿè´£éƒ¨åˆ†** | æ‰€æœ‰ç¡¬ä»¶å’Œè½¯ä»¶å±‚çº§             | åº”ç”¨ã€æ•°æ®ã€è¿è¡Œæ—¶ã€ä¸­é—´ä»¶ç­‰                | åº”ç”¨å’Œæ•°æ®                    | ä»…ä½¿ç”¨åº”ç”¨                    |
| **å‚å•†è´Ÿè´£éƒ¨åˆ†** | æ—                      | è™šæ‹Ÿæœºã€å­˜å‚¨ã€ç½‘ç»œ                     | åŠ ä¸Šè¿è¡Œæ—¶ã€ä¸­é—´ä»¶ã€æ“ä½œç³»ç»Ÿ           | å…¨éƒ¨ï¼šä»ç¡¬ä»¶åˆ°åº”ç”¨                |
| **çµæ´»æ€§**    | æœ€é«˜                    | é«˜                             | ä¸­                        | æœ€ä½                       |
| **ç»´æŠ¤è´Ÿæ‹…**   | æœ€å¤§ï¼ˆè‡ªå»ºæœºæˆ¿ã€è‡ªç®¡ä¸€åˆ‡ï¼‰         | ä¸­                             | å°                        | æå°ï¼ˆå‡ ä¹æ— ç»´æŠ¤ï¼‰                |
| **æ§åˆ¶æƒ**    | å®Œå…¨æ§åˆ¶                  | è¾ƒå¤šæ§åˆ¶æƒ                         | ä¸­ç­‰æ§åˆ¶æƒ                    | å‡ ä¹æ— æ§åˆ¶æƒ                   |
| **é€‚åˆå¯¹è±¡**   | ä¼ä¸šå†…éƒ¨ä¸“å± ITã€ç›‘ç®¡ä¸¥æ ¼ã€ä¼ ç»Ÿç³»ç»Ÿ   | éœ€è¦çµæ´»åŸºç¡€è®¾æ–½çš„å¤§å‹é¡¹ç›®                 | å¼€å‘è€…æ„å»º Web/App ç³»ç»Ÿ         | æœ€ç»ˆç”¨æˆ·æˆ–ä¼ä¸šç›´æ¥ç”¨ç°æˆç³»ç»Ÿ           |
| **ç¤ºä¾‹**     | è‡ªå»ºæ•°æ®ä¸­å¿ƒã€ä¼ ç»ŸæœåŠ¡å™¨éƒ¨ç½²        | AWS EC2ã€Google Compute Engine | Google App Engineã€Amazon Elastic MapReduce | Gmailã€Microsoft Office 365 |

### OpenStack
- Open Source: OpenStack is a completely open-source cloud computing platform, and anyone can download, install, and modify the source code. It allows enterprises to build and manage their own cloud infrastructure in private data centers with full control.
- Deployment: OpenStack is typically deployed on an organization's own hardware or can be deployed on any supported hardware (including virtual machines). Therefore, it is suitable for private cloud and hybrid cloud deployments.
- Highly Customizable: Being open-source, OpenStack allows users to highly customize according to their needs.
- Primarily provides Infrastructure as a Service (IaaS) functionalities such as computing, storage, and networking.
- Requires enterprises to manage and maintain their services themselves.

![OpenStack Architecture from User's Perspective](openstack.png)

| ç»„ä»¶           | åŠŸèƒ½æ¦‚è¿°                              | å…³é”®æ¨¡å— / ç‰¹ç‚¹                                                                                                                                                                         |
| ------------ | --------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Keystone** | è®¤è¯ä¸æˆæƒæœåŠ¡ï¼ˆAuthN/AuthZï¼‰ï¼Œç”¨æˆ·ä¸æƒé™ç®¡ç†ï¼ŒæœåŠ¡ç›®å½• | - ç”¨æˆ·ã€è§’è‰²ã€é¡¹ç›®ã€æœåŠ¡æ³¨å†Œ<br>- ç»Ÿä¸€èº«ä»½ç®¡ç†ç³»ç»Ÿ<br>- æ”¯æŒ Token è®¤è¯                                                                                                                                    |
| **Horizon**  | Web å›¾å½¢ç•Œé¢ï¼ŒOpenStack çš„è‡ªåŠ©æœåŠ¡é—¨æˆ·        | - åŸºäº Python/Django<br>- ä¾èµ– Keystoneã€Novaã€Glanceã€Neutron ç­‰<br>- ä½¿ç”¨ Apache + mod\_wsgi                                                                                              |
| **Nova**     | ç®¡ç†è™šæ‹Ÿæœºç”Ÿå‘½å‘¨æœŸï¼ˆCompute æœåŠ¡ï¼‰             | - `nova-api`: æ¥æ”¶ç”¨æˆ· API è¯·æ±‚<br>- `nova-compute`: è°ƒç”¨ hypervisor å¯åœ VM<br>- `nova-scheduler`: é€‰æ‹©ä¸»æœºéƒ¨ç½² VM<br>- `nova-conductor`: åè°ƒæ•°æ®åº“/é•œåƒç­‰èµ„æº<br>- `nova-network`ï¼ˆè€ç‰ˆï¼‰: ç½‘ç»œç®¡ç†ï¼ˆç°åœ¨ç”¨ Neutronï¼‰ |
| **Glance**   | é•œåƒæœåŠ¡ï¼šå­˜å‚¨å’Œåˆ†å‘ VM é•œåƒåŠå…ƒæ•°æ®              | - `glance-api`: é•œåƒè·å–ã€å­˜å‚¨<br>- `glance-registry`: é•œåƒå…ƒæ•°æ®ç®¡ç†                                                                                                                           |
| **Swift**    | å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼šå­˜å‚¨éç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚ VM é•œåƒã€å¤‡ä»½ç­‰ï¼‰      | - åŸºäº REST API<br>- é POSIX æ–‡ä»¶ç³»ç»Ÿ<br>- æ•°æ®è‡ªåŠ¨å¤åˆ¶ï¼Œå®¹é”™æ€§å¼º<br>- ä¸ä¾èµ–å…¶ä»–æœåŠ¡ï¼Œå¯ç‹¬ç«‹ä½¿ç”¨                                                                                                               |
| **Cinder**   | å—å­˜å‚¨æœåŠ¡ï¼šä¸º VM æä¾›æŒä¹…å­˜å‚¨å·                | - `cinder-api`: æ¥æ”¶è¯·æ±‚<br>- `cinder-volume`: ä¸å­˜å‚¨åç«¯äº¤äº’<br>- `cinder-scheduler`: åˆ†é…å·èµ„æº<br>- `cinder-backup`: å·å¤‡ä»½                                                                       |
| **Neutron**  | ç½‘ç»œæœåŠ¡ï¼šä¸º VM æä¾›è™šæ‹Ÿç½‘ç»œè¿æ¥                | - `neutron-server`: æ¥æ”¶ç½‘ç»œè¯·æ±‚<br>- æ’ä»¶å¼æ¶æ„ï¼ˆæ”¯æŒ Open vSwitchã€Linux Bridge ç­‰ï¼‰<br>- ç®¡ç† IPã€ç«¯å£ã€å®‰å…¨ç»„ã€è·¯ç”±å™¨ç­‰                                                                                      |
| **Heat**     | åŸºäºæ¨¡æ¿çš„ç¼–æ’æœåŠ¡ï¼šéƒ¨ç½²å’Œç®¡ç†äº‘ç«¯åº”ç”¨               | - æ¨¡æ¿ = stack çš„è“å›¾<br>- æ”¯æŒ Ansibleã€Chefã€Puppet é›†æˆ<br>- ç±»ä¼¼ AWS CloudFormation                                                                                                        |

### MRC Research Cloud
#### Horizon Dashboard
| æ¨¡å—åˆ†ç±»     | åŠŸèƒ½é¡¹              | æè¿°                                                                |
| -------- | ---------------- | ----------------------------------------------------------------- |
| **é¡¹ç›®ç®¡ç†** | Project          | äº‘ä¸­çš„ç»„ç»‡å•å…ƒï¼ˆä¹Ÿç§° Tenantï¼‰ï¼Œæ¯ä¸ªç”¨æˆ·å¯ä»¥å±äºä¸€ä¸ªæˆ–å¤šä¸ªé¡¹ç›®ï¼Œç”¨æˆ·åœ¨é¡¹ç›®ä¸­åˆ›å»ºå’Œç®¡ç†èµ„æºã€‚                 |
| **è®¡ç®—**   | Overview         | æŸ¥çœ‹èµ„æºä½¿ç”¨æƒ…å†µï¼ˆå¦‚ CPUã€å†…å­˜ã€ç£ç›˜ç­‰é…é¢å’Œä½¿ç”¨é‡ï¼‰ã€‚                                     |
|          | Instances        | å¯åŠ¨ã€è¿æ¥ã€ç®¡ç†è™šæ‹Ÿæœºå®ä¾‹ï¼ˆé€šè¿‡ VNC æˆ– SSH ç™»å½•ï¼‰ã€‚                                   |
|          | Images           | ç®¡ç†é•œåƒå’Œå¿«ç…§ï¼Œç”¨äºåˆ›å»ºå®ä¾‹ã€‚                                                   |
|          | Key Pairs        | ç®¡ç† SSH å¯†é’¥å¯¹ï¼Œç”¨äºç™»å½•å®ä¾‹ï¼š<br> - å¯åœ¨ä»ªè¡¨ç›˜ä¸­ç”Ÿæˆ<br> - æˆ–ç”¨å‘½ä»¤ `ssh-keygen` ç”Ÿæˆåå¯¼å…¥å…¬é’¥ |
|          |                  | **æ³¨æ„ï¼šåˆ‡å‹¿åˆ†äº«ç§é’¥ï¼›ç¡®ä¿ç§é’¥æƒé™ä¸º 600**ï¼ˆå¦åˆ™æ— æ³•è¿æ¥å®ä¾‹ï¼‰                               |
| **å­˜å‚¨**   | Volumes          | å—å­˜å‚¨ç®¡ç†ï¼šåˆ›å»ºã€æŒ‚è½½ã€å¸è½½å’Œåˆ é™¤å·ã€‚                                               |
|          | Backups          | å·çš„å¤‡ä»½å‰¯æœ¬ï¼ˆé€‚ç”¨äºç¾éš¾æ¢å¤ï¼Œå­˜å‚¨äºä¸åŒåç«¯ï¼‰ã€‚                                          |
|          | Snapshots        | å·çš„å¿«ç…§ï¼ˆå¿«é€Ÿåˆ›å»ºå‰¯æœ¬æˆ–å›æ»šï¼‰ï¼›ä¾èµ–å½“å‰å­˜å‚¨åç«¯ã€‚                                         |
|          | Multi-Attach     | æ”¯æŒä¸€ä¸ªå·æŒ‚è½½åˆ°å¤šä¸ªè™šæ‹Ÿæœºä¸Šï¼ˆé©±åŠ¨éœ€æ”¯æŒï¼‰ã€‚                                            |
|          | Volume Expansion | å·çš„åœ¨çº¿æ‰©å®¹åŠŸèƒ½ã€‚                                                         |
| **ç½‘ç»œ**   | Network Topology | å¯è§†åŒ–æ˜¾ç¤ºç½‘ç»œç»“æ„ï¼ˆå®ä¾‹ã€è·¯ç”±å™¨ã€ç½‘ç»œè¿æ¥ç­‰ï¼‰ã€‚                                          |
|          | Networks         | åˆ›å»º/ç®¡ç†ç§æœ‰ç½‘ç»œæˆ–è¿æ¥åˆ°å…¬ç½‘ã€‚                                                  |
|          | Routers          | ç®¡ç†è·¯ç”±å™¨ï¼Œç”¨äºè¿æ¥ç§ç½‘ä¸å…¬ç½‘ã€‚                                                  |
|          | Security Groups  | ç®¡ç†è™šæ‹Ÿé˜²ç«å¢™è§„åˆ™ï¼Œæ§åˆ¶å®ä¾‹å…¥/å‡ºç«¯å£ï¼ˆå¦‚ SSHã€HTTPï¼‰ã€‚                                  |
|          | Floating IPs     | ç»‘å®šæˆ–é‡Šæ”¾å…¬ç½‘ IPï¼Œä½¿å®ä¾‹å¯è¢«å¤–éƒ¨è®¿é—®ã€‚                                             |

#### Lauching a VM
| **è®¾ç½®ç±»åˆ«**            | **å­—æ®µ**                 | **è¯´æ˜**                                           |
| ------------------- | ---------------------- | ------------------------------------------------ |
| **Details**         | Instance Name          | è™šæ‹Ÿæœºå®ä¾‹åç§°ï¼ˆ< 63å­—ç¬¦ï¼‰ï¼Œä¹Ÿæ˜¯ä¸»æœºå                            |
|                     | Description (optional) | å®ä¾‹çš„ç®€è¦æè¿°ï¼ˆå¯é€‰ï¼‰                                      |
|                     | Availability Zone      | é€šå¸¸é€‰æ‹©é»˜è®¤ `melbourne-qh2-uom`                       |
|                     | Count                  | å¯åŠ¨çš„å®ä¾‹æ•°é‡ï¼Œå¯ä¸€æ¬¡å¯åŠ¨å¤šä¸ªç›¸åŒé…ç½®å®ä¾‹                            |
| **Source**          | Select Boot Source     | é€‰æ‹©å¯åŠ¨æ–¹å¼ï¼Œå¸¸ç”¨ä¸º `Image`                               |
|                     | Image Name             | æ¨èé•œåƒï¼šNeCTAR Ubuntu 22.04 LTS (Jammy) amd64       |
| **Flavor**          | Flavor                 | åˆ†é…çš„è®¡ç®—èµ„æºï¼ˆCPUã€RAMã€ç£ç›˜ï¼‰ï¼Œéœ€åœ¨é¡¹ç›®é…é¢èŒƒå›´å†…                    |
| **Network**         | Network                | ä½¿ç”¨é»˜è®¤ç½‘ç»œï¼Œåˆ†é…ç§æœ‰ IPï¼›æ ¡å¤–éœ€ VPN æ‰èƒ½è®¿é—®                      |
|                     | å¤šç½‘ç»œæ”¯æŒ                  | å½“å‰é¡¹ç›®ä¸æ”¯æŒå¤šä¸ªç½‘ç»œè¿æ¥                                    |
| **Security Groups** | Security Group         | é»˜è®¤ç»„å…è®¸ä»ä»»æ„ä½ç½®é€šè¿‡ç«¯å£22è¿æ¥ï¼ˆSSHï¼‰                          |
| **Key Pair**        | Key Pair               | **å¿…é¡»é€‰æ‹©**ä¸€ä¸ªå¯†é’¥å¯¹ï¼Œå¦åˆ™æ— æ³•è®¿é—®è™šæ‹Ÿæœº                          |
| **SSHè¿æ¥**           | Private Key            | ä½¿ç”¨ç§é’¥æ–‡ä»¶è¿æ¥è™šæ‹Ÿæœº                                      |
|                     | ç¤ºä¾‹å‘½ä»¤                   | `ssh -i mykeypair ubuntu@<hostname>`             |
| **è½¯ä»¶å®‰è£…ï¼ˆå¯é€‰ï¼‰**        | å®‰è£… Apache              | `sudo apt update && sudo apt install -y apache2` |
|                     | æµ‹è¯•æ˜¯å¦è¿è¡Œ                 | `curl localhost`ï¼ˆåº”è¿”å›ç½‘é¡µå†…å®¹ï¼‰                        |

#### Volume Storage
| **æ­¥éª¤** | **æ“ä½œ/å‘½ä»¤**                       | **è¯´æ˜**                             |
| ------ | ------------------------------- | ---------------------------------- |
| 1ï¸âƒ£    | Attach Volume                   | åœ¨ Horizon ç•Œé¢ä¸­ï¼Œå°† Volume é™„åŠ åˆ°ä¸€ä¸ªè™šæ‹Ÿæœºå®ä¾‹ä¸Š |
| 2ï¸âƒ£    | `sudo fdisk -l`                 | æŸ¥çœ‹æŒ‚è½½çš„å·è®¾å¤‡åç§°ï¼ˆä¾‹å¦‚ `/dev/vdb`ï¼‰          |
| 3ï¸âƒ£    | `sudo mkfs.ext4 /dev/vdb`       | æ ¼å¼åŒ–å·ä¸º ext4 æ–‡ä»¶ç³»ç»Ÿï¼ˆ**ä»…é¦–æ¬¡ä½¿ç”¨**æ—¶æ‰§è¡Œï¼‰      |
| 4ï¸âƒ£    | `sudo mkdir /mnt/demo`          | åˆ›å»ºä¸€ä¸ªæŒ‚è½½ç‚¹ç›®å½•ï¼ˆä½ æƒ³æŠŠè¿™ä¸ªç›˜æŒ‚åˆ°å“ªé‡Œï¼‰              |
| 5ï¸âƒ£    | `sudo mount /dev/vdb /mnt/demo` | å°†å·æŒ‚è½½åˆ°è¯¥ç›®å½•ä¸‹                          |
| 6ï¸âƒ£    | `df -h`                         | æŸ¥çœ‹å½“å‰æŒ‚è½½æƒ…å†µå’Œç£ç›˜ä½¿ç”¨æƒ…å†µï¼ˆéªŒè¯æŒ‚è½½æ˜¯å¦æˆåŠŸï¼‰          |

#### æˆ–è€…å¯ä»¥ä½¿ç”¨Openstack CLI(OSC)å®Œæˆä»¥ä¸Šæ­¥éª¤
| **æ“ä½œ**             | **å‘½ä»¤**                                                                                                                                                                                                          | **è¯´æ˜**                                    |
| ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------- |
| âœ… 1. åŠ è½½ OpenRC æ–‡ä»¶  | `source ./<your-openrc-file>`                                                                                                                                                                                   | è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œè¿æ¥ä½ çš„ OpenStack é¡¹ç›®                  |
| ğŸ–¥ï¸ 2. åˆ›å»ºè™šæ‹Ÿæœºå®ä¾‹     | `openstack server create --image 49f677df-01e5-45c9-9611-609ef21f60e1 --flavor uom.general.1c4g --network f0c86d08-d45b-45c4-9216-b8abd6bc133c --key-name id_alwyn --availability-zone melbourne-qh2-uom demo2` | é€šè¿‡æŒ‡å®šé•œåƒã€é…ç½®ã€ç½‘ç»œã€å¯†é’¥ã€å¯ç”¨åŸŸåˆ›å»ºåä¸º `demo2` çš„å®ä¾‹       |
| ğŸ’½ 3. åˆ›å»ºå·          | `openstack volume create --size 10 --type performance --availability-zone melbourne-qh2-uom demo2-volume`                                                                                                       | åˆ›å»º 10GB æ€§èƒ½å‹å·ï¼Œå‘½åä¸º `demo2-volume`           |
| ğŸ”— 4. å°†å·æŒ‚è½½åˆ°å®ä¾‹      | `openstack server add volume demo2 demo2-volume`                                                                                                                                                                | å°†åˆšåˆšåˆ›å»ºçš„å·æŒ‚è½½åˆ°å®ä¾‹ `demo2`                      |
| ğŸ” 5. åˆ›å»ºå®‰å…¨ç»„        | `openstack security group create demo2-sg`                                                                                                                                                                      | æ–°å»ºä¸€ä¸ªåä¸º `demo2-sg` çš„å®‰å…¨ç»„                    |
| ğŸ”“ 6. æ·»åŠ å®‰å…¨è§„åˆ™ï¼ˆå¼€æ”¾ç«¯å£ï¼‰ | `openstack security group rule create --protocol tcp --dst-port 80 --remote-ip 0.0.0.0/0 demo2-sg`                                                                                                              | å‘ `demo2-sg` æ·»åŠ å…è®¸å¤–éƒ¨è®¿é—®ç«¯å£ 80 çš„è§„åˆ™ï¼ˆç”¨äº Web æœåŠ¡ï¼‰ |
| ğŸ“ 7. å°†å®‰å…¨ç»„é™„åŠ åˆ°å®ä¾‹    | `openstack server add security group demo2 demo2-sg`                                                                                                                                                            | æŠŠå®‰å…¨ç»„ `demo2-sg` ç»‘å®šåˆ°å®ä¾‹ `demo2` ä¸Š           |


## Week 5
| **Feature**          | **Docker Engine (Containerization)** | **Hypervisor (Virtualization)**           |
| -------------------- | ------------------------------------ | ----------------------------------------- |
| **Boot time**        | Seconds                              | Minutes                                   |
| **Startup overhead** | Very low (shares host OS kernel)     | High (boots a full OS per VM)             |
| **Disk usage**       | Small (MBs to a few hundred MBs)     | Large (GBs per VM image)                  |
| **Memory usage**     | Low (shared libraries, no full OS)   | High (each VM needs its own OS RAM)       |
| **Performance**      | Near-native                          | Slightly slower due to hardware emulation |
| **Isolation level**  | Process-level (namespaces, cgroups)  | Full OS isolation (stronger, heavier)     |

| **æ¶æ„æ–¹å¼**                                   | **æ¦‚å¿µ**                                        | **ä¼˜ç‚¹**                                 | **ç¼ºç‚¹**                                  | **é€‚ç”¨åœºæ™¯**                 |
| ------------------------------------------ | --------------------------------------------- | -------------------------------------- | --------------------------------------- | ------------------------ |
| **Bare Metalï¼ˆè£¸é‡‘å±ï¼‰**                        | ç›´æ¥åœ¨ç‰©ç†æœåŠ¡å™¨ä¸Šè¿è¡Œæ“ä½œç³»ç»Ÿå’Œåº”ç”¨ï¼Œæ— è™šæ‹ŸåŒ–æˆ–å®¹å™¨å±‚ã€‚                  | - æœ€é«˜æ€§èƒ½å’Œæœ€ä½å»¶è¿Ÿ<br>- å®Œå…¨æ§åˆ¶ç¡¬ä»¶<br>- èµ„æºæ— é¢å¤–å¼€é”€   | - éƒ¨ç½²å’Œç»´æŠ¤å¤æ‚<br>- èµ„æºåˆ©ç”¨ç‡ä½<br>- ç¼ºä¹çµæ´»æ€§å’Œå¼¹æ€§     | é«˜æ€§èƒ½è®¡ç®—ã€å¤§å‹æ•°æ®åº“ã€å¯¹æ€§èƒ½è¦æ±‚æé«˜çš„åº”ç”¨   |
| **Virtualizedï¼ˆè™šæ‹ŸåŒ–ï¼‰**                       | åœ¨ç‰©ç†æœåŠ¡å™¨ä¸Šè¿è¡ŒHypervisorï¼Œæ‰˜ç®¡å¤šä¸ªè™šæ‹Ÿæœºï¼Œæ¯ä¸ªè™šæ‹Ÿæœºè¿è¡Œç‹¬ç«‹æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ã€‚ | - è‰¯å¥½çš„èµ„æºéš”ç¦»<br>- å¤šä¸ªæ“ä½œç³»ç»Ÿæ”¯æŒ<br>- çµæ´»éƒ¨ç½²å’Œè¿ç§»   | - è™šæ‹ŸåŒ–å¼€é”€ï¼Œæ€§èƒ½ä½äºè£¸é‡‘å±<br>- å¯åŠ¨æ—¶é—´è¾ƒé•¿<br>- èµ„æºå ç”¨è¾ƒé«˜ | äº‘æœåŠ¡ï¼ˆIaaSï¼‰ã€å¼‚æ„ç¯å¢ƒã€å¼€å‘æµ‹è¯•      |
| **Containerizedï¼ˆå®¹å™¨åŒ–ï¼‰**                     | ç‰©ç†æœåŠ¡å™¨è¿è¡Œä¸»æœºæ“ä½œç³»ç»Ÿï¼Œå®¹å™¨å¼•æ“è¿è¡Œå¤šä¸ªè½»é‡çº§å®¹å™¨ï¼Œæ¯ä¸ªå®¹å™¨å°è£…ä¸€ä¸ªåº”ç”¨ã€‚       | - å¯åŠ¨å¿«ï¼Œèµ„æºåˆ©ç”¨é«˜<br>- æ˜“äºéƒ¨ç½²å’Œæ‰©å±•<br>- è½»é‡çº§éš”ç¦»    | - å®¹å™¨é—´éš”ç¦»è¾ƒè™šæ‹Ÿæœºå¼±<br>- å…±äº«å†…æ ¸å¯èƒ½å¯¼è‡´å®‰å…¨éšæ‚£          | å¾®æœåŠ¡æ¶æ„ã€DevOpsã€CI/CDã€äº‘åŸç”Ÿåº”ç”¨ |
| **Containerized on Virtualizedï¼ˆè™šæ‹ŸåŒ–ä¸Šçš„å®¹å™¨åŒ–ï¼‰** | åœ¨è™šæ‹Ÿæœºä¸Šè¿è¡Œå®¹å™¨å¼•æ“ï¼Œå†ç”±å®¹å™¨è¿è¡Œåº”ç”¨ï¼Œå®ç°åŒå±‚éš”ç¦»å’Œç®¡ç†ã€‚               | - è™šæ‹Ÿæœºæä¾›å¼ºéš”ç¦»<br>- å®¹å™¨å¸¦æ¥è½»é‡çº§éƒ¨ç½²ä¼˜åŠ¿<br>- é€‚åˆå¤šç§Ÿæˆ· | - åŒé‡å¼€é”€ï¼Œèµ„æºåˆ©ç”¨ç‡ä½äºçº¯å®¹å™¨<br>- ç®¡ç†å¤æ‚åº¦è¾ƒé«˜          | ä¼ä¸šå¤šç§Ÿæˆ·ç¯å¢ƒã€éœ€è¦åŒæ—¶å…¼é¡¾å®‰å…¨ä¸å¼¹æ€§çš„åœºæ™¯   |

### Docker
| åç§°                 | å®šä¹‰ä¸ä½œç”¨                                            |
| ------------------ | ------------------------------------------------ |
| **Containerï¼ˆå®¹å™¨ï¼‰**  | ä¸€ä¸ªè¿›ç¨‹ï¼Œè¡Œä¸ºç±»ä¼¼äºç‹¬ç«‹æœºå™¨ï¼›æ˜¯é•œåƒçš„è¿è¡Œæ—¶å®ä¾‹ã€‚                        |
| **Imageï¼ˆé•œåƒï¼‰**      | å®¹å™¨çš„è“å›¾ï¼ŒåŒ…å«æ–‡ä»¶ç³»ç»Ÿå’Œè¿è¡Œæ‰€éœ€ç¯å¢ƒã€‚                             |
| **Layerï¼ˆå±‚ï¼‰**       | é•œåƒä¸­çš„ä¿®æ”¹ï¼Œæ¯æ¡ Dockerfile æŒ‡ä»¤å½¢æˆä¸€ä¸ªå±‚ã€‚                    |
| **Dockerfile**     | æ„å»ºé•œåƒçš„â€œé…æ–¹â€ï¼ŒåŒ…å«æ‰€æœ‰æ„å»ºæŒ‡ä»¤ã€‚                              |
| **Buildï¼ˆæ„å»ºï¼‰**      | æ„å»º Docker é•œåƒçš„è¿‡ç¨‹ï¼Œä¾æ® Dockerfileã€‚                   |
| **Registryï¼ˆé•œåƒä»“åº“ï¼‰** | å­˜å‚¨é•œåƒä»“åº“çš„æ‰˜ç®¡æœåŠ¡ï¼Œå¦‚ Docker Hubã€‚                        |
| **Docker Hub**     | Docker çš„å®˜æ–¹é›†ä¸­é•œåƒä»“åº“å’Œç®¡ç†å¹³å°ã€‚                           |
| **Repositoryï¼ˆä»“åº“ï¼‰** | æŸä¸ªé•œåƒåŠå…¶ä¸åŒç‰ˆæœ¬ï¼ˆtagï¼‰çš„é›†åˆã€‚                              |
| **Tagï¼ˆæ ‡ç­¾ï¼‰**        | é•œåƒçš„ç‰ˆæœ¬æ ‡è¯†ï¼Œé»˜è®¤æ˜¯ `latest`ã€‚                            |
| **Compose**        | ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šä¸ªå®¹å™¨ç»„æˆçš„åº”ç”¨çš„å·¥å…·ï¼ˆé€šè¿‡ `docker-compose.yml` æ–‡ä»¶ï¼‰ã€‚ |

### Persistence data in Docker
#### Docker has two options for containers to store files on the host machine, so that the files are persisted even after the container stops.
| ç‰¹æ€§       | Docker Volumes               | Bind Mounts                              |
| -------- | ---------------------------- | ---------------------------------------- |
| **ç®¡ç†æ–¹å¼** | ç”± Docker ç®¡ç†                  | ç”±ç”¨æˆ·æ‰‹åŠ¨ç®¡ç†                                  |
| **é»˜è®¤ä½ç½®** | `/var/lib/docker/volumes/`   | ä»»æ„è·¯å¾„ï¼ˆå¦‚ `/home/user/data`ï¼‰                |
| **åˆ›å»ºæ–¹å¼** | ä½¿ç”¨ `docker volume create` å‘½ä»¤ | åœ¨è¿è¡Œå®¹å™¨æ—¶æŒ‡å®š `-v /host/path:/container/path` |
| **å®‰å…¨æ€§**  | æ›´å®‰å…¨ï¼ŒDocker å¯ä»¥æ§åˆ¶è®¿é—®            | å¯èƒ½å—ä¸»æœºç›®å½•ç»“æ„å’Œæƒé™å½±å“                           |
| **å¯ç§»æ¤æ€§** | æ›´å¥½ï¼Œå®¹æ˜“åœ¨å¤šä¸»æœºæˆ–å·¥å…·é—´è¿ç§»              | å·®ï¼Œè·¯å¾„ä¾èµ–å…·ä½“ä¸»æœº                               |
| **å¸¸è§ç”¨é€”** | æ•°æ®åº“å­˜å‚¨ã€æ—¥å¿—ã€æŒä¹…åŒ–æ•°æ®               | å¼€å‘é˜¶æ®µæŒ‚è½½æºä»£ç ã€é…ç½®æ–‡ä»¶                           |
| **æ€§èƒ½**   | é€šå¸¸ç•¥å¿«ï¼Œå› ä¸º Docker ä¼˜åŒ–äº†æŒ‚è½½è·¯å¾„       | æ€§èƒ½å–å†³äºæŒ‚è½½ç›®å½•æ‰€åœ¨çš„æ–‡ä»¶ç³»ç»Ÿ                         |

### Docker networking
| ç½‘ç»œæ¨¡å¼        | ç‰¹ç‚¹ä¸æè¿°                                                                              |
| ----------- | ---------------------------------------------------------------------------------- |
| **host**    | å®¹å™¨ä¸å®¿ä¸»æœºå…±ç”¨ç½‘ç»œæ ˆï¼ˆåŒä¸€ IPï¼‰ï¼Œ**ä¸èƒ½ç«¯å£å¤ç”¨**ã€‚é€‚ç”¨äº **Linux ä¸Šçš„ Docker Engine**ï¼ˆä¸é€‚ç”¨äº Docker Desktopï¼‰ã€‚ |
| **bridge**  | é»˜è®¤ç½‘ç»œæ¨¡å¼ï¼Œ**æ¯ä¸ªå®¹å™¨æœ‰ç‹¬ç«‹ IP**ï¼Œå¯ä»¥é€šè¿‡ç«¯å£æ˜ å°„è®©å¤–éƒ¨è®¿é—®ã€‚å®¹å™¨é—´å¯é€šä¿¡ã€‚é€‚ç”¨äºå¤§å¤šæ•°åœºæ™¯ã€‚                               |
| **none**    | å®¹å™¨æ— ç½‘ç»œè¿æ¥ï¼Œ**å®Œå…¨éš”ç¦»**ï¼Œæ—¢æ— æ³•è®¿é—®å¤–éƒ¨ï¼Œä¹Ÿæ— æ³•è¢«è®¿é—®ã€‚ç”¨äºæµ‹è¯•ã€æœ€å¤§éš”ç¦»ç­‰éœ€æ±‚ã€‚                                      |
| **overlay** | ç”¨äº **å¤šä¸»æœºç½‘ç»œé€šä¿¡**ï¼Œæ”¯æŒåœ¨ Docker Swarm ä¸­è·¨ä¸»æœºè¿æ¥å®¹å™¨ã€‚é€‚åˆåˆ†å¸ƒå¼éƒ¨ç½²ã€‚                                  |
| **macvlan** | å®¹å™¨åœ¨ç‰©ç†ç½‘ç»œä¸­**æ‹¥æœ‰ç‹¬ç«‹ IP**ï¼Œè¡¨ç°å¾—åƒä¸€å°çœŸæ­£çš„ä¸»æœºã€‚é€‚ç”¨äºå¯¹ç½‘ç»œè¦æ±‚ä¸¥æ ¼çš„åœºæ™¯ã€‚                                     |

### Docker Security
| å®‰å…¨æªæ–½               | è¯´æ˜                                         |
| ------------------ | ------------------------------------------ |
| **ä½¿ç”¨å®˜æ–¹æˆ–å—ä¿¡ä»»çš„é•œåƒ**    | ä¼˜å…ˆä½¿ç”¨ Docker Hub ä¸Šçš„å®˜æ–¹ä»“åº“é•œåƒï¼Œé¿å…ä½¿ç”¨æœªçŸ¥æ¥æºçš„é•œåƒ       |
| **é root ç”¨æˆ·è¿è¡Œå®¹å™¨**  | ä½¿ç”¨é root ç”¨æˆ·è¿è¡Œåº”ç”¨ç¨‹åºï¼Œé™ä½æƒé™ï¼Œå‡å°‘æ”»å‡»å½±å“èŒƒå›´            |
| **æœ€å°åŒ–å®¹å™¨å¤§å°**        | å®¹å™¨è¶Šå°ï¼Œæ”»å‡»é¢è¶Šå°ï¼Œæœ‰åŠ©äºå‡å°‘ä¸å¿…è¦çš„è½¯ä»¶å’Œä¾èµ–                  |
| **é•œåƒæ¼æ´æ‰«æ**         | ä½¿ç”¨ `docker scan` æˆ–é›†æˆå·¥å…·æ‰«æé•œåƒï¼ŒåŠæ—¶ä¿®å¤å·²çŸ¥æ¼æ´ï¼ˆCVEï¼‰   |
| **é™åˆ¶ç½‘ç»œä¸å·çš„è®¿é—®æƒé™**    | - åªå¼€æ”¾å¿…è¦ç«¯å£<br>- æŒ‚è½½å¿…è¦å·å¹¶è®¾ç½®æƒé™<br>- å°½å¯èƒ½ä½¿ç”¨åªè¯»æ–‡ä»¶ç³»ç»Ÿ |
| **ä¿æŒ Docker å¼•æ“æ›´æ–°** | å®šæœŸå‡çº§ Docker Engineï¼Œä¿®å¤å®‰å…¨æ¼æ´å’Œé”™è¯¯               |

### Docker Commands
# Docker å¸¸ç”¨å‘½ä»¤å‚è€ƒè¡¨

| **æ“ä½œç±»åˆ«**    | **æ“ä½œè¯´æ˜**          | **å‘½ä»¤ç¤ºä¾‹**                                                                            | **å¤‡æ³¨**               |
| ----------- | ----------------- | ----------------------------------------------------------------------------------- | -------------------- |
| **ç™»å½•/ç™»å‡º**   | ç™»å½•Docker Registry | `docker login [registry_url]`                                                       | ç™»å½•åè¾“å…¥ç”¨æˆ·åå’Œå¯†ç           |
|             | ç™»å‡ºDocker Registry | `docker logout`                                                                     |                      |
| **é•œåƒç®¡ç†**    | æ„å»ºé•œåƒï¼ˆåŸºäºdockerfileï¼‰              | `docker build -t <image_name>:<tag> <è·¯å¾„æˆ–URL>`                                   | `-t` æŒ‡å®šé•œåƒåå’Œæ ‡ç­¾           |
|             | æ‹‰å–é•œåƒ              | `docker pull <image_name>:<tag>`                                                    | é»˜è®¤tagä¸ºlatest         |
|             | åˆ—å‡ºæœ¬åœ°é•œåƒ            | `docker images`                                                                     | æ˜¾ç¤ºé•œåƒåã€tagã€IDã€å¤§å°ç­‰ä¿¡æ¯   |
|             | æ‰“æ ‡ç­¾               | `docker tag <source_image>:<tag> <target_image>:<tag>`                              | é‡æ–°æ ‡è®°é•œåƒ               |
|             | æ¨é€é•œåƒåˆ°è¿œç¨‹ä»“åº“         | `docker push <image_name>:<tag>`                                                    | éœ€å…ˆç™»å½•                 |
|             | åˆ é™¤æœ¬åœ°é•œåƒ            | `docker rmi <image_name>:<tag>`                                                     |                      |
|             | æ‰«æé•œåƒå®‰å…¨æ¼æ´(CVE)     | `docker scout cves <image_name>:<tag>`                                             | æ£€æµ‹é•œåƒä¸­çš„å·²çŸ¥æ¼æ´          |
| **å®¹å™¨ç®¡ç†**    | è¿è¡Œå®¹å™¨              | `docker run -d --name <container_name> <image_name>:<tag>`                          | `-d` åå°è¿è¡Œï¼Œäº¤äº’éœ€åŠ  `-it` |
|             | äº¤äº’å¼è¿è¡Œå®¹å™¨           | `docker run -it --name <container_name> <image_name>:<tag> /bin/bash`               | äº¤äº’shellï¼Œé€€å‡ºå®¹å™¨ç”¨`exit`  |
|             | åˆ—å‡ºè¿è¡Œä¸­çš„å®¹å™¨          | `docker ps`                                                                         | æ˜¾ç¤ºIDã€åç§°ã€çŠ¶æ€ã€ç«¯å£æ˜ å°„ç­‰     |
|             | åˆ—å‡ºæ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬åœæ­¢çš„ï¼‰     | `docker ps -a`                                                                      | æ˜¾ç¤ºçŠ¶æ€åŒ…æ‹¬Exited         |
|             | åœæ­¢å®¹å™¨              | `docker stop <container_name_or_id>`                                                |                      |
|             | é‡å¯å®¹å™¨              | `docker restart <container_name_or_id>`                                             |                      |
|             | åˆ é™¤å®¹å™¨              | `docker rm <container_name_or_id>`                                                  |                      |
|             | å¼ºåˆ¶åœæ­¢å¹¶åˆ é™¤å®¹å™¨         | `docker rm -f <container_name_or_id>`                                               | å¼ºåˆ¶åœæ­¢å¹¶åˆ é™¤              |
|             | æŸ¥çœ‹å®¹å™¨æ—¥å¿—            | `docker logs <container_name_or_id>`                                                |                      |
|             | è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨shell    | `docker exec -it <container_name_or_id> /bin/bash`                                  | å®¹å™¨å†…æ‰§è¡Œäº¤äº’å¼shell        |
|             | ä½¿ç”¨docker debugè°ƒè¯•å®¹å™¨    | `docker debug <container_name_or_id>`                                               | è¿›å…¥åªè¯»æˆ–å¼‚å¸¸å®¹å™¨è°ƒè¯•ç¯å¢ƒ       |
| **å·ä¸æŒ‚è½½**    | åˆ›å»ºDockerå·         | `docker volume create --name <volume_name>`                                         | åˆ›å»ºå‘½åå·                |
|             | è¿è¡Œå®¹å™¨å¹¶æŒ‚è½½å‘½åå·        | `docker run -d --name <container_name> -v <volume_name>:<container_path> <image>`   | å·å†…å®¹ä¼šè‡ªåŠ¨åˆå§‹åŒ–å®¹å™¨å†…é»˜è®¤å†…å®¹     |
|             | è¿è¡Œå®¹å™¨å¹¶æŒ‚è½½ç»‘å®šç›®å½•       | `docker run -d --name <container_name> -v $(pwd)/host_dir:<container_path> <image>` | å®¿ä¸»æœºç›®å½•ç›´æ¥æŒ‚è½½ï¼Œå†…å®¹ä»¥å®¿ä¸»æœºä¸ºå‡†   |
|             | åˆ—å‡ºæ‰€æœ‰å·             | `docker volume ls`                                                                  | æ˜¾ç¤ºæ‰€æœ‰å·                |
|             | åˆ é™¤å·               | `docker volume rm <volume_name>`                                                    | æ³¨æ„å·è¢«å®¹å™¨ä½¿ç”¨æ—¶æ— æ³•åˆ é™¤        |
| **é•œåƒä¸å®¹å™¨æ¸…ç†** | åˆ é™¤æœªä½¿ç”¨çš„é•œåƒã€å®¹å™¨ã€ç½‘ç»œç­‰   | `docker system prune`                                                               | äº¤äº’ç¡®è®¤ååˆ é™¤æ‰€æœ‰æ— ç”¨èµ„æº        |

### Dockerfile å¸¸ç”¨æŒ‡ä»¤
| æŒ‡ä»¤            | ä½œç”¨è¯´æ˜                           | ç¤ºä¾‹                                                               |   |          |
| ------------- | ------------------------------ | ---------------------------------------------------------------- | - | -------- |
| `FROM`        | æŒ‡å®šåŸºç¡€é•œåƒï¼Œæ„å»ºé•œåƒçš„èµ·ç‚¹ã€‚                | `FROM ubuntu:20.04`                                              |   |          |
| `LABEL`       | ä¸ºé•œåƒæ·»åŠ å…ƒæ•°æ®ï¼ˆä½œè€…ã€ç‰ˆæœ¬ç­‰ä¿¡æ¯ï¼‰ã€‚            | `LABEL maintainer="you@example.com"`                             |   |          |
| `RUN`         | åœ¨é•œåƒæ„å»ºæ—¶æ‰§è¡Œå‘½ä»¤ï¼Œå®‰è£…è½¯ä»¶æˆ–ä¿®æ”¹æ–‡ä»¶ç³»ç»Ÿã€‚        | `RUN apt-get update && apt-get install -y curl`                  |   |          |
| `CMD`         | å®¹å™¨å¯åŠ¨æ—¶é»˜è®¤æ‰§è¡Œçš„å‘½ä»¤æˆ–å‚æ•°ï¼ˆå¯è¢«å¯åŠ¨å‚æ•°è¦†ç›–ï¼‰ã€‚     | `CMD ["nginx", "-g", "daemon off;"]`                             |   |          |
| `ENTRYPOINT`  | å®¹å™¨å¯åŠ¨æ—¶å¿…æ‰§è¡Œçš„å‘½ä»¤ï¼Œé€šå¸¸å’Œ CMD é…åˆä½¿ç”¨ã€‚      | `ENTRYPOINT ["/entrypoint.sh"]`                                  |   |          |
| `ENV`         | è®¾ç½®ç¯å¢ƒå˜é‡ã€‚                        | `ENV PATH=/usr/local/bin:$PATH`                                  |   |          |
| `COPY`        | å°†æ–‡ä»¶/ç›®å½•ä»æ„å»ºä¸Šä¸‹æ–‡å¤åˆ¶åˆ°é•œåƒæ–‡ä»¶ç³»ç»Ÿã€‚         | `COPY ./app /app`                                                |   |          |
| `WORKDIR`     | è®¾ç½®å·¥ä½œç›®å½•ï¼Œåç»­å‘½ä»¤éƒ½åœ¨è¯¥ç›®å½•æ‰§è¡Œã€‚            | `WORKDIR /app`                                                   |   |          |
``` dockerfile
# é€‰æ‹©åŸºç¡€é•œåƒ
FROM nginx:latest
# è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œç¤ºèŒƒç”¨
ENV WELCOME_STRING="Hello, Docker!"
# å¤åˆ¶å…¥å£è„šæœ¬åˆ°é•œåƒ
COPY entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh
# å¤åˆ¶è‡ªå®šä¹‰ç½‘é¡µï¼ˆå¯é€‰ï¼‰
COPY index.html /usr/share/nginx/html/index.html
# å£°æ˜å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å…¥å£ç‚¹è„šæœ¬
ENTRYPOINT ["/entrypoint.sh"]
# é»˜è®¤å‘½ä»¤ï¼ˆä¼ é€’ç»™ entrypoint.sh æ‰§è¡Œï¼‰
CMD ["nginx", "-g", "daemon off;"]
```
- ENTRYPOINT gets executed when the container starts. CMD specifies arguments that will be fed to the ENTRYPOINT. ENTRYPOINT will always be executed unless it is overridden.

### CI/CD (Continuous Integration and Continuous Delivery)
| ç‰¹æ€§           | Continuous Integration (CI)                        | Continuous Delivery (CD)                       |
| ------------ | -------------------------------------------------- | ---------------------------------------------- |
| **å®šä¹‰**       | å¼€å‘è€…é¢‘ç¹æäº¤ä»£ç ï¼Œè‡ªåŠ¨æ„å»ºå¹¶è¿è¡Œæµ‹è¯•ä»¥éªŒè¯ä»£ç æ­£ç¡®æ€§                        | é€šè¿‡ CI éªŒè¯åï¼Œä»£ç è‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒæˆ–é¢„ç”Ÿäº§ç¯å¢ƒ                    |
| **ä¸»è¦ç›®æ ‡**     | å¿«é€Ÿå‘ç°å¹¶ä¿®å¤ä»£ç é”™è¯¯                                        | è‡ªåŠ¨å‘å¸ƒåŠŸèƒ½/ä¿®å¤ï¼Œæ— éœ€äººå·¥å¹²é¢„                               |
| **æ ¸å¿ƒåŠŸèƒ½**     | è‡ªåŠ¨æ„å»º + è‡ªåŠ¨åŒ–æµ‹è¯•                                       | è‡ªåŠ¨éƒ¨ç½² + æŒç»­å‘å¸ƒ                                    |
| **å…¸å‹å·¥å…·**     | Jenkins, GitHub Actions, Travis CI, GitLab CI/CD ç­‰ | Spinnaker, ArgoCD, AWS CodeDeploy, GitLab CD ç­‰ |
| **ä¼˜ç‚¹**       | - è‡ªåŠ¨æ„å»ºå’Œæµ‹è¯•<br>- ææ—©å‘ç°é”™è¯¯<br>- æé«˜é€æ˜åº¦å’Œåä½œæ•ˆç‡              | - è‡ªåŠ¨éƒ¨ç½²æµç¨‹<br>- æ›´é¢‘ç¹çš„å°è§„æ¨¡å‘å¸ƒ<br>- æå‡å¼€å‘ä¸äº¤ä»˜æ•ˆç‡         |
| **è§¦å‘æ–¹å¼**     | æ¯æ¬¡ä»£ç æäº¤/åˆå¹¶è§¦å‘è‡ªåŠ¨æµ‹è¯•æµç¨‹                                  | æ¯æ¬¡é€šè¿‡ CI åè‡ªåŠ¨è§¦å‘éƒ¨ç½²æµç¨‹                              |
| **æ˜¯å¦éœ€è¦äººå·¥å¹²é¢„** | ä¸éœ€è¦äººå·¥å¹²é¢„è¿›è¡Œæµ‹è¯•                                        | å¯èƒ½åªéœ€æ‰¹å‡†æˆ–é…ç½®ä¸€æ¬¡æ€§ç­–ç•¥ï¼Œä¹‹åæ— éœ€äººå·¥å¹²é¢„                        |
| **è¾“å‡ºç»“æœ**     | å¯è¿è¡Œé€šè¿‡æµ‹è¯•çš„æ„å»ºäº§ç‰©                                       | å®é™…è¿è¡Œä¸­çš„æ–°ç‰ˆæœ¬è½¯ä»¶éƒ¨ç½²                                  |

- CI/CD Pipeline: Integrates the CI/CD practices, the tools, and stages that software changes undergo from development to deployment
#### CI/CD Pipeline Stages
| **é˜¶æ®µ**                    | **è¯´æ˜**                                       | **å¥½å¤„**         |
| ------------------------- | -------------------------------------------- | ------------------------ |
| **Lint Check**            | ä»£ç è¯­æ³•å’Œé£æ ¼æ£€æŸ¥å·¥å…·ï¼ˆå¦‚ ESLintã€flake8ï¼‰è‡ªåŠ¨æ‰«æä»£ç é—®é¢˜         | æé«˜ä»£ç ä¸€è‡´æ€§ã€å‡å°‘ä½çº§é”™è¯¯           |
| **Dependency Check**      | æ‰«æä¾èµ–åº“ä¸­çš„å®‰å…¨æ¼æ´æˆ–è®¸å¯é—®é¢˜ï¼ˆå¦‚ `safety`ã€`npm audit`ï¼‰     | æé«˜å®‰å…¨æ€§ï¼Œé˜²æ­¢å¼•å…¥æ˜“å—æ”»å‡»çš„è½¯ä»¶åŒ…       |
| **Code Quality Analysis** | ä½¿ç”¨å·¥å…·åˆ†æä»£ç å¤æ‚åº¦ã€é‡å¤ç‡ç­‰è´¨é‡æŒ‡æ ‡ï¼ˆå¦‚ SonarQubeï¼‰            | æé«˜å¯ç»´æŠ¤æ€§ã€å¯è¯»æ€§ï¼Œå‡å°‘æŠ€æœ¯å€ºåŠ¡        |
| **Unit Testing**          | æµ‹è¯•å•ä¸ªå‡½æ•°/æ¨¡å—çš„é€»è¾‘æ˜¯å¦æ­£ç¡®ï¼ˆå¦‚ JUnitï¼‰             | å¿«é€Ÿå‘ç°å‡½æ•°çº§åˆ«çš„ bugï¼Œæå‡å¯é æ€§      |
| **Integration/E2E Tests** | æµ‹è¯•æ¨¡å—ä¹‹é—´æˆ–æ•´ä¸ªç³»ç»Ÿçš„è¡Œä¸ºæ˜¯å¦ç¬¦åˆé¢„æœŸï¼ˆå¦‚ Seleniumã€Cypressï¼‰     | æé«˜ç³»ç»Ÿæ•´ä½“ç¨³å®šæ€§ï¼Œæ¨¡æ‹ŸçœŸå®ç”¨æˆ·è¡Œä¸ºé˜²æ­¢å›å½’é—®é¢˜ |
| **Pack the Software**     | æ‰“åŒ…æˆ–æ„å»ºå‘å¸ƒå·¥ä»¶ï¼Œå¦‚ç”ŸæˆäºŒè¿›åˆ¶ã€Docker é•œåƒ                   | ç»Ÿä¸€äº¤ä»˜æ ¼å¼ï¼Œæ”¯æŒå¿«é€Ÿéƒ¨ç½²å’Œè·¨ç¯å¢ƒè¿è¡Œ      |
| **Deployment**            | è‡ªåŠ¨éƒ¨ç½²åˆ°æµ‹è¯•æˆ–ç”Ÿäº§ç¯å¢ƒï¼ˆå¦‚ä½¿ç”¨ Helmã€Ansibleã€Terraform ç­‰å·¥å…·ï¼‰ | å¿«é€Ÿä¸Šçº¿ï¼Œå‡å°‘äººä¸ºå¤±è¯¯ï¼Œæå‡æ•ˆç‡å’Œå‘å¸ƒé¢‘ç‡    |


## Week 6

### Container Orchestration Tools
- Provide a framework for integrating and managing containers at scale
- å®¹å™¨ç¼–æ’æŠ€æœ¯çš„ä¸»è¦åŠŸèƒ½
* **ç½‘ç»œç®¡ç†ï¼ˆNetworkingï¼‰**
  ç®¡ç†å®¹å™¨é—´é€šä¿¡ï¼Œæ”¯æŒè·¨ä¸»æœºé€šä¿¡ã€‚
* **å¼¹æ€§æ‰©ç¼©å®¹ï¼ˆScalingï¼‰**
  æ ¹æ®è´Ÿè½½è‡ªåŠ¨å¢åŠ æˆ–å‡å°‘å®¹å™¨å®ä¾‹æ•°é‡ã€‚
* **æœåŠ¡å‘ç°ä¸è´Ÿè½½å‡è¡¡ï¼ˆService Discovery & Load Balancingï¼‰**
  å®¹å™¨æœåŠ¡è‡ªåŠ¨æ³¨å†Œï¼Œæµé‡æ™ºèƒ½åˆ†é…ã€‚
* **å¥åº·æ£€æŸ¥ä¸è‡ªæ„ˆï¼ˆHealth Check & Self-healingï¼‰**
  è‡ªåŠ¨æ£€æµ‹æ•…éšœå®¹å™¨å¹¶é‡å¯æˆ–æ›¿æ¢ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šã€‚
* **å®‰å…¨ï¼ˆSecurityï¼‰**
  ä¿éšœå®¹å™¨éš”ç¦»ã€è®¿é—®æ§åˆ¶å’Œå®‰å…¨é€šä¿¡ã€‚
* **æ»šåŠ¨æ›´æ–°ï¼ˆRolling Updatesï¼‰**
  æ— ä¸­æ–­åœ°æ›´æ–°å®¹å™¨æœåŠ¡ï¼Œä¿è¯é«˜å¯ç”¨ã€‚

### Container Orchestration Tools Goals
* ç®€åŒ–å®¹å™¨ç®¡ç†æµç¨‹ï¼Œè‡ªåŠ¨åŒ–éƒ¨ç½²å’Œç»´æŠ¤ã€‚
* ç¡®ä¿å®¹å™¨æœåŠ¡çš„é«˜å¯ç”¨æ€§å’Œå¼¹æ€§ä¼¸ç¼©ã€‚

### Combine Declarative Management with Infrastructure as Code
* é€šè¿‡**å£°æ˜å¼é…ç½®**ï¼ˆYAML/JSONï¼‰ï¼Œå®šä¹‰æœŸæœ›çš„çŠ¶æ€ã€‚
* é‡‡ç”¨**åŸºç¡€è®¾æ–½å³ä»£ç **ç†å¿µï¼Œå®ç°é…ç½®è‡ªåŠ¨åŒ–ã€ç‰ˆæœ¬åŒ–å’Œå¯å¤ç”¨ã€‚
* æ”¯æŒç³»ç»Ÿè‡ªæ„ˆå’Œå¹‚ç­‰æ€§ï¼Œæå‡è¿ç»´æ•ˆç‡å’Œç¨³å®šæ€§ã€‚


### K8S
* **é›†ç¾¤ç›®æ ‡**
  è¿è¡Œå¯¹ç»ˆç«¯ç”¨æˆ·æœ‰ç”¨çš„è½¯ä»¶åº”ç”¨ï¼Œä¿è¯æœåŠ¡ç¨³å®šå¯é ã€‚

* **K8s å…³é”®åŠŸèƒ½**

  * **å®¹å™¨è‡ªåŠ¨é‡å¯ä¸å®¹é”™**ï¼šå®¹å™¨å´©æºƒè‡ªåŠ¨é‡å¯ï¼ŒèŠ‚ç‚¹å®•æœºæ—¶å®¹å™¨è‡ªåŠ¨è¿ç§»åˆ°å…¶ä»–å¥åº·èŠ‚ç‚¹ã€‚
  * **æœåŠ¡å‘ç°ä¸ DNS åç§°**ï¼šä¸ºæœåŠ¡åˆ†é…å›ºå®šçš„ DNS åç§°ï¼Œé¿å…ä¾èµ–æ˜“å˜çš„ IP åœ°å€ã€‚
  * **æ™ºèƒ½è°ƒåº¦**ï¼šæ ¹æ®èŠ‚ç‚¹ç‰¹æ€§ï¼ˆå¦‚ GPUã€å†…å­˜å¤§å°ï¼‰è‡ªåŠ¨åˆ†é…å®¹å™¨ã€‚
  * **è´Ÿè½½å‡è¡¡**ï¼šå‡åŒ€åˆ†å¸ƒå®¹å™¨è´Ÿè½½ï¼Œä¼˜åŒ–èµ„æºåˆ©ç”¨ã€‚
  * **å¤šç‰ˆæœ¬ç®¡ç†**ï¼šé€šè¿‡å‘½åç©ºé—´ï¼ˆnamespaceï¼‰æ”¯æŒåŒä¸€é›†ç¾¤ä¸­ä¸åŒç‰ˆæœ¬çš„å®¹å™¨å¹¶å­˜ï¼ˆå¦‚ dev ä¸ prod ç¯å¢ƒï¼‰ã€‚
  * **é…ç½®ç®¡ç†**ï¼šçµæ´»åˆ†å‘é…ç½®æ•°æ®å’Œç¯å¢ƒå˜é‡åˆ°å®¹å™¨å†…ï¼Œæ–¹ä¾¿åŠ¨æ€è°ƒæ•´åº”ç”¨å‚æ•°ã€‚

### K8S Components
| **æœ¯è¯­**         | **å®šä¹‰**                                           | **è¯´æ˜**                             |
| -------------- | ------------------------------------------------ | ---------------------------------- |
| **Node**       | è®¡ç®—èŠ‚ç‚¹ï¼Œé€šå¸¸æ˜¯è¿è¡Œ Kubernetes çš„è™šæ‹Ÿæœºæˆ–ç‰©ç†æœº                   | Kubernetes é›†ç¾¤ä¸­çš„è®¡ç®—èµ„æºå•å…ƒ              |
| **Volume**     | æŒä¹…åŒ–å­˜å‚¨ï¼Œå¯ä»¥é™„åŠ åˆ°èŠ‚ç‚¹å¹¶æŒ‚è½½ä¸ºæ–‡ä»¶ç³»ç»Ÿ                            | ç”¨äºå­˜å‚¨æŒä¹…æ•°æ®ï¼Œå®¹å™¨é‡å¯åæ•°æ®ä¸ä¼šä¸¢å¤±               |
| **Pod**        | ä¸€ç»„ååŒå·¥ä½œçš„ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ï¼Œæ˜¯ Kubernetes ä¸­æœ€å°çš„å¯éƒ¨ç½²å•å…ƒ            | åŒä¸€ Pod å†…å®¹å™¨å…±äº«ç½‘ç»œå’Œå­˜å‚¨èµ„æº                |
| **Deployment** | ä¸€ç»„åŒæ—¶è¿è¡Œçš„ç›¸åŒ Pod å‰¯æœ¬ï¼Œç”¨äºç®¡ç†å’Œç»´æŠ¤åº”ç”¨çš„å¤šä¸ªå®ä¾‹ï¼ˆå¦‚è¿è¡Œ3ä¸ª Nginx Podï¼‰ | è´Ÿè´£å‰¯æœ¬ç®¡ç†ã€æ»šåŠ¨æ›´æ–°ã€å›æ»šç­‰                    |
| **Service**    | Pod å¯¹å¤–æä¾›çš„åŠŸèƒ½ï¼Œé€šè¿‡ç«¯å£æš´éœ²ï¼ŒæœåŠ¡ä»…åœ¨é›†ç¾¤å†…éƒ¨å¯è§                    | ç”¨äºå®ç°è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡å‘ç°                      |
| **Ingress**    | ç®¡ç†å¤–éƒ¨å®¢æˆ·ç«¯è®¿é—®ä¸€ä¸ªæˆ–å¤šä¸ª Service çš„ç»„ä»¶ï¼Œæ”¯æŒåŸºäºä¸»æœºåã€è·¯å¾„ç­‰çš„è·¯ç”±        | å®ç°é›†ç¾¤å¤–éƒ¨è®¿é—®ï¼Œæ”¯æŒåå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡               |
| **ConfigMap**  | Kubernetes ä¸­ä¼ é€’é…ç½®å‚æ•°çš„æœºåˆ¶                            | ç”¨äºåŠ¨æ€æ³¨å…¥é…ç½®æ•°æ®ï¼Œé¿å…å°†é…ç½®å†™æ­»åœ¨é•œåƒä¸­             |
| **Namespace**  | å¯¹é›†ç¾¤ä¸­çš„èµ„æºï¼ˆé™¤ Node å¤–ï¼‰è¿›è¡Œåˆ†ç»„ç®¡ç†çš„æœºåˆ¶                       | æ–¹ä¾¿å¤šå›¢é˜Ÿã€å¤šç¯å¢ƒå…±ç”¨åŒä¸€ä¸ªé›†ç¾¤ï¼Œé»˜è®¤å‘½åç©ºé—´ä¸º `default` |

![K8S Architecture Example](k8s-example.png)
[Check more about K8S](../kubernetes/index.md)
### Pods
| **ä¸»é¢˜**           | **å†…å®¹**                                                                                                     |
| ---------------- | ---------------------------------------------------------------------------------------------------------- |
| **Pod ç»„æˆ**       | é€šå¸¸ç”±ä¸€ä¸ªå®¹å™¨ç»„æˆï¼Œä½†å¯ä»¥æœ‰å¤šä¸ªå®¹å™¨å¹¶è¡Œè¿è¡Œï¼ˆä¾‹å¦‚åº”ç”¨å®¹å™¨ + è¾…åŠ©å®¹å™¨ï¼‰                                                                      |
| **å¤šå®¹å™¨ç¤ºä¾‹**        | - CouchDB å®¹å™¨ + Lucene æœç´¢å®¹å™¨ï¼ˆå®ç°å…¨æ–‡æ£€ç´¢ï¼‰<br>- åº”ç”¨å®¹å™¨ + è®¤è¯å®¹å™¨ï¼ˆéªŒè¯è¯·æ±‚æœ‰æ•ˆæ€§ï¼‰                                               |
| **Pod Manifest** | å¿…é¡»åŒ…å« Pod åç§°ã€å®¹å™¨åç§°å’Œé•œåƒ<br>å¯åŒ…å«ç¯å¢ƒå˜é‡ã€ç«¯å£ã€å·æŒ‚è½½ç­‰ä¿¡æ¯                                                                   |
| **Pod ç‰¹æ€§**       | åŒä¸€ Pod å†…å®¹å™¨è¿è¡Œåœ¨åŒä¸€èŠ‚ç‚¹ï¼Œå…±äº«å­˜å‚¨å’Œç½‘ç»œ                                                                                  |
| **è°ƒåº¦è§„åˆ™**         | ä½¿ç”¨ Affinityï¼ˆäº²å’Œï¼‰ã€Anti-Affinityï¼ˆåäº²å’Œï¼‰ã€Node Selectorã€Taints & Tolerations æ§åˆ¶è°ƒåº¦                                 |
| **å®¹å™¨é•œåƒç®¡ç†**       | Kubernetes è‡ªåŠ¨ä¸‹è½½é•œåƒï¼Œç§æœ‰é•œåƒåº“éœ€æä¾›ä½ç½®å’Œå‡­è¯                                                                            |
| **ä¸ºä»€ä¹ˆç”¨ Podsï¼Ÿ**   | - æ”¯æŒå¾®æœåŠ¡æ¶æ„ï¼Œå®ç°æ¾è€¦åˆ<br>- æ–¹ä¾¿æ—¥å¿—æ”¶é›†ï¼ˆå‰¯å®¹å™¨å¤„ç†æ—¥å¿—ï¼Œåº”ç”¨æ— éœ€ä¿®æ”¹ä»£ç ï¼‰<br>- å¯é…ç½® Init å®¹å™¨åˆå§‹åŒ–åº”ç”¨ç¯å¢ƒ<br>- Sidecar å®¹å™¨æ‰©å±•åº”ç”¨åŠŸèƒ½ï¼ˆå¦‚æ·»åŠ /å»é™¤ HTTP å¤´ï¼‰ |

- Affinity: A way to force the scheduling of certain pods on a given node type
- Sidecars: Containers that run alongside the application container to extend its functionality
### YAML

```yaml
apiVersion: ...
kind: ...
metadata:
  name: ...
spec:
  ...
```

#### Metadata

èµ„æºçš„å…ƒä¿¡æ¯ï¼Œé€šå¸¸åŒ…å«ï¼š

```yaml
metadata:
  name: my-app              # èµ„æºåç§°ï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰
  namespace: default        # å‘½åç©ºé—´ï¼ˆå¯é€‰ï¼‰
  labels:                   # æ ‡ç­¾ï¼Œç”¨äºé€‰æ‹©å™¨å’Œç®¡ç†
    app: my-app
  annotations:              # æ³¨è§£ï¼Œç”¨äºå­˜å‚¨å…ƒæ•°æ®ï¼ˆéé€‰æ‹©ç”¨é€”ï¼‰
    description: "My test app"
```

#### Spec

```yaml
spec:
  containers:               # å®¹å™¨åˆ—è¡¨ï¼ˆé€šå¸¸è‡³å°‘ä¸€ä¸ªï¼‰
    - name: app-container
      image: nginx:latest   # å®¹å™¨é•œåƒ
      ports:
        - containerPort: 80
      env:                  # ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰
        - name: ENV
          value: "prod"
      volumeMounts:         # å®¹å™¨å†…æŒ‚è½½è·¯å¾„
        - name: data-volume
          mountPath: /data
  volumes:                  # å®¿ä¸»æœºæˆ–å¤–éƒ¨æŒ‚è½½å·å®šä¹‰
    - name: data-volume
      emptyDir: {}
  nodeSelector:             # èŠ‚ç‚¹é€‰æ‹©å™¨ï¼ˆè°ƒåº¦è§„åˆ™ï¼‰
    disktype: ssd
  tolerations:              # å®¹å¿æ±¡ç‚¹ï¼ˆè°ƒåº¦è§„åˆ™ï¼‰
  affinity:                 # èŠ‚ç‚¹/Pod äº²å’Œæ€§ï¼ˆè°ƒåº¦è§„åˆ™ï¼‰
```

---

#### Selector

```yaml
spec:
  selector:
    matchLabels:
      app: my-app            # é€‰æ‹©åŒ¹é…æ ‡ç­¾çš„ Pod
```

#### Deployment

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-app
spec:
  replicas: 3
  selector:
    matchLabels:
      app: my-app
  template:                    # Pod æ¨¡æ¿
    metadata:
      labels:
        app: my-app
    spec:
      containers:
        - name: app-container
          image: nginx:latest
```
#### æ€»ç»“

| åŒºå—           | ç”¨é€”è¯´æ˜                                 |
| ------------ | ------------------------------------ |
| `apiVersion` | è¡¨ç¤ºèµ„æºä½¿ç”¨çš„ API ç‰ˆæœ¬                       |
| `kind`       | æŒ‡å®šèµ„æºç±»å‹ï¼Œå¦‚ Podã€Deployment ç­‰            |
| `metadata`   | æè¿°èµ„æºçš„åç§°ã€æ ‡ç­¾ã€æ³¨è§£ç­‰                       |
| `spec`       | å®šä¹‰èµ„æºçš„å…·ä½“è¡Œä¸ºï¼ˆå®¹å™¨ã€å·ã€æœåŠ¡ç«¯å£ç­‰ï¼‰                |
| `selector`   | ç”¨äºåŒ¹é…ç›®æ ‡ Podï¼ˆå¸¸è§äº Deployment å’Œ Serviceï¼‰ |

### Kubeconfig File
- The kubeconfig file contains:
  - The master node floating point address
  - A client certificate (unique to that cluster) used to authenticate the user
  - The port the k8s API is listening to (all communications use HTTPS)
  - â€¦plus other parameters
### Kubectl
| åŠŸèƒ½åˆ†ç±»                      | å‘½ä»¤æ ¼å¼ä¸è¯´æ˜                                                                                                     |
| ------------------------- | ----------------------------------------------------------------------------------------------------------- |
| ğŸ” æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€                 | `kubectl get nodes` <br> æ˜¾ç¤ºé›†ç¾¤ä¸­æ‰€æœ‰èŠ‚ç‚¹ï¼ˆnodeï¼‰                                                                    |
| ğŸ” æŸ¥çœ‹ Pod                 | `kubectl get pods -n <namespace>` <br> æŸ¥çœ‹æŸä¸ªå‘½åç©ºé—´å†…æ‰€æœ‰ pod                                                      |
| ğŸ” æŸ¥çœ‹æ‰€æœ‰èµ„æº                 | `kubectl get all -n <namespace>` <br> æŸ¥çœ‹è¯¥ namespace å†…æ‰€æœ‰èµ„æº<br>`kubectl get all -A` <br> æŸ¥çœ‹æ‰€æœ‰ namespace çš„æ‰€æœ‰èµ„æº |
| ğŸ” æŸ¥çœ‹æ‰€æœ‰ Podï¼ˆæ‰€æœ‰ namespaceï¼‰ | `kubectl get pods -A`                                                                                       |
| ğŸ” æŸ¥çœ‹ Pod è¯¦ç»†ä¿¡æ¯            | `kubectl describe pods <pod-name> -n <namespace>` <br> æ˜¾ç¤ºè¯¥ pod çš„è¯¦ç»†é…ç½®ã€äº‹ä»¶ç­‰                                    |
| ğŸ” æŸ¥çœ‹ Node èµ„æºä½¿ç”¨æƒ…å†µ         | `kubectl describe node <node-name>` <br> æŸ¥çœ‹è¯¥èŠ‚ç‚¹ä¸Šçš„ podsã€å†…å­˜ï¼ˆMiï¼‰ã€CPUï¼ˆmillicoresï¼‰ç­‰                               |
| ğŸ” æŸ¥çœ‹ Pod èµ„æºä½¿ç”¨æƒ…å†µ          | `kubectl top pods -n <namespace>` <br> æŸ¥çœ‹ pod çš„ CPU å’Œå†…å­˜ç”¨é‡                                                   |
| ğŸš€ åˆ é™¤ Podï¼ˆå¼ºåˆ¶é‡å¯ï¼‰           | `kubectl delete pod <pod-name> -n <namespace>` <br> ä¼šè§¦å‘ Kubernetes è‡ªåŠ¨é‡æ–°åˆ›å»ºè¯¥ pod                              |
| ğŸ” ä¼˜é›…é‡å¯ Deploymentï¼ˆæ»šåŠ¨æ›´æ–°ï¼‰  | `kubectl rollout restart deployment <deployment-name> -n <namespace>` <br> æŒ‰é¡ºåºä¾æ¬¡é‡å¯ podï¼Œä¸ä¸­æ–­æœåŠ¡                |
| ğŸ“¦ åº”ç”¨ Manifest            | `kubectl apply -f <manifest>.yaml -n <namespace> --wait` <br> `--wait` å‚æ•°ä¼šç­‰å¾…èµ„æºå‡†å¤‡å®Œæˆåæ‰è¿”å›                      |
| ğŸ”Œ æœ¬åœ°ç«¯å£è½¬å‘                 | `kubectl port-forward deployment/<deployment-name> <local-port>:<pod-port>` <br> å°† pod çš„ç«¯å£è½¬å‘åˆ°æœ¬æœºç«¯å£ï¼Œä¾¿äºæœ¬åœ°è°ƒè¯•è®¿é—®  |
| ğŸ”‘ è·å–é›†ç¾¤è®¿é—®é…ç½®               | `openstack coe cluster config <cluster-name>` <br> ç”Ÿæˆ `kubeconfig` æ–‡ä»¶ï¼Œé…ç½®é›†ç¾¤è®¿é—®æƒé™                              |

### Helm
| é¡¹ç›®            | è¯´æ˜                                                  |
| ------------- | --------------------------------------------------- |
| ğŸ§± Helm æ˜¯ä»€ä¹ˆï¼Ÿ  | Helm æ˜¯ Kubernetes çš„åŒ…ç®¡ç†å™¨ï¼Œç”¨äºç®€åŒ–åº”ç”¨çš„éƒ¨ç½²å’Œç®¡ç†ã€‚               |
| ğŸ“¦ Helm Chart | Chart æ˜¯ Helm åº”ç”¨åŒ…ï¼ŒåŒ…å«ä¸€ç»„ Kubernetes Manifestsï¼ˆYAML æ–‡ä»¶ï¼‰ |
| ğŸ›ï¸ è‡ªå®šä¹‰å‚æ•°     | Helm chart æ”¯æŒé€šè¿‡å‘½ä»¤è¡Œå‚æ•°æˆ– YAML æ–‡ä»¶è¿›è¡Œé…ç½®                   |

| å‘½ä»¤                                                   | è¯´æ˜                        |
| ---------------------------------------------------- | ------------------------- |
| `helm repo add <name> <url>`                         | æ·»åŠ  Helm ä»“åº“                |
| `helm repo update`                                   | æ›´æ–°ä»“åº“å†…å®¹                    |
| `helm upgrade --install <release-name> <chart-name>` | å®‰è£…æˆ–å‡çº§ä¸€ä¸ª chart å®ä¾‹ï¼ˆreleaseï¼‰ |
| `--set <key>=<value>`                                | åœ¨ CLI ä¸­è®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰å‚æ•°          |
| `--values <values.yaml>`                             | ä» YAML æ–‡ä»¶ä¸­è¯»å–å¤šä¸ªè‡ªå®šä¹‰å‚æ•°é…ç½®     |

### SoA (Service Oriented Architecture)
| **æ¦‚å¿µ**     | **è¯´æ˜**                                 |
| ---------- | -------------------------------------- |
| **SoA å®šä¹‰** | æ¶æ„é£æ ¼ï¼šå°†ç³»ç»Ÿè®¾è®¡ä¸ºå¤šä¸ª**æ¾è€¦åˆçš„æœåŠ¡**ï¼Œæ¯ä¸ªæœåŠ¡ç‹¬ç«‹å®Œæˆä¸€éƒ¨åˆ†åŠŸèƒ½ã€‚ |
| **åº”ç”¨åœºæ™¯**   | åœ¨ç»„ä»¶åˆ†å¸ƒåœ¨ä¸åŒç³»ç»Ÿæˆ–æœºå™¨ä¹‹é—´æ—¶ï¼Œå‡½æ•°è°ƒç”¨ä¸å†å¯è¡Œï¼Œå¿…é¡»é€šè¿‡æœåŠ¡é€šä¿¡ã€‚    |
| **é€šä¿¡æ–¹å¼**   | ä½¿ç”¨ç½‘ç»œåè®®ï¼ˆå¦‚ HTTPï¼‰è¿›è¡ŒæœåŠ¡è°ƒç”¨ï¼Œç»„ä»¶é—´ä»¥æ¶ˆæ¯æ–¹å¼äº¤äº’ã€‚       |
| **ä¼˜åŠ¿**     | æ˜“äºå¤ç”¨ã€æ‰©å±•ã€è·¨å¹³å°ã€é€‚é…å˜åŒ–ï¼Œæ”¯æŒå¼‚æ„ç³»ç»Ÿé›†æˆã€‚             |

| **æœ¯è¯­**     | **è¯´æ˜**                                                                                                                 |
| ---------- | ---------------------------------------------------------------------------------------------------------------------- |
| **Web æœåŠ¡** | å®ç° SoA çš„å¸¸ç”¨æ–¹å¼ï¼šé€šè¿‡ç½‘ç»œè°ƒç”¨æœåŠ¡ï¼ˆä¾‹å¦‚ HTTP + XML/JSONï¼‰ã€‚                                                                             |
| **å¸¸è§ç±»å‹**   | - **SOAP**ï¼ˆSimple Object Access Protocolï¼‰<br>- **REST**ï¼ˆRepresentational State Transferï¼‰<br>- å…¶ä»–ä¸“ç”¨æ ‡å‡†ï¼ˆWFSã€WMSã€HL7ã€SDMXï¼‰ |
| **ä¼ è¾“åè®®**   | è™½ç„¶ä¸¤è€…éƒ½å¯ä½¿ç”¨ HTTPï¼Œä½† SOAP ä¹Ÿå¯åŸºäº SMTPã€TCP ç­‰åè®®è¿è¡Œã€‚                                                                              |

### SOAP vs REST
- ReST is more of a style to use HTTP than a separate protocol
- SOAP/WS is a stack of protocols that covers every aspect of using a remote service, from service discovery, to service description, to the actual request/response

| **æ¯”è¾ƒé¡¹**      | **SOAP/WS**                     | **REST**                    |
| ------------ | ------------------------------- | --------------------------- |
| **é€šä¿¡é£æ ¼**     | åŸºäºè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRemote Procedure Callï¼‰ | åŸºäºèµ„æºæ“ä½œï¼ˆé€šè¿‡ HTTP åŠ¨è¯æ“ä½œèµ„æºï¼‰      |
| **åè®®æ ˆ**      | æ˜¯ä¸€å¥—å®Œæ•´åè®®æ ˆï¼ˆåŒ…æ‹¬æœåŠ¡å‘ç°ã€æè¿°ã€æ¶ˆæ¯æ ¼å¼ã€å®‰å…¨ç­‰ï¼‰    | æ˜¯ä¸€ç§æ¶æ„é£æ ¼ï¼Œä¸æ˜¯åè®®ï¼›ç›´æ¥ç”¨ HTTP åè®®çš„è¯­ä¹‰ |
| **æ•°æ®æ ¼å¼**     | é€šå¸¸ä½¿ç”¨ XMLï¼ˆç»“æ„ä¸¥æ ¼ï¼‰                  | é€šå¸¸ä½¿ç”¨ JSONï¼ˆè½»é‡ï¼‰ï¼Œä¹Ÿæ”¯æŒ XML       |
| **çµæ´»æ€§**      | å¼ºå¤§ä½†å¤æ‚ï¼Œé€‚åˆä¼ä¸šå†…éƒ¨æˆ–é«˜å®‰å…¨æ€§åœºæ™¯             | ç®€æ´è½»ä¾¿ï¼Œé€‚åˆå…¬å¼€ API å’Œ Web æœåŠ¡      |
| **è·¨è¯­è¨€/å¹³å°æ”¯æŒ** | éå¸¸å¼ºï¼Œé€‚åˆå¼‚æ„ç¯å¢ƒ                      | åŒæ ·è‰¯å¥½ï¼Œä½†ä¾èµ–äºæ ‡å‡†åŒ–èµ„æºæ¥å£è®¾è®¡          |
| **å…¸å‹åº”ç”¨åœºæ™¯**   | é“¶è¡Œç³»ç»Ÿã€ä¼ä¸šå†…éƒ¨ç³»ç»Ÿã€B2B æœåŠ¡              | Web APIã€å¾®æœåŠ¡æ¶æ„ã€ç§»åŠ¨ç«¯æ¥å£         |


### WDSL (Web Services Description Language)
- WSDLï¼ˆWeb Services Description Languageï¼‰æ˜¯WebæœåŠ¡çš„æ ¸å¿ƒæ ‡å‡†ä¹‹ä¸€ï¼Œå®ƒåœ¨è¿‡å»å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…è¢«å¹¿æ³›ç”¨äºæè¿°å’Œå®ç°SOAPï¼ˆSimple Object Access Protocolï¼‰é£æ ¼çš„WebæœåŠ¡ã€‚ç„¶è€Œï¼Œéšç€æŠ€æœ¯çš„å‘å±•ï¼Œç‰¹åˆ«æ˜¯åœ¨RESTï¼ˆRepresentational State Transferï¼‰æ¶æ„é£æ ¼çš„å…´èµ·å’Œå¾®æœåŠ¡æ¶æ„çš„æµè¡Œï¼ŒWSDLçš„ä½¿ç”¨ç¡®å®æœ‰æ‰€å‡å°‘ã€‚

### ReST Best Practices
1) Keep URIs short â€“ and create URIs that donâ€™t change.
2) URIs should be opaque identifiers that are meant to be discovered by following hyperlinks, not constructed by the client.
3) Use nouns, not verbs in URLs
4) Make all HTTP GETs side-effect free. Doing so makes the request "safe".
5) Use links in your responses to requests! Doing so connects your response with other data. It enables client applications to be "self-propelledâ€, i.e. "what is the next step to take".
6) Minimize use of query strings.

| **HTTP æ–¹æ³•** | **Safeï¼ˆå®‰å…¨ï¼‰** | **Idempotentï¼ˆå¹‚ç­‰ï¼‰** | **è¯´æ˜**                           |
| ----------- | ------------ | ------------------ | -------------------------------- |
| `GET`       | âœ… æ˜¯          | âœ… æ˜¯                | è·å–èµ„æºï¼Œä¸æ”¹å˜çŠ¶æ€ï¼ˆå®‰å…¨ï¼‰ï¼Œè°ƒç”¨å¤šæ¬¡æ•ˆæœä¸€è‡´ï¼ˆå¹‚ç­‰ï¼‰      |
| `POST`      | âŒ å¦          | âŒ å¦                | åˆ›å»ºæ–°èµ„æºæˆ–æäº¤æ•°æ®ï¼Œè°ƒç”¨å¤šæ¬¡ä¼šäº§ç”Ÿå¤šä¸ªå‰¯ä½œç”¨ï¼ˆä¸å®‰å…¨ä¹Ÿä¸å¹‚ç­‰ï¼‰ |
| `PUT`       | âŒ å¦          | âœ… æ˜¯                | æ›¿æ¢æˆ–åˆ›å»ºèµ„æºï¼Œè°ƒç”¨å¤šæ¬¡ç»“æœä¸€è‡´ï¼ˆå¹‚ç­‰ï¼‰ï¼Œä½†ä¼šä¿®æ”¹çŠ¶æ€ï¼ˆä¸å®‰å…¨ï¼‰ |
| `DELETE`    | âŒ å¦          | âœ… æ˜¯                | åˆ é™¤èµ„æºï¼Œè°ƒç”¨å¤šæ¬¡æ•ˆæœä¸€æ ·ï¼ˆå¹‚ç­‰ï¼‰ï¼Œä½†ä¼šæ”¹å˜æœåŠ¡å™¨çŠ¶æ€ï¼ˆä¸å®‰å…¨ï¼‰ |

### Git
| **æœ¯è¯­/æ¦‚å¿µ**             | **è§£é‡Š**                     | **å¸¸è§å‘½ä»¤ç¤ºä¾‹**                                                                                                     |
| --------------------- | -------------------------- | -------------------------------------------------------------------------------------------------------------- |
| **Repositoryï¼ˆä»“åº“ï¼‰**    | Git é¡¹ç›®ç›®å½•ï¼ŒåŒ…å«ç‰ˆæœ¬å†å²ã€åˆ†æ”¯ç­‰        | `git init`ï¼ˆåˆå§‹åŒ–æœ¬åœ°ä»“åº“ï¼‰<br>`git clone https://<user>@<host>/path/to/repo.git`ï¼ˆå…‹éš†ï¼‰                                  |
| **Commitï¼ˆæäº¤ï¼‰**        | ä¸€æ¬¡ä»£ç æ›´æ”¹è®°å½•                   | `git commit -m "message"`<br>`git log`ï¼ˆæŸ¥çœ‹æäº¤å†å²ï¼‰                                                                 |
| **Branchï¼ˆåˆ†æ”¯ï¼‰**        | å¹¶è¡Œå¼€å‘è·¯å¾„                     | `git branch <branch>`ï¼ˆåˆ›å»ºï¼‰<br>`git checkout <branch>`ï¼ˆåˆ‡æ¢ï¼‰<br>`git branch`ï¼ˆåˆ—å‡ºæœ¬åœ°åˆ†æ”¯ï¼‰<br>`git branch --remotes`ï¼ˆè¿œç¨‹ï¼‰ |
| **head**              | æŸä¸ªåˆ†æ”¯çš„æœ€æ–°æäº¤ä½ç½®                | è‡ªåŠ¨ç®¡ç†ï¼ŒæŸ¥çœ‹ï¼š`git log --oneline`                                                                                    |
| **HEAD**              | å½“å‰æ‰€åœ¨åˆ†æ”¯æˆ–æäº¤                  | `git status` æŸ¥çœ‹å½“å‰ HEAD ä½ç½®                                                                                      |
| **Tagï¼ˆæ ‡ç­¾ï¼‰**           | ç»™æŸæ¬¡æäº¤æ‰“æ ‡ç­¾ï¼Œç”¨äºå‘å¸ƒç‰ˆæœ¬            | `git tag v1.0`<br>`git tag`ï¼ˆåˆ—å‡ºæ ‡ç­¾ï¼‰                                                                              |
| **Remote repository** | æ‰˜ç®¡åœ¨ GitHub/GitLab ç­‰å¹³å°çš„è¿œç¨‹ä»“åº“ | `git remote add origin <url>`<br>`git remote -v`ï¼ˆæŸ¥çœ‹ï¼‰                                                           |
| **Cloneï¼ˆå…‹éš†ï¼‰**         | å…‹éš†è¿œç¨‹ä»“åº“åˆ°æœ¬åœ°                  | `git clone https://<username>@<host>/path/to/repo.git`                                                         |
| **Checkoutï¼ˆç­¾å‡ºï¼‰**      | åˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯æˆ–æ–°å»ºåˆ†æ”¯               | `git checkout <branch>`<br>`git checkout -b <new_branch>`                                                      |
| **Pullï¼ˆæ‹‰å–ï¼‰**          | è·å–è¿œç¨‹æ›´æ”¹å¹¶åˆå¹¶åˆ°å½“å‰åˆ†æ”¯             | `git pull`<br>`git fetch -a`ï¼ˆè·å–æ‰€æœ‰è¿œç¨‹æ›´æ–°ï¼‰                                                                         |
| **Pushï¼ˆæ¨é€ï¼‰**          | å°†æœ¬åœ°æäº¤ä¸Šä¼ åˆ°è¿œç¨‹ä»“åº“               | `git push origin <branch>`ï¼ˆå¦‚ï¼š`git push origin feature/demo2`ï¼‰                                                  |
| **Mergeï¼ˆåˆå¹¶ï¼‰**         | æŠŠå…¶ä»–åˆ†æ”¯åˆå¹¶è¿›å½“å‰åˆ†æ”¯               | `git merge <branch>`                                                                                           |
| **Rebaseï¼ˆå˜åŸºï¼‰**        | é‡æ–°åº”ç”¨æäº¤åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ä¹‹ä¸Šï¼ˆç”Ÿæˆæ›´çº¿æ€§çš„å†å²ï¼‰   | `git rebase <branch>`                                                                                          |
| **Addï¼ˆæ·»åŠ æš‚å­˜ï¼‰**         | å°†æ–‡ä»¶å˜æ›´æ·»åŠ åˆ°æš‚å­˜åŒº                | `git add <filename>`ï¼ˆæ·»åŠ å•ä¸ªï¼‰<br>`git add .`ï¼ˆæ·»åŠ æ‰€æœ‰ï¼‰                                                                |
| **Diffï¼ˆæŸ¥çœ‹æ›´æ”¹ï¼‰**        | æ˜¾ç¤ºå·¥ä½œåŒºå’Œæš‚å­˜åŒºã€æäº¤ä¹‹é—´çš„å·®å¼‚          | `git diff`ï¼ˆå·¥ä½œç›®å½•å˜æ›´ï¼‰<br>`git diff --cached`ï¼ˆå·²æš‚å­˜æœªæäº¤ï¼‰                                                              |
| **æ—¥å¿—æŸ¥çœ‹**              | æŸ¥çœ‹æäº¤å†å²                     | `git log`<br>`git log --oneline`ï¼ˆç®€æ´æ ¼å¼ï¼‰<br>`git log --graph --all --oneline`                                    |
| **çŠ¶æ€æŸ¥çœ‹**              | æŸ¥çœ‹å½“å‰åˆ†æ”¯ã€ä¿®æ”¹çŠ¶æ€                | `git status`                                                                                                   |


## Week 7
### FaaS
| **ç±»åˆ«**               | **å†…å®¹è¯´æ˜**                                                                                   |
| -------------------- | ------------------------------------------------------------------------------------------ |
| **å®šä¹‰**               | FaaSï¼ˆFunction-as-a-Serviceï¼‰åˆç§° **Serverless Computing**ï¼ˆæ›´æµè¡Œä½†ä¸ç²¾ç¡®ï¼‰                            |
| **æ ¸å¿ƒç†å¿µ**             | å¼€å‘è€…åªå…³æ³¨ä»£ç é€»è¾‘ï¼Œä¸éœ€ç®¡ç†æœåŠ¡å™¨æˆ–åŸºç¡€è®¾æ–½ï¼ˆå¦‚æ‰©å®¹ã€è´Ÿè½½ç­‰ï¼‰                                                           |
| **â€œServerlessâ€çš„å«ä¹‰**  | å®é™…ä¸Šå¹¶ä¸æ˜¯â€œæ— æœåŠ¡å™¨â€ï¼Œè€Œæ˜¯â€œçœ‹ä¸è§æœåŠ¡å™¨â€ï¼ˆServer-unseenï¼‰                                                     |
| **FaaS vs ç¼–ç¨‹è¯­è¨€ä¸­çš„å‡½æ•°** | - **ç¼–ç¨‹è¯­è¨€å‡½æ•°**ï¼šåœ¨åŒä¸€è¿›ç¨‹å†…æ‰§è¡Œï¼Œè¿”å›å€¼ä»…é™å½“å‰ç¨‹åºä½¿ç”¨<br>- **FaaS å‡½æ•°**ï¼šç‹¬ç«‹è¿è¡Œï¼ˆå¦‚ Docker å®¹å™¨ï¼‰ï¼Œæ˜¯å¯è¢«å…¶ä»–ç³»ç»Ÿè°ƒç”¨çš„æœåŠ¡ï¼Œå¸¸è¿”å› JSON |
| **ä¸å¾®æœåŠ¡çš„å…³ç³»**          | æ˜¯å¾®æœåŠ¡æ¶æ„çš„æç«¯å½¢å¼ï¼Œå‡½æ•°æ›´å°æ›´ç‹¬ç«‹ï¼Œæ¯ä¸ªå‡½æ•°å®Œæˆä¸€ä¸ªç®€å•ä»»åŠ¡                                                           |
| **æ‰§è¡Œæ¨¡å‹**             | - æŒ‰éœ€åŠ è½½ï¼ŒæŒ‰éœ€æ‰§è¡Œ<br>- **äº‹ä»¶é©±åŠ¨**ï¼šå‡½æ•°é€šè¿‡è§¦å‘äº‹ä»¶è¢«è°ƒç”¨                                                      |
| **è§¦å‘æ–¹å¼ç¤ºä¾‹**           | - æ¯å°æ—¶è§¦å‘ï¼ˆå¦‚å‹ç¼©æ—¥å¿—ï¼‰<br>- æœ‰èŠ‚ç‚¹åŠ å…¥é›†ç¾¤<br>- GitHub PR åˆå¹¶<br>- æ¶ˆæ¯é˜Ÿåˆ—æœ‰æ–°æ¶ˆæ¯                                |
| **å‡½æ•°ç‰¹æ€§ï¼ˆå‡½æ•°å¼ç¼–ç¨‹ç›¸å…³ï¼‰**    | - æ— å‰¯ä½œç”¨ï¼ˆside-effect-freeï¼‰<br>- ç¬æ€ï¼ˆephemeralï¼‰<br>- æ— çŠ¶æ€ï¼ˆstatelessï¼‰<br>â†’ é€‚åˆå¹¶å‘å’Œè‡ªåŠ¨ä¼¸ç¼©             |
| **ä¼˜åŠ¿**               | âœ… è‡ªåŠ¨æ‰©å®¹<br>âœ… é™ä½æˆæœ¬ï¼ˆåªæŒ‰æ‰§è¡Œæ—¶é—´è®¡è´¹ï¼‰<br>âœ… ç®€åŒ–éƒ¨ç½²ï¼ˆæ— éœ€è¿ç»´ï¼‰<br>âœ… æ¶æ„æ›´çµæ´»                                      |
| **æ„å»ºæ–¹å¼**             | é€šè¿‡**å‡½æ•° + äº‹ä»¶ç»„åˆ**æ„å»ºå®Œæ•´åº”ç”¨ï¼Œåƒ UI ç³»ç»Ÿä¸­çš„â€œäº‹ä»¶å“åº”å›è°ƒâ€æ¨¡å¼                                                  |
| **å…¸å‹å®ç°å½¢å¼**           | FaaS å‡½æ•°é€šå¸¸å°è£…åœ¨ Docker å®¹å™¨ä¸­è¿è¡Œ                                                                  |


### Functions
- ä¸ä¿®æ”¹ç³»ç»ŸçŠ¶æ€çš„å‡½æ•°è¢«ç§°ä¸ºæ— å‰¯ä½œç”¨çš„ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªæ¥å—å›¾åƒå¹¶è¿”å›è¯¥å›¾åƒç¼©ç•¥å›¾çš„å‡½æ•°ï¼‰ã€‚
- ä»¥æŸç§æ–¹å¼æ”¹å˜ç³»ç»Ÿçš„å‡½æ•°ä¸æ˜¯æ— å‰¯ä½œç”¨çš„ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªè¿”å›å›¾åƒç¼©ç•¥å›¾å¹¶å°†å…¶å†™å…¥æ–‡ä»¶ç³»ç»Ÿçš„å‡½æ•°ï¼‰ã€‚
- æ— å‰¯ä½œç”¨çš„å‡½æ•°å¯ä»¥å¹¶è¡Œè¿è¡Œï¼Œå¹¶ä¸”åœ¨ç»™å®šç›¸åŒè¾“å…¥çš„æƒ…å†µä¸‹ï¼Œä¿è¯è¿”å›ç›¸åŒçš„è¾“å‡ºã€‚
- ç„¶è€Œï¼Œåœ¨ç›¸å¯¹å¤æ‚çš„ç³»ç»Ÿä¸­ï¼Œå‰¯ä½œç”¨å‡ ä¹æ˜¯ä¸å¯é¿å…çš„ã€‚å› æ­¤ï¼Œå¿…é¡»è€ƒè™‘å¦‚ä½•ä½¿å…·æœ‰å‰¯ä½œç”¨çš„å‡½æ•°åœ¨FaaSç¯å¢ƒä¸­é€šå¸¸æ‰€éœ€çš„å¹¶è¡Œè¿è¡Œï¼Œé¿å…æ­»é”ï¼ˆæ¯ä¸ªå‡½æ•°éƒ½åœ¨ç­‰å¾…å¦ä¸€ä¸ªå‡½æ•°é‡Šæ”¾èµ„æºï¼‰ã€‚
- å°†éæ— å‰¯ä½œç”¨çš„å‡½æ•°æ•°é‡é™åˆ¶åœ¨æœ€å°èŒƒå›´å†…æ˜¯ä¸€ä¸ªå¥½çš„å®è·µï¼Œè€Œä¸æ˜¯åœ¨åº”ç”¨ç¨‹åºä¸­æ•£å¸ƒæ”¹å˜ç³»ç»Ÿçš„ä»£ç ç‰‡æ®µã€‚

#### æœ‰çŠ¶æ€å‡½æ•°ï¼šè¾“å‡ºä¾èµ–äºå†…éƒ¨å­˜å‚¨çš„ä¿¡æ¯ï¼Œéš¾ä»¥å¹¶è¡Œè¿è¡Œã€‚
#### æ— çŠ¶æ€å‡½æ•°ï¼šä¸å†…éƒ¨å­˜å‚¨ä¿¡æ¯ï¼Œä¾èµ–å¤–éƒ¨å­˜å‚¨æ¥ç»´æŠ¤çŠ¶æ€ï¼Œæ›´é€‚åˆåœ¨FaaSç¯å¢ƒä¸­è¿è¡Œ

- é»˜è®¤æƒ…å†µä¸‹ï¼ŒFaaSä¸­çš„å‡½æ•°æ˜¯åŒæ­¥çš„ï¼Œå› æ­¤å®ƒä»¬ä¼šç«‹å³ï¼ˆæˆ–å‡ ä¹ç«‹å³ï¼‰è¿”å›ç»“æœã€‚
- ç„¶è€Œï¼Œæœ‰äº›å‡½æ•°å¯èƒ½éœ€è¦æ›´é•¿çš„æ—¶é—´æ‰èƒ½è¿”å›ç»“æœï¼Œå› æ­¤åœ¨è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå¯¼è‡´è¶…æ—¶å¹¶é”å®šä¸å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œå› æ­¤æœ€å¥½å°†å®ƒä»¬è½¬æ¢ä¸ºå¼‚æ­¥å‡½æ•°ã€‚
- å¼‚æ­¥å‡½æ•°è¿”å›ä¸€ä¸ªä»£ç ï¼Œé€šçŸ¥å®¢æˆ·ç«¯æ‰§è¡Œå·²å¼€å§‹ï¼ˆé€šå¸¸æ˜¯HTTPçŠ¶æ€ç 202ï¼‰ï¼Œç„¶ååœ¨æ‰§è¡Œå®Œæˆæ—¶è§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚
- åœ¨æ›´å¤æ‚çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨æ¶‰åŠæ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿçš„å‘å¸ƒ/è®¢é˜…æ¨¡å¼æ¥å¤„ç†å¼‚æ­¥å‡½æ•°ã€‚


| ç‰¹æ€§ | å•ä½“åº”ç”¨ | å¾®æœåŠ¡åº”ç”¨ | æ— æœåŠ¡å™¨åº”ç”¨ |
|---|---|---|---|
| **æ¶æ„** | æ‰€æœ‰åŠŸèƒ½åœ¨ä¸€ä¸ªä»£ç åº“å’Œè¿è¡Œæ—¶ç¯å¢ƒä¸­ | å°†åŠŸèƒ½æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡æœ‰è‡ªå·±çš„ä»£ç åº“å’Œè¿è¡Œæ—¶ç¯å¢ƒ | å°†åŠŸèƒ½è¿›ä¸€æ­¥æ‹†åˆ†ä¸ºå‡½æ•°ï¼Œç”±ç¬¬ä¸‰æ–¹å¹³å°ç®¡ç†è¿è¡Œæ—¶ç¯å¢ƒ |
| **éƒ¨ç½²** | ä½œä¸ºä¸€ä¸ªæ•´ä½“éƒ¨ç½² | å„ä¸ªæœåŠ¡ç‹¬ç«‹éƒ¨ç½² | å‡½æ•°æŒ‰éœ€éƒ¨ç½²ï¼Œç”±å¹³å°è‡ªåŠ¨æ‰©å±• |
| **æ‰©å±•** | å‚ç›´æ‰©å±•ï¼ˆå¢åŠ èµ„æºï¼‰ | æ°´å¹³æ‰©å±•ï¼ˆå¢åŠ å®ä¾‹ï¼‰ | è‡ªåŠ¨æ°´å¹³æ‰©å±• |
| **è€¦åˆåº¦** | é«˜è€¦åˆ | ä½è€¦åˆ | æ— è€¦åˆ |
| **æŠ€æœ¯æ ˆ** | é€šå¸¸ä½¿ç”¨å•ä¸€æŠ€æœ¯æ ˆ | å„ä¸ªæœåŠ¡å¯ä»¥ä½¿ç”¨ä¸åŒçš„æŠ€æœ¯æ ˆ | å‡½æ•°å¯ä»¥ä½¿ç”¨ä¸åŒçš„è¯­è¨€å’Œç¯å¢ƒ |
| **å¼€å‘** | å¼€å‘å’Œè°ƒè¯•ç›¸å¯¹ç®€å• | å¼€å‘å’Œè°ƒè¯•æ›´å¤æ‚ï¼Œéœ€è¦æœåŠ¡é—´é€šä¿¡æœºåˆ¶ | å¼€å‘ç®€å•ï¼Œåªéœ€å…³æ³¨å‡½æ•°é€»è¾‘ |
| **æµ‹è¯•** | æµ‹è¯•ç›¸å¯¹ç®€å• | éœ€è¦è¿›è¡Œé›†æˆæµ‹è¯•å’Œç«¯åˆ°ç«¯æµ‹è¯• | æµ‹è¯•ç›¸å¯¹ç®€å•ï¼Œä½†éœ€è¦æ¨¡æ‹Ÿäº‹ä»¶è§¦å‘ |
| **ç»´æŠ¤** | ç»´æŠ¤ç›¸å¯¹ç®€å• | éœ€è¦ç»´æŠ¤å¤šä¸ªæœåŠ¡ï¼Œæ›´å¤æ‚ | ç»´æŠ¤ç”±å¹³å°è´Ÿè´£ï¼Œå¼€å‘è€…åªéœ€å…³æ³¨ä»£ç  |
| **æ•…éšœéš”ç¦»** | æ•…éšœä¼šå½±å“æ•´ä¸ªåº”ç”¨ | æ•…éšœè¢«éš”ç¦»åœ¨å•ä¸ªæœåŠ¡ä¸­ | æ•…éšœè¢«éš”ç¦»åœ¨å•ä¸ªå‡½æ•°ä¸­ |
| **èµ„æºåˆ©ç”¨ç‡** | èµ„æºåˆ©ç”¨ç‡å¯èƒ½è¾ƒä½ | èµ„æºåˆ©ç”¨ç‡è¾ƒé«˜ï¼Œä½†éœ€è¦ç®¡ç†å¤šä¸ªæœåŠ¡ | èµ„æºåˆ©ç”¨ç‡æœ€é«˜ï¼ŒæŒ‰éœ€ä»˜è´¹ |
| **å»¶è¿Ÿ** | é€šå¸¸è¾ƒä½ | å¯èƒ½å¼•å…¥ç½‘ç»œå»¶è¿Ÿ | å¯èƒ½å¼•å…¥ç½‘ç»œå»¶è¿Ÿå’Œå†·å¯åŠ¨å»¶è¿Ÿ |
| **æˆæœ¬** | åˆæœŸæˆæœ¬è¾ƒä½ï¼Œä½†éšç€è§„æ¨¡æ‰©å¤§æˆæœ¬å¢åŠ  | åˆæœŸæˆæœ¬è¾ƒé«˜ï¼Œä½†æ›´å®¹æ˜“æ‰©å±•ï¼Œé•¿æœŸæˆæœ¬å¯èƒ½è¾ƒä½ | æˆæœ¬ä¸ä½¿ç”¨é‡ç›´æ¥ç›¸å…³ï¼Œé€‚åˆäº‹ä»¶é©±åŠ¨çš„åº”ç”¨ |
| **é€‚ç”¨åœºæ™¯** | å°å‹åº”ç”¨ã€å¿«é€ŸåŸå‹å¼€å‘ | å¤§å‹å¤æ‚åº”ç”¨ã€éœ€è¦çµæ´»æ€§å’Œå¯æ‰©å±•æ€§çš„åº”ç”¨ | äº‹ä»¶é©±åŠ¨çš„åº”ç”¨ã€éœ€è¦é«˜åº¦å¼¹æ€§å’Œè‡ªåŠ¨æ‰©å±•çš„åº”ç”¨ |
| **ç¤ºä¾‹å·¥å…·** | ä¼ ç»Ÿçš„ Web åº”ç”¨æ¡†æ¶ | Kubernetes, Docker, Istio | AWS Lambda, Azure Functions, Google Cloud Functions |
**æ€»ç»“:**
*   **å•ä½“åº”ç”¨** ç®€å•æ˜“ç”¨ï¼Œé€‚åˆå°å‹é¡¹ç›®æˆ–å¿«é€ŸåŸå‹å¼€å‘ã€‚
*   **å¾®æœåŠ¡åº”ç”¨** æä¾›æ›´é«˜çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼Œé€‚åˆå¤§å‹å¤æ‚é¡¹ç›®ã€‚
*   **æ— æœåŠ¡å™¨åº”ç”¨** æä¾›æœ€é«˜çš„å¼¹æ€§å’Œè‡ªåŠ¨æ‰©å±•èƒ½åŠ›ï¼Œé€‚åˆäº‹ä»¶é©±åŠ¨çš„åº”ç”¨ã€‚

### Fission
| **æœ¯è¯­/ç»„ä»¶**       | **è¯´æ˜**                                                           |
| --------------- | ---------------------------------------------------------------- |
| **Function**    | å¯è¢«ç‹¬ç«‹è§¦å‘æ‰§è¡Œçš„**ä»£ç æ¨¡å—**ï¼Œè¿”å›å€¼ï¼Œè¿è¡Œåœ¨æŸè¯­è¨€ç¯å¢ƒå†…                                  |
| **Environment** | åŸºäº Docker é•œåƒçš„è¿è¡Œç¯å¢ƒï¼Œè¯­è¨€ç›¸å…³ï¼ˆå¦‚ Pythonï¼‰ï¼Œå¸¦æœ‰ HTTP server å’ŒåŸºæœ¬åº“ï¼Œå¯è¢«è‡ªå®šä¹‰       |
| **Package**     | ç”¨äº**è‡ªå®šä¹‰ç¯å¢ƒ**çš„ä¸€ç»„ä»£ç /ä¾èµ–ï¼ˆå¦‚ï¼šæ·»åŠ  elasticsearch åº“ï¼‰                        |
| **Trigger**     | è§¦å‘å‡½æ•°æ‰§è¡Œçš„äº‹ä»¶ï¼š<br>âœ… HTTP è¯·æ±‚<br>âœ… å®šæ—¶å™¨ï¼ˆCronï¼‰<br>âœ… æ¶ˆæ¯é˜Ÿåˆ—<br>âœ… K8s Job å®Œæˆ |
| **Router**      | è´Ÿè´£å°† HTTP è¯·æ±‚**è·¯ç”±åˆ°å¯¹åº”å‡½æ•°**                                           |
| **Specsï¼ˆè§„èŒƒï¼‰**   | ç”¨ YAML æ–‡ä»¶æè¿° Functionsã€Triggers ç­‰é…ç½®ï¼Œä¾¿äºåº”ç”¨**å£°æ˜å¼éƒ¨ç½²ä¸ç‰ˆæœ¬ç®¡ç†**            |

#### Executors
| **æ‰§è¡Œæ–¹å¼**        | **æœºåˆ¶**                                                 | **ç‰¹ç‚¹**                                        |
| --------------- | ------------------------------------------------------ | --------------------------------------------- |
| **PoolManager** | é»˜è®¤æ–¹å¼ã€‚ä¸ºæ¯ä¸ª environment ç»´æŠ¤**ä¸€ä¸ª pod æ± **ï¼Œå‡½æ•°è°ƒç”¨æ—¶åŠ è½½ package æ‰§è¡Œ | âœ… å¯åŠ¨å¿«ï¼ˆwarm startï¼‰<br>âŒ å•å®ä¾‹ï¼Œæ‰¿è½½å‹åŠ›å°ï¼ˆå¤šçº¿ç¨‹å¤„ç†ï¼Œä½†å®¹æ˜“è¿‡è½½ï¼‰ |
| **NewDeploy**   | æ¯ä¸ªå‡½æ•°æ‹¥æœ‰è‡ªå·±çš„ deploymentï¼Œæ ¹æ®è´Ÿè½½**è‡ªåŠ¨æ‰©å±•å¤šä¸ª pod å®ä¾‹**             | âŒ å¯åŠ¨æ…¢ï¼ˆcold startï¼‰<br>âœ… å¯æ‰©å±•ï¼Œé€‚åˆé«˜å¹¶å‘åœºæ™¯            |


### Fission Cli

#### Function
| **ç±»åˆ«**          | **æ“ä½œè¯´æ˜**       | **å‘½ä»¤ç¤ºä¾‹**                                                      | **å¤‡æ³¨**                   |
| --------------- | -------------- | ------------------------------------------------------------- | ------------------------ |
| **å‡½æ•° Function** | åˆ›å»ºå‡½æ•°           | `fission fn create --name hello --env python --code hello.py` | ä»£ç ä¸º `hello.py` æ–‡ä»¶        |
|                 | æµ‹è¯•å‡½æ•°           | `fission fn test --name hello`                                | é»˜è®¤ä½¿ç”¨ `default` namespace |
|                 | æŸ¥çœ‹æ—¥å¿—           | `fission fn log --name hello --namespace default`             | æŸ¥çœ‹ç‰¹å®šå‘½åç©ºé—´ä¸‹æ—¥å¿—              |
|                 | æ›´æ–°å‡½æ•°ä»£ç          | `fission fn update --name hello --code hello.py`              | ä¿®æ”¹æºä»£ç åéœ€æ‰§è¡Œæ­¤å‘½ä»¤             |
|                 | åˆ—å‡ºå‡½æ•°           | `fission fn list`                                             |                          |
|                 | åˆ é™¤å‡½æ•°           | `fission fn delete --name hello`                              |                          |
|                 | å®¹å™¨è¿è¡Œå‡½æ•° (Alpha) | `fission fn run-container ...`                                | ä½¿ç”¨ Docker å®¹å™¨ä½œä¸ºå‡½æ•°         |

#### Create HTTP Route
| **æ“ä½œè¯´æ˜**    | **å‘½ä»¤ç¤ºä¾‹**                                                                                          | **è¯´æ˜**                              |
| ----------- | ------------------------------------------------------------------------------------------------- | ----------------------------------- |
| åˆ›å»º HTTP è·¯ç”±  | `fission route create --name hellort --function hello --method GET --url /hello`                  | curl è¯·æ±‚åè¿”å› Hello world              |
| åˆ›å»ºå¸¦å‚æ•°çš„è·¯ç”±    | `fission route update --name hello --function hello --method GET --url '/hello/{word:[A-Za-z]+}'` | å‚æ•°é€šè¿‡ header ä¼ å…¥                      |
| ç¤ºä¾‹å‡½æ•°å¤„ç†å‚æ•°    | `request.headers["X-Fission-Params-Word"]`                                                        | Flask é£æ ¼è¯»å– header å‚æ•°                |
| ç»‘å®šå¤šä¸ªè·¯ç”±åˆ°åŒä¸€å‡½æ•° | åˆ›å»ºå¤šä¸ª `route create` å‘½ä»¤                                                                            | åŒä¸€ä¸ªå‡½æ•°æ”¯æŒ GETã€POSTã€DELETE ç­‰å¤šä¸ª HTTP åŠ¨ä½œ |

#### åŒ…ä¸è‡ªå®šä¹‰ç¯å¢ƒï¼ˆPackageï¼‰
| **æ“ä½œè¯´æ˜**        | **å‘½ä»¤ç¤ºä¾‹**                                                                                                 | **è¯´æ˜**                                               |
| --------------- | -------------------------------------------------------------------------------------------------------- | ---------------------------------------------------- |
| åˆ›å»ºè‡ªå®šä¹‰åŒ…          | `fission pkg create --name mypackage --sourcearchive mypackage.zip --env python --buildcmd './build.sh'` | ZIP åŒ…å« `requirements.txt`, `build.sh`, `__init__.py` |
| ä½¿ç”¨ package åˆ›å»ºå‡½æ•° | `fission fn create --name myfunction --env python --pkg mypackage --entrypoint "myfunction.main"`        | æŒ‡å®šå…¥å£å‡½æ•°                                               |

#### å®šæ—¶/èµ„æºè§¦å‘å™¨ï¼ˆTriggersï¼‰
| **ç±»å‹**   | **å‘½ä»¤ç¤ºä¾‹**                                                                                     | **è¯´æ˜**        |
| -------- | -------------------------------------------------------------------------------------------- | ------------- |
| å®šæ—¶è§¦å‘å™¨    | `fission timer create --name everyminuteMyFunction --function myfunction --cron "@every 1m"` | æ¯åˆ†é’Ÿè°ƒç”¨ä¸€æ¬¡å‡½æ•°     |
| K8s èµ„æºç›‘æ§ | `fission watch create --name podEventsMyFunction --function myfunction --type pod`           | pod çŠ¶æ€å˜åŒ–æ—¶è§¦å‘å‡½æ•° |

#### CLI å¯¹è±¡ç¼©å†™å¯¹ç…§è¡¨
| **ç¼©å†™** | **å¯¹åº”å…¨å**      |
| ------ | ------------- |
| `fn`   | Function      |
| `env`  | Environment   |
| `rt`   | Route         |
| `tr`   | Trigger       |
| `pkg`  | Package       |
| `spec` | Specification |

#### Example: Create a HTTP Function
```bash
# 1. åˆ›å»º Python ç¯å¢ƒ
fission env create --name python --image fission/python-env

# 2. å†™ hello.py
echo "def main(): return 'Hello, world!'" > hello.py

# 3. åˆ›å»ºå‡½æ•°
fission fn create --name hello --env python --code hello.py

# 4. åˆ›å»º HTTP è·¯ç”±
fission route create --name hellort --function hello --method GET --url /hello

# 5. è°ƒç”¨å‡½æ•°
curl http://localhost:9090/hello
# è¾“å‡º: Hello, world!
```

### Fission MQ & WebSocket
| **åŠŸèƒ½ç±»åˆ«**     | **è¯´æ˜**                                                                      | **å…³é”®æŠ€æœ¯/ç‰¹ç‚¹**                   |
| ------------ | --------------------------------------------------------------------------- | ----------------------------- |
| æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰     | Fission æ”¯æŒä½¿ç”¨ Kafka æˆ– Redis ç­‰ä½œä¸ºåç«¯ï¼Œå®ç°å‡½æ•°ä¹‹é—´çš„å¼‚æ­¥é€šä¿¡ã€‚ä¸€ä¸ªå‡½æ•°å¯ä»¥å‘é€æ¶ˆæ¯åˆ°é˜Ÿåˆ—ï¼Œå¦ä¸€ä¸ªå‡½æ•°ç¨åæ¶ˆè´¹ã€‚       | å®ç°å‡½æ•°è§£è€¦ã€å¼‚æ­¥å¤„ç†ã€é«˜æ€§èƒ½               |
| WebSocket æ”¯æŒ | ç”¨äºå¤„ç†é•¿ä»»åŠ¡ç»“æœè¿”å›ã€‚å®¢æˆ·ç«¯å‘è¯·æ±‚åå¼€å¯ WebSocket è¿æ¥ï¼ŒFission åå°å‡½æ•°å®Œæˆä»»åŠ¡åé€šè¿‡ WebSocket è¿”å›ç»“æœã€‚      | å®æ—¶ã€åŒå‘é€šä¿¡ï¼›é€‚åˆä¸å‰ç«¯ JS é…åˆä½¿ç”¨         |

### Fission Specs
| **åŠŸèƒ½ç±»åˆ«**        | **è¯´æ˜**                                                                   | **å…³é”®å‘½ä»¤/ç”¨æ³•**                                        |
| --------------- | ------------------------------------------------------------------------ | -------------------------------------------------- |
| è§„èŒƒç®¡ç†ï¼ˆSpecsï¼‰     | ä½¿ç”¨ YAML æ–‡ä»¶æ¥å£°æ˜å‡½æ•°ã€è§¦å‘å™¨ã€è·¯ç”±ç­‰é…ç½®ï¼Œç»Ÿä¸€ç®¡ç†ï¼Œå®ç°åŸºç¡€è®¾æ–½å³ä»£ç ã€å£°æ˜å¼ç®¡ç†ã€‚                          | `fission specs apply` ä¸€æ¬¡æ€§éƒ¨ç½²å…¨éƒ¨ç»„ä»¶                    |
| åˆ›å»º Specs        | ä½¿ç”¨ Fission CLI å‘½ä»¤æ—¶åŠ  `--spec` ä¼šå°†é…ç½®å†™å…¥ specs ç›®å½•ï¼Œè€Œä¸æ˜¯ç«‹å³åº”ç”¨åˆ°é›†ç¾¤ä¸­ã€‚                | `fission function create --spec ...`               |
| åˆ é™¤ Specs å¯¹è±¡     | ä» specs ç›®å½•åˆ é™¤å¯¹åº” YAML æ–‡ä»¶åï¼Œä½¿ç”¨ `fission specs apply --delete` å¯åŒæ­¥ä»é›†ç¾¤ä¸­ç§»é™¤å¯¹åº”å¯¹è±¡ã€‚ | `fission specs apply --delete`                     |
| å‚æ•°ä¼ é€’ï¼ˆConfigMapï¼‰ | å¯é€šè¿‡ Kubernetes çš„ ConfigMap å°†å‚æ•°æ³¨å…¥å‡½æ•°ä¸­ï¼ŒFission ä¼šå°†å…¶æŒ‚è½½ä¸ºæ–‡ä»¶ï¼Œå¯é€šè¿‡è¯»å–æ–‡ä»¶æ¥è·å–å€¼ã€‚        | `kubectl apply -f <configmap>.yaml`                |
| è¯»å–å‚æ•°ï¼ˆPythonï¼‰    | é€šè¿‡å‡½æ•°è¯»å–è·¯å¾„å¦‚ `/configs/<namespace>/<configmap-name>/<key>` è·å–å‚æ•°å€¼ã€‚           | `open('/configs/default/shared-data/ES_USERNAME')` |
| æ³¨æ„äº‹é¡¹            | ConfigMap é€‚ç”¨äºéæ•æ„Ÿå‚æ•°ï¼›æ•æ„Ÿä¿¡æ¯å»ºè®®ä½¿ç”¨ Kubernetes Secretã€‚                           | Secrets ä¼šæŒ‚è½½åœ¨ `/secrets/...` ç›®å½•ä¸­                    |

### Test FaaS
| **ç±»åˆ«**           | **è¯´æ˜**                                                                                 | **ç¤ºä¾‹ / å»ºè®®**                                                                   |
| ---------------- | -------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------- |
| **ä¸ºä½•æµ‹è¯•**         | æå‰å‘ç°é—®é¢˜ï¼Œå‡å°‘ç»´æŠ¤æˆæœ¬ï¼Œæå‡å›¢é˜Ÿåä½œæ•ˆç‡                                                                 | æ—©æœŸå‘ç° bug æˆæœ¬ä½ï¼Œé¿å…å„æ¨¡å—äº’ç›¸â€œç”©é”…â€                                                      |
| **æµ‹è¯•æ–¹å¼**         | è‡ªåŠ¨åŒ–ã€æ—©æœŸã€å…¨é¢ã€å¢é‡                                                                           | ä½¿ç”¨è„šæœ¬/CI å·¥å…·è‡ªåŠ¨æµ‹è¯•ï¼›ç»“åˆè®¾è®¡åŒæ—¶å†™æµ‹è¯•ï¼ˆTDDï¼‰ï¼›æ¯æ”¹ä¸€ç‚¹æµ‹ä¸€ç‚¹                                         |
| **æµ‹è¯•ç›®æ ‡**         | - æ­£å¸¸æƒ…å†µ<br>- è¾¹ç•Œæƒ…å†µ<br>- é”™è¯¯æƒ…å†µ                                                             | <ul><li>æ­£å¸¸è¾“å…¥æ˜¯å¦æˆåŠŸï¼Ÿ</li><li>å¼‚å¸¸è¾“å…¥ï¼ˆå¦‚é™¤0ã€ç©ºå­—ç¬¦ä¸²ï¼‰æ˜¯å¦å¤„ç†ï¼Ÿ</li><li>æœåŠ¡æŒ‚äº†èƒ½å¦ç»™å‡ºåˆç†é”™è¯¯ï¼Ÿ</li></ul> |
| **æµ‹è¯•å¯¹è±¡**         | <ul><li>å‡½æ•°æœ¬èº«</li><li>å‡½æ•°ä¹‹é—´äº¤äº’</li><li>è§¦å‘å™¨è°ƒç”¨æ˜¯å¦æ­£ç¡®</li><li>å¤–éƒ¨ä¾èµ–ï¼ˆå¦‚ DBï¼‰æ˜¯å¦è¿æ¥æ­£å¸¸</li></ul>       | REST API è¾“å…¥è¾“å‡ºã€Kafka æ¶ˆæ¯å¤„ç†ã€å®šæ—¶ä»»åŠ¡ã€ConfigMap/Env å‚æ•°æ˜¯å¦ç”Ÿæ•ˆ                            |
| **ä¸ Fission é…åˆ** | å¯åœ¨å‡½æ•°å¼€å‘æ—©æœŸæœ¬åœ°è¿è¡Œæˆ–é€šè¿‡ CLI å¿«é€Ÿéƒ¨ç½²ï¼Œç»“åˆ curl æˆ– pytest æµ‹è¯•                                           | `fission function test --name <fn>` æˆ– `curl localhost:9090/api/...`           |
| **æŒç»­é›†æˆ (CI)**    | æŠŠå‡½æ•°æµ‹è¯•åŠ å…¥ CI/CD æµæ°´çº¿è‡ªåŠ¨æ‰§è¡Œ                                                                  | åœ¨ GitLab/GitHub Actions ä¸­é…ç½®è‡ªåŠ¨éƒ¨ç½² & æµ‹è¯•                                          |


| **æµ‹è¯•ç±»å‹**                     | **æµ‹è¯•ç›®æ ‡**                      | **ç‰¹ç‚¹**                                        |
| ---------------------------- | ----------------------------- | --------------------------------------------- |
| **Unit Test**                | æµ‹è¯•å•ä¸ªå‡½æ•°/æ¨¡å—æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œ              | - å¿«é€Ÿæ‰§è¡Œ<br>- ä¸ä¾èµ–å¤–éƒ¨ç³»ç»Ÿï¼ˆæ•°æ®åº“ã€ç½‘ç»œç­‰ï¼‰<br>- èšç„¦è¾¹ç•Œæ¡ä»¶ä¸é€»è¾‘åˆ†æ”¯ |
| **Integration Test**         | æµ‹è¯•å¤šä¸ªç»„ä»¶ååŒå·¥ä½œæ˜¯å¦æ­£å¸¸ï¼ˆä¾‹å¦‚å‡½æ•°ä¸æ•°æ®åº“çš„é›†æˆï¼‰   | - å¯ä½¿ç”¨ **mock**ï¼ˆæ¨¡æ‹Ÿä¾èµ–ï¼‰æµ‹è¯•å¼‚å¸¸æƒ…å†µ<br>- è¾ƒæ…¢ï¼Œä½†çœŸå®åæ˜ æ¨¡å—é—´äº¤äº’ |
| **System Test (End-to-End)** | æµ‹è¯•æ•´ä¸ªç³»ç»Ÿä»å…¥å£åˆ°è¾“å‡ºæ˜¯å¦ç¬¦åˆé¢„æœŸï¼ˆå¦‚æœ€ç»ˆç”¨æˆ·è®¿é—®æ¥å£ï¼‰ | - æ¨¡æ‹ŸçœŸå®ç”¨æˆ·<br>- æ£€æŸ¥ APIã€è§¦å‘å™¨ã€å‡½æ•°ã€æ¶ˆæ¯é˜Ÿåˆ—ã€æ•°æ®åº“æ˜¯å¦èƒ½ååŒå·¥ä½œ   |


## Week 8
### 4V of Big Data
| **ç‰¹å¾**       | **è¯´æ˜**                     | **å½±å“ä¸æŒ‘æˆ˜**                                     |
| ------------ | -------------------------- | --------------------------------------------- |
| **Volume**   | æ•°æ®é‡å·¨å¤§ï¼ˆGBã€TBã€PBâ€¦ï¼‰           | è¦æ±‚æ•°æ®åº“å…·å¤‡é«˜å­˜å‚¨èƒ½åŠ›å’Œåˆ†å¸ƒå¼æ‰©å±•èƒ½åŠ›                          |
| **Velocity** | æ•°æ®ç”Ÿæˆ/åˆ°è¾¾é€Ÿåº¦å¿«ï¼ˆå¦‚å®æ—¶ä¼ æ„Ÿå™¨ã€ç¤¾äº¤åª’ä½“ï¼‰    | è¦æ±‚ç³»ç»Ÿå…·å¤‡å®æ—¶æˆ–è¿‘å®æ—¶å¤„ç†èƒ½åŠ›ï¼Œæ”¯æŒé«˜ååå†™å…¥/æ›´æ–°                   |
| **Variety**  | æ•°æ®å½¢å¼å¤šæ ·ï¼ˆç»“æ„åŒ–ã€åŠç»“æ„åŒ–ã€éç»“æ„åŒ–ï¼‰ï¼Œæ¨¡å¼å¤æ‚ | ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“éš¾ä»¥åº”å¯¹ï¼Œéœ€è€ƒè™‘æ–‡æ¡£å‹ã€å›¾æ•°æ®åº“ã€é”®å€¼å¯¹å­˜å‚¨ç­‰éå…³ç³»å‹æ•°æ®åº“ï¼ˆNoSQLï¼‰ |
| **Veracity** | æ•°æ®å‡†ç¡®æ€§ã€å¯ä¿¡åº¦ä¸ä¸€ï¼ˆæ•°æ®æ¥æºå¤šï¼Œè´¨é‡å‚å·®ï¼‰    | æ•°æ®æ¸…æ´—å’ŒéªŒè¯å˜å¾—æ›´é‡è¦ï¼Œéœ€è¦çµæ´»çš„æ•°æ®æ¨¡å‹æ”¯æŒä½ä¸€è‡´æ€§æˆ–ä¸åŒâ€œæ–°é²œåº¦â€çš„æ•°æ®       |

| **æ•°æ®æ¨¡å‹ç±»å‹**                         | **è¯´æ˜**                             | **ä»£è¡¨ç³»ç»Ÿ**                          | **ç‰¹ç‚¹/é€‚ç”¨åœºæ™¯**                        |
| ---------------------------------- | ---------------------------------- | --------------------------------- | ---------------------------------- |
| ğŸ”‘ **Key-Value Store**             | ä»¥é”®-å€¼å¯¹æ–¹å¼å­˜å‚¨æ•°æ®ï¼Œè®¿é—®å¿«é€Ÿä½†åŠŸèƒ½ç®€å•              | Redis, RocksDB, Berkeley DB       | æè‡´æ€§èƒ½ï¼ˆç¼“å­˜ã€æ’è¡Œæ¦œç­‰ï¼‰ï¼Œä¸æ”¯æŒå¤æ‚æŸ¥è¯¢              |
| ğŸ§± **Column Family Store** (åˆ—å¼æ•°æ®åº“) | è¡Œ-åˆ—æ—ç»“æ„ï¼Œæ¯è¡Œå¯æœ‰ä¸åŒåˆ—ï¼Œé€‚åˆç¨€ç–æ•°æ®              | Apache Cassandra, HBase, Accumulo | å†™å¤šè¯»å°‘åœºæ™¯ã€å¤§è§„æ¨¡æ—¶é—´åºåˆ—ã€æ—¥å¿—åˆ†æ                |
| ğŸ“„ **Document Store**              | ä»¥æ–‡æ¡£ï¼ˆJSON/XMLï¼‰ä¸ºå•ä½å­˜å‚¨åŠç»“æ„åŒ–æ•°æ®ï¼Œç»“æ„çµæ´»ï¼Œæ”¯æŒåµŒå¥— | MongoDB, CouchDB, ElasticSearch   | éç»“æ„åŒ–æ•°æ®ã€å¤šå˜ schemaã€æ”¯æŒå…¨æ–‡æ£€ç´¢ã€é¢å‘ API çš„åº”ç”¨ |
| ğŸ”— **Graph Database**              | åŸºäºèŠ‚ç‚¹å’Œè¾¹å»ºæ¨¡ï¼Œé€‚åˆå¤æ‚å…³ç³»æ•°æ®                  | Neo4j, Amazon Neptune             | ç¤¾äº¤ç½‘ç»œã€æ¨èç³»ç»Ÿã€è·¯å¾„æœç´¢åœºæ™¯                   |

### CouchDB vs PostgreSQL vs ElasticSearch
| ç‰¹æ€§ / æ•°æ®åº“ç³»ç»Ÿ  | **CouchDB**         | **PostgreSQL (Federated)** | **ElasticSearch**              |
| ----------- | ------------------- | -------------------------- | ------------------------------ |
| **æ¶æ„ç±»å‹**    | Master-Masterï¼ˆå¤šä¸»ï¼‰   | Federatedï¼ˆåˆ†å¸ƒå¼è”é‚¦æ•°æ®åº“ï¼‰        | Master-eligible + Data Node æ¶æ„ |
| **è¯»å†™æœºåˆ¶**    | æ‰€æœ‰èŠ‚ç‚¹å‡å¯è¯»å†™            | åªæœ‰ä¸»èŠ‚ç‚¹å¯æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå†™æ“ä½œç”±ä¸»èŠ‚ç‚¹è½¬å‘    | å†™æ“ä½œä»…é€šè¿‡ä¸»èŠ‚ç‚¹ï¼ˆä¸»åˆ†ç‰‡ï¼‰ï¼Œè¯»å¯å¹¶è¡Œè®¿é—®å‰¯æœ¬        |
| **æ•°æ®åˆ†å¸ƒ**    | æ‰€æœ‰èŠ‚ç‚¹æŒæœ‰éƒ¨åˆ†æ•°æ®ï¼ˆåˆ†ç‰‡ + å‰¯æœ¬ï¼‰ | æ¯ä¸ªèŠ‚ç‚¹æŒæœ‰ç‰¹å®šè¡¨ï¼Œéœ€å¤–éƒ¨åè°ƒ            | æ•°æ®ç´¢å¼•è¢«åˆ‡æˆåˆ†ç‰‡ï¼Œåˆ†å¸ƒåœ¨æ•°æ®èŠ‚ç‚¹ä¸Šï¼ˆä¸»+å‰¯æœ¬ï¼‰       |
| **å¤±è´¥å®¹å¿æ€§**   | é«˜ï¼šåªè¦è¿˜æœ‰å‰¯æœ¬å­˜åœ¨ï¼Œå…¶ä»–èŠ‚ç‚¹ç»§ç»­æœåŠ¡ | ä½ï¼šå…³é”®èŠ‚ç‚¹æ•…éšœå¯èƒ½å¯¼è‡´æ•´ä¸ªç³»ç»Ÿå¤±æ•ˆ         | ä¸­ç­‰ï¼šä¸»èŠ‚ç‚¹å¤±æ•ˆæ—¶éœ€é€‰ä¸¾æ–°ä¸»èŠ‚ç‚¹               |
| **æ‰©å±•æ€§**     | é«˜ï¼šèŠ‚ç‚¹å¯éšæ—¶åŠ å…¥ï¼Œæ‰‹åŠ¨é‡æ–°åˆ†ç‰‡    | ä½ï¼šæ‰‹åŠ¨ç®¡ç†åˆ†å¸ƒï¼Œåè°ƒå¤æ‚              | é«˜ï¼šè‡ªåŠ¨åˆ†ç‰‡åˆ†é…ã€å‰¯æœ¬å‡è¡¡ã€ä¸»èŠ‚ç‚¹é€‰ä¸¾            |
| **ä¸€è‡´æ€§ä¿è¯**   | æœ€ç»ˆä¸€è‡´æ€§               | å¼ºä¸€è‡´æ€§ï¼ˆéœ€å…¨éƒ¨èŠ‚ç‚¹æˆåŠŸï¼‰              | å¼ºä¸€è‡´æ€§ï¼ˆé€šè¿‡ä¸»èŠ‚ç‚¹ + ä¸¤é˜¶æ®µæäº¤ï¼‰            |
| **ä¸»èŠ‚ç‚¹è§’è‰²å˜åŒ–** | æ— ä¸»èŠ‚ç‚¹æ¦‚å¿µ              | å›ºå®šä¸»å…¥å£ï¼ˆå¦‚ Node 1ï¼‰            | æœ‰ä¸»èŠ‚ç‚¹ï¼Œæ”¯æŒä¸»èŠ‚ç‚¹é€‰ä¸¾                   |
| **CAP æ¨¡å‹å€¾å‘** | **AP**ï¼ˆå¯ç”¨æ€§ + åˆ†åŒºå®¹å¿ï¼‰       | **CA**ï¼ˆä¸€è‡´æ€§ + å¯ç”¨æ€§ï¼‰          | **CP**ï¼ˆä¸€è‡´æ€§ + åˆ†åŒºå®¹å¿ï¼‰                       |
| **ä¸€è‡´æ€§æœºåˆ¶**    | MVCC + å†²çªè§£å†³ï¼ˆRevision å†²çªï¼‰ | Two-phase commit           | Two-phase commitï¼ˆæ•°æ®å¤åˆ¶ï¼‰+ Master é€‰ä¸¾ï¼ˆPaxosï¼‰ |
| **å¯ç”¨æ€§**      | é«˜ï¼šå³ä½¿å‘ç”Ÿç½‘ç»œåˆ†åŒºä¹Ÿèƒ½æ¥å—å†™è¯·æ±‚        | é«˜ï¼šå‰ææ˜¯æ— åˆ†åŒº                   | é™ä½ï¼šä¸»èŠ‚ç‚¹å¤±è”æˆ–æ—  quorum æ—¶åœæ­¢å†™                   |
| **åˆ†åŒºå®¹å¿æ€§**    | æœ‰ï¼šå„èŠ‚ç‚¹ç»§ç»­è¿è¡Œï¼Œç¨åè§£å†³å†²çª         | æ— ï¼šå‘ç”Ÿåˆ†åŒºå³ç»ˆæ­¢äº‹åŠ¡                | æœ‰ï¼šå¯é€‰ä¸¾æ–°ä¸»èŠ‚ç‚¹ï¼Œä½†å¤±å» quorum æ—¶åœæ­¢å†™                |
| **å†™è¯·æ±‚ç­–ç•¥**    | å¤šèŠ‚ç‚¹å¹¶å‘æ¥å—å†™å…¥                | ä»…ä¸»èŠ‚ç‚¹åè°ƒï¼Œå­èŠ‚ç‚¹å¤„ç†éƒ¨åˆ†æ•°æ®           | ä»…ä¸»åˆ†ç‰‡èŠ‚ç‚¹æ¥å—å†™å…¥                               |
| **äº‹åŠ¡ç­–ç•¥**     | ä¹è§‚å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰ï¼Œå¯å†²çª         | ä¸¥æ ¼åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œéœ€å…¨å‘˜æäº¤æ‰æˆåŠŸ           | å†™å…¥å…ˆåˆ°ä¸»åˆ†ç‰‡ â†’ å¤åˆ¶åˆ°å‰¯æœ¬ â†’ ä½¿ç”¨ 2PC ç¡®è®¤              |
| **å†²çªå¤„ç†**     | æ¥å—å¤šä¸ªç‰ˆæœ¬ï¼Œç”±åº”ç”¨å±‚è§£å†³            | ä¸å…è®¸å†²çªï¼Œå†²çªå›æ»š                 | è‡ªåŠ¨å›æ»šå¤±è´¥å†™å…¥ï¼ˆä»¥ primary term åŒºåˆ†æ›´æ–°é¡ºåºï¼‰          |
| **é€‰ä¸»æœºåˆ¶**     | æ— ï¼ˆå»ä¸­å¿ƒåŒ–ï¼‰                  | å›ºå®šä¸»èŠ‚ç‚¹                      | Paxos-likeï¼ˆRaftï¼‰é€‰ä¸»æœºåˆ¶                     |
| **é€‚ç”¨åœºæ™¯**     | å®¹é”™è¦æ±‚é«˜ã€æš‚æ—¶ä¸ä¸€è‡´å¯æ¥å—           | é«˜ä¸€è‡´æ€§è¦æ±‚ã€ä¸å¯å®¹å¿åˆ†åŒº              | å®æ—¶æœç´¢/åˆ†æã€é«˜å†™å…¥ä¸€è‡´æ€§è¦æ±‚                         |
| **ä½¿ç”¨åœºæ™¯**    | IoTã€è¾¹ç¼˜è®¡ç®—ã€æ–­ç½‘å®¹å¿       | æ•°æ®ä¸¥æ ¼ä¸€è‡´éœ€æ±‚ç³»ç»Ÿï¼ˆå¦‚é“¶è¡Œã€è®¢å•ç³»ç»Ÿï¼‰       | å®æ—¶æœç´¢ã€æ—¥å¿—å¤„ç†ã€å¤§æ•°æ®åˆ†æ                |

### CAP Theorem
![CAP Theorem and the Classification of Distributed Processing Algorithms](./cap.png)
| ç®—æ³• / æœºåˆ¶                    | ç”¨é€” / ç‰¹æ€§                                |
| -------------------------- | -------------------------------------- |
| **Two-phase commit (2PC)** | ç¡®ä¿ä¸€è‡´æ€§ï¼Œå†™æ“ä½œåœ¨æ‰€æœ‰èŠ‚ç‚¹æäº¤æˆåŠŸåæ‰çœŸæ­£ç”Ÿæ•ˆï¼›ç¼ºç‚¹ï¼šé‡åˆ°åˆ†åŒºæ—¶ä¸­æ­¢å†™æ“ä½œ |
| **Paxos / Raft**           | ç”¨äºé€‰ä¸»ã€è¾¾æˆä¸€è‡´ï¼ˆä¸»èŠ‚ç‚¹çš„æ“ä½œå¯è¢«è®¤å¯ï¼‰ï¼›ä¿è¯ä¸€è‡´æ€§ä½†ç‰ºç‰²éƒ¨åˆ†å¯ç”¨æ€§    |
| **MVCC**                   | æ¯æ¬¡å†™å…¥ä¸ºæ–°ç‰ˆæœ¬ï¼Œæ— å…¨å±€é”ï¼Œå†²çªç•™å¾…åæœŸå¤„ç†ï¼›é«˜å¯ç”¨ä½†å¼±ä¸€è‡´æ€§        |

### Document-Oriented Databases for Big Data
| **ç‰¹ç‚¹**       | **è¯´æ˜**                     |
| ------------ | -------------------------- |
| é¿å…è·¨è¡¨JOIN | é€‚åˆåˆ†å¸ƒå¼ç³»ç»Ÿ                 |
| å¤©ç„¶æ°´å¹³æ‰©å±• | é€‚åˆæ°´å¹³æ‰©å±•ï¼ˆåˆ†åŒºï¼‰             |
| çµæ´»ç»“æ„å˜åŒ– | æ”¯æŒçµæ´»çš„ç»“æ„å˜åŒ–             |
| æé«˜æ€§èƒ½     | æé«˜æŸ¥è¯¢/å†™å…¥æ€§èƒ½ï¼Œå°¤å…¶æ˜¯è¯»å–å®Œæ•´å¯¹è±¡æ—¶ |
| è‡ªåŒ…å«æ•°æ®   | æ¯ä¸ªæ–‡æ¡£æ˜¯ä¸€ä¸ªè‡ªåŒ…å«çš„æ•°æ®å•å…ƒï¼Œä¾¿äºç‹¬ç«‹å¤„ç†ä¸å¤åˆ¶ |
### Sharding & Replication
| ç‰¹æ€§   | ğŸ“Œ åˆ†ç‰‡ï¼ˆShardingï¼‰                           | ğŸ“Œ å¤åˆ¶ï¼ˆReplicationï¼‰                            |
| ---- | ----------------------------------------- | --------------------------------------------- |
| å®šä¹‰   | å°†æ•°æ®â€œ**æ°´å¹³åˆ’åˆ†**â€ä¸ºå¤šä¸ªå­é›†ï¼Œæ¯ä¸ªå­é›†ç§°ä¸ºä¸€ä¸ª**åˆ†ç‰‡ï¼ˆshardï¼‰**  | å°†**ç›¸åŒçš„æ•°æ®å¤åˆ¶**åˆ°å¤šä¸ªèŠ‚ç‚¹ï¼Œå½¢æˆä¸»ä»ç»“æ„æˆ–å‰¯æœ¬é›†                  |
| ç›®æ ‡   | **åˆ†æ•£è´Ÿè½½**ã€æå‡æ€§èƒ½ã€**æ‰©å±•æ•°æ®å®¹é‡**                  | **å®¹é”™å¤‡ä»½**ã€é«˜å¯ç”¨ã€ç¾å¤‡                               |
| æ•°æ®ä½ç½® | ä¸åŒåˆ†ç‰‡å­˜å‚¨åœ¨**ä¸åŒèŠ‚ç‚¹**ï¼Œæ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨ä¸€éƒ¨åˆ†æ•°æ®               | åŒä¸€ä»½æ•°æ®**å¤åˆ¶åˆ°å¤šä¸ªèŠ‚ç‚¹**                              |
| å…¸å‹ç­–ç•¥ | - å“ˆå¸Œåˆ†ç‰‡ï¼ˆHashï¼‰<br> - èŒƒå›´åˆ†ç‰‡ï¼ˆRangeï¼‰            | - ä¸»ä»å¤åˆ¶ï¼ˆMaster-Slaveï¼‰<br> - å¤šä¸»å¤åˆ¶ï¼ˆMulti-Masterï¼‰ |
| å¥½å¤„   | - æé«˜ç³»ç»Ÿå¤„ç†èƒ½åŠ›<br>- æ”¯æŒå¤§è§„æ¨¡æ•°æ®å­˜å‚¨                 | - å®¹ç¾èƒ½åŠ›å¼º<br>- èŠ‚ç‚¹æ•…éšœæ—¶ä»å¯æœåŠ¡                        |
| ç¼ºç‚¹   | - æŸ¥è¯¢å¯èƒ½æ¶‰åŠå¤šä¸ªåˆ†ç‰‡ï¼ˆè·¨åˆ†ç‰‡ï¼‰<br> - åˆ†ç‰‡é”®é€‰æ‹©éœ€è°¨æ…          | - å¢åŠ å­˜å‚¨æˆæœ¬<br> - å†™å…¥ä¸€è‡´æ€§æ§åˆ¶å¤æ‚                      |
| å…³ç³»   | ğŸ” å¯ç»„åˆä½¿ç”¨ï¼š<br>**æ¯ä¸ªåˆ†ç‰‡å†…éƒ¨å¯ä»¥å†è¿›è¡Œå¤åˆ¶**ä»¥ä¿è¯æ•°æ®å®‰å…¨ä¸é«˜å¯ç”¨ |                                               |


### ElasticSearch
| âœ… **æ“…é•¿ (Good at)**        | âŒ **ä¸æ“…é•¿ (Bad at)**                   |
| ------------------------- | ------------------------------------ |
| ğŸ” å…¨æ–‡æœç´¢ï¼ˆFull-text searchï¼‰ | ğŸ”— å­˜å‚¨å…³è”æ•°æ®ï¼ˆå¦‚å‘ç¥¨ä¸å®¢æˆ·ï¼‰<br>ä¸æ”¯æŒå¤æ‚å…³ç³»å’Œé«˜æ•ˆ Join |
| ğŸ•’ åŸºäºæ—¶é—´çš„æ•°æ®æ£€ç´¢ï¼ˆå¦‚æ—¥å¿—ã€ç›‘æ§æ•°æ®ï¼‰    | ğŸ”„ é¢‘ç¹ä¿®æ”¹æ•°æ®ï¼ˆæ›´æ–°ä¼šç”Ÿæˆæ–°æ–‡æ¡£ï¼Œå¯¼è‡´ç´¢å¼•è†¨èƒ€ï¼‰           |
| ğŸ“¦ å­˜å‚¨éç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚ JSON æ–‡æ¡£ï¼‰    | ğŸ” å¤šæ–‡æ¡£äº‹åŠ¡ï¼ˆåªèƒ½ä¿è¯å•æ–‡æ¡£çš„äº‹åŠ¡å®‰å…¨ï¼‰               |
| ğŸ“ˆ å¿«é€Ÿæ£€ç´¢å’Œèšåˆå¤§é‡æ•°æ®            | ğŸ“Š è·¨ç»´åº¦å¤æ‚åˆ†æï¼ˆå¦‚æ•°æ®ä»“åº“ OLAP åˆ†æï¼‰            |
| ğŸ“‚ å­˜å‚¨ä¸å¸¸å˜åŒ–çš„æ•°æ®ï¼ˆå¦‚é™æ€æ–‡æ¡£ã€å†å²è®°å½•ï¼‰  | âš™ï¸ å¤šçº§åµŒå¥—æŸ¥è¯¢ä¸çˆ¶å­å…³ç³»æŸ¥è¯¢ï¼šè™½ç„¶å¯åšä½†æ€§èƒ½å·®            |

#### ES Concepts
| æœ¯è¯­              | è¯´æ˜                                     | ç±»æ¯”å…³ç³»ï¼ˆå…³ç³»å‹æ•°æ®åº“ï¼‰  |
| --------------- | -------------------------------------- | ------------- |
| **Index**       | ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„ã€Œæ•°æ®åº“ã€                       | æ•°æ®åº“           |
| **Documents**   | ElasticSearch ä¸­çš„æ•°æ®é¡¹ï¼Œé‡‡ç”¨ JSON æ ¼å¼è¡¨è¾¾       | è¡¨ä¸­çš„è¡Œï¼ˆè®°å½•ï¼‰      |
| **Data stream** | ä¸€ç»„éµå¾ªç›¸åŒå‘½åæ¨¡å¼çš„ç´¢å¼•ï¼Œå¸¸ç”¨äºæ—¥å¿—è½®è½¬                  | â€”             |
| **Shard**       | ç´¢å¼•çš„æ°´å¹³åˆ†åŒº                                | æ•°æ®åº“åˆ†ç‰‡         |
| **Replicas**    | shard çš„å‰¯æœ¬æ•°é‡ï¼Œ2 ä¸ªå‰¯æœ¬å³æœ‰ 1 ä¸ªä¸» shard + 2 ä¸ªå‰¯æœ¬ | æ•°æ®å†—ä½™ï¼Œæé«˜å¯ç”¨æ€§    |
| **Node**        | ElasticSearch çš„ä¸€ä¸ªå®ä¾‹                    | æœåŠ¡å™¨èŠ‚ç‚¹         |
| **Cluster**     | å¤šä¸ªèŠ‚ç‚¹åä½œç®¡ç†åŒä¸€ç´¢å¼•                           | é›†ç¾¤            |
| **Mappings**    | æ˜ å°„å®šä¹‰ï¼ŒJSON æ–‡æ¡£å­—æ®µä¸æ•°æ®ç±»å‹åŠç´¢å¼•æ–¹å¼çš„æ˜ å°„            | æ•°æ®åº“æ¨¡å¼ï¼ˆschemaï¼‰ |

#### ELK Stack
| ç»„ä»¶å               | åŠŸèƒ½è¯´æ˜                                        |
| ----------------- | ------------------------------------------- |
| **ElasticSearch** | å­˜å‚¨å’Œæœç´¢æ–‡æ¡£çš„æ ¸å¿ƒç»„ä»¶                                |
| **FileBeat**      | ç›‘å¬æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯æ—¥å¿—æ–‡ä»¶ï¼‰çš„æ›´æ–°ï¼Œå¹¶å°†æ•°æ®å‘é€åˆ°ç´¢å¼•                  |
| **MetricBeat**    | ç›‘æ§ç³»ç»ŸçŠ¶æ€ï¼Œå°†æŒ‡æ ‡æ•°æ®å­˜å‚¨åˆ°ç´¢å¼•                           |
| **LogStash**      | è½¬æ¢æ”¶é›†åˆ°çš„æ•°æ®ï¼ˆå¦‚ FileBeat å’Œ MetricBeat çš„æ•°æ®ï¼‰ï¼Œå†å­˜å…¥ç´¢å¼• |
| **Kibana**        | åŸºäºç½‘é¡µçš„ç”¨æˆ·ç•Œé¢ï¼Œæ”¯æŒæŸ¥è¯¢å’Œç®¡ç† ElasticSearch é›†ç¾¤          |
| **FunctionBeat**  | ç›‘æ§æ— æœåŠ¡å™¨ç¯å¢ƒï¼ˆå¦‚ AWS Lambdaï¼‰æ´»åŠ¨ï¼Œå¹¶å­˜å‚¨ç»“æœåˆ°ç´¢å¼•           |
| **HeartBeat**     | æ£€æŸ¥æœåŠ¡çŠ¶æ€å¹¶å°†ç»“æœå­˜å‚¨åˆ°ç´¢å¼•                             |
| **Observability** | è§‚å¯Ÿç³»ç»ŸæŒ‡æ ‡ã€åˆ†æå¹¶ç”Ÿæˆæ´å¯Ÿ                              |
| **Security**      | è´Ÿè´£å®‰å…¨æ–¹é¢çš„ç›‘æ§å’Œåˆ†æ                                |

#### ElasticSearch Cluster and Scale
| ä¸»é¢˜             | è¯´æ˜                                                                        |
| -------------- | ------------------------------------------------------------------------- |
| **èŠ‚ç‚¹è§’è‰²**       | æ¯ä¸ªèŠ‚ç‚¹å¯è¢«èµ‹äºˆä¸€ä¸ªæˆ–å¤šä¸ªè§’è‰²ï¼Œä¸»è¦è§’è‰²æœ‰ï¼š<br>- **Master**ï¼šåè°ƒé›†ç¾¤æ“ä½œ<br>- **Data**ï¼šç®¡ç†æ•°æ®          |
| **MasterèŠ‚ç‚¹**   | è´Ÿè´£åè°ƒé›†ç¾¤ï¼Œæ¯”å¦‚åˆ†é…åˆ†ç‰‡ã€ç›‘æ§èŠ‚ç‚¹å¥åº·ã€åˆ›å»ºç´¢å¼•ç­‰ã€‚<br>é›†ç¾¤å¯æœ‰å¤šä¸ªmaster-eligibleèŠ‚ç‚¹ï¼Œä½†åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªä¸»masterèŠ‚ç‚¹ |
| **DataèŠ‚ç‚¹**     | ç®¡ç†æ•°æ®ï¼Œä½†å¦‚æœä¸æ˜¯master-eligibleï¼Œåˆ™ä¸èƒ½æˆä¸ºmasteræˆ–å‚ä¸é€‰ä¸¾                                |
| **Masteræ•…éšœå¤„ç†** | å½“masterèŠ‚ç‚¹å¤±è´¥ï¼Œå…¶ä»–master-eligibleèŠ‚ç‚¹ä¸¾è¡Œé€‰ä¸¾ï¼Œé€‰å‡ºæ–°çš„master<br>å‰©ä½™èŠ‚ç‚¹ä¸Šçš„å‰¯æœ¬åˆ†ç‰‡ä¼šå‡çº§ä¸ºä¸»åˆ†ç‰‡æ›¿ä»£å¤±æ•ˆåˆ†ç‰‡ |
| **æ‰©å±•æ–¹å¼**       | - **å‚ç›´æ‰©å±•**ï¼šå‡çº§ç°æœ‰èŠ‚ç‚¹æ€§èƒ½å¹¶è¿ç§»æ•°æ®<br>- **æ°´å¹³æ‰©å±•**ï¼šæ–°å¢èŠ‚ç‚¹ï¼Œåˆ†ç‰‡ä¼šè‡ªåŠ¨è¿ç§»ä»¥è´Ÿè½½å‡è¡¡                  |
| **èŠ‚ç‚¹ç§»é™¤**       | ç§»é™¤æ•°æ®èŠ‚ç‚¹æ—¶ï¼Œè¯¥èŠ‚ç‚¹çš„ä¸»åˆ†ç‰‡éœ€ç”±å‰©ä½™èŠ‚ç‚¹ä¸Šçš„å‰¯æœ¬åˆ†ç‰‡å‡çº§ä¸ºä¸»åˆ†ç‰‡ï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§                                 |

#### ESé›†ç¾¤å¥åº·çŠ¶æ€
| çŠ¶æ€ | å«ä¹‰ | æ•°æ®å¯ç”¨æ€§ | å†—ä½™å®‰å…¨æ€§ |
| ---- | ---- | ---------- | ---------- |
| Green | ä¸€åˆ‡æ­£å¸¸ï¼Œä¸» + å‰¯æœ¬éƒ½åœ¨ | âœ… | âœ… |
| Yellow | ä¸»åˆ†ç‰‡åœ¨ï¼Œå‰¯æœ¬ç¼ºå¤± | âœ… | âŒ |
| Red | ä¸»åˆ†ç‰‡æˆ–æ•°æ®ä¸¢å¤±ï¼ŒæœåŠ¡ä¸­æ–­ | âŒ | âŒ |

#### ES Sharding
| ä¸»é¢˜         | è¯´æ˜                                                            |
| ---------- | ------------------------------------------------------------- |
| **é»˜è®¤åˆ†ç‰‡æ–¹å¼** | ElasticSearch é»˜è®¤ä½¿ç”¨åŸºäºæ–‡æ¡£IDçš„å“ˆå¸Œåˆ†ç‰‡ï¼Œç¡®ä¿æ¯ä¸ªåˆ†ç‰‡å†…æ–‡æ¡£æ•°é‡å¤§è‡´å‡è¡¡                 |
| **åˆ†ç‰‡å’Œå‰¯æœ¬æ•°** | æ¯ä¸ªç´¢å¼•å¯ä»¥è®¾ç½®ä¸åŒæ•°é‡çš„ä¸»åˆ†ç‰‡ï¼ˆshardsï¼‰å’Œå‰¯æœ¬ï¼ˆreplicasï¼‰                         |
| **è·¯ç”±æ§åˆ¶**   | å¯é€šè¿‡æŒ‡å®šè·¯ç”±å€¼ï¼ˆroutingï¼‰å°†æ–‡æ¡£å­˜å‚¨åˆ°ç‰¹å®šåˆ†ç‰‡ï¼Œå®ç°èŒƒå›´åˆ†ç‰‡ï¼ˆrange shardingï¼‰ï¼Œè¦†ç›–é»˜è®¤å“ˆå¸Œåˆ†ç‰‡æœºåˆ¶ |
| **æœç´¢çº¿ç¨‹æ•°**  | æœç´¢æ—¶æ¯ä¸ªåˆ†ç‰‡ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹ï¼›åŒä¸€åˆ†ç‰‡å¯æ”¯æŒå¤šé‡å¹¶å‘æœç´¢                                   |
| **åˆ†ç‰‡å¤§å°å½±å“** | åˆ†ç‰‡è¶Šå¤§ï¼Œæœç´¢è¶Šæ…¢ï¼›åˆ†ç‰‡æ•°é‡å¤šåˆ™èµ„æºæ¶ˆè€—æ›´å¤§                                        |
| **åˆ†ç‰‡ä¼˜åŒ–å»ºè®®** | ç»éªŒæ³•åˆ™ï¼šæ¯ä¸ªåˆ†ç‰‡çº¦å®¹çº³2äº¿æ–‡æ¡£æˆ–10GB\~50GBæ•°æ®ï¼›é€šå¸¸å»ºè®®åˆ†ç‰‡æ•°ç•¥å¤šäºè¿‡å°‘ï¼Œä»¥æ”¯æŒæ›´å¥½æ‰©å±•æ€§           |
| **åˆ†ç‰‡æ•°é™åˆ¶**  | ä¸»åˆ†ç‰‡æ•°å†³å®šäº†ç´¢å¼•æœ€å¤§å¯ç”¨çš„èŠ‚ç‚¹æ•°ï¼Œç´¢å¼•æ•°æ®é€šå¸¸ä¼šè¶…é¢„æœŸå¢é•¿ï¼Œåº”ç•™æœ‰å¼¹æ€§                          |

:::info
ElasticSearch Index = MySQL Database
ElasticSearch Document = MySQL Row
ElasticSearch Field = MySQL Column
:::

#### ES Index Life-cycle
| ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ     | è¯´æ˜                                              |
| ---------- | ----------------------------------------------- |
| **Hot**    | ç´¢å¼•å¤„äºæ´»è·ƒçŠ¶æ€ï¼Œé¢‘ç¹å†™å…¥å’ŒæŸ¥è¯¢ï¼Œæ€§èƒ½è¦æ±‚æœ€é«˜ï¼Œé€šå¸¸åˆ†é…åˆ°é«˜æ€§èƒ½çš„ `data_hot` èŠ‚ç‚¹ |
| **Warm**   | æ•°æ®è®¿é—®é¢‘ç‡é™ä½ï¼Œå†™å…¥åœæ­¢æˆ–å‡å°‘ï¼Œç´¢å¼•è½¬ç§»åˆ°æ€§èƒ½ç¨ä½çš„ `data_warm` èŠ‚ç‚¹ä»¥èŠ‚çœèµ„æº |
| **Cold**   | æ•°æ®è®¿é—®æå°‘ï¼Œä¸»è¦ç”¨äºå½’æ¡£ï¼Œç´¢å¼•è½¬ç§»åˆ°ä½æˆæœ¬çš„ `data_cold` èŠ‚ç‚¹ï¼ŒæŸ¥è¯¢æ€§èƒ½è¾ƒä½   |
| **Frozen** | è¿›ä¸€æ­¥é™ä½æ€§èƒ½å’Œæˆæœ¬ï¼Œç´¢å¼•å‡ ä¹ä¸è¢«è®¿é—®ï¼Œä»…ä¿ç•™æå°‘çš„èµ„æºä»¥å¤‡æŸ¥è¯¢                |
| **Delete** | ç´¢å¼•ç”Ÿå‘½å‘¨æœŸç»ˆç‚¹ï¼Œç´¢å¼•è¢«åˆ é™¤ä»¥é‡Šæ”¾å­˜å‚¨ç©ºé—´                           |

#### ES CURD
| ä¸»é¢˜            | è¯´æ˜                                                                                                                             |                    |
| ------------- | ------------------------------------------------------------------------------------------------------------------------------ | ------------------ |
| **æ’å…¥æ–‡æ¡£æ—¶å…ƒæ•°æ®**  | è‡ªåŠ¨æ·»åŠ  `_id`ï¼ˆæ–‡æ¡£IDï¼Œå”¯ä¸€ï¼‰ã€`_index`ï¼ˆæ‰€å±ç´¢å¼•ï¼‰ã€`_version`ï¼ˆç‰ˆæœ¬ï¼‰ã€`_primary_term`ï¼ˆä¸»åˆ†ç‰‡æ ‡è¯†ï¼‰ã€`_seq_no`ï¼ˆé¡ºåºå·ï¼‰ã€`_source`ï¼ˆåŸå§‹JSONï¼‰ã€`_routing`ï¼ˆåˆ†ç‰‡è·¯ç”±ï¼ŒæŒ‡å®šæ—¶ï¼‰ |                    |
| **é»˜è®¤è¿”å›å­—æ®µ**    | æœç´¢ç»“æœé»˜è®¤ä¸è¿”å›æ‰€æœ‰å…ƒæ•°æ®ï¼Œå¢åŠ `_score`å­—æ®µè¡¨ç¤ºç›¸å…³åº¦ï¼ˆè¶Šé«˜è¶Šç›¸å…³ï¼‰                                                                                        |                    |
| **æ–‡æ¡£ID**      | å¦‚æœè¯·æ±‚ä¸­æ²¡æŒ‡å®šï¼ŒElasticSearchè‡ªåŠ¨ç”Ÿæˆï¼›IDå¿…é¡»å”¯ä¸€ï¼Œé‡å¤æ’å…¥ä¼šæŠ¥é”™                                                                                      |                    |
| **æŸ¥è¯¢è¯­è¨€**      | - Query DSLï¼ˆJSONæ ¼å¼ï¼ŒLuceneæŸ¥è¯¢è¶…é›†ï¼‰<br>- SQLï¼ˆæœ‰é™æ”¯æŒï¼‰<br>- EQLï¼ˆäº‹ä»¶æŸ¥è¯¢ï¼‰<br>- ES QLï¼ˆç®¡é“SQLï¼Œå«è½¬æ¢å’Œåœ°ç†æŸ¥è¯¢ï¼‰ |
| **SQLé™åˆ¶**     | ä¸æ”¯æŒå®Œæ•´SQLåŠŸèƒ½ï¼ˆæ— JOINã€ä¸æ”¯æŒDISTINCTã€åœ°ç†æŸ¥è¯¢æœ‰é™ã€æ— æ³•è¿”å›æ•°ç»„ç­‰ï¼‰                                                                                   |                    |
| **å¢å¼ºSQLèƒ½åŠ›æ–¹æ³•** | - ä½¿ç”¨`/_sql/translate` APIå°†SQLè½¬æˆQuery DSL<br>- SQLæŸ¥è¯¢ä¸­åŠ å…¥Query DSLè¿‡æ»¤å­å¥                                                            |                    |
| **æ›´æ–°å’Œåˆ é™¤æ–‡æ¡£**   | ä½¿ç”¨HTTP PUTå’ŒDELETEè¯·æ±‚                                                                                                            |                    |
| **å¹¶å‘æ›´æ–°å†²çªé˜²èŒƒ**  | æ›´æ–°/åˆ é™¤æ—¶åº”æºå¸¦`_seq_no`å’Œ`_primary_term`å…ƒæ•°æ®ï¼Œé˜²æ­¢å†²çªï¼ˆHTTP 409ï¼‰                                                                           |                    |
| **å†²çªåŸå› **      | å¹¶å‘è¯·æ±‚æ— é”æœºåˆ¶ï¼Œæ–‡æ¡£å¯èƒ½è¢«å…¶ä»–è¯·æ±‚ä¿®æ”¹ï¼Œéœ€å…ˆè¯»å–æ–‡æ¡£è·å–æœ€æ–°å…ƒæ•°æ®å†æ›´æ–°                                                                                          |                    |


#### Query DSL Example
``` json
// A query to select all H1 students that are named â€œJohnâ€

POST /students/_search
{
  "query": {
    "bool": {
      "must": [
        {
          "range": {
            "mark": {
              "gte": 80
              }
            }
          },
          {
            "match": {
              "name": "john *"
              }
            }
          ]
        }
    }
}
```
- â€œmustâ€ means â€œandâ€
- â€œshouldâ€ means â€œorâ€
- "filter" means "where"

#### SQL Example
``` json
POST /_sql?format=txt
{
  "query": "SELECT data.status, data.type FROM \"filebeat-8.7.1\" WHERE MATCH('message', 'Windows')"
}
```
- `MATCH` is a full-text search operator that searches for the specified text in the `message` field.

#### ES SQL Pagination
* é»˜è®¤æƒ…å†µä¸‹ï¼ŒElasticSearch SQL æŸ¥è¯¢æœ€å¤šè¿”å› 1000 æ¡ç»“æœã€‚
* ä½¿ç”¨ **æ¸¸æ ‡ï¼ˆcursorï¼‰** æ¥åˆ†é¡µï¼Œæ¸¸æ ‡ç±»ä¼¼äºä¹¦ç­¾ï¼Œè®°å½•å½“å‰æŸ¥è¯¢ä½ç½®ã€‚
* **ç¬¬ä¸€æ¬¡æŸ¥è¯¢** è¿”å›ç»“æœå’Œæ¸¸æ ‡IDï¼Œä¾‹å¦‚ï¼š

```http
POST /_sql?format=json
{
  "query": "SELECT HISTOGRAM(\"@timestamp\", INTERVAL 1 HOUR) AS H, COUNT(*) AS N FROM \"filebeat-8.7.1\" GROUP BY H"
}
```

* è¿”å›çš„å“åº”ä¸­åŒ…å« `"cursor"` å­—æ®µï¼Œè¿™ä¸ªå­—æ®µå¿…é¡»åœ¨**åç»­åˆ†é¡µè¯·æ±‚**ä¸­å¸¦ä¸Šï¼Œç”¨æ¥è·å–ä¸‹ä¸€é¡µæ•°æ®ï¼š

```http
POST /_sql?format=json
{
  "query": "SELECT HISTOGRAM(\"@timestamp\", INTERVAL 1 HOUR) AS H, COUNT(*) AS N FROM \"filebeat-8.7.1\" GROUP BY H",
  "cursor": "<ä¸Šä¸€æ¬¡è¿”å›çš„æ¸¸æ ‡ID>"
}
```

* å½“è¿”å›çš„ `"cursor"` å­—æ®µä¸ºç©ºæ—¶ï¼Œè¡¨ç¤ºæ‰€æœ‰æ•°æ®å·²ç»è¿”å›å®Œæ¯•ã€‚
* æ¸¸æ ‡æ˜¯æœ‰æ—¶æ•ˆçš„ï¼Œé€šå¸¸ä¼šåœ¨å‡ åˆ†é’Ÿåå¤±æ•ˆï¼Œéœ€è¦åŠæ—¶ä½¿ç”¨ã€‚

#### ES SQL Others
- Metric Aggregation
- Bucket Aggregation
- OLAP

#### Parent-Child Relationship: Mapping Definition
- In ElasticSearch, you can explicitly establish a **parent-child relationship** between two documents through mappings.
- For example, a `"course"` document can have multiple `"student"` documents as child documents.

- This is similar to a one-to-many relationship in relational databases.  
- In ElasticSearch, the `join` field type is used to define this relationship. For example:

```json
PUT my_index
{
  "mappings": {
    "properties": {
      "my_join_field": {
        "type": "join",
        "relations": {
          "course": "student"
        }
      }
    }
  }
}
```
- In this example:
  - `my_join_field` is a special field used to represent the parent-child relationship between documents.
  - `"course": "student"` indicates that each `"course"` document can have multiple `"student"` child documents.

- When inserting documents, you need to specify whether it is a parent or child. For example:
  - Inserting a course document:
  ```json
  POST my_index/_doc/1
  {
    "title": "Math 101",
    "my_join_field": "course"
  }
  ```
  - Inserting a student child document (must reference the parent document ID):
  ```json
  POST my_index/_doc/2?routing=1
  {
    "name": "Alice",
    "my_join_field": {
      "name": "student",
      "parent": "1"
    }
  }
  ```

#### Vector Data
- Vectors (both sparse and dense) can be loaded into ElasticSearch and queried for equality and k-Nearest Neighbours searches
- During the mapping definition, a vector is defined with its type, no. of dimensions, the distance to use and some index parameters
```json
{
  "type": "dense_vector",
  "dims": 5,
  "similarity": "l2_norm",
  "m": 32,
  "ef_construction": 100
}
```
- ElasticSearch uses the Hierarchical Navigable Small World algorithm for vector searches

## Week 9
### Virtualization Motivations
| **ç›®æ ‡**                           | **è¯´æ˜**                |
| -------------------------------- | --------------------- |
| **æœåŠ¡å™¨æ•´åˆ** (Server Consolidation) | - æé«˜èµ„æºåˆ©ç”¨ç‡<br>- é™ä½èƒ½æºæ¶ˆè€— |
| **æŒ‰éœ€åˆ›å»ºè™šæ‹Ÿæœº**                      | - æ— éœ€è´­ä¹°ç¡¬ä»¶<br>- æ”¯æŒå…¬æœ‰äº‘è®¡ç®— |
| **å®‰å…¨ä¸éš”ç¦»**                        | - å¤šä¸ªç”¨æˆ·å…±äº«åŒä¸€å°æœºå™¨ï¼Œäº’ä¸å½±å“    |
| **ç¡¬ä»¶æ— å…³æ€§**                        | - å¯è½»æ¾è¿ç§»åˆ°å…¶ä»–ç¡¬ä»¶ä¸Šè¿è¡Œ       |

### Virtualization Principles
| **å±æ€§**              | **è§£é‡Š**                              |
| ------------------- | ----------------------------------- |
| **Fidelityï¼ˆçœŸå®åº¦ï¼‰**   | å®¢æˆ·æ“ä½œç³»ç»Ÿè¿è¡Œåœ¨è™šæ‹Ÿç¯å¢ƒä¸­çš„è¡Œä¸ºåº”ä¸åœ¨çœŸå®ç‰©ç†æœºä¸Šä¸€è‡´ï¼ˆé™¤æ—¶é—´å½±å“ï¼‰ |
| **Performanceï¼ˆæ€§èƒ½ï¼‰** | å¤§éƒ¨åˆ†æŒ‡ä»¤åº”ç”±ç¡¬ä»¶ç›´æ¥æ‰§è¡Œï¼Œæ— éœ€ VMM å¹²é¢„             |
| **Safetyï¼ˆå®‰å…¨æ€§ï¼‰**     | æ‰€æœ‰èµ„æºè®¿é—®éƒ½ç”± VMM ç®¡æ§ï¼Œç¡®ä¿éš”ç¦»å’Œå®‰å…¨             |


| **æœ¯è¯­**                                         | **å®šä¹‰**                                                                                           |
| ---------------------------------------------- | ------------------------------------------------------------------------------------------------ |
| **Virtual Machine Monitor (VMM) / Hypervisor** | æ˜¯ç‰©ç†ç¡¬ä»¶ä¸è™šæ‹Ÿæœº/å®¢æˆ·æ“ä½œç³»ç»Ÿä¹‹é—´çš„è™šæ‹ŸåŒ–å±‚ã€‚å®ƒè´Ÿè´£èµ„æºè°ƒåº¦å’Œéš”ç¦»ã€‚ç‰¹ç‚¹åŒ…æ‹¬ï¼š<br> - è™šæ‹Ÿæœºç¯å¢ƒåº”ä¸ç‰©ç†æœºç¯å¢ƒä¸€è‡´<br> - åªæœ‰è½»å¾®æ€§èƒ½ä¸‹é™<br> - è™šæ‹Ÿæœºçœ‹èµ·æ¥æ§åˆ¶äº†ç³»ç»Ÿèµ„æº |
| **Virtual Machine (VM)**                       | ä½¿ç”¨ç¡¬ä»¶/è½¯ä»¶æ¨¡æ‹Ÿå‡ºçš„æœåŠ¡å™¨ï¼Œå¯è¿è¡Œå®¢æˆ·æ“ä½œç³»ç»Ÿï¼Œå°±åƒçœŸå®çš„ç‰©ç†æœºä¸€æ ·                                                              |
| **Guest Operating System**                     | è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸­çš„æ“ä½œç³»ç»Ÿï¼ŒåŸæœ¬åº”è¯¥è¿è¡Œåœ¨ç‹¬ç«‹çš„ç‰©ç†æœºä¸Š                                                                      |

### Classification of Instructions åº•å±‚ CPU æŒ‡ä»¤é›†
| ç±»åˆ«                                       | å®šä¹‰ 
| ---------------------------------------- | ----------------------------------------- | 
| ğŸ”’ **Privileged Instructions**<br>ï¼ˆç‰¹æƒæŒ‡ä»¤ï¼‰ | **åªæœ‰åœ¨å†…æ ¸æ¨¡å¼ä¸‹æ‰§è¡Œä¸æŠ¥é”™**ï¼Œå¦‚æœåœ¨ç”¨æˆ·æ¨¡å¼æ‰§è¡Œä¼šå¯¼è‡´ trapï¼ˆé™·å…¥å†…æ ¸ï¼‰ | `CLI`, `STI`, `HLT`, `IN`, `OUT`, `LGDT`, `LIDT`, `MOV to CRx` |
| âš ï¸ **Sensitive Instructions**<br>ï¼ˆæ•æ„ŸæŒ‡ä»¤ï¼‰  | **è¡Œä¸ºä¾èµ–äºå½“å‰ç¡¬ä»¶çŠ¶æ€æˆ–æƒé™çº§åˆ«**ï¼Œå³ä½¿ä¸ trapï¼Œä¹Ÿå¯èƒ½äº§ç”Ÿä¸åŒç»“æœ   |                     |
| âœ… **Innocuous Instructions**<br>ï¼ˆæ— å®³æŒ‡ä»¤ï¼‰   | **ä¸ä¾èµ–æƒé™æˆ–ç¡¬ä»¶çŠ¶æ€**ï¼Œå¯åœ¨ç”¨æˆ·æ€è‡ªç”±æ‰§è¡Œï¼Œä¸å½±å“ç³»ç»Ÿå®Œæ•´æ€§         |

### Virtualization
| æ¦‚å¿µ                 | æè¿°                          |
| ------------------ | --------------------------- |
| Popek-Goldberg å®šç†  | è™šæ‹ŸåŒ–è¦æ±‚æ•æ„ŸæŒ‡ä»¤éƒ½å¿…é¡»æ˜¯ç‰¹æƒæŒ‡ä»¤           |
| x86 é—®é¢˜             | éƒ¨åˆ†æ•æ„ŸæŒ‡ä»¤æ— æ³•è§¦å‘ trapï¼Œä¸èƒ½å®‰å…¨è™šæ‹ŸåŒ–     |
| Trap-and-Emulate   | å°† Guest OS çš„è¡Œä¸ºé€šè¿‡ trap æ•æ‰å¹¶æ¨¡æ‹Ÿ |
| Shadow Structures  | VMM ç»´æŠ¤é¡µè¡¨ç­‰å…³é”®èµ„æºçš„å½±å­ç»“æ„ä»¥ä¿æŒä¸€è‡´æ€§    |
| Intel VT / AMD SVM | ç¡¬ä»¶æä¾›æ”¯æŒï¼Œç¡®ä¿ x86 æ¶æ„ä¹Ÿå¯ä»¥é«˜æ•ˆè™šæ‹ŸåŒ–    |

### Ring æƒé™ç­‰çº§
| Ring çº§åˆ«  | æƒé™ | ä½œç”¨                       |
| -------- | -- | ------------------------ |
| Ring 0   | é«˜  | VMMï¼ˆè™šæ‹Ÿæœºç›‘è§†å™¨ï¼‰ / Host OS å†…æ ¸ |
| Ring 1/2 | ä¸­  | å°‘æ•°é©±åŠ¨ / é€šä¿¡æ¥å£ï¼ˆé€šå¸¸ä¸ç”¨ï¼‰        |
| Ring 3   | ä½  | ç”¨æˆ·åº”ç”¨ / è¢«è™šæ‹ŸåŒ–çš„ Guest OS    |

### Typical virtualization strategies
| æŠ€æœ¯                    | è¯´æ˜                                         |
| --------------------- | ------------------------------------------ |
| **De-privileging**    | Guest OS è¢«å®‰æ’åœ¨æ¯” VMM æ›´ä½çš„æƒé™ç­‰çº§ä¸Šï¼ˆé€šå¸¸æ˜¯ Ring 3ï¼‰    |
| **Trap-and-emulate**  | ç‰¹æƒæŒ‡ä»¤è§¦å‘ trap åï¼ŒVMM æ•æ‰å¹¶æ¨¡æ‹Ÿå…¶ç³»ç»Ÿæ•ˆæœ               |
| **Shadow Structures** | VMM ç»´æŠ¤å…³é”®æ•°æ®ç»“æ„çš„å‰¯æœ¬ï¼ˆå¦‚é¡µè¡¨ã€æ§åˆ¶å¯„å­˜å™¨ï¼‰ï¼ŒGuest OS è®¿é—®çš„æ˜¯é•œåƒ |
| **Memory Tracing**    | ä½¿ç”¨å†™ä¿æŠ¤ + page fault æ•æ‰å¯¹ç‰©ç†å†…å­˜çš„ä¿®æ”¹              |


### OpenStack æ”¯æŒçš„ Hypervisors
| Hypervisor         | ç®€ä»‹                                                          | æ”¯æŒçš„é•œåƒæ ¼å¼                 |
| ------------------ | ----------------------------------------------------------- | ----------------------- |
| **KVM**            | Kernel-based Virtual Machineï¼Œä¸»æµå¼€æº Hypervisorï¼Œè¿è¡Œåœ¨ Linux ä¸Š    | `raw`, `qcow2`, `vmdk`  |
| **LXC**            | Linux Containersï¼Œå®¹å™¨çº§è™šæ‹ŸåŒ–ï¼Œé€šè¿‡ `libvirt` ç®¡ç†                     | Linux å®¹å™¨é•œåƒ              |
| **QEMU**           | Quick Emulatorï¼Œè½¯ä»¶çº§å…¨è™šæ‹ŸåŒ–ï¼Œä¸€èˆ¬ç”¨äºå¼€å‘ã€æ¨¡æ‹Ÿç¡¬ä»¶                          | å¼€å‘è°ƒè¯•ç”¨ï¼Œå¤šæ ¼å¼æ”¯æŒ             |
| **VMware vSphere** | å•†ç”¨ Hypervisorï¼Œæ”¯æŒ Windows/Linuxï¼Œéœ€è¿æ¥ vCenter æœåŠ¡å™¨              | VMware æ ¼å¼ (`vmdk`)      |
| **Virtuozzo**      | å•†ç”¨è™šæ‹ŸåŒ–è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒ OS å®¹å™¨ä¸ KVM è™šæ‹Ÿæœº                                 | `parallels` via libvirt |
| **zVM**            | IBM z ç³»åˆ—å¤§å‹ä¸»æœºè™šæ‹ŸåŒ–ï¼Œæ”¯æŒ z/OSã€Linux ç­‰                             | ä¸“ç”¨æ ¼å¼                    |
| **Ironic**         | OpenStack é¡¹ç›®ï¼Œç”¨äºè£¸æœºéƒ¨ç½²ï¼Œ**ä¸æ˜¯ Hypervisor**ï¼Œè€Œæ˜¯**æ— éœ€è™šæ‹ŸåŒ–ï¼Œç›´æ¥ä½¿ç”¨çœŸå®ç‰©ç†æœº** | è£¸æœºï¼ˆbare metalï¼‰          |


### Full Virtualization and Para-virtualization
| ç±»å‹               | å…¨è™šæ‹ŸåŒ–ï¼ˆFull Virtualisationï¼‰                  | åŠè™šæ‹ŸåŒ–ï¼ˆPara-Virtualisationï¼‰           |
| ---------------- | ------------------------------------------ | ----------------------------------- |
| åŸç†               | æ¨¡æ‹Ÿæ•´ä¸ªç¡¬ä»¶ç¯å¢ƒï¼ŒGuest OS æ— éœ€ä¿®æ”¹                     | Hypervisor æš´éœ²ç‰¹å®š APIï¼ŒGuest OS å¿…é¡»ä¿®æ”¹   |
| ä»£è¡¨ç³»ç»Ÿ             | VMwareã€KVMã€QEMU                            | Xenï¼ˆä½¿ç”¨ para-virtualized guestsï¼‰     |
| æ˜¯å¦éœ€è¦ Guest OS ä¿®æ”¹ | âŒ æ— éœ€ä¿®æ”¹ï¼Œå¯è¿è¡Œä»»æ„æ“ä½œç³»ç»Ÿ                           | âœ… éœ€è¦ä¿®æ”¹ï¼Œå¿…é¡»æ˜¯ â€œhypervisor-awareâ€ çš„æ“ä½œç³»ç»Ÿ |
| å…¼å®¹æ€§              | âœ… é«˜ï¼Œæ”¯æŒæ—§ç‰ˆ/æœªä¿®æ”¹ç³»ç»Ÿ                             | âŒ ä½ï¼Œåªèƒ½è¿è¡Œç‰¹å®šä¿®æ”¹åçš„ç³»ç»Ÿ                    |
| æ€§èƒ½               | â›” æœ‰è™šæ‹ŸåŒ–å¼€é”€ï¼ˆTrap-and-Emulate ç­‰ï¼‰               | âœ… æ€§èƒ½é«˜ï¼Œç³»ç»Ÿè°ƒç”¨ç›´æ¥è®¿é—® Hypervisor           |
| å†…æ ¸æ€è¿è¡Œä½ç½®          | Guest OS åœ¨ Ring 1 æˆ–æ›´ä½ï¼ˆRing 3ï¼‰ï¼ŒVMM åœ¨ Ring 0 | Guest OS ç›´æ¥ä½¿ç”¨ Hypervisor æ¥å£ï¼Œå‡å°‘ trap |


### Hardware-assisted Virtualization and Binary Translation
| æŠ€æœ¯                | ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ– (Hardware-assisted Virtualisation)      | äºŒè¿›åˆ¶ç¿»è¯‘ (Binary Translation)   |
| ----------------- | ----------------------------------------------- | ---------------------------- |
| **åŸç†**            | åˆ©ç”¨ CPU æä¾›çš„è™šæ‹ŸåŒ–æ‰©å±•ï¼ˆå¦‚ Intel VT-x, AMD-Vï¼‰ï¼Œå¤„ç†å™¨ç›´æ¥æ”¯æŒè™šæ‹ŸåŒ– | é€šè¿‡åŠ¨æ€æ‰«æå’Œæ›¿æ¢å®¢æˆ·æœºçš„æ•æ„ŸæŒ‡ä»¤ï¼Œè½¬æ¢ä¸ºç­‰æ•ˆçš„æ¨¡æ‹Ÿä»£ç  |
| **å¯¹ Guest OS è¦æ±‚** | ä¸éœ€è¦ä¿®æ”¹ Guest OS                                  | ä¸éœ€è¦ä¿®æ”¹ Guest OS               |
| **æ€§èƒ½**            | æ€§èƒ½è¾ƒå¥½ï¼Œæ¥è¿‘åŸç”Ÿ                                       | é¢å¤–å¼€é”€è¾ƒå¤§ï¼Œæ€§èƒ½ç›¸å¯¹è¾ƒå·®                |
| **å®ç°éš¾åº¦**          | è¾ƒç®€å•ï¼Œå®ç°æ›´å®¹æ˜“                                       | è¾ƒå¤æ‚ï¼Œéœ€è¦â€œå®æ—¶â€æ›¿æ¢æŒ‡ä»¤æµ              |
| **ç¡¬ä»¶éœ€æ±‚**          | éœ€è¦ CPU æ”¯æŒè™šæ‹ŸåŒ–æ‰©å±•ï¼ˆRing -1 çš„æ”¯æŒï¼‰                     | ä¸ä¾èµ–ç¡¬ä»¶æ”¯æŒ                      |
| **æ”¯æŒçš„ç‰¹æ€§**         | æ”¯æŒç¡¬ä»¶è¾…åŠ© DMAã€å†…å­˜è™šæ‹ŸåŒ–ç­‰é«˜çº§åŠŸèƒ½                           | éœ€è¦è½¯ä»¶å±‚é¢æ¨¡æ‹Ÿè¾ƒå¤šï¼Œæ”¯æŒæœ‰é™              |
| **é€‚ç”¨åœºæ™¯**          | ç°ä»£æœåŠ¡å™¨å¤„ç†å™¨ï¼ŒKVMã€Hyper-Vã€Xen çš„ç¡¬ä»¶æ¨¡å¼                  | è€æ—§ç¡¬ä»¶ï¼Œæˆ–è€…ä¸æ”¯æŒè™šæ‹ŸåŒ–æ‰©å±•çš„ CPU ç¯å¢ƒ      |
| **ç¼ºç‚¹**            | ä¾èµ–ç¡¬ä»¶ï¼Œæ—§æœºå™¨ä¸æ”¯æŒ                                     | æ€§èƒ½å¼€é”€å¤§ï¼Œå¤æ‚åº¦é«˜                   |
| **ç¤ºä¾‹**            | KVMï¼ˆå€ŸåŠ© Intel VT-x / AMD-Vï¼‰                      | VMware æ—©æœŸç‰ˆæœ¬çš„äºŒè¿›åˆ¶ç¿»è¯‘æŠ€æœ¯          |


### Bare Metal Hypervisor and Hosted Virtualization
| ç±»å‹                                 | æè¿°                                      | ä¾‹å­                 |
| ---------------------------------- | --------------------------------------- | ------------------ |
| **è£¸æœºå‹ Hypervisor (Bare Metal)**    | VMM ç›´æ¥è¿è¡Œåœ¨ç‰©ç†ç¡¬ä»¶ä¸Šï¼Œæ§åˆ¶ç¡¬ä»¶åŠè®¾å¤‡é©±åŠ¨ç¨‹åºã€‚å¯åŠ¨å³è¿è¡Œåœ¨å®é™…æœºå™¨ä¸Šã€‚ | VMware ESX Server  |
| **æ‰˜ç®¡å‹è™šæ‹ŸåŒ– (Hosted Virtualisation)** | VMM è¿è¡Œäºå·²æœ‰æ“ä½œç³»ç»Ÿä¹‹ä¸Šï¼Œä¾èµ–å®¿ä¸»ç³»ç»Ÿèµ„æºç®¡ç†ã€‚             | VMware Workstation |

### Operating System Level Virtualization
| ä¸»é¢˜           | ç±»å‹/æ¦‚å¿µ                          | è¯´æ˜                               | ç¤ºä¾‹/å¤‡æ³¨                           |
| ------------ | ------------------------------ | -------------------------------- | ------------------------------- |
| **æ“ä½œç³»ç»Ÿçº§è™šæ‹ŸåŒ–** | å®¹å™¨/è½»é‡çº§è™šæ‹Ÿæœº                      | åŸºäºåŒä¸€ä¸ªæ“ä½œç³»ç»Ÿåˆ›å»ºè½»é‡çº§å®¹å™¨ï¼Œä¸æ¨¡æ‹Ÿå®Œæ•´ç¡¬ä»¶ç¯å¢ƒ       | LXCã€Dockerã€OpenVZã€FreeBSD Jails |
|              | ä¼˜ç‚¹                             | è½»é‡ã€é«˜æ•ˆã€å¯åŠ¨å¿«ã€èµ„æºåˆ©ç”¨ç‡é«˜                 |                                 |
|              | ç¼ºç‚¹                             | åªèƒ½è¿è¡ŒåŒä¸€ç±»æ“ä½œç³»ç»Ÿåº”ç”¨ï¼Œæ— æ³•è·¨ OSï¼Œä½¿ç”¨ç›¸åŒæ–‡ä»¶ç³»ç»Ÿ    |                                 |
| **å†…å­˜è™šæ‹ŸåŒ–**    | ä¼ ç»Ÿé¡µè¡¨ (Page Tables)             | ç®¡ç†è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€æ˜ å°„                    |                                 |
|              | å½±å­é¡µè¡¨ (Shadow Page Tables)      | VMMç»´æŠ¤ï¼Œä¸å®¢æˆ·æœºé¡µè¡¨åŒæ­¥ï¼Œå®ç°å®¢æˆ·æœºè™šæ‹Ÿåœ°å€åˆ°ç‰©ç†æœºåœ°å€æ˜ å°„ | å¢åŠ ç®¡ç†å¼€é”€                          |
|              | ç¡¬ä»¶æ”¯æŒ                           | ç¡¬ä»¶åŠ é€Ÿå†…å­˜è™šæ‹ŸåŒ–ï¼Œå¦‚ Intel EPTã€AMD NPT    |                                 |
| **è™šæ‹Ÿæœºçƒ­è¿ç§»**   | è„é¡µ (Dirty Pages)               | å†…å­˜ä¸­å·²ä¿®æ”¹ä½†å°šæœªå†™å›ç£ç›˜çš„é¡µé¢                 |                                 |
|              | å¹²å‡€é¡µ (Clean Pages)              | å·²å†™å›ç£ç›˜çš„å†…å­˜é¡µé¢                       |                                 |
|              | è¿ç§»è¿‡ç¨‹                           | å…ˆè¿ç§»å¹²å‡€é¡µï¼Œå†åå¤è¿ç§»è„é¡µï¼Œä¿è¯ä¸­æ–­æ—¶é—´æœ€çŸ­          |                                 |



### AWS Services
| æœåŠ¡ç±»åˆ«      | æœåŠ¡åç§°                             | ä¸»è¦åŠŸèƒ½ä¸ç‰¹ç‚¹                                                                               | å¤‡æ³¨                        |
| --------- | -------------------------------- | ------------------------------------------------------------------------------------- | ------------------------- |
| **ç½‘ç»œæœåŠ¡**  | Amazon VPC                       | è‡ªå®šä¹‰è™šæ‹Ÿç½‘ç»œï¼Œæ”¯æŒå­ç½‘åˆ’åˆ†ï¼Œå®ç°å…¬æœ‰/ç§æœ‰å­ç½‘éš”ç¦»                                                            | ç®¡ç†IPåœ°å€èŒƒå›´ï¼Œç½‘ç»œéš”ç¦»ä¸å®‰å…¨          |
| **è®¡ç®—æœåŠ¡**  | Amazon EC2                       | å¼¹æ€§äº‘æœåŠ¡å™¨å®ä¾‹ï¼Œæ”¯æŒå®‰å…¨ç»„ã€å¼¹æ€§IPã€è´Ÿè½½å‡è¡¡                                                              | æ”¯æŒ Session Manager æ— éœ€å¼€æ”¾ç«¯å£ |
| **æ•°æ®åº“æœåŠ¡** | Amazon RDS                       | æ‰˜ç®¡å…³ç³»å‹æ•°æ®åº“ï¼Œæ”¯æŒå¤šç§å¼•æ“ï¼ˆMySQLã€PostgreSQLç­‰ï¼‰                                                    | æ–¹ä¾¿ç®¡ç†å…³ç³»å‹æ•°æ®åº“                |
|           | Amazon DocumentDB                | æ‰˜ç®¡æ–‡æ¡£æ•°æ®åº“ï¼Œå…¼å®¹ MongoDB API                                                                | é€‚åˆæ–‡æ¡£å‹æ•°æ®å­˜å‚¨                 |
|           | Amazon OpenSearch                | æ‰˜ç®¡ Elasticsearchï¼Œè‡ªåŠ¨ç®¡ç†ï¼Œæ”¯æŒæ‰©å±•å’Œä¸ AWS æœåŠ¡é›†æˆ                                                 | æœç´¢ä¸åˆ†æ                     |
| **å­˜å‚¨æœåŠ¡**  | Amazon S3                        | é«˜å¯ç”¨å¯¹è±¡å­˜å‚¨ï¼Œæ”¯æŒå¤šç§è®¿é—®æ–¹å¼ï¼Œæ”¯æŒé™æ€ç½‘ç«™æ‰˜ç®¡ã€ç‰ˆæœ¬æ§åˆ¶å’Œç”Ÿå‘½å‘¨æœŸç­–ç•¥                                                 | é€‚åˆå­˜å‚¨æµ·é‡éç»“æ„åŒ–æ•°æ®              |
| **ç³»ç»Ÿç®¡ç†**  | AWS Systems Manager              | è¿œç¨‹ç®¡ç†èŠ‚ç‚¹ï¼ˆFleet Managerï¼‰ã€å®‰å…¨è¿æ¥ï¼ˆSession Managerï¼‰ã€è‡ªåŠ¨ä»»åŠ¡æ‰§è¡Œï¼ˆRun Commandï¼‰ã€è‡ªåŠ¨è¡¥ä¸ç®¡ç†ï¼ˆPatch Managerï¼‰ | ç®€åŒ–è¿ç»´ç®¡ç†                    |
| **å®‰å…¨æœåŠ¡**  | AWS WAF                          | Web åº”ç”¨é˜²ç«å¢™ï¼ŒåŸºäºè‡ªå®šä¹‰è§„åˆ™è¿‡æ»¤ HTTP è¯·æ±‚                                                           | ä¿æŠ¤åº”ç”¨å…å—å¸¸è§æ”»å‡»                |
| **å®¹å™¨ç¼–æ’**  | Elastic Container Service (ECS)  | æ‰˜ç®¡ Docker å®¹å™¨ï¼Œæ”¯æŒ EC2 å’Œæ— æœåŠ¡å™¨ Fargate                                                     | ç®€åŒ–å®¹å™¨éƒ¨ç½²å’Œç®¡ç†                 |
|           | Elastic Kubernetes Service (EKS) | æ‰˜ç®¡ Kubernetes é›†ç¾¤ï¼Œæ”¯æŒ EC2 å’Œ Fargate                                                     | åŸç”Ÿ Kubernetes æœåŠ¡          |

## Week 10
### Challenges of Security
| æŒ‘æˆ˜ç‚¹          | ç¤ºä¾‹ä¸è¯´æ˜                                     |
| ------------ | ----------------------------------------- |
| **ç”¨æˆ·/è®¾å¤‡å¤šæ ·æ€§** | äº‘/ç½‘æ ¼ç³»ç»Ÿå…è®¸ä¸åŒç»„ç»‡å’Œç”¨æˆ·åŠ¨æ€æ¥å…¥ï¼Œç”¨æˆ·è¡Œä¸ºéš¾ä»¥å®Œå…¨æ§åˆ¶ã€‚           |
| **èµ„æºåŠ¨æ€å˜åŒ–**   | æ–°ç”¨æˆ·åŠ å…¥ã€æ—§ç”¨æˆ·é€€å‡ºã€èµ„æºå˜æ›´ï¼Œå¯èƒ½è¿ååŸæœ‰å®‰å…¨ç­–ç•¥ã€‚              |
| **æ”¿ç­–å·®å¼‚**     | ä¸åŒç»„ç»‡å¯¹å®‰å…¨è¦æ±‚ä¸åŒï¼Œå¦‚éœ€è¦å°†æ•°æ®â€œå¬å›â€ç»„ç»‡å†…éƒ¨ã€‚               |
| **èµ„æºå…±äº«é—®é¢˜**   | â€œå˜ˆæ‚é‚»å±…â€é—®é¢˜ï¼šI/O å¯†é›†å‹ä»»åŠ¡å½±å“åŒç§Ÿæˆ·æ€§èƒ½ã€‚NeCTAR æ—©æœŸå°±æœ‰æ­¤é—®é¢˜ã€‚ |

### Technical Challenges: Authentication
| æ¦‚å¿µ     | å†…å®¹                                |
| ------ | --------------------------------- |
| å®šä¹‰     | è¯†åˆ«å’Œç¡®è®¤ç”¨æˆ·èº«ä»½çš„è¿‡ç¨‹ï¼ˆä¸æ¶‰åŠç”¨æˆ·èƒ½åšä»€ä¹ˆï¼‰           |
| ç¤ºä¾‹     | ç«™ç‚¹ X éªŒè¯ç”¨æˆ· Y æ˜¯å¦ä¸ºå£°ç§°èº«ä»½               |
| é£é™©     | è¢«å†’å……ï¼ˆMasqueradingï¼‰æ˜¯ç°å®å­˜åœ¨çš„å¨èƒ         |
| æœ¬åœ°è®¤è¯é—®é¢˜ | ç”¨æˆ·å¤šã€å˜åŠ¨å¤§æ—¶ç®¡ç†å›°éš¾ï¼ˆå¦‚ 10 ä¸‡ç”¨æˆ·ï¼‰            |
| å¯æ‰©å±•æ€§æ–¹æ¡ˆ | é›†ä¸­å¼ vs åˆ†å¸ƒå¼è®¤è¯ç³»ç»Ÿï¼›æ›´éœ€å¯æ‰©å±•æ–¹æ¡ˆ            |
| æŒ‡å¯¼å»ºè®®   | å¼ºå¯†ç ç­–ç•¥ï¼ˆé•¿åº¦ã€å¤æ‚å­—ç¬¦ã€å®šæœŸæ›´æ¢ï¼‰               |
| æ¨èæ–¹æ¡ˆ   | ä½¿ç”¨\*\*å…¬é’¥åŸºç¡€è®¾æ–½ï¼ˆPKIï¼‰\*\*æå‡è®¤è¯å®‰å…¨æ€§å’Œå¯æ‰©å±•æ€§ |


### Public Key Cryptography (Asymmetric Cryptography)
| ç‰¹æ€§   | å†…å®¹                       |
| ---- | ------------------------ |
| åˆ«å   | éå¯¹ç§°åŠ å¯†                    |
| å¯†é’¥ç±»å‹ | å…¬é’¥ï¼ˆå…¬å¼€ï¼‰ä¸ç§é’¥ï¼ˆä¿å¯†ï¼‰            |
| å·¥ä½œåŸç† | ä¸€æ–¹ç”¨ç§é’¥åŠ å¯†æˆ–ç­¾åï¼Œå¦ä¸€æ–¹ç”¨å¯¹åº”å…¬é’¥è§£å¯†æˆ–éªŒè¯ |
| åŠŸèƒ½ç”¨é€” | æ•°æ®å®Œæ•´æ€§æ ¡éªŒã€æ•°å­—ç­¾åã€éå¦è®¤æ€§ã€æœºå¯†é€šä¿¡   |
| ä¼˜ç‚¹   | ç®€åŒ–å¯†é’¥ç®¡ç†ï¼›å…¬é’¥å¯å¹¿æ³›åˆ†å‘ï¼Œç§é’¥éœ€å¦¥å–„ä¿ç®¡   |
| ä½¿ç”¨ç­–ç•¥ | å…¬é’¥çŸ­æœŸä½¿ç”¨å³å¯æ›´æ¢ï¼Œå‡å°‘è¢«çªƒé£é™©        |

### Public Key Certificate
| æ¦‚å¿µ   | å†…å®¹                                    |
| ---- | ------------------------------------- |
| ä½œç”¨   | å°†**å…¬é’¥**ä¸å…¶æ‹¥æœ‰è€…ï¼ˆç”¨æˆ·ï¼‰ç»‘å®š                    |
| å†…å®¹ç¤ºä¾‹ | åŒ…å«å…¬é’¥ã€ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼ˆå¦‚ï¼šCN=å¼ ä¸‰, O=UniMelb, C=AUï¼‰ |
| ç°å®ç±»æ¯” | åç‰‡ï¼ˆä½†éœ€ä¿¡ä»»æºä¿è¯å…¶çœŸå®æ€§ï¼‰                       |
| å®‰å…¨é—®é¢˜ | å¯èƒ½ä¼ªé€ ã€ä¿¡æ¯å˜åŠ¨ã€ä¼ è¾“ä¸å¯ä¿¡                       |
| è§£å†³æ–¹æ¡ˆ | ç”±å¯ä¿¡\*\*è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰\*\*ç­¾å‘è¯ä¹¦             |


### Certification Authority (CA)
| æ¦‚å¿µ     | å†…å®¹                                 |
| ------ | ---------------------------------- |
| CA çš„ä½œç”¨ | PKI(Public Key Infrastructure) æ ¸å¿ƒæœºæ„ï¼Œè´Ÿè´£é¢å‘ã€ç®¡ç†ã€æ’¤é”€æ•°å­—è¯ä¹¦            |
| å¸¸è§èŒè´£   | åˆ¶å®šç­–ç•¥ã€éªŒè¯èº«ä»½ã€ç­¾å‘è¯ä¹¦ã€æ’¤é”€è¯ä¹¦ã€ç»´æŠ¤ CRLï¼ˆè¯ä¹¦æ’¤é”€åˆ—è¡¨ï¼‰ |
| è®¤è¯æµç¨‹   | å¯å§”æ‰˜æ³¨å†Œæœºæ„ï¼ˆRAï¼‰æ‰§è¡Œï¼Œå¦‚å‡ºç¤ºæŠ¤ç…§/å­¦ç”Ÿè¯ç­‰           |
| ç®¡ç†å†…å®¹   | å­˜å‚¨è¯ä¹¦ã€æ›´æ–°è¯ä¹¦ã€å½’æ¡£å†å²æ•°æ®ç­‰                  |

### PKI in Cloud Computing
| åœºæ™¯          | å†…å®¹                                  |
| ----------- | ----------------------------------- |
| IaaS ä¸­çš„åº”ç”¨   | å¦‚ AWS ä½¿ç”¨å¯†é’¥å¯¹è®¿é—®è™šæ‹Ÿæœºèµ„æº                  |
| äº‘äº’æ“ä½œæ€§       | éœ€ä»¥å®‰å…¨æœºåˆ¶ï¼ˆå¦‚ PKIï¼‰ä¸ºå‰æ                    |
| å®é™…æ¡ˆä¾‹        | ä½¿ç”¨ UoM å­¦ç”Ÿèº«ä»½è®¿é—® MRCã€Spartan ç­‰         |
| å¤šç§èº«ä»½æ–¹å¼      | OpenIDã€Facebook IDã€ä¿¡ç”¨å¡ï¼ˆå¦‚ Amazon ç™»å½•ï¼‰ |
| å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰éœ€æ±‚ | ä¸€æ¬¡è®¤è¯ï¼Œå¤šå¤„è®¿é—®ï¼Œé€‚ç”¨äºåˆ†å¸ƒå¼è‡ªæ²»èµ„æºç¯å¢ƒ              |

### Technical Challenges: Authorization
| é¡¹ç›®           | å†…å®¹                                                                          |
| ------------ | --------------------------------------------------------------------------- |
| **å®šä¹‰**       | æ§åˆ¶ç”¨æˆ·è®¿é—®èµ„æºçš„æƒé™ï¼Œä¾æ®**ç­–ç•¥ï¼ˆPolicyï¼‰**                                                |
| **ä¸èº«ä»½éªŒè¯çš„å…³ç³»** | èº«ä»½éªŒè¯ç¡®è®¤ç”¨æˆ·æ˜¯è°ï¼›æˆæƒå®šä¹‰ç”¨æˆ·èƒ½åšä»€ä¹ˆ                                                       |
| **å¸¸è§æ§åˆ¶æ¨¡å‹**   | - **RBAC**ï¼ˆåŸºäºè§’è‰²ï¼‰<br>- **ABAC**ï¼ˆåŸºäºå±æ€§ï¼‰<br>- **IBAC**ï¼ˆåŸºäºèº«ä»½ï¼‰<br>- **GBAC**ï¼ˆåŸºäºç»„ï¼‰ |
| **ç±»æ¯”**       | æŠ¤ç…§ vs å•†åº—ä¼šå‘˜å¡ï¼šä¸€ä¸ªç¡®è®¤èº«ä»½ï¼Œä¸€ä¸ªæˆäºˆæƒé™                                                   |

### â˜ï¸ äº‘ç¯å¢ƒä¸­çš„æˆæƒ

| é¡¹ç›®         | å†…å®¹                                               |
| ---------- | ------------------------------------------------ |
| **æˆæƒä½œç”¨èŒƒå›´** | - æ­£åœ¨è¿è¡Œçš„æœåŠ¡æˆ–æ•°æ®<br>- å®‰è£…è¡¥ä¸ã€åˆ é™¤ VMã€å¯åŠ¨é•œåƒç­‰æ“ä½œ             |
| **é—®é¢˜ç¤ºä¾‹**   | - è°å¯ä»¥è£…è¡¥ä¸ï¼Ÿ<br>- é•œåƒæ˜¯å¦å«æ¶æ„ä»£ç ï¼Ÿ<br>- è¡¥ä¸æ˜¯å¦ä¼šå½±å“å…¶ä»– VMï¼Ÿ     |
| **è½¯ä»¶å·¥å…·æ”¯æŒ** | Pakitiã€Cfengineã€Puppetã€å®¹å™¨æŠ€æœ¯ï¼ˆå¦‚ Dockerã€Kubernetesï¼‰ |

### ğŸ” æˆæƒå®ç°æ–¹å¼

| é¡¹ç›®           | å†…å®¹                                                                            |
| ------------ | ----------------------------------------------------------------------------- |
| **è™šæ‹Ÿç»„ç»‡ï¼ˆVOï¼‰** | å¤šæœºæ„ç”¨æˆ·å…±äº«èµ„æºå¹¶åä½œçš„æ¦‚å¿µæ¡†æ¶                                                             |
| **ç­–ç•¥è¡¨è¾¾å½¢å¼**   | - XML<br>- SAMLï¼ˆå®‰å…¨æ–­è¨€æ ‡è®°è¯­è¨€ï¼‰<br>- XACMLï¼ˆè®¿é—®æ§åˆ¶æ ‡è®°è¯­è¨€ï¼‰                                |
| **è®¿é—®æ§åˆ¶ä¸‰å…ƒç»„**  | `{ Role Ã— Action Ã— Resource }`ï¼šæŸè§’è‰²æ˜¯å¦èƒ½å¯¹æŸèµ„æºæ‰§è¡ŒæŸæ“ä½œï¼Ÿ                               |
| **è§’è‰²å±‚æ¬¡ç¤ºä¾‹**   | è§’è‰² X â‰¥ è§’è‰² Y â‰¥ è§’è‰² Zï¼ˆX æƒé™æœ€å¤šï¼‰                                                    |
| **ç›¸å…³æŠ€æœ¯æ ‡å‡†**   | - XACML, PERMIS, CAS, VOMS, AKENTI, SAML, WS-\*<br>- PDPï¼ˆç­–ç•¥å†³ç­–ç‚¹ï¼‰å’Œ PEPï¼ˆç­–ç•¥æ‰§è¡Œç‚¹ï¼‰æœºåˆ¶ |

### ğŸ›¡ï¸ æˆæƒé¢ä¸´çš„æŒ‘æˆ˜

| é¡¹ç›®    | å†…å®¹                   |
| ----- | -------------------- |
| å®‰å…¨æ€§ç»´æŠ¤ | é•œåƒæ¶æ„è½¯ä»¶ã€è¡¥ä¸å…¼å®¹æ€§é—®é¢˜ã€ä¾èµ–å†²çªç­‰ |
| å¤æ‚ä¾èµ–  | è½¯ä»¶ä¾èµ–ç‰ˆæœ¬ç®¡ç†å¤æ‚ï¼Œå½±å“æœåŠ¡å¯é æ€§   |
| å¤šç»„ç»‡åä½œ | å„ç»„ç»‡å®‰å…¨ç­–ç•¥ä¸ä¸€ï¼Œéš¾ä»¥ç»Ÿä¸€ç®¡ç†     |

### Other Challenges
| å®‰å…¨æŒ‘æˆ˜ç±»åˆ«                       | æè¿°                                                                                                                                                                   |
| ---------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰**                | - Grid å’Œ Shibboleth æä¾›äº†å…ˆä¾‹<br>- ç›®å‰ Cloud IaaS å¹¶æœªå®Œå…¨è§£å†³<br>- ä¾èµ–éäº‘å¼€å‘è€…è‡ªè¡Œå®ç°                                                                                                 |
| **å®¡è®¡ä¸æ—¥å¿—ï¼ˆAuditingï¼‰**          | - æ¶‰åŠæ—¥å¿—è®°å½•ã€å…¥ä¾µæ£€æµ‹ã€å®‰å…¨å®¡è®¡ç­‰<br>- åœ¨**å•ä¸€äº‘/æœ¬åœ°ç³»ç»Ÿ**ä¸­æˆç†Ÿ<br>- **è·¨äº‘/è”é‚¦äº‘ç¯å¢ƒ**æ”¯æŒå°šä¸æˆç†Ÿ<br>- ç¤ºä¾‹å·¥å…·ï¼šCloudWatchï¼ˆAWSï¼‰ã€Ceilometerï¼ˆOpenStackï¼‰                                                    |
| **æ•°æ®åˆ é™¤ä¸åŠ å¯†**                  | - æ— æ³•ç›´æ¥è®¿é—®ç¡¬ç›˜ï¼Œä¼ ç»Ÿå·¥å…·æ— æ³•ä½¿ç”¨<br>- åˆ é™¤å°æ•°æ®ç®€å•ï¼Œå¤§è§„æ¨¡ï¼ˆTBçº§ï¼‰æ•°æ®åˆ é™¤å¤æ‚<br>- éœ€è¦å®‰å…¨åŠ å¯†å’Œå½»åº•æ“¦é™¤æœºåˆ¶                                                                                                   |
| **è´£ä»»å½’å±ï¼ˆLiabilityï¼‰**          | - æ³•å¾‹è´£ä»»ä¸æ•°æ®å®‰å…¨é—®é¢˜                                                                    |
| **è½¯ä»¶è®¸å¯é—®é¢˜ï¼ˆLicensingï¼‰**        | - å¤šç§æ¨¡å‹ï¼šæŒ‰ç”¨æˆ·ã€æœåŠ¡å™¨ã€ç»„ç»‡ã€æµ®åŠ¨æˆæƒã€æœºå™¨å›ºå®šç­‰<br>- äº‘ç¯å¢ƒä¸‹è¿™äº›æ¨¡å‹é€‚é…å›°éš¾<br>- ä¸æœ¬åœ°é›†ç¾¤ï¼ˆå¦‚ SPARTANï¼‰å¯¹æ¯”ï¼šèµ„æºè°ƒåº¦ä¸åˆè§„éš¾é¢˜                                                                                     |
| **å·¥ä½œæµå®‰å…¨ï¼ˆWorkflow Securityï¼‰** | - å¸¸ç”¨å·¥å…·ï¼šTaverna, Pegasus, Galaxy, Kepler, Nimrod, OMS ç­‰<br>- æ¨¡å‹ç±»å‹ï¼š<br>â†’ Orchestrationï¼ˆé›†ä¸­å¼ï¼‰<br>â†’ Choreographyï¼ˆå»ä¸­å¿ƒåŒ–ï¼‰<br>- å®‰å…¨å·¥ä½œæµçš„æŒ‘æˆ˜ï¼š<br>â†’ å®šä¹‰<br>â†’ æ‰§è¡Œ<br>â†’ åˆ†äº«<br>â†’ ç»Ÿä¸€å®‰å…¨ç­–ç•¥ |
