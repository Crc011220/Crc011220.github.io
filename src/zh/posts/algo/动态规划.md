---
icon: pen-to-square
date: 2025-05-12
category:
  - Learning Records
tag:
  - Algorithm
---

## 动态规划
### 背包问题
| 背包类型 | 问题类型 | 推荐数组类型  | 遍历顺序        | 是否倒序容量          | 状态转移方程                            |
| ---- | ---- | ------- | ----------- | --------------- | --------------------------------- |
| 01背包 | 价值最大 | 一维 / 二维 | 先物品，再容量     | ✅（一维需要）❌（二维不需要） | `dp[j] = max(dp[j], dp[j-w] + v)` |
| 完全背包 | 价值最大 | 一维 / 二维 | 先物品，再容量（正序） | ❌               | `dp[j] = max(dp[j], dp[j-w] + v)` |
| 完全背包 | 组合数  | 一维 / 二维 | 先物品，再容量（正序） | ❌               | `dp[j] += dp[j-w]`                |
| 完全背包 | 排列数  | 一维      | 先容量，再物品（正序） | ❌               | `dp[j] += dp[j-w]`                |
                                |

- ✅ 01背包一维数组要倒序，防止同一轮多次选同一个物品。
- ❌ 二维数组不需要倒序，因为每层是独立的，不会重复使用。
- ✅ 完全背包组合数是“先物品再容量”，保证每种组合只计算一次。
- ✅ 完全背包排列数是“先容量再物品”，考虑顺序不同的情况。

### 股票交易

| 题号                  | 限制条件         | 状态定义 `dp[i][k][h]`                                | 状态转移方程                                                                                                                                  | 初始状态                                                    |
| ------------------- | ------------ | ------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------- |
| **121**<br>买卖一次     | 最多 1 次交易     | `dp[i][0]`：不持股<br>`dp[i][1]`：持股                   | `dp[i][0] = max(dp[i-1][0], dp[i-1][1] + prices[i])`<br>`dp[i][1] = max(dp[i-1][1], -prices[i])`                                        | `dp[0][0] = 0`<br>`dp[0][1] = -prices[0]`               |
| **122**<br>无限次交易    | 不限制交易次数      | 同上                                                | `dp[i][0] = max(dp[i-1][0], dp[i-1][1] + prices[i])`<br>`dp[i][1] = max(dp[i-1][1], dp[i-1][0] - prices[i])`                            | 同上                                                      |
| **123**<br>最多 2 次   | `k=0/1/2`, 三维 （也可以枚举所有的dp数组） | `dp[i][k][h]`                                     | `dp[i][k][0] = max(dp[i-1][k][0], dp[i-1][k][1] + prices[i])`<br>`dp[i][k][1] = max(dp[i-1][k][1], dp[i-1][k-1][0] - prices[i])`        | 初始化 `dp[0][k][1] = -prices[0]`，`dp[0][k][0] = 0`        |
| **188**<br>最多 k 次交易 | 任意 k 值       | 同上, 必须三维因为无法枚举                                               | 同 123                                                                                                                                   | 同 123                                                   |
| **309**<br>含冷冻期     | 卖出后 1 天不能买入  | `dp[i][0]`：不持股<br>`dp[i][1]`：持股<br>`dp[i][2]`：冷冻期 | `dp[i][0] = max(dp[i-1][0], dp[i-1][2])`<br>`dp[i][1] = max(dp[i-1][1], dp[i-1][0] - prices[i])`<br>`dp[i][2] = dp[i-1][1] + prices[i]` | `dp[0][0] = 0`, `dp[0][1] = -prices[0]`, `dp[0][2] = 0` |
| **714**<br>含手续费     | 每次交易扣 fee    | `dp[i][0]`：不持股<br>`dp[i][1]`：持股                   | `dp[i][0] = max(dp[i-1][0], dp[i-1][1] + prices[i] - fee)`<br>`dp[i][1] = max(dp[i-1][1], dp[i-1][0] - prices[i])`                      | 同 121                                                   |
