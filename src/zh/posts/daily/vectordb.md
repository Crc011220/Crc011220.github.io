---
icon: pen-to-square
date: 2026-02-07
category:
  - Daily Notes
tag:
  - Notes
---

# VectorDB 向量数据库选型指南

向量数据库是 RAG 系统的核心，选型直接影响检索效率和生成质量。本文围绕选型方法论、主流产品分析、实战案例、总结与趋势展开，帮助解决技术选型问题。

## 一、选型方法论

### 1. 业务需求

- **数据类型**
  - 纯文本（合同库、文档问答）：选择范围广
  - 多模态数据（图片、音频、视频）：对高维向量处理能力要求高，如以图搜图
- **查询模式**
  - 关键字搜索：传统倒排索引，如 Elasticsearch
  - 相似度匹配：向量检索
  - 混合检索：向量检索 + 结构化过滤（如「红色裙子 + 价格 < 200 元」），需关注性能

### 2. 技术指标

- **数据规模**
  - GB 级别（个人知识库、Demo）：轻量级如 Chroma、FAISS 单机版，开发体验好
  - TB 级别（中大规模企业应用）：Milvus 性能强，FAISS 优化后可单机扛但运维复杂
  - PB 级别（超大规模，如巨头核心搜索）：分布式数据库如 Milvus、Elasticsearch
- **高并发与低延迟**：电商推荐优先吞吐量，医疗诊断优先低延迟
- **扩展能力**：业务数据增长快时需选择支持分布式扩展的数据库，避免后期数据迁移

### 3. 算法与生态

需考虑数据库算法兼容性和生态易用性，如与现有工具链集成情况。

## 二、主流产品分析

| 产品 | 定位 | 适用场景 |
|------|------|----------|
| **Milvus** | 云原生分布式，工业级稳定性 | PB 级数据量、高并发、生产环境稳定性要求高 |
| **FAISS** | Meta 开源的底层检索引擎库（非完整数据库） | 性能强、离线批量处理快，需自行封装服务，适合技术实力强的团队 |
| **Elasticsearch** | 文本检索强（倒排索引），支持向量但性能不及专用库 | 已有 ES 集群且运维熟悉，避免新增系统维护成本 |
| **Chroma** | 轻量级嵌入式，Python 友好（几行代码即可运行） | 快速原型开发、中小型项目（数据量不大） |
| **Qdrant** | Rust 编写，高性能、内存安全，擅长复杂过滤 | 多模态支持好，如「红色鞋子 + 库存 > 1000」 |

## 三、检索算法

| 算法 | 特点 |
|------|------|
| **HNSW** | 高维空间图结构，快且准，但内存占用高 |
| **IVF** | 数据聚类（倒排文件），适合大规模数据，内存占用较 HNSW 低 |
| **PQ（乘积量化）** | 压缩高维向量，速度快、省内存，但精度有损失 |
| **BM25** | 传统关键词匹配，常与向量语义匹配结合提升 RAG 效果 |

## 四、多模态支持

- **Milvus、Qdrant**：原生支持多模态向量
- **Chroma**：对图文支持友好
- **FAISS**：仅处理数字向量，多模态逻辑需在应用层实现

## 五、开源协议

- **宽松协议**：Apache 2.0（Milvus、Chroma），商用限制少
- **严格协议**：AGPL/SSPL，修改代码对外服务可能需开源，存在法务风险，选型时需确认协议兼容性

## 六、实战案例

### 1. 跨境电商实时推荐系统

- **痛点**：日均用户数千万，新增数据超 10 亿条，查询延迟需 < 50ms
- **选型**：排除 ES（向量性能不足）、FAISS（单机扛不住 PB 级），选择 Milvus（分布式支持，分片扩展）
- **落地**：AVFlat 索引，召回率 95% 时延迟稳定在 30ms 内，用户停留时长提升 25%

### 2. 三甲医院医学知识库

- **痛点**：数据敏感（私有化部署、等保三级），多模态（文本 + CT 影像）检索精度需 > 90%
- **选型**：排除 Chroma（复杂图文混合计算能力不足），选择 Qdrant（多模态准确率高 8%，Rust 保障内存安全）
- **落地**：ResNet50 处理 CT 影像特征，BERT 处理文本，跨模态注意力排序，诊断效率提升 30%

### 3. 企业内部技术文档库

- **特点**：数据量不大（百万级），需快速上线，与 AI 工具链（如 LangChain）集成
- **选型**：Chroma（轻量、部署成本低，延迟比 Milvus 低 40%）
- **落地**：LangChain 封装，一周上线，适合内部提效工具

## 七、选型总结

### 四大核心维度

- **规模**：PB 级（Milvus）、TB 级（Milvus/FAISS）、GB 级（Chroma/FAISS 单机）
- **性能**：吞吐量优先（电商）或低延迟优先（医疗）
- **多模态**：有图片/视频需求优先 Qdrant/Milvus
- **成本**：含运维成本，小团队选轻量级数据库

### 组合策略

- 多并发 + 多模态大项目：**Milvus / Qdrant**
- 快速验证 + 离线任务：**Chroma（前端）+ FAISS（后端计算）**
- 已有 ES 集群：复用 ES（稳妥省事）

### 三大原则

1. **场景驱动**：选适合场景而非最贵的，如医疗盯多模态精度，电商盯高并发
2. **性能验证**：用真实数据测试召回率和延迟，避免依赖官方理想环境参数
3. **生态兼容**：选择主流生态产品（如支持 LangChain），减少集成坑

## 八、未来趋势

- **云原生化**：自动扩缩容（如 AWS OpenSearch Service），节省成本、减少运维压力
- **混合检索**：关键词 + 向量融合，提升 RAG 系统准确性，是未来标配
