<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.59" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://crc011220.github.io/posts/interview/7.html"><meta property="og:site_name" content="Richard Chen"><meta property="og:title" content="Java Concurrent Programming"><meta property="og:description" content="Java Concurrent Programming 1.1 What is the difference between threads and processes? A process is an instance of a running program, which contains threads, each executing diffe..."><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2024-11-24T11:15:41.000Z"><meta property="article:tag" content="Technical Interview"><meta property="article:published_time" content="2024-11-23T00:00:00.000Z"><meta property="article:modified_time" content="2024-11-24T11:15:41.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Java Concurrent Programming","image":[""],"datePublished":"2024-11-23T00:00:00.000Z","dateModified":"2024-11-24T11:15:41.000Z","author":[{"@type":"Person","name":"Richard Chen"}]}</script><link rel="icon" href="/mac.ico"><title>Java Concurrent Programming | Richard Chen</title><meta name="description" content="Java Concurrent Programming 1.1 What is the difference between threads and processes? A process is an instance of a running program, which contains threads, each executing diffe...">
    <link rel="stylesheet" href="/assets/css/styles.563fed46.css">
    <link rel="preload" href="/assets/js/runtime~app.b091eca3.js" as="script"><link rel="preload" href="/assets/css/styles.563fed46.css" as="style"><link rel="preload" href="/assets/js/6312.2d95f1ad.js" as="script"><link rel="preload" href="/assets/js/app.616ce5fc.js" as="script">
    <link rel="prefetch" href="/assets/js/zh_posts_declarative_haskell.html.2de58c68.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_java8_函数式编程.html.824175b7.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_Netty01-nio.html.cea8ff35.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_Netty04-优化与源码.html.f9b9d47e.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_Netty03-进阶.html.08340e71.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_Netty02-intro.html.ffd72070.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_nginx_1.html.3e3ca755.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_declarative_prolog.html.a05216b1.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_hive_Hive-SQL语法大全.html.4ca54797.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_14.html.9788afd4.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_COMP90049.html.5f7b64fd.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_COMP90050.html.8abd44a2.js" as="script"><link rel="prefetch" href="/assets/js/posts_note_Coin-exchange-project-note.html.00a5fbe1.js" as="script"><link rel="prefetch" href="/assets/js/posts_tailwind_summary.html.65a1bdb1.js" as="script"><link rel="prefetch" href="/assets/js/2664.0c0e265f.js" as="script"><link rel="prefetch" href="/assets/js/posts_typescript_1.html.303fabd4.js" as="script"><link rel="prefetch" href="/assets/js/posts_typescript_2.html.6b0b8abc.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_二叉树.html.08e17aca.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_COMP90024.html.6ba2eb20.js" as="script"><link rel="prefetch" href="/assets/js/posts_aws-saa_1.html.dd0f5c35.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_动态规划.html.393c14e9.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_图.html.6ffc82ed.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_COMP90048.html.2eff7623.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_1.html.94e933ec.js" as="script"><link rel="prefetch" href="/assets/js/8300.ef6ef338.js" as="script"><link rel="prefetch" href="/assets/js/posts_mybatis_2.html.9a05b659.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_7.html.be068800.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_4.html.5dd4d88a.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_5.html.c78a65d9.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_8.html.028fb8a6.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_2.html.3c496de7.js" as="script"><link rel="prefetch" href="/assets/js/posts_aws-saa_3.html.1edee090.js" as="script"><link rel="prefetch" href="/assets/js/posts_nginx_1.html.8ff423c8.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_SWEN90016.html.0fbe2d76.js" as="script"><link rel="prefetch" href="/assets/js/posts_spark_Spark-Core.html.cd8636a7.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_11.html.f0a8d06e.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_14.html.8b214548.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_8.html.9cda8d6b.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_4.html.5d36a4ea.js" as="script"><link rel="prefetch" href="/assets/js/posts_spark_Spark-Sql.html.76cca896.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_21.html.904e2810.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_11.html.8d4af2d8.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_5.html.f3508083.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_6.html.6d663852.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_10.html.f04a8c72.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_1.html.713f4462.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_栈和队列.html.66eb9c6c.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_6.html.f0749890.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_4.html.6837b70a.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_单调栈.html.0e0444b9.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_15.html.2d6f62c9.js" as="script"><link rel="prefetch" href="/assets/js/posts_aws-saa_2.html.3e18d573.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_6.html.d96cbcf7.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_3.html.b67ee897.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_12.html.5465a818.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_14.html.2f0072e3.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_13.html.de689093.js" as="script"><link rel="prefetch" href="/assets/js/posts_ai_javaai.html.1763e5de.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_5.html.3dd0ba99.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_6.html.64a3195d.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_2.html.cebc237a.js" as="script"><link rel="prefetch" href="/assets/js/posts_typescript_3.html.96c00b28.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_2.html.bcca6767.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_16.html.b4dd60f6.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_2.html.625a5d8c.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_7.html.9ddc3cf1.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_3.html.ab27c026.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_12.html.d3c10274.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_17.html.e632515c.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_13.html.a996409a.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_9.html.f7cf1a3c.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_15.html.873ab02a.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_18.html.3244fd5f.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_1.html.c948d11f.js" as="script"><link rel="prefetch" href="/assets/js/posts_ai_mcp.html.12a53f00.js" as="script"><link rel="prefetch" href="/assets/js/posts_mybatis_1.html.46f844ef.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_1.html.176fa26c.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_7.html.fe2c2946.js" as="script"><link rel="prefetch" href="/assets/js/posts_istio_1.html.b29c1e6e.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_4.html.a5b484d4.js" as="script"><link rel="prefetch" href="/assets/js/intro.html.27b054a7.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_15.html.c985094b.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_10.html.36b85468.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_1.html.af846411.js" as="script"><link rel="prefetch" href="/assets/js/posts_spark_Spark-Intro.html.bbb267af.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_5.html.cb6a2328.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_19.html.e098bed2.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_7.html.d86fd6a9.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_3.html.bdbee8ab.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_7.html.94b00692.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_8.html.339465c5.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_字符串.html.fc1a0e0b.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_index.html.239e1c93.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_3.html.391d081e.js" as="script"><link rel="prefetch" href="/assets/js/zh_intro.html.36db5a6a.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_Hive.html.262cc7c9.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_7.html.379ab7f8.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_9.html.95c72561.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_HDFS.html.283fd982.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_index.html.26d96d19.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_2.html.9f746bd8.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_8.html.8177671e.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_4.html.7f4ae050.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_5.html.14dbc6db.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_3.html.11c40f4f.js" as="script"><link rel="prefetch" href="/assets/js/posts_docker_1.html.1880db3c.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_11.html.60ffe1d3.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_microsvc_1.html.1b33e34f.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_index.html.42eacdc0.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_summary.html.f7e4e9a6.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_6.html.23812d5e.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_6.html.a87da5b6.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_3.html.8dd3942e.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_6.html.8a445e18.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_7.html.f5fc0da9.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_8.html.10fbd61b.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_4.html.573becd0.js" as="script"><link rel="prefetch" href="/assets/js/posts_elasticsearch_query-dsl.html.b1f6d5ea.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_cloudflare.html.557796c4.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_20.html.0c40c0b3.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_1.html.5165a4ea.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_5.html.5be2b613.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_2.html.50b07800.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_10.html.f704fd8f.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_16.html.18d78ab9.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_3.html.31996ba5.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_tools.html.d10ee53e.js" as="script"><link rel="prefetch" href="/assets/js/posts_elasticsearch_1.html.ebb5f1f0.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_2.html.7aac274d.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_index.html.9b1d8150.js" as="script"><link rel="prefetch" href="/assets/js/posts_dubbo_1.html.445e9a92.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_4.html.426a80e8.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_回溯.html.be4b57c7.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_9.html.d9a9f223.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_index.html.08982f6e.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_index.html.fe13e6fc.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_9.html.ca0495f6.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_index.html.fa15d98a.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_1.html.ef8b85c0.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_8.html.003abe76.js" as="script"><link rel="prefetch" href="/assets/js/posts_elasticsearch_2.html.2310493b.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_genesis.html.1d78bd11.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_5.html.4925b8f0.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_index.html.9a47540b.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_MapReduce.html.da681e9e.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_sealos.html.2090467f.js" as="script"><link rel="prefetch" href="/assets/js/posts_genesis.html.4e8cb9a0.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_12.html.48356527.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_index.html.08c56d0f.js" as="script"><link rel="prefetch" href="/assets/js/posts_dubbo_2.html.fe8ef07d.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_13.html.9e92bb7e.js" as="script"><link rel="prefetch" href="/assets/js/posts_aws-saa_index.html.37d8e220.js" as="script"><link rel="prefetch" href="/assets/js/posts_typescript_index.html.5959c918.js" as="script"><link rel="prefetch" href="/assets/js/posts_elasticsearch_index.html.cac7d5a3.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_index.html.93255781.js" as="script"><link rel="prefetch" href="/assets/js/posts_dubbo_index.html.31855f74.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_Yarn.html.9cc0a345.js" as="script"><link rel="prefetch" href="/assets/js/posts_nginx_index.html.6a85b57c.js" as="script"><link rel="prefetch" href="/assets/js/index.html.794d30e3.js" as="script"><link rel="prefetch" href="/assets/js/posts_ai_index.html.077b8907.js" as="script"><link rel="prefetch" href="/assets/js/posts_mybatis_index.html.f46a6e67.js" as="script"><link rel="prefetch" href="/assets/js/posts_spark_index.html.7c088f18.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_microsvc_index.html.bdd0aa95.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_9.html.b2f274e3.js" as="script"><link rel="prefetch" href="/assets/js/posts_nginx_2.html.ace27108.js" as="script"><link rel="prefetch" href="/assets/js/posts_tailwind_index.html.fc04aaae.js" as="script"><link rel="prefetch" href="/assets/js/posts_docker_index.html.c85d264a.js" as="script"><link rel="prefetch" href="/assets/js/posts_istio_index.html.82460225.js" as="script"><link rel="prefetch" href="/assets/js/zh_index.html.0dc4ae5a.js" as="script"><link rel="prefetch" href="/assets/js/posts_note_index.html.0e3c67ef.js" as="script"><link rel="prefetch" href="/assets/js/category_learning-records_index.html.576de52f.js" as="script"><link rel="prefetch" href="/assets/js/tag_nginx_index.html.429ee8e4.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_declarative-programming_index.html.833dc4ec.js" as="script"><link rel="prefetch" href="/assets/js/category_index.html.25d997fb.js" as="script"><link rel="prefetch" href="/assets/js/timeline_index.html.c8382c3f.js" as="script"><link rel="prefetch" href="/assets/js/article_index.html.754ed5f9.js" as="script"><link rel="prefetch" href="/assets/js/zh_category_学习笔记_index.html.6c21dbc9.js" as="script"><link rel="prefetch" href="/assets/js/category_internship-journal_index.html.ff04715e.js" as="script"><link rel="prefetch" href="/assets/js/zh_category_learning-records_index.html.89e713e0.js" as="script"><link rel="prefetch" href="/assets/js/tag_index.html.d7d9fa91.js" as="script"><link rel="prefetch" href="/assets/js/star_index.html.db14b2c2.js" as="script"><link rel="prefetch" href="/assets/js/tag_programmer-cliché_index.html.b8a9b2f4.js" as="script"><link rel="prefetch" href="/assets/js/tag_algorithm-practices_index.html.3e225319.js" as="script"><link rel="prefetch" href="/assets/js/tag_china-merchant-bank_index.html.9797c8de.js" as="script"><link rel="prefetch" href="/assets/js/tag_technical-interview_index.html.ba0e5197.js" as="script"><link rel="prefetch" href="/assets/js/posts_index.html.ebef2662.js" as="script"><link rel="prefetch" href="/assets/js/zh_category_开始_index.html.a9db6c96.js" as="script"><link rel="prefetch" href="/assets/js/tag_tailwind-css_index.html.d46e2f33.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_旅程_index.html.6d96a29f.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_简历_index.html.0c2e51e9.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_algorithm_index.html.86e7903e.js" as="script"><link rel="prefetch" href="/assets/js/category_genesis_index.html.d083a48c.js" as="script"><link rel="prefetch" href="/assets/js/tag_javascript_index.html.ede35886.js" as="script"><link rel="prefetch" href="/assets/js/tag_kubernetes_index.html.59f335e6.js" as="script"><link rel="prefetch" href="/assets/js/tag_typescript_index.html.5503bbb7.js" as="script"><link rel="prefetch" href="/assets/js/tag_leetcode_index.html.e67a7df0.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_java8_index.html.0ef9ad6c.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_netty_index.html.4edaa8ea.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_nginx_index.html.6c523351.js" as="script"><link rel="prefetch" href="/assets/js/tag_aws-saa_index.html.7fcee46c.js" as="script"><link rel="prefetch" href="/assets/js/tag_mybatis_index.html.8a8a1949.js" as="script"><link rel="prefetch" href="/assets/js/tag_unimelb_index.html.ecb8b42a.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_hive_index.html.a64532b5.js" as="script"><link rel="prefetch" href="/assets/js/tag_docker_index.html.cef315fc.js" as="script"><link rel="prefetch" href="/assets/js/tag_hadoop_index.html.2e99281a.js" as="script"><link rel="prefetch" href="/assets/js/tag_nextjs_index.html.e5bc4642.js" as="script"><link rel="prefetch" href="/assets/js/tag_resume_index.html.efa76b7b.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_nio_index.html.761667cf.js" as="script"><link rel="prefetch" href="/assets/js/tag_dubbo_index.html.df2e18bb.js" as="script"><link rel="prefetch" href="/assets/js/tag_index_index.html.935a8cb9.js" as="script"><link rel="prefetch" href="/assets/js/tag_istio_index.html.c36e5323.js" as="script"><link rel="prefetch" href="/assets/js/tag_notes_index.html.39c1108a.js" as="script"><link rel="prefetch" href="/assets/js/tag_react_index.html.9197e564.js" as="script"><link rel="prefetch" href="/assets/js/tag_spark_index.html.965860c8.js" as="script"><link rel="prefetch" href="/assets/js/404.html.94cc8c0f.js" as="script"><link rel="prefetch" href="/assets/js/zh_timeline_index.html.bad17f7e.js" as="script"><link rel="prefetch" href="/assets/js/tag_ai_index.html.a08d3373.js" as="script"><link rel="prefetch" href="/assets/js/tag_es_index.html.ad7869c1.js" as="script"><link rel="prefetch" href="/assets/js/zh_category_index.html.05abcedf.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_declarative_index.html.33525ec4.js" as="script"><link rel="prefetch" href="/assets/js/zh_article_index.html.b4ce75ee.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_index.html.7cd5e86b.js" as="script"><link rel="prefetch" href="/assets/js/zh_star_index.html.73563921.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_java8_index.html.86af96f4.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_index.html.c04cfafd.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_nginx_index.html.1a7661a1.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_index.html.31c7b411.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_hive_index.html.ea34aa1a.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_index.html.d6f4b666.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/" aria-label="Take me home"><img class="vp-nav-logo" src="https://img.taotu.cn/ssd/ssd4/1/2024-07-08/1_e36ceb8c09656a291a6f0a33178736f9.webp" alt><!----><span class="vp-site-name hide-in-pad">Richard Chen</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="Blog Home"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->Blog Home<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Posts"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Posts<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Algorithm</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/algorithm/" aria-label="Algorithm Contents"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Algorithm Contents<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">AWS-SAA</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/aws-saa/" aria-label="AWS-SAA Contents"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->AWS-SAA Contents<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Cliché</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/clich%C3%A9/" aria-label="Cliché Contents"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Cliché Contents<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">China Merchant Bank</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/cmb/" aria-label="CMB Internship Record"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->CMB Internship Record<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Docker</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/docker/" aria-label="Docker Contents"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Docker Contents<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Dubbo</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/dubbo/" aria-label="Dubbo Contents"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Dubbo Contents<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">ElasticSearch</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/elasticsearch/" aria-label="ElasticSearch Contents"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->ElasticSearch Contents<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Hadoop and Hive</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/hadoop/" aria-label="Hadoop and Hive Contents"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Hadoop and Hive Contents<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Interview</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link route-link-active auto-link" href="/posts/interview/" aria-label="Interview Contents"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Interview Contents<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Kubernetes</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/kubernetes/concepts/" aria-label="Concepts"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Concepts<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/kubernetes/practices/" aria-label="Practices"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Practices<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/kubernetes/microsvc/" aria-label="MicroSvc"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->MicroSvc<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">MyBatis</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/mybatis/" aria-label="MyBatis Contents"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->MyBatis Contents<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">NextJS</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/nextjs/" aria-label="NextJS Contents"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->NextJS Contents<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">NGINX</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/nginx/" aria-label="NGINX Contents"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->NGINX Contents<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Note</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/note/" aria-label="Notes"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Notes<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Tailwind CSS</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/tailwind/" aria-label="Tailwind CSS Contents"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Tailwind CSS Contents<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Typescript</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/typescript/" aria-label="Typescript Contents"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Typescript Contents<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Unimelb Notes</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/unimelb/" aria-label="Unimelb Notes Contents"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Unimelb Notes Contents<!----></a></li></ul></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><div class="vp-nav-item"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Select language"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" name="i18n" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/posts/interview/7.html" aria-label="English"><!---->English<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/zh/" aria-label="简体中文"><!---->简体中文<!----></a></li></ul></button></div></div><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/Crc011220/Crc011220.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search Blogs"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search Blogs</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/" aria-label="Blog Home"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->Blog Home<!----></a></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header active"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">Posts</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ai</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Algorithm</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Aws Saa</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Cliché</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Cmb</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Docker</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Dubbo</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Elasticsearch</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/genesis.html" aria-label="Genesis"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Genesis<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Hadoop</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Interview</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/posts/interview/" aria-label="Interview Contents"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Interview Contents<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/interview/6.html" aria-label="Java Collections"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Java Collections<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/posts/interview/7.html" aria-label="Java Concurrent Programming"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Java Concurrent Programming<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/interview/8.html" aria-label="JVM"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->JVM<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/interview/5.html" aria-label="Message Queue"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Message Queue<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/interview/3.html" aria-label="MicroServices and SpringCloud"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->MicroServices and SpringCloud<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/interview/1.html" aria-label="MySQL"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->MySQL<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/interview/9.html" aria-label="Others"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Others<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/interview/4.html" aria-label="Redis"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Redis<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/interview/2.html" aria-label="SSM"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->SSM<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Istio</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Kubernetes</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Mybatis</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Nextjs</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Nginx</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Note</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Spark</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Tailwind</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Typescript</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Unimelb</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/intro.html" aria-label="About Me"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-circle-info" style=""></span><!--]-->About Me<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Java Concurrent Programming</h1><div class="page-info"><span class="page-author-info" aria-label="Author🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Richard Chen</span></span><span property="author" content="Richard Chen"></span></span><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">November 23, 2024</span><meta property="datePublished" content="2024-11-23T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 13 min</span><meta property="timeRequired" content="PT13M"></span><span class="page-category-info" aria-label="Category🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color5 clickable" role="navigation">Learning Records</span><!--]--><meta property="articleSection" content="Learning Records"></span><span class="page-tag-info" aria-label="Tag🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color7 clickable" role="navigation">Technical Interview</span><!--]--><meta property="keywords" content="Technical Interview"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><div class="vp-toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-1-what-is-the-difference-between-threads-and-processes">1.1 What is the difference between threads and processes?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-2-what-is-the-difference-between-parallelism-and-concurrency">1.2 What is the difference between parallelism and concurrency?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-3-four-ways-to-create-threads">1.3 Four ways to create threads</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-4-what-is-the-difference-between-runnable-and-callable">1.4 What is the difference between Runnable and Callable?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-5-what-is-the-difference-between-the-run-and-start-methods-of-a-thread">1.5 What is the difference between the run() and start() methods of a thread?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-6-what-states-does-a-thread-include-and-how-do-they-change">1.6 What states does a thread include, and how do they change?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-7-how-to-ensure-that-newly-created-threads-t1-t2-and-t3-execute-in-order">1.7 How to ensure that newly created threads T1, T2, and T3 execute in order?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-8-what-is-the-difference-between-notify-and-notifyall">1.8 What is the difference between notify() and notifyAll()?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-9-what-are-the-differences-between-wait-and-sleep-methods-in-java">1.9 What are the differences between wait and sleep methods in Java?</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#commonalities">Commonalities</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#differences">Differences</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-10-how-to-stop-a-running-thread">1.10 How to stop a running thread?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-1-explain-the-underlying-principle-of-the-synchronized-keyword">2.1 Explain the underlying principle of the synchronized keyword.</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-2-advanced-principles-of-the-synchronized-keyword">2.2 Advanced principles of the synchronized keyword.</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-3-jmm-java-memory-model">2.3 JMM (Java Memory Model)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-4-cas-compare-and-swap">2.4 CAS (Compare and Swap)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-5-volatile">2.5 volatile</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-6-aqs">2.6 AQS</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-7-implementation-principles-of-reentrantlock">2.7 Implementation principles of ReentrantLock</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-8-what-are-the-differences-between-synchronized-and-lock">2.8 What are the differences between synchronized and Lock?</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#first-at-the-syntax-level">First, at the syntax level:</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#second-at-the-functional-level">Second, at the functional level:</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#third-at-the-performance-level">Third, at the performance level:</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-9-what-are-the-conditions-that-lead-to-deadlock">2.9 What are the conditions that lead to deadlock?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-10-how-to-diagnose-deadlocks">2.10 How to diagnose deadlocks?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-11-concurrenthashmap">2.11 ConcurrentHashMap</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-12-what-is-the-fundamental-reason-for-issues-in-concurrent-programs">2.12 What is the fundamental reason for issues in concurrent programs?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-1-core-parameters-of-thread-pools-do-you-know-the-execution-principles-of-thread-pools">3.1 Core parameters of thread pools (Do you know the execution principles of thread pools?)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-2-what-are-the-common-blocking-queues-in-thread-pools">3.2 What are the common blocking queues in thread pools?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-3-how-to-determine-the-number-of-core-threads">3.3 How to determine the number of core threads?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-4-what-types-of-thread-pools-are-available">3.4 What types of thread pools are available?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-5-why-is-it-not-recommended-to-use-executors-to-create-thread-pools">3.5 Why is it not recommended to use Executors to create thread pools?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-1-scenarios-for-using-thread-pools-countdownlatch-future">4.1 Scenarios for using thread pools: CountDownLatch, Future</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#reference-scenario-1">Reference Scenario 1:</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#reference-scenario-2">Reference Scenario 2:</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#reference-scenario-3">Reference Scenario 3:</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-2-how-to-control-the-number-of-threads-allowed-to-concurrently-access-a-method">4.2 How to control the number of threads allowed to concurrently access a method?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-1-threadlocal">5.1 ThreadLocal</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><h1 id="java-concurrent-programming" tabindex="-1"><a class="header-anchor" href="#java-concurrent-programming"><span>Java Concurrent Programming</span></a></h1><h2 id="_1-1-what-is-the-difference-between-threads-and-processes" tabindex="-1"><a class="header-anchor" href="#_1-1-what-is-the-difference-between-threads-and-processes"><span>1.1 What is the difference between threads and processes?</span></a></h2><ul><li>A process is an instance of a running program, which contains threads, each executing different tasks.</li><li>Different processes use different memory spaces, while all threads within the current process can share the same memory space.</li><li>Threads are lighter; the cost of context switching between threads is generally lower than that of context switching between processes (context switching refers to switching from one thread to another).</li></ul><h2 id="_1-2-what-is-the-difference-between-parallelism-and-concurrency" tabindex="-1"><a class="header-anchor" href="#_1-2-what-is-the-difference-between-parallelism-and-concurrency"><span>1.2 What is the difference between parallelism and concurrency?</span></a></h2><p>With multicore CPUs,</p><ul><li>Concurrency is the ability to handle multiple tasks at the same time, where multiple threads take turns using one or more CPUs.</li><li>Parallelism is the ability to perform multiple tasks simultaneously, where a 4-core CPU executes 4 threads at the same time.</li></ul><h2 id="_1-3-four-ways-to-create-threads" tabindex="-1"><a class="header-anchor" href="#_1-3-four-ways-to-create-threads"><span>1.3 Four ways to create threads</span></a></h2><p>In Java, there are four common ways to create threads:</p><ol><li>Inheriting the Thread class</li><li>Implementing the Runnable interface</li><li>Implementing the Callable interface</li><li>Creating threads using a thread pool. Typically, we use thread pools to create threads in our projects.</li></ol><h2 id="_1-4-what-is-the-difference-between-runnable-and-callable" tabindex="-1"><a class="header-anchor" href="#_1-4-what-is-the-difference-between-runnable-and-callable"><span>1.4 What is the difference between Runnable and Callable?</span></a></h2><ol><li>The run method of the Runnable interface has no return value; the call method of the Callable interface has a return value and is a generic type, which can be used with Future and FutureTask to obtain the results of asynchronous execution.</li><li>The Callable interface supports returning execution results, which requires calling FutureTask.get(); this method will block the main process from continuing until it is called.</li><li>The call() method of the Callable interface allows throwing exceptions, while the run() method of the Runnable interface can only handle exceptions internally and cannot propagate them.</li></ol><h2 id="_1-5-what-is-the-difference-between-the-run-and-start-methods-of-a-thread" tabindex="-1"><a class="header-anchor" href="#_1-5-what-is-the-difference-between-the-run-and-start-methods-of-a-thread"><span>1.5 What is the difference between the run() and start() methods of a thread?</span></a></h2><ul><li>start(): Used to start a thread, which calls the run method to execute the logic defined in the run method. The start method can only be called once.</li><li>run(): Encapsulates the code to be executed by the thread and can be called multiple times.</li></ul><h2 id="_1-6-what-states-does-a-thread-include-and-how-do-they-change" tabindex="-1"><a class="header-anchor" href="#_1-6-what-states-does-a-thread-include-and-how-do-they-change"><span>1.6 What states does a thread include, and how do they change?</span></a></h2><p>In the JDK&#39;s Thread class, the State enumeration defines six thread states: New, Runnable, Terminated, Blocked, Waiting, and Timed Waiting. Regarding thread state transitions, here’s a brief introduction:</p><ul><li>When a thread object is created but has not yet called the start method, it is in the New state. Once the start method is called, it transitions to the Runnable state. If the thread&#39;s code has finished executing, it transitions from Runnable to Terminated.</li><li>If a thread fails to acquire a lock, it transitions from Runnable to the Monitor&#39;s blocked queue. Only when the thread holding the lock releases it will the blocked threads in the queue be awakened according to certain rules, transitioning to the Runnable state.</li><li>If a thread successfully acquires a lock but calls the wait() method due to unmet conditions, it transitions from Runnable to Waiting state. When other threads holding the lock call notify() or notifyAll(), it will return to the Runnable state.</li><li>Additionally, calling sleep(long) will also transition from Runnable to Timed Waiting state, which does not require active awakening; it will naturally return to Runnable state when the timeout expires.</li></ul><h2 id="_1-7-how-to-ensure-that-newly-created-threads-t1-t2-and-t3-execute-in-order" tabindex="-1"><a class="header-anchor" href="#_1-7-how-to-ensure-that-newly-created-threads-t1-t2-and-t3-execute-in-order"><span>1.7 How to ensure that newly created threads T1, T2, and T3 execute in order?</span></a></h2><p>There are various methods to ensure threads execute in a specific order in multithreading. You can use the join() method of the thread class to start another thread within one thread, allowing the other thread to complete before continuing execution. For example: using the join method, T3 calls T2, and T2 calls T1, ensuring that T1 completes first and T3 completes last.</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> JoinTest</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">     public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">         // 创建线程对象</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">         Thread</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> t1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">             System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;t1&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         }) ;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">         Thread</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> t2</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">             try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                 t1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();                          </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 加入线程t1,只有t1线程执行完毕以后，再次执行该线程</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">             } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">InterruptedException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                 e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">printStackTrace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">             }</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">             System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;t2&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         }) ;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">         Thread</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> t3</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">             try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                 t2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();                              </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 加入线程t2,只有t2线程执行完毕以后，再次执行该线程</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">             } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">InterruptedException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                 e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">printStackTrace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">             }</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">             System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;t3&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         }) ;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">         t1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">         t2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">         t3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-8-what-is-the-difference-between-notify-and-notifyall" tabindex="-1"><a class="header-anchor" href="#_1-8-what-is-the-difference-between-notify-and-notifyall"><span>1.8 What is the difference between notify() and notifyAll()?</span></a></h2><ul><li>notifyAll: Wakes up all threads that are waiting.</li><li>notify: Randomly wakes up one waiting thread.</li></ul><h2 id="_1-9-what-are-the-differences-between-wait-and-sleep-methods-in-java" tabindex="-1"><a class="header-anchor" href="#_1-9-what-are-the-differences-between-wait-and-sleep-methods-in-java"><span>1.9 What are the differences between wait and sleep methods in Java?</span></a></h2><h3 id="commonalities" tabindex="-1"><a class="header-anchor" href="#commonalities"><span>Commonalities</span></a></h3><ul><li>wait(), wait(long), and sleep(long) all cause the current thread to temporarily give up CPU usage and enter a blocked state.</li></ul><h3 id="differences" tabindex="-1"><a class="header-anchor" href="#differences"><span>Differences</span></a></h3><ul><li>Method ownership: <ul><li>sleep(long) is a static method of the Thread class.</li><li>wait() and wait(long) are member methods of the Object class, available to every object.</li></ul></li><li>Wake-up timing: <ul><li>Threads executing sleep(long) and wait(long) will wake up after the specified milliseconds.</li><li>wait(long) and wait() can also be awakened by notify; if wait() is not awakened, it will wait indefinitely.</li><li>Both can be interrupted to wake up.</li></ul></li><li>Lock characteristics (key point): <ul><li>The wait method must first acquire the lock of the wait object, while sleep has no such restriction.</li><li>The wait method releases the object lock after execution, allowing other threads to acquire that object lock (I give up CPU, but you can still use it).</li><li>If sleep is executed within a synchronized block, it does not release the object lock (I give up CPU, but you cannot use it either).</li></ul></li></ul><h2 id="_1-10-how-to-stop-a-running-thread" tabindex="-1"><a class="header-anchor" href="#_1-10-how-to-stop-a-running-thread"><span>1.10 How to stop a running thread?</span></a></h2><p>There are three ways to stop a thread:</p><ul><li>Use an exit flag to allow the thread to exit normally, meaning the thread terminates when the run method completes.</li><li>Use the stop method to forcefully terminate (not recommended, as this method is deprecated).</li><li>Use the interrupt method to interrupt the thread.</li></ul><h2 id="_2-1-explain-the-underlying-principle-of-the-synchronized-keyword" tabindex="-1"><a class="header-anchor" href="#_2-1-explain-the-underlying-principle-of-the-synchronized-keyword"><span>2.1 Explain the underlying principle of the synchronized keyword.</span></a></h2><p>The synchronized keyword uses a Monitor at the JVM level to determine whether the current thread has acquired the lock. If a thread acquires the lock, other threads cannot obtain it until the lock is released. Synchronized is a pessimistic lock. Since synchronized relies on the JVM-level Monitor, its performance is relatively low.</p><p>The monitor object exists in the header of every Java object, and the synchronized lock is obtained in this way, which is why any object in Java can serve as a lock. The monitor maintains three variables:</p><ul><li>WaitSet: Stores threads in the Waiting state.</li><li>EntryList: Stores threads in the Blocked state.</li><li>Owner: The thread holding the lock. Only one thread can successfully set the Owner flag in the monitor; a monitor can only have one Owner. During the locking process, if other threads attempt to acquire the lock, they enter the EntryList and become blocked. When the thread holding the lock finishes execution and releases it, it will wake up the waiting threads in the EntryList to compete for the lock, and this competition is unfair.</li></ul><h2 id="_2-2-advanced-principles-of-the-synchronized-keyword" tabindex="-1"><a class="header-anchor" href="#_2-2-advanced-principles-of-the-synchronized-keyword"><span>2.2 Advanced principles of the synchronized keyword.</span></a></h2><p>Java&#39;s synchronized has three forms: biased locks, lightweight locks, and heavyweight locks, corresponding to locks held by a single thread, alternating locks held by different threads, and multi-threaded lock contention.</p><ul><li>Heavyweight lock: Implemented using Monitor, involving user mode and kernel mode switching, and process context switching, which is costly and has low performance.</li><li>Lightweight lock: When thread locking times are staggered (i.e., no contention), lightweight locks can be used for optimization. Lightweight modifies the lock flag in the object header, significantly improving performance compared to heavyweight locks. Each modification is a CAS operation, ensuring atomicity.</li><li>Biased lock: If a lock is used by a single thread for an extended period, a biased lock can be used. When the lock is first acquired, a CAS operation occurs, and when the thread attempts to acquire the lock again, it only needs to check if the mark word contains its thread ID, rather than performing the more costly CAS command. Once contention occurs, the lock will upgrade to a heavyweight lock.</li></ul><h2 id="_2-3-jmm-java-memory-model" tabindex="-1"><a class="header-anchor" href="#_2-3-jmm-java-memory-model"><span>2.3 JMM (Java Memory Model)</span></a></h2><p>The Java Memory Model is a crucial memory model defined in the Java Virtual Machine specification. Its primary purpose is to describe the access rules for shared variables among threads in Java programs and how these variables are stored and read in the JVM, involving some low-level details. This model has several core characteristics. First, all shared variables, including instance variables and class variables, are stored in main memory, which is the computer&#39;s RAM. It is important to note that local variables are not included, as they are thread-private and thus do not have contention issues. Second, each thread has its own working memory, which holds copies of the variables used by the thread. This means that all operations on variables, whether reading or writing, must be completed in the thread&#39;s working memory and cannot directly read or write to the variables in main memory. Finally, different threads cannot directly access each other&#39;s working memory variables. If threads need to pass variable values to each other, this process must occur through main memory.</p><h2 id="_2-4-cas-compare-and-swap" tabindex="-1"><a class="header-anchor" href="#_2-4-cas-compare-and-swap"><span>2.4 CAS (Compare and Swap)</span></a></h2><p>CAS stands for Compare And Swap; it embodies the idea of optimistic locking, ensuring atomicity of thread operations on data in an unlocked state.</p><ul><li>CAS is used in many places: AQS framework, AtomicXXX classes.</li><li>It uses spin locks when operating on shared variables, which is more efficient.</li><li>The underlying implementation of CAS calls methods in the Unsafe class, which are provided by the operating system and implemented in other languages.</li></ul><h2 id="_2-5-volatile" tabindex="-1"><a class="header-anchor" href="#_2-5-volatile"><span>2.5 volatile</span></a></h2><p>The volatile keyword can modify class member variables and class static member variables, primarily serving two functions:</p><ol><li>It ensures visibility when different threads operate on this variable, meaning if one thread modifies a variable&#39;s value, this new value is immediately visible to other threads. The volatile keyword forces the modified value to be immediately written to main memory.</li><li>It prevents instruction reordering, ensuring the ordered execution of code. The underlying implementation principle is the addition of a memory barrier, which prevents instruction reordering optimizations before and after the memory barrier.</li></ol><h2 id="_2-6-aqs" tabindex="-1"><a class="header-anchor" href="#_2-6-aqs"><span>2.6 AQS</span></a></h2><p>AQS refers to the AbstractQueuedSynchronizer class provided by the JDK, which serves as a framework for blocking locks and related synchronizer tools. It has a state attribute that indicates the resource&#39;s status, with the default state equal to 0, indicating that the lock has not been acquired, and state equal to 1 indicating that the lock has been acquired. The state is set using the CAS mechanism. It also provides a FIFO-based waiting queue, which is a doubly linked list, where:</p><ul><li>tail points to the last element in the queue.</li><li>head points to the oldest element in the queue. The underlying implementation of ReentrantLock is based on AQS.</li></ul><table><thead><tr><th>synchronized</th><th>AQS</th></tr></thead><tbody><tr><td>Keyword, implemented in C++ in the JVM</td><td>Java language implementation provided by the JDK</td></tr><tr><td>Pessimistic lock, automatically releases the lock</td><td>Pessimistic lock, manually opened and closed</td></tr><tr><td>Heavyweight locks in case of intense competition, poor performance</td><td>Provides various solutions in case of intense competition</td></tr></tbody></table><h2 id="_2-7-implementation-principles-of-reentrantlock" tabindex="-1"><a class="header-anchor" href="#_2-7-implementation-principles-of-reentrantlock"><span>2.7 Implementation principles of ReentrantLock</span></a></h2><p>ReentrantLock is a reentrant lock: after calling the lock method to acquire the lock, calling lock again will not block; it directly increases the reentry count, indicating that this thread has repeatedly acquired the lock without waiting for its release. ReentrantLock belongs to the juc package and is an API-level lock, similar to synchronized, and is also a pessimistic lock. It uses lock() to acquire the lock and unlock() to release it. Its underlying implementation primarily utilizes the CAS + AQS queue. It supports both fair and unfair locks, with similar implementations. The constructor accepts an optional fairness parameter (default is unfair lock); when set to true, it indicates a fair lock; otherwise, it is an unfair lock. Fair locks often have lower efficiency than unfair locks.</p><h2 id="_2-8-what-are-the-differences-between-synchronized-and-lock" tabindex="-1"><a class="header-anchor" href="#_2-8-what-are-the-differences-between-synchronized-and-lock"><span>2.8 What are the differences between synchronized and Lock?</span></a></h2><h3 id="first-at-the-syntax-level" tabindex="-1"><a class="header-anchor" href="#first-at-the-syntax-level"><span>First, at the syntax level:</span></a></h3><ul><li>synchronized is a keyword, implemented in C++ in the JVM, and automatically releases the lock upon exiting the synchronized code block.</li><li>Lock is an interface, provided by the JDK, implemented in Java, and requires manual invocation of the unlock method to release the lock.</li></ul><h3 id="second-at-the-functional-level" tabindex="-1"><a class="header-anchor" href="#second-at-the-functional-level"><span>Second, at the functional level:</span></a></h3><ul><li>Both are pessimistic locks and possess basic mutual exclusion, synchronization, and lock reentry capabilities.</li><li>Lock provides many features that synchronized does not, such as obtaining waiting status, fair locks, interruptibility, timeout, multiple condition variables, and can implement different scenarios like ReentrantLock and ReentrantReadWriteLock.</li></ul><h3 id="third-at-the-performance-level" tabindex="-1"><a class="header-anchor" href="#third-at-the-performance-level"><span>Third, at the performance level:</span></a></h3><ul><li>When there is no contention, synchronized has many optimizations, such as biased locks and lightweight locks, and performs well.</li><li>In cases of intense competition, Lock&#39;s implementation usually provides better performance. In summary, different locks should be chosen based on different scenarios.</li></ul><h2 id="_2-9-what-are-the-conditions-that-lead-to-deadlock" tabindex="-1"><a class="header-anchor" href="#_2-9-what-are-the-conditions-that-lead-to-deadlock"><span>2.9 What are the conditions that lead to deadlock?</span></a></h2><p>A deadlock easily occurs when a thread needs to acquire multiple locks simultaneously. For example:</p><ul><li>Thread t1 acquires the lock on object A and then tries to acquire the lock on object B.</li><li>Thread t2 acquires the lock on object B and then tries to acquire the lock on object A. At this point, both t1 and t2 are waiting for each other&#39;s locks, resulting in a deadlock.</li></ul><h2 id="_2-10-how-to-diagnose-deadlocks" tabindex="-1"><a class="header-anchor" href="#_2-10-how-to-diagnose-deadlocks"><span>2.10 How to diagnose deadlocks?</span></a></h2><p>We can easily resolve this using JDK&#39;s automatic tools. First, we can use jps to view the current Java program&#39;s process ID. Then, we can use jstack to view this process ID, which will display the deadlock issue and can pinpoint the specific line numbers in the code, allowing us to locate and troubleshoot the corresponding code.</p><h2 id="_2-11-concurrenthashmap" tabindex="-1"><a class="header-anchor" href="#_2-11-concurrenthashmap"><span>2.11 ConcurrentHashMap</span></a></h2><p>ConcurrentHashMap is a thread-safe and efficient Map collection, with significant adjustments made in JDK 1.7 and 1.8.</p><ul><li>JDK 1.7&#39;s underlying implementation uses a segmented array + linked list.</li><li>JDK 1.8 adopts a data structure similar to HashMap 1.8, which is an array + linked list/red-black tree. In JDK 1.7, ConcurrentHashMap contains a Segment array. The structure of a Segment is similar to that of HashMap, consisting of an array and linked list structure. Each Segment contains a HashEntry array, where each HashEntry is an element of a linked list. Each Segment guards the elements in its HashEntry array, and when modifying the data in the HashEntry array, the corresponding Segment&#39;s lock must be acquired first. A Segment is a reentrant lock (ReentrantLock), and each Segment guards the elements in its HashEntry array. When modifying the data in the HashEntry array, the corresponding Segment lock must be acquired first. In JDK 1.8, ConcurrentHashMap underwent significant optimizations, greatly improving performance. First, its data structure is entirely consistent with JDK 1.8&#39;s HashMap data structure. Second, it abandoned the bulky Segment design, replacing it with Node + CAS + Synchronized to ensure concurrent safety. Synchronized only locks the head node of the current linked list or red-black tree, so as long as there are no hash collisions, concurrency will not occur, thus improving efficiency.</li></ul><h2 id="_2-12-what-is-the-fundamental-reason-for-issues-in-concurrent-programs" tabindex="-1"><a class="header-anchor" href="#_2-12-what-is-the-fundamental-reason-for-issues-in-concurrent-programs"><span>2.12 What is the fundamental reason for issues in concurrent programs?</span></a></h2><p>Java concurrent programming has three core characteristics: atomicity, visibility, and ordering.</p><ul><li>First, atomicity means that operations by a thread in the CPU cannot be paused or interrupted; they either complete or do not execute. For example, some simple operations like assignment may be atomic, but composite operations like incrementing are not atomic. To ensure atomicity, we can use the synchronized keyword or Lock from JUC to lock.</li><li>Second, visibility means that modifications made by one thread to shared variables are visible to another thread. Since threads may cache copies of shared variables in their working memory, modifications made by one thread may not immediately reflect in other threads&#39; working memory. To address this, we can use the synchronized keyword, volatile keyword, or Lock to ensure visibility.</li><li>Finally, ordering refers to the fact that processors may optimize input code to improve program execution efficiency, leading to discrepancies between the execution order of statements in the program and the order in the code. Although the processor guarantees that the final execution result of the program is consistent with the result of executing the code in order, we may need to ensure specific execution orders in certain cases. To solve this, we can use the volatile keyword to prevent instruction reordering.</li></ul><h2 id="_3-1-core-parameters-of-thread-pools-do-you-know-the-execution-principles-of-thread-pools" tabindex="-1"><a class="header-anchor" href="#_3-1-core-parameters-of-thread-pools-do-you-know-the-execution-principles-of-thread-pools"><span>3.1 Core parameters of thread pools (Do you know the execution principles of thread pools?)</span></a></h2><p>There are a total of 7 core parameters in a thread pool:</p><ol><li>corePoolSize: The number of core threads - the maximum number of threads that will be retained in the pool.</li><li>maximumPoolSize: The maximum number of threads - the maximum number of core threads + emergency threads.</li><li>keepAliveTime: The survival time - the survival time of emergency threads; if there are no new tasks during this time, the thread resources will be released.</li><li>unit: The time unit - the unit of survival time for emergency threads, such as seconds, milliseconds, etc.</li><li>workQueue: When there are no idle core threads, new tasks will be added to this queue for waiting; if the queue is full, emergency threads will be created to execute tasks.</li><li>threadFactory: Thread factory - can customize the creation of thread objects, such as setting thread names, whether they are daemon threads, etc.</li><li>handler: Rejection policy - when all threads are busy and the workQueue is full, the rejection policy will be triggered. There are four types of rejection policies: the first is to throw an exception, the second is to execute the task by the caller, the third is to discard the current task, and the fourth is to discard the earliest queued task. The default is to throw an exception directly.</li></ol><h2 id="_3-2-what-are-the-common-blocking-queues-in-thread-pools" tabindex="-1"><a class="header-anchor" href="#_3-2-what-are-the-common-blocking-queues-in-thread-pools"><span>3.2 What are the common blocking queues in thread pools?</span></a></h2><p>The JDK provides many blocking queues, with two commonly used in development: ArrayBlockingQueue and LinkedBlockingQueue. ArrayBlockingQueue and LinkedBlockingQueue are two common blocking queues in Java, and they have some key differences in implementation and usage.</p><ul><li>First, ArrayBlockingQueue is a bounded queue that must specify its capacity upon creation, and this capacity cannot change. LinkedBlockingQueue, on the other hand, is unbounded by default but can also be specified with a maximum capacity to become a bounded queue.</li><li>Second, they differ in their internal data structures. ArrayBlockingQueue is implemented based on an array, while LinkedBlockingQueue is implemented based on a linked list. This means that ArrayBlockingQueue may be faster when accessing elements because it can directly access elements in the array by index. LinkedBlockingQueue may be faster when adding and removing elements because it does not need to move other elements to fill space.</li><li>Additionally, they differ in their locking mechanisms. ArrayBlockingQueue uses a single lock to control access to the queue, meaning that read and write operations are mutually exclusive. LinkedBlockingQueue uses two locks, one for controlling read operations and another for controlling write operations, which can improve concurrency performance.</li></ul><h2 id="_3-3-how-to-determine-the-number-of-core-threads" tabindex="-1"><a class="header-anchor" href="#_3-3-how-to-determine-the-number-of-core-threads"><span>3.3 How to determine the number of core threads?</span></a></h2><ol><li>High concurrency and short task execution time --&gt; (CPU core count + 1), to reduce thread context switching.</li><li>Low concurrency and long task execution time: <ul><li>For I/O-intensive tasks --&gt; (CPU core count * 2 + 1)</li><li>For CPU-intensive tasks --&gt; (CPU core count + 1)</li></ul></li><li>High concurrency and long business execution time: The key to solving this type of task lies not in the thread pool but in the overall architecture design. The first step is to see if some data in these businesses can be cached, and the second step is to increase the server.</li></ol><h2 id="_3-4-what-types-of-thread-pools-are-available" tabindex="-1"><a class="header-anchor" href="#_3-4-what-types-of-thread-pools-are-available"><span>3.4 What types of thread pools are available?</span></a></h2><p>The JDK provides four default ways to create thread pools:</p><ol><li>newCachedThreadPool: Creates a cached thread pool that can flexibly recycle idle threads if the pool length exceeds the processing needs; if no threads can be recycled, new threads will be created.</li><li>newFixedThreadPool: Creates a fixed-size thread pool that can control the maximum number of concurrent threads; excess threads will wait in the queue.</li><li>newScheduledThreadPool: Creates a fixed-size thread pool that supports scheduled and periodic task execution.</li><li>newSingleThreadExecutor: Creates a single-threaded executor that will use a single worker thread to execute tasks, ensuring that all tasks are executed in the specified order (FIFO, LIFO, priority).</li></ol><h2 id="_3-5-why-is-it-not-recommended-to-use-executors-to-create-thread-pools" tabindex="-1"><a class="header-anchor" href="#_3-5-why-is-it-not-recommended-to-use-executors-to-create-thread-pools"><span>3.5 Why is it not recommended to use Executors to create thread pools?</span></a></h2><p>If you use Executors to create a thread pool, the default length of the request queue is Integer.MAX_VALUE, which may lead to a large backlog of requests, resulting in OOM (Out of Memory) errors. Therefore, we generally recommend using ThreadPoolExecutor to create thread pools, as this allows for clear specification of the thread pool parameters, avoiding resource exhaustion.</p><h2 id="_4-1-scenarios-for-using-thread-pools-countdownlatch-future" tabindex="-1"><a class="header-anchor" href="#_4-1-scenarios-for-using-thread-pools-countdownlatch-future"><span>4.1 Scenarios for using thread pools: CountDownLatch, Future</span></a></h2><h3 id="reference-scenario-1" tabindex="-1"><a class="header-anchor" href="#reference-scenario-1"><span>Reference Scenario 1:</span></a></h3><p>Bulk data import to ES Before our project went live, we needed to synchronize a large amount of data (around 10 million) to the ES index library at once, which was not feasible (OOM exception). If executed in batches, it would take too long. Therefore, I thought of using a thread pool for the import, utilizing CountDownLatch + Future to control the process, significantly improving the import time.</p><h3 id="reference-scenario-2" tabindex="-1"><a class="header-anchor" href="#reference-scenario-2"><span>Reference Scenario 2:</span></a></h3><p>In the e-commerce website I worked on, there was a data aggregation feature. After a user placed an order, it was necessary to query order information, obtain detailed information about the products in the order (which could be multiple), and check the logistics and shipping information. Since these three corresponded to three microservices, if operated sequentially, the waiting time would be quite long. Therefore, I thought of using a thread pool to allow multiple threads to process simultaneously and then aggregate the results, of course, using Future to obtain the results after each thread execution.</p><h3 id="reference-scenario-3" tabindex="-1"><a class="header-anchor" href="#reference-scenario-3"><span>Reference Scenario 3:</span></a></h3><p>I developed a search function for articles where users input keywords to search for articles while needing to save user search records (search history). In the design, to avoid affecting the user&#39;s normal search, we adopted an asynchronous method for saving, and to enhance performance, we incorporated a thread pool, meaning that when calling the asynchronous method, we directly obtained threads from the thread pool.</p><h2 id="_4-2-how-to-control-the-number-of-threads-allowed-to-concurrently-access-a-method" tabindex="-1"><a class="header-anchor" href="#_4-2-how-to-control-the-number-of-threads-allowed-to-concurrently-access-a-method"><span>4.2 How to control the number of threads allowed to concurrently access a method?</span></a></h2><p>The JDK provides a Semaphore class (semaphore). It offers two methods:</p><ul><li>semaphore.acquire(): Requests a semaphore, which can limit the number of threads; if the semaphore is -1, it indicates that the semaphore has been exhausted, and other threads need to block.</li><li>semaphore.release(): Represents the release of a semaphore, increasing the semaphore count by 1.</li></ul><h2 id="_5-1-threadlocal" tabindex="-1"><a class="header-anchor" href="#_5-1-threadlocal"><span>5.1 ThreadLocal</span></a></h2><p>ThreadLocal has two main functions:</p><ol><li>It can achieve thread isolation of resource objects, allowing each thread to use its own resource object, avoiding thread safety issues caused by contention.</li><li>It enables resource sharing within a thread. ThreadLocal maintains a member variable of type ThreadLocalMap to store resource objects. When we call the set method, it uses ThreadLocal itself as the key and the resource object as the value, placing it in the current thread&#39;s ThreadLocalMap collection. When calling the get method, it uses ThreadLocal itself as the key to look up the associated resource value in the current thread. When calling the remove method, it uses ThreadLocal itself as the key to remove the associated resource value from the current thread. ThreadLocal memory overflow occurs because the keys in ThreadLocalMap are designed as weak references, which are passively released by the GC. However, only the keys can be released from memory, while the values remain strong references. When using ThreadLocal, it is often treated as a static variable (i.e., strong reference), making it impossible to rely on GC for recovery. It is recommended to actively call remove to release the key, thus avoiding memory overflow.</li></ol></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/Crc011220/Crc011220.github.io/edit/main/src/posts/interview/7.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">Last update: </span><span class="vp-meta-info" data-allow-mismatch="text">11/24/2024, 11:15:41 AM</span></div><div class="contributors"><span class="vp-meta-label">Contributors: </span><!--[--><!--[--><span class="vp-meta-info" title="email: ruocchen1220@gmail.com">Ruochen Chen</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/posts/interview/6.html" aria-label="Java Collections"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Java Collections</div></a><a class="route-link auto-link next" href="/posts/interview/8.html" aria-label="JVM"><div class="hint">Next<span class="arrow end"></span></div><div class="link">JVM<span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">Learning today, leading tomorrow</div><div class="vp-copyright">Copyright © 2025 Richard Chen </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script src="/assets/js/runtime~app.b091eca3.js" defer></script><script src="/assets/js/6312.2d95f1ad.js" defer></script><script src="/assets/js/app.616ce5fc.js" defer></script>
  </body>
</html>
