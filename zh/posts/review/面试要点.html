<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.59" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://crc011220.github.io/zh/posts/review/%E9%9D%A2%E8%AF%95%E8%A6%81%E7%82%B9.html"><meta property="og:site_name" content="Ruochen Chen"><meta property="og:title" content="é¢è¯•è¦ç‚¹"><meta property="og:description" content="é¢è¯•è¦ç‚¹ JavaåŸºç¡€ 1. equals() å’Œ == çš„åŒºåˆ«ï¼Ÿå¦‚ä½•æ­£ç¡®é‡å†™ equals() å’Œ hashCode() æ–¹æ³•ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦åŒæ—¶é‡å†™ï¼Ÿ == å’Œ equals() çš„åŒºåˆ« == æ“ä½œç¬¦ï¼šå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹æ¯”è¾ƒå€¼ï¼Œå¯¹äºå¼•ç”¨ç±»å‹æ¯”è¾ƒå†…å­˜åœ°å€ equals() æ–¹æ³•ï¼šObjectç±»é»˜è®¤å®ç°æ˜¯æ¯”è¾ƒå¼•ç”¨ï¼ŒStringç­‰ç±»é‡å†™åæ¯”è¾ƒå†…å®¹ æ­£ç¡®é‡å†™çš„äº”..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-08-06T01:25:56.000Z"><meta property="article:tag" content="Review"><meta property="article:published_time" content="2025-07-27T00:00:00.000Z"><meta property="article:modified_time" content="2025-08-06T01:25:56.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"é¢è¯•è¦ç‚¹","image":[""],"datePublished":"2025-07-27T00:00:00.000Z","dateModified":"2025-08-06T01:25:56.000Z","author":[{"@type":"Person","name":"Ruochen Chen"}]}</script><link rel="icon" href="/mac.ico"><title>é¢è¯•è¦ç‚¹ | Ruochen Chen</title><meta name="description" content="é¢è¯•è¦ç‚¹ JavaåŸºç¡€ 1. equals() å’Œ == çš„åŒºåˆ«ï¼Ÿå¦‚ä½•æ­£ç¡®é‡å†™ equals() å’Œ hashCode() æ–¹æ³•ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦åŒæ—¶é‡å†™ï¼Ÿ == å’Œ equals() çš„åŒºåˆ« == æ“ä½œç¬¦ï¼šå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹æ¯”è¾ƒå€¼ï¼Œå¯¹äºå¼•ç”¨ç±»å‹æ¯”è¾ƒå†…å­˜åœ°å€ equals() æ–¹æ³•ï¼šObjectç±»é»˜è®¤å®ç°æ˜¯æ¯”è¾ƒå¼•ç”¨ï¼ŒStringç­‰ç±»é‡å†™åæ¯”è¾ƒå†…å®¹ æ­£ç¡®é‡å†™çš„äº”...">
    <link rel="stylesheet" href="/assets/css/styles.563fed46.css">
    <link rel="preload" href="/assets/js/runtime~app.257655cf.js" as="script"><link rel="preload" href="/assets/css/styles.563fed46.css" as="style"><link rel="preload" href="/assets/js/6312.2d95f1ad.js" as="script"><link rel="preload" href="/assets/js/app.9e127fe8.js" as="script">
    <link rel="prefetch" href="/assets/js/zh_posts_declarative_haskell.html.f219f509.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_java8_å‡½æ•°å¼ç¼–ç¨‹.html.6406d92a.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_Netty01-nio.html.6aaca557.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_Netty04-ä¼˜åŒ–ä¸æºç .html.8edea904.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_Netty03-è¿›é˜¶.html.6b130a66.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_æ•°ç»„.html.7de0b42a.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_åŠ¨æ€è§„åˆ’.html.98660fc0.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_Netty02-intro.html.48ff395e.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_nginx_1.html.be9ccc3a.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_äºŒå‰æ ‘.html.b18d0dd9.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_declarative_prolog.html.d10c8ca1.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_é¢è¯•è¦ç‚¹.html.d7d68586.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_é“¾è¡¨.html.fdbcb853.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_COMP90024.html.c07eee32.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_å›¾.html.ae7133bf.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_æ ˆå’Œé˜Ÿåˆ—.html.4f10644c.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_hive_Hive-SQLè¯­æ³•å¤§å…¨.html.4ea325b1.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_14.html.91687ee1.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_declarative_haskellé€Ÿè®°.html.0de6f0c8.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_COMP90049.html.4b1c6d22.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_å›æº¯.html.b870efd4.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_COMP90050.html.4b5d3bee.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_å…¶ä»–é—®é¢˜.html.e5ce5b39.js" as="script"><link rel="prefetch" href="/assets/js/posts_note_Coin-exchange-project-note.html.9c9c631c.js" as="script"><link rel="prefetch" href="/assets/js/posts_tailwind_summary.html.7c9f97e6.js" as="script"><link rel="prefetch" href="/assets/js/2664.0c0e265f.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_å…¶ä»–.html.88182e63.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_æ•°æ®ç»“æ„.html.1143a147.js" as="script"><link rel="prefetch" href="/assets/js/posts_typescript_1.html.adb4c039.js" as="script"><link rel="prefetch" href="/assets/js/posts_typescript_2.html.70e869a7.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_è´ªå¿ƒ.html.8b0ae2af.js" as="script"><link rel="prefetch" href="/assets/js/posts_aws-saa_1.html.12f65834.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_ml.html.930a6c4a.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_è®¡ç®—æœºç½‘ç»œ.html.2625760c.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_æ•°æ®åº“.html.b80c36f1.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_COMP90048.html.8968005c.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_è®¡ç®—æœºç»„æˆåŸç†.html.1c8444d9.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_æ“ä½œç³»ç»Ÿ.html.7a2e9a3b.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_1.html.42f88b26.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_declarative_prologé€Ÿè®°.html.06d2d57f.js" as="script"><link rel="prefetch" href="/assets/js/8300.ef6ef338.js" as="script"><link rel="prefetch" href="/assets/js/posts_mybatis_2.html.5926ba81.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_åŒæŒ‡é’ˆ.html.dd171978.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_7.html.d2987d20.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_4.html.d05f7970.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_5.html.74809557.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_8.html.48797aee.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_2.html.5da88c74.js" as="script"><link rel="prefetch" href="/assets/js/posts_aws-saa_3.html.3976b1b1.js" as="script"><link rel="prefetch" href="/assets/js/posts_nginx_1.html.9d684d75.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_SWEN90016.html.240e6126.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_å“ˆå¸Œ.html.756f5c70.js" as="script"><link rel="prefetch" href="/assets/js/posts_spark_Spark-Core.html.d371024a.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_11.html.acf3feb6.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_14.html.6ae00502.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_8.html.35609b90.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_4.html.76f297f5.js" as="script"><link rel="prefetch" href="/assets/js/posts_spark_Spark-Sql.html.1a76e157.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_21.html.5d38e92e.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_ä¿¡æ¯æ–°æŠ€æœ¯.html.016ea36f.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_11.html.6ac0e485.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_5.html.d6b5776e.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_6.html.9f42e615.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_10.html.7cfe6b37.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_1.html.275b2472.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_6.html.b0bf65af.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_4.html.bb865133.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_å•è°ƒæ ˆ.html.97d2a1c2.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_15.html.6ad131ac.js" as="script"><link rel="prefetch" href="/assets/js/posts_aws-saa_2.html.19b4fc69.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_6.html.0ce6907d.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_3.html.07708648.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_12.html.33aac800.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_14.html.4487a39f.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_13.html.1600cb03.js" as="script"><link rel="prefetch" href="/assets/js/posts_ai_javaai.html.ddef5ab6.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_5.html.c674a286.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_6.html.c703f5fb.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_2.html.2012a517.js" as="script"><link rel="prefetch" href="/assets/js/posts_typescript_3.html.67716c58.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_2.html.3cb286a6.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_16.html.47a98467.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_2.html.2faaae84.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_7.html.b7a17cf5.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_3.html.e6de0801.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_12.html.78a79e16.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_17.html.48e4e11f.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_ä½è¿ç®—.html.89a49729.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_13.html.1af16bb4.js" as="script"><link rel="prefetch" href="/assets/js/intro.html.94b9bc8e.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_9.html.c802974b.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_15.html.c14ce54d.js" as="script"><link rel="prefetch" href="/assets/js/posts_ai_create_mcp.html.7bbd9d99.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_18.html.6db3b8d0.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_1.html.52e2c809.js" as="script"><link rel="prefetch" href="/assets/js/posts_ai_mcp.html.97488bfa.js" as="script"><link rel="prefetch" href="/assets/js/posts_mybatis_1.html.0715b7ed.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_1.html.b4be9a5c.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_7.html.391ad3ae.js" as="script"><link rel="prefetch" href="/assets/js/posts_istio_1.html.0402dff2.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_4.html.babb3186.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_15.html.1a066aec.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_10.html.a809572e.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_1.html.3f7ea202.js" as="script"><link rel="prefetch" href="/assets/js/zh_intro.html.4f0fc279.js" as="script"><link rel="prefetch" href="/assets/js/posts_spark_Spark-Intro.html.ccd5e5dd.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_5.html.e4df8be3.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_19.html.f4de2c0a.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_7.html.be9d15e1.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_3.html.1db9eef8.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_7.html.95a6d006.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_8.html.bf7de1dc.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_å­—ç¬¦ä¸².html.7bb4b0c9.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_index.html.964e7b71.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_3.html.b6b4d014.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_Hive.html.0678d205.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_7.html.97e8c4ab.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_9.html.daf44b98.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_HDFS.html.bc68b1b5.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_index.html.969cd922.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_2.html.03f4e466.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_8.html.266a2255.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_4.html.f53cce1e.js" as="script"><link rel="prefetch" href="/assets/js/posts_jd_note.html.d14373ad.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_5.html.4cdca3c2.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_3.html.47cad464.js" as="script"><link rel="prefetch" href="/assets/js/posts_docker_1.html.fb8facad.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_11.html.ce50e313.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_microsvc_1.html.2fe97c3c.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_index.html.8bdb826b.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_summary.html.dcef505d.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_6.html.b6472eba.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_6.html.02cce475.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_æ•°å­¦.html.dfdf15d8.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_3.html.e8a57164.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_6.html.0c46208c.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_7.html.34e04d11.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_8.html.ae4c64a3.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_4.html.a8ec1263.js" as="script"><link rel="prefetch" href="/assets/js/posts_elasticsearch_query-dsl.html.c10df9f4.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_cloudflare.html.8d90577a.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_20.html.490f1029.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_1.html.0cac3363.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_5.html.a42942da.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_2.html.1499c365.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_10.html.156d0fc8.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_16.html.94f2539e.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_3.html.2d055dbe.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_tools.html.4cf9b015.js" as="script"><link rel="prefetch" href="/assets/js/posts_elasticsearch_1.html.55fea42c.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_2.html.4fddb7fe.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_index.html.9f6e664a.js" as="script"><link rel="prefetch" href="/assets/js/posts_dubbo_1.html.1f23a627.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_4.html.1c4ee376.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_9.html.132d4ce9.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_index.html.3644a432.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_index.html.b114f681.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_9.html.a3039a5a.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_index.html.6e477592.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_1.html.ea5597b0.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_8.html.bc2310ff.js" as="script"><link rel="prefetch" href="/assets/js/posts_elasticsearch_2.html.965ea244.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_genesis.html.b92085d2.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_5.html.4cfebd9b.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_GEOM90007.html.daec0d9f.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_index.html.77a0d6fd.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_MapReduce.html.66b74478.js" as="script"><link rel="prefetch" href="/assets/js/posts_genesis.html.f2dcbd5d.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_12.html.6f85b8a6.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_sealos.html.2f8ff09a.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_index.html.30eae38c.js" as="script"><link rel="prefetch" href="/assets/js/posts_dubbo_2.html.4153924b.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_13.html.9f0ab2c4.js" as="script"><link rel="prefetch" href="/assets/js/posts_aws-saa_index.html.91a04274.js" as="script"><link rel="prefetch" href="/assets/js/posts_typescript_index.html.3113541a.js" as="script"><link rel="prefetch" href="/assets/js/posts_elasticsearch_index.html.4152a6b9.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_index.html.c927a97d.js" as="script"><link rel="prefetch" href="/assets/js/index.html.8b8ff801.js" as="script"><link rel="prefetch" href="/assets/js/posts_dubbo_index.html.6c52fb32.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_Yarn.html.94f37571.js" as="script"><link rel="prefetch" href="/assets/js/posts_nginx_index.html.75cc2b5d.js" as="script"><link rel="prefetch" href="/assets/js/posts_ai_index.html.6d4a62d9.js" as="script"><link rel="prefetch" href="/assets/js/posts_mybatis_index.html.f1a73719.js" as="script"><link rel="prefetch" href="/assets/js/posts_spark_index.html.434a7834.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_microsvc_index.html.7ac9796f.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_9.html.e9ae3067.js" as="script"><link rel="prefetch" href="/assets/js/posts_nginx_2.html.61b94ab9.js" as="script"><link rel="prefetch" href="/assets/js/zh_index.html.b526dd8b.js" as="script"><link rel="prefetch" href="/assets/js/posts_tailwind_index.html.a3b1860b.js" as="script"><link rel="prefetch" href="/assets/js/posts_docker_index.html.915fb03b.js" as="script"><link rel="prefetch" href="/assets/js/posts_istio_index.html.d4b67811.js" as="script"><link rel="prefetch" href="/assets/js/posts_note_index.html.79ea061a.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_GEOM90008.html.d7040807.js" as="script"><link rel="prefetch" href="/assets/js/category_learning-records_index.html.f32ee64d.js" as="script"><link rel="prefetch" href="/assets/js/tag_nginx_index.html.0fa6f2ea.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_declarative-programming_index.html.6ae8ae47.js" as="script"><link rel="prefetch" href="/assets/js/category_index.html.50e2e1bc.js" as="script"><link rel="prefetch" href="/assets/js/timeline_index.html.a204d771.js" as="script"><link rel="prefetch" href="/assets/js/article_index.html.ffcd7938.js" as="script"><link rel="prefetch" href="/assets/js/zh_category_å­¦ä¹ ç¬”è®°_index.html.12546e3e.js" as="script"><link rel="prefetch" href="/assets/js/category_internship-journal_index.html.4b3fa613.js" as="script"><link rel="prefetch" href="/assets/js/zh_category_learning-records_index.html.af6fedad.js" as="script"><link rel="prefetch" href="/assets/js/tag_index.html.dbf647b4.js" as="script"><link rel="prefetch" href="/assets/js/star_index.html.7f8a9df9.js" as="script"><link rel="prefetch" href="/assets/js/tag_programmer-clichÃ©_index.html.120cca1a.js" as="script"><link rel="prefetch" href="/assets/js/tag_algorithm-practices_index.html.d975dd18.js" as="script"><link rel="prefetch" href="/assets/js/tag_china-merchant-bank_index.html.de8b373f.js" as="script"><link rel="prefetch" href="/assets/js/tag_technical-interview_index.html.acf61e6f.js" as="script"><link rel="prefetch" href="/assets/js/posts_index.html.c7f3157a.js" as="script"><link rel="prefetch" href="/assets/js/zh_category_å¼€å§‹_index.html.29cb4412.js" as="script"><link rel="prefetch" href="/assets/js/tag_tailwind-css_index.html.7b3e36e9.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_æ—…ç¨‹_index.html.151709c9.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_ç®€å†_index.html.96ae735a.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_algorithm_index.html.5a457b02.js" as="script"><link rel="prefetch" href="/assets/js/category_genesis_index.html.66947f9e.js" as="script"><link rel="prefetch" href="/assets/js/tag_javascript_index.html.266dcd48.js" as="script"><link rel="prefetch" href="/assets/js/tag_kubernetes_index.html.2b919c53.js" as="script"><link rel="prefetch" href="/assets/js/tag_typescript_index.html.ab5e1572.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_review_index.html.9bc60916.js" as="script"><link rel="prefetch" href="/assets/js/tag_leetcode_index.html.6b98bbdb.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_java8_index.html.5b1186ee.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_netty_index.html.3ede65fb.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_nginx_index.html.c21f0432.js" as="script"><link rel="prefetch" href="/assets/js/tag_aws-saa_index.html.01a20249.js" as="script"><link rel="prefetch" href="/assets/js/tag_mybatis_index.html.bdbe6d2a.js" as="script"><link rel="prefetch" href="/assets/js/tag_unimelb_index.html.d4bafe83.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_hive_index.html.fab4d732.js" as="script"><link rel="prefetch" href="/assets/js/tag_docker_index.html.b7d4cbf8.js" as="script"><link rel="prefetch" href="/assets/js/tag_hadoop_index.html.39a6a55f.js" as="script"><link rel="prefetch" href="/assets/js/tag_nextjs_index.html.581d2c34.js" as="script"><link rel="prefetch" href="/assets/js/tag_resume_index.html.c4e4c327.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_nio_index.html.0a4acee3.js" as="script"><link rel="prefetch" href="/assets/js/tag_dubbo_index.html.90f9e5c2.js" as="script"><link rel="prefetch" href="/assets/js/tag_index_index.html.ee3192d7.js" as="script"><link rel="prefetch" href="/assets/js/tag_istio_index.html.cb329abb.js" as="script"><link rel="prefetch" href="/assets/js/tag_notes_index.html.075779e3.js" as="script"><link rel="prefetch" href="/assets/js/tag_react_index.html.49ec34fb.js" as="script"><link rel="prefetch" href="/assets/js/tag_spark_index.html.287e8a9c.js" as="script"><link rel="prefetch" href="/assets/js/404.html.15229e01.js" as="script"><link rel="prefetch" href="/assets/js/zh_timeline_index.html.3a7839f4.js" as="script"><link rel="prefetch" href="/assets/js/tag_ai_index.html.3120c8b4.js" as="script"><link rel="prefetch" href="/assets/js/tag_es_index.html.8f0f4273.js" as="script"><link rel="prefetch" href="/assets/js/tag_jd_index.html.6c64e177.js" as="script"><link rel="prefetch" href="/assets/js/zh_category_index.html.e65aefca.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_declarative_index.html.6759320d.js" as="script"><link rel="prefetch" href="/assets/js/zh_article_index.html.2c545722.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_index.html.6a5580f0.js" as="script"><link rel="prefetch" href="/assets/js/zh_star_index.html.698b9149.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_index.html.6b5498be.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_java8_index.html.245580da.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_index.html.9e91bcfd.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_nginx_index.html.6deedd0e.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_index.html.d664c5ec.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_hive_index.html.e3d7d626.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_index.html.46dc1fe4.js" as="script"><link rel="prefetch" href="/assets/js/posts_jd_index.html.7a8d7890.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/zh/" aria-label="å¸¦æˆ‘å›å®¶"><img class="vp-nav-logo" src="/bubu.jpg" alt><!----><span class="vp-site-name hide-in-pad">Ruochen Chen</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/zh/" aria-label="ä¸»é¡µ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="ç¬”è®°"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>ç¬”è®°<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Hive</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/hive/Hive-SQL%E8%AF%AD%E6%B3%95%E5%A4%A7%E5%85%A8.html" aria-label="Hiveè¯­æ³•å¤§å…¨"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Hiveè¯­æ³•å¤§å…¨<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Java8ç‰¹æ€§</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/java8/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html" aria-label="å‡½æ•°å¼ç¼–ç¨‹"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->å‡½æ•°å¼ç¼–ç¨‹<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Netty</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/netty/Netty01-nio.html" aria-label="Nioä»‹ç»"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Nioä»‹ç»<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/netty/Netty02-intro.html" aria-label="Nettyå…¥é—¨"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Nettyå…¥é—¨<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/netty/Netty03-%E8%BF%9B%E9%98%B6.html" aria-label="Nettyè¿›é˜¶"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Nettyè¿›é˜¶<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/netty/Netty04-%E4%BC%98%E5%8C%96%E4%B8%8E%E6%BA%90%E7%A0%81.html" aria-label="Nettyä¼˜åŒ–"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Nettyä¼˜åŒ–<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">NGINX</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/nginx/1.html" aria-label="NGINX é«˜çº§"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->NGINX é«˜çº§<!----></a></li></ul></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><div class="vp-nav-item"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="é€‰æ‹©è¯­è¨€"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" name="i18n" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/" aria-label="English"><!---->English<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/zh/posts/review/%E9%9D%A2%E8%AF%95%E8%A6%81%E7%82%B9.html" aria-label="ç®€ä½“ä¸­æ–‡"><!---->ç®€ä½“ä¸­æ–‡<!----></a></li></ul></button></div></div><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/Crc011220/Crc011220.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢æ–‡æ¡£"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢æ–‡æ¡£</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/zh/" aria-label="ä¸»é¡µ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->ä¸»é¡µ<!----></a></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header active"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">ç¬”è®°</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Algo</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Declarative</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Hive</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Java8</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Netty</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Nginx</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Review</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E4%BF%A1%E6%81%AF%E6%96%B0%E6%8A%80%E6%9C%AF.html" aria-label="ä¿¡æ¯æ–°æŠ€æœ¯"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->ä¿¡æ¯æ–°æŠ€æœ¯<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E5%85%B6%E4%BB%96%E9%97%AE%E9%A2%98.html" aria-label="å…¶ä»–é—®é¢˜"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->å…¶ä»–é—®é¢˜<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html" aria-label="æ“ä½œç³»ç»Ÿ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->æ“ä½œç³»ç»Ÿ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E6%95%B0%E5%AD%A6.html" aria-label="æ•°å­¦"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->æ•°å­¦<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E6%95%B0%E6%8D%AE%E5%BA%93.html" aria-label="æ•°æ®åº“"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->æ•°æ®åº“<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" aria-label="æ•°æ®ç»“æ„"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->æ•°æ®ç»“æ„<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.html" aria-label="è®¡ç®—æœºç»„æˆåŸç†"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->è®¡ç®—æœºç»„æˆåŸç†<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html" aria-label="è®¡ç®—æœºç½‘ç»œ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->è®¡ç®—æœºç½‘ç»œ<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/zh/posts/review/%E9%9D%A2%E8%AF%95%E8%A6%81%E7%82%B9.html" aria-label="é¢è¯•è¦ç‚¹"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->é¢è¯•è¦ç‚¹<!----></a></li></ul></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/genesis.html" aria-label="å¼€å§‹"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->å¼€å§‹<!----></a></li></ul></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/intro.html" aria-label="å…³äºæˆ‘"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-circle-info" style=""></span><!--]-->å…³äºæˆ‘<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>é¢è¯•è¦ç‚¹</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Ruochen Chen</span></span><span property="author" content="Ruochen Chen"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2025å¹´7æœˆ27æ—¥</span><meta property="datePublished" content="2025-07-27T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 123 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT123M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color5 clickable" role="navigation">Learning Records</span><!--]--><meta property="articleSection" content="Learning Records"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color0 clickable" role="navigation">Review</span><!--]--><meta property="keywords" content="Review"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#javaåŸºç¡€">JavaåŸºç¡€</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-equals-å’Œ-çš„åŒºåˆ«-å¦‚ä½•æ­£ç¡®é‡å†™-equals-å’Œ-hashcode-æ–¹æ³•-ä¸ºä»€ä¹ˆéœ€è¦åŒæ—¶é‡å†™">1. equals() å’Œ == çš„åŒºåˆ«ï¼Ÿå¦‚ä½•æ­£ç¡®é‡å†™ equals() å’Œ hashCode() æ–¹æ³•ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦åŒæ—¶é‡å†™ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«-ä½•æ—¶ç”¨æ¥å£-ä½•æ—¶ç”¨æŠ½è±¡ç±»">2. æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼Ÿä½•æ—¶ç”¨æ¥å£ï¼Ÿä½•æ—¶ç”¨æŠ½è±¡ç±»ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-string-vs-stringbuffer-vs-stringbuilder">3. String vs StringBuffer vs StringBuilder</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±åŸç†åŠæ½œåœ¨é—®é¢˜">4. è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±åŸç†åŠæ½œåœ¨é—®é¢˜</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-bioã€nioã€aioçš„åŒºåˆ«">5. BIOã€NIOã€AIOçš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-selectã€pollã€epollçš„åŒºåˆ«">6. Selectã€Pollã€Epollçš„åŒºåˆ«</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#é›†åˆ">é›†åˆ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-hashmap-çš„å®ç°åŸç†-jdk-1-7å’Œ1-8çš„åŒºåˆ«-hash-æ–¹æ³•çš„ä½œç”¨-å¦‚ä½•å¤„ç†å“ˆå¸Œå†²çª">1. HashMap çš„å®ç°åŸç†ï¼ŸJDK 1.7å’Œ1.8çš„åŒºåˆ«ï¼Ÿhash()æ–¹æ³•çš„ä½œç”¨ï¼Ÿå¦‚ä½•å¤„ç†å“ˆå¸Œå†²çªï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-concurrenthashmap-å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨">2. ConcurrentHashMap å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-arraylist-å’Œ-linkedlist-çš„åº•å±‚å®ç°ã€æ—¶é—´å¤æ‚åº¦">3. ArrayList å’Œ LinkedList çš„åº•å±‚å®ç°ã€æ—¶é—´å¤æ‚åº¦ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-iterator-å’Œ-listiterator-çš„åŒºåˆ«-fail-fast-å’Œ-fail-safe-æœºåˆ¶">4. Iterator å’Œ ListIterator çš„åŒºåˆ«ï¼Ÿfail-fast å’Œ fail-safe æœºåˆ¶ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-å¦‚ä½•ä¿è¯é›†åˆçš„çº¿ç¨‹å®‰å…¨">5. å¦‚ä½•ä¿è¯é›†åˆçš„çº¿ç¨‹å®‰å…¨ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-comparable-å’Œ-comparator-æ¥å£çš„åŒºåˆ«">6. Comparable å’Œ Comparator æ¥å£çš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å¤šçº¿ç¨‹">å¤šçº¿ç¨‹</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«-åˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹å¼-å“ªç§æ›´æ¨è">1. è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«ï¼Ÿåˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹å¼ï¼Ÿå“ªç§æ›´æ¨èï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-sleep-wait-yield-join-æ–¹æ³•çš„åŒºåˆ«">2. sleep(), wait(), yield(), join() æ–¹æ³•çš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯ä»€ä¹ˆ-å¼€é”€åœ¨å“ªé‡Œ">3. ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯ä»€ä¹ˆï¼Ÿå¼€é”€åœ¨å“ªé‡Œï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨-å¦‚ä½•ç†è§£åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§">4. ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿå¦‚ä½•ç†è§£åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-synchronized-å…³é”®å­—çš„åŸç†-ä½¿ç”¨æ–¹å¼-é”å‡çº§è¿‡ç¨‹">5. synchronized å…³é”®å­—çš„åŸç†ï¼Ÿä½¿ç”¨æ–¹å¼ï¼Ÿé”å‡çº§è¿‡ç¨‹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-volatile-å…³é”®å­—çš„è¯­ä¹‰-åŸç†-èƒ½ä¿è¯åŸå­æ€§å—-é€‚ç”¨åœºæ™¯">6. volatile å…³é”®å­—çš„è¯­ä¹‰ï¼ŸåŸç†ï¼Ÿèƒ½ä¿è¯åŸå­æ€§å—ï¼Ÿé€‚ç”¨åœºæ™¯ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-synchronized-å’Œ-volatile-çš„åŒºåˆ«">7. synchronized å’Œ volatile çš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-cas-æ“ä½œçš„åŸç†-atomicç±»å®ç°-abaé—®é¢˜åŠè§£å†³æ–¹æ¡ˆ">8. CAS æ“ä½œçš„åŸç†ï¼ŸAtomicç±»å®ç°ï¼ŸABAé—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-threadlocal-çš„åŸç†-ä½¿ç”¨åœºæ™¯-å†…å­˜æ³„æ¼é—®é¢˜åŠå¦‚ä½•é¿å…">9. ThreadLocal çš„åŸç†ï¼Ÿä½¿ç”¨åœºæ™¯ï¼Ÿå†…å­˜æ³„æ¼é—®é¢˜åŠå¦‚ä½•é¿å…ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ•°æ®åº“">æ•°æ®åº“</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-sqlåŸºç¡€è¯­æ³•-ddl-dml-dql-dcl-å¸¸ç”¨å‡½æ•°">1. SQLåŸºç¡€è¯­æ³•ï¼ˆDDL, DML, DQL, DCLï¼‰ï¼Ÿå¸¸ç”¨å‡½æ•°ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-mysqlæ ¸å¿ƒåŒºåˆ«-äº‹åŠ¡ã€é”ã€å¤–é”®ã€ç´¢å¼•ç»“æ„">2. MySQLæ ¸å¿ƒåŒºåˆ«ï¼ˆäº‹åŠ¡ã€é”ã€å¤–é”®ã€ç´¢å¼•ç»“æ„ï¼‰ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-ç´¢å¼•-ä»€ä¹ˆæ˜¯ç´¢å¼•-ä¸ºä»€ä¹ˆèƒ½æé«˜æŸ¥è¯¢æ•ˆç‡-ç´¢å¼•çš„ä¼˜ç¼ºç‚¹">3. ç´¢å¼•ï¼šä»€ä¹ˆæ˜¯ç´¢å¼•ï¼Ÿä¸ºä»€ä¹ˆèƒ½æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Ÿç´¢å¼•çš„ä¼˜ç¼ºç‚¹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-b-æ ‘ç´¢å¼•ç»“æ„-ä¸ºä»€ä¹ˆmysqlä½¿ç”¨b-æ ‘è€Œä¸æ˜¯bæ ‘æˆ–å“ˆå¸Œè¡¨">4. B+æ ‘ç´¢å¼•ç»“æ„ï¼Ÿä¸ºä»€ä¹ˆMySQLä½¿ç”¨B+æ ‘è€Œä¸æ˜¯Bæ ‘æˆ–å“ˆå¸Œè¡¨ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•çš„åŒºåˆ«-innodbçš„ä¸»é”®ç´¢å¼•ç»“æ„">5. èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•çš„åŒºåˆ«ï¼ŸInnoDBçš„ä¸»é”®ç´¢å¼•ç»“æ„ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-ç´¢å¼•ç±»å‹åˆ†ç±»">6. ç´¢å¼•ç±»å‹åˆ†ç±»ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-ç´¢å¼•å¤±æ•ˆçš„å¸¸è§åœºæ™¯">7. ç´¢å¼•å¤±æ•ˆçš„å¸¸è§åœºæ™¯ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-explainå‘½ä»¤çš„ä½œç”¨-å…³é”®å­—æ®µçš„å«ä¹‰">8. EXPLAINå‘½ä»¤çš„ä½œç”¨ï¼Ÿå…³é”®å­—æ®µçš„å«ä¹‰ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-é”-innodbçš„è¡Œé”ã€é—´éš™é”ã€ä¸´é”®é”-mvccçš„åŸç†-å¦‚ä½•è§£å†³å¹»è¯»">9. é”ï¼šInnoDBçš„è¡Œé”ã€é—´éš™é”ã€ä¸´é”®é”ï¼ŸMVCCçš„åŸç†ï¼Ÿå¦‚ä½•è§£å†³å¹»è¯»ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_10-äº‹åŠ¡éš”ç¦»çº§åˆ«-mysqlé»˜è®¤çº§åˆ«-ä¸åŒçº§åˆ«è§£å†³çš„é—®é¢˜">10. äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼ŸMySQLé»˜è®¤çº§åˆ«ï¼Ÿä¸åŒçº§åˆ«è§£å†³çš„é—®é¢˜ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_11-å¦‚ä½•ä¼˜åŒ–æ…¢æŸ¥è¯¢">11. å¦‚ä½•ä¼˜åŒ–æ…¢æŸ¥è¯¢ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_12-mysqlæ—¥å¿—-redo-logã€undo-logã€binlog">12. MySQLæ—¥å¿—ï¼šredo logã€undo logã€binlog</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#redis">Redis</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-redisæ˜¯ä»€ä¹ˆ-å¸¸ç”¨æ•°æ®ç±»å‹åŠå…¶åº•å±‚å®ç°å’Œå…¸å‹åº”ç”¨åœºæ™¯">1. Redisæ˜¯ä»€ä¹ˆï¼Ÿå¸¸ç”¨æ•°æ®ç±»å‹åŠå…¶åº•å±‚å®ç°å’Œå…¸å‹åº”ç”¨åœºæ™¯ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-redisä¸ºä»€ä¹ˆå¿«">2. Redisä¸ºä»€ä¹ˆå¿«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-redisçš„æŒä¹…åŒ–æœºåˆ¶-ä¼˜ç¼ºç‚¹-å¦‚ä½•é€‰æ‹©">3. Redisçš„æŒä¹…åŒ–æœºåˆ¶ï¼Ÿä¼˜ç¼ºç‚¹ï¼Ÿå¦‚ä½•é€‰æ‹©ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-redisçš„è¿‡æœŸé”®åˆ é™¤ç­–ç•¥">4. Redisçš„è¿‡æœŸé”®åˆ é™¤ç­–ç•¥ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-å†…å­˜æ·˜æ±°ç­–ç•¥">5. å†…å­˜æ·˜æ±°ç­–ç•¥ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-å¦‚ä½•ä¿è¯redisçš„é«˜å¯ç”¨-redis-clusterçš„æ§½åˆ†é…åŸç†">6. å¦‚ä½•ä¿è¯Redisçš„é«˜å¯ç”¨ï¼ŸRedis Clusterçš„æ§½åˆ†é…åŸç†ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©çš„æ¦‚å¿µã€åŸå› åŠè§£å†³æ–¹æ¡ˆ">7. ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©çš„æ¦‚å¿µã€åŸå› åŠè§£å†³æ–¹æ¡ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-å¦‚ä½•è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼é”-watch-dogæœºåˆ¶">8. å¦‚ä½•è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼é”ï¼ŸWatch Dogæœºåˆ¶ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-rediså“¨å…µçš„åŸç†-å¦‚ä½•å®ç°æ•…éšœè½¬ç§»">9. Rediså“¨å…µçš„åŸç†ï¼Ÿå¦‚ä½•å®ç°æ•…éšœè½¬ç§»ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#jvm">JVM</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-jvmå†…å­˜ç»“æ„-å„ä¸ªåŒºåŸŸçš„ä½œç”¨">1. JVMå†…å­˜ç»“æ„ï¼Ÿå„ä¸ªåŒºåŸŸçš„ä½œç”¨ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-åƒåœ¾å›æ”¶ç®—æ³•-å„è‡ªçš„ä¼˜ç¼ºç‚¹">2. åƒåœ¾å›æ”¶ç®—æ³•ï¼Ÿå„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-å¸¸è§åƒåœ¾å›æ”¶å™¨-ç‰¹ç‚¹å’Œä½¿ç”¨åœºæ™¯">3. å¸¸è§åƒåœ¾å›æ”¶å™¨ï¼Ÿç‰¹ç‚¹å’Œä½¿ç”¨åœºæ™¯ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-ç±»åŠ è½½æœºåˆ¶-åŒäº²å§”æ´¾æ¨¡å‹">4. ç±»åŠ è½½æœºåˆ¶ï¼ŸåŒäº²å§”æ´¾æ¨¡å‹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-jvmå‚æ•°è°ƒä¼˜-å¸¸ç”¨å‚æ•°">5. JVMå‚æ•°è°ƒä¼˜ï¼Ÿå¸¸ç”¨å‚æ•°ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-å†…å­˜æ³„æ¼vså†…å­˜æº¢å‡º-å¦‚ä½•æ’æŸ¥">6. å†…å­˜æ³„æ¼vså†…å­˜æº¢å‡ºï¼Ÿå¦‚ä½•æ’æŸ¥ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#åˆ†å¸ƒå¼">åˆ†å¸ƒå¼</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-capç†è®º-baseç†è®º">1. CAPç†è®ºï¼ŸBASEç†è®ºï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆ">2. åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-åˆ†å¸ƒå¼é”çš„å®ç°">3. åˆ†å¸ƒå¼é”çš„å®ç°ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-åˆ†å¸ƒå¼idç”Ÿæˆæ–¹æ¡ˆ">4. åˆ†å¸ƒå¼IDç”Ÿæˆæ–¹æ¡ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-è´Ÿè½½å‡è¡¡ç®—æ³•">5. è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å¾®æœåŠ¡">å¾®æœåŠ¡</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-å¾®æœåŠ¡çš„ä¼˜åŠ¿å’ŒæŒ‘æˆ˜">1. å¾®æœåŠ¡çš„ä¼˜åŠ¿å’ŒæŒ‘æˆ˜ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-æœåŠ¡æ³¨å†Œä¸å‘ç°-åŸç†-å¸¸ç”¨ç»„ä»¶-æ¯”è¾ƒ">2. æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼šåŸç†ï¼Ÿå¸¸ç”¨ç»„ä»¶ï¼Ÿæ¯”è¾ƒï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-æœåŠ¡è°ƒç”¨-restful-api-å’Œ-rpc-dubbo-grpc-æ¯”è¾ƒ">3. æœåŠ¡è°ƒç”¨ï¼šRESTful API å’Œ RPC (Dubbo, gRPC)ï¼Ÿæ¯”è¾ƒï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-æœåŠ¡ç½‘å…³-api-gateway-ä½œç”¨-å¸¸ç”¨ç»„ä»¶">4. æœåŠ¡ç½‘å…³ (API Gateway)ï¼šä½œç”¨ï¼Ÿå¸¸ç”¨ç»„ä»¶ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-é…ç½®ä¸­å¿ƒ-ä½œç”¨-å¸¸ç”¨ç»„ä»¶">5. é…ç½®ä¸­å¿ƒï¼šä½œç”¨ï¼Ÿå¸¸ç”¨ç»„ä»¶ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-æœåŠ¡å®¹é”™-ç†”æ–­ã€é™çº§ã€é™æµ-ä»¤ç‰Œæ¡¶ã€æ¼æ¡¶-sentinelå’Œhystrix">6. æœåŠ¡å®¹é”™ï¼šç†”æ–­ã€é™çº§ã€é™æµ (ä»¤ç‰Œæ¡¶ã€æ¼æ¡¶)ï¼ŒSentinelå’ŒHystrixï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-é“¾è·¯è¿½è¸ª-ç›®çš„-åŸç†-å¸¸ç”¨ç»„ä»¶-zipkin-skywalking">7. é“¾è·¯è¿½è¸ªï¼šç›®çš„ï¼ŸåŸç†ï¼Ÿå¸¸ç”¨ç»„ä»¶ (Zipkin, SkyWalking)ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-å¾®æœåŠ¡ä¸­çš„å¸¸è§æ¶æ„å’Œç»„ä»¶æœ‰å“ªäº›">8. å¾®æœåŠ¡ä¸­çš„å¸¸è§æ¶æ„å’Œç»„ä»¶æœ‰å“ªäº›ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ¶ˆæ¯é˜Ÿåˆ—">æ¶ˆæ¯é˜Ÿåˆ—</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-æ¶ˆæ¯é˜Ÿåˆ—çš„ä½œç”¨-è§£è€¦ã€å¼‚æ­¥ã€å‰Šå³°å¡«è°·">1. æ¶ˆæ¯é˜Ÿåˆ—çš„ä½œç”¨ï¼Ÿï¼ˆè§£è€¦ã€å¼‚æ­¥ã€å‰Šå³°å¡«è°·ï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-æ¶ˆæ¯æ¨¡å‹-ç‚¹å¯¹ç‚¹queueå’Œå‘å¸ƒ-è®¢é˜…topic">2. æ¶ˆæ¯æ¨¡å‹ï¼Ÿï¼ˆç‚¹å¯¹ç‚¹Queueå’Œå‘å¸ƒ/è®¢é˜…Topicï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±">3. å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸è¢«é‡å¤æ¶ˆè´¹-å¹‚ç­‰æ€§">4. å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸è¢«é‡å¤æ¶ˆè´¹ï¼ˆå¹‚ç­‰æ€§ï¼‰ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§">5. å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-å¸¸ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¯”è¾ƒ-kafkaã€rabbitmqã€rocketmq">6. å¸¸ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¯”è¾ƒï¼Ÿï¼ˆKafkaã€RabbitMQã€RocketMQï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸»æµæ¡†æ¶ã€ç³»ç»Ÿè®¾è®¡ã€ç¼–ç èƒ½åŠ›">ä¸»æµæ¡†æ¶ã€ç³»ç»Ÿè®¾è®¡ã€ç¼–ç èƒ½åŠ›</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-springæ–¹å‘-ioc-æ§åˆ¶åè½¬-di-ä¾èµ–æ³¨å…¥-aop-é¢å‘åˆ‡é¢ç¼–ç¨‹">1. Springæ–¹å‘ - (IoC - æ§åˆ¶åè½¬ / DI - ä¾èµ–æ³¨å…¥, AOP - é¢å‘åˆ‡é¢ç¼–ç¨‹)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-aop-é¢å‘åˆ‡é¢ç¼–ç¨‹">2. AOP (é¢å‘åˆ‡é¢ç¼–ç¨‹)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-springäº‹åŠ¡ç®¡ç†">3. Springäº‹åŠ¡ç®¡ç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-spring-mvcçš„å·¥ä½œåŸç†-æ ¸å¿ƒç»„ä»¶-å¤„ç†è¯·æ±‚çš„æµç¨‹">4. Spring MVCçš„å·¥ä½œåŸç†ï¼Ÿæ ¸å¿ƒç»„ä»¶ï¼Ÿå¤„ç†è¯·æ±‚çš„æµç¨‹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-springå¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–">5. Springå¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-1-ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«">6.1 ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-2-resultmap-å’Œ-resulttype-çš„åŒºåˆ«">6.2 ResultMap å’Œ ResultType çš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-3-å»¶è¿ŸåŠ è½½-æ‡’åŠ è½½-çš„åŸç†å’Œé…ç½®">6.3 å»¶è¿ŸåŠ è½½ï¼ˆæ‡’åŠ è½½ï¼‰çš„åŸç†å’Œé…ç½®ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-4-å¦‚ä½•å®ç°åˆ†é¡µ">6.4 å¦‚ä½•å®ç°åˆ†é¡µï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-è®¾è®¡ä¸€ä¸ªç§’æ€ç³»ç»Ÿ">7. è®¾è®¡ä¸€ä¸ªç§’æ€ç³»ç»Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-è®¾è®¡ä¸€ä¸ªçŸ­é“¾æ¥ç³»ç»Ÿ">8. è®¾è®¡ä¸€ä¸ªçŸ­é“¾æ¥ç³»ç»Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-å„ç±»ä¸»æµç®—æ³•">9. å„ç±»ä¸»æµç®—æ³•</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#è®¡ç®—æœºç½‘ç»œ">è®¡ç®—æœºç½‘ç»œ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-tcpå’Œudpçš„åŒºåˆ«-tcpåŸºäºæµå’ŒudpåŸºäºæ•°æ®åŒ…çš„åŒºåˆ«">1. TCPå’ŒUDPçš„åŒºåˆ«ï¼ŸTCPåŸºäºæµå’ŒUDPåŸºäºæ•°æ®åŒ…çš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-osiä¸ƒå±‚æ¨¡å‹å’Œtcp-ipå››å±‚æ¨¡å‹">2. OSIä¸ƒå±‚æ¨¡å‹å’ŒTCP/IPå››å±‚æ¨¡å‹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-httpå’Œhttpsçš„åŒºåˆ«">3. HTTPå’ŒHTTPSçš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-tcpä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹">4. TCPä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-ä»è¾“å…¥urlåˆ°é¡µé¢æ˜¾ç¤ºçš„å®Œæ•´è¿‡ç¨‹">5. ä»è¾“å…¥URLåˆ°é¡µé¢æ˜¾ç¤ºçš„å®Œæ•´è¿‡ç¨‹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-tcpç²˜åŒ…å’Œæ‹†åŒ…é—®é¢˜">6. TCPç²˜åŒ…å’Œæ‹†åŒ…é—®é¢˜ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-dnsè§£æè¿‡ç¨‹">7. DNSè§£æè¿‡ç¨‹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-cookieã€sessionã€localstorageã€jwtå¯¹æ¯”">8. Cookieã€Sessionã€LocalStorageã€JWTå¯¹æ¯”</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-websocketåŸç†å’Œåº”ç”¨">9. WebSocketåŸç†å’Œåº”ç”¨ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_10-tcpå¦‚ä½•ä¿è¯å¯é ä¼ è¾“">10. TCPå¦‚ä½•ä¿è¯å¯é ä¼ è¾“ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ“ä½œç³»ç»Ÿ">æ“ä½œç³»ç»Ÿ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-è™šæ‹Ÿå†…å­˜ç®¡ç†">1. è™šæ‹Ÿå†…å­˜ç®¡ç†ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-é¡µé¢ç½®æ¢ç®—æ³•">2. é¡µé¢ç½®æ¢ç®—æ³•ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-æ­»é”é—®é¢˜">3. æ­»é”é—®é¢˜ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-cpuè°ƒåº¦ç®—æ³•">4. CPUè°ƒåº¦ç®—æ³•ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-åŒæ­¥ä¸å¼‚æ­¥ã€é˜»å¡ä¸éé˜»å¡">5. åŒæ­¥ä¸å¼‚æ­¥ã€é˜»å¡ä¸éé˜»å¡ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-å†…å­˜åˆ†é…ç®—æ³•">6. å†…å­˜åˆ†é…ç®—æ³•ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-æ–‡ä»¶ç³»ç»Ÿ">7. æ–‡ä»¶ç³»ç»Ÿï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-epoll-çš„åŸç†åŠå…¶-o-1-æŸ¥è¯¢é€Ÿåº¦-æœ‰å“ªä¸¤ç§å·¥ä½œæ¨¡å¼">8. epoll çš„åŸç†åŠå…¶ O(1) æŸ¥è¯¢é€Ÿåº¦ï¼Ÿæœ‰å“ªä¸¤ç§å·¥ä½œæ¨¡å¼ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-linuxå¸¸ç”¨å‘½ä»¤-æŸ¥çœ‹è¿›ç¨‹æœ‰å“ªäº›å‘½ä»¤">9. Linuxå¸¸ç”¨å‘½ä»¤ï¼Ÿ æŸ¥çœ‹è¿›ç¨‹æœ‰å“ªäº›å‘½ä»¤ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-springä¸­ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼">1. Springä¸­ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#äº‘è®¡ç®—">äº‘è®¡ç®—</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-äº‘å’Œäº‘åŸç”Ÿçš„åŒºåˆ«">1. äº‘å’Œäº‘åŸç”Ÿçš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-è™šæ‹Ÿæœºå’Œå®¹å™¨çš„åŒºåˆ«">2. è™šæ‹Ÿæœºå’Œå®¹å™¨çš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-servlesså†·å¯åŠ¨çš„è§£å†³æ–¹æ¡ˆ">3. Servlesså†·å¯åŠ¨çš„è§£å†³æ–¹æ¡ˆ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-k8sçš„å¸¸è§ç»„ä»¶">4. K8Sçš„å¸¸è§ç»„ä»¶ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è¯¦ç»†å¯¹æ¯”è¡¨æ ¼">è¯¦ç»†å¯¹æ¯”è¡¨æ ¼</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#elasticsearch">ElasticSearch</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-å¯¹esçš„ç†è§£">1. å¯¹ESçš„ç†è§£ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-esçš„æ ¸å¿ƒæ¦‚å¿µ">2. ESçš„æ ¸å¿ƒæ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-å€’æ’ç´¢å¼•åŸç†">3. å€’æ’ç´¢å¼•åŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-å†™å…¥æµç¨‹">4. å†™å…¥æµç¨‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-è¿‘å®æ—¶æœç´¢">5. è¿‘å®æ—¶æœç´¢</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-èŠ‚ç‚¹è§’è‰²">6. èŠ‚ç‚¹è§’è‰²</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-æ€§èƒ½ä¼˜åŒ–">7. æ€§èƒ½ä¼˜åŒ–</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-é«˜å¯ç”¨">8. é«˜å¯ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-æ•°æ®ä¸€è‡´æ€§">9. æ•°æ®ä¸€è‡´æ€§</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å…¶ä»–">å…¶ä»–</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-ä»‹ç»ä¸€ä¸‹disruptor-ä¸ºä»€ä¹ˆé€‚åˆæ’®åˆå¼•æ“">1. ä»‹ç»ä¸€ä¸‹Disruptorï¼Ÿä¸ºä»€ä¹ˆé€‚åˆæ’®åˆå¼•æ“ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><h1 id="é¢è¯•è¦ç‚¹" tabindex="-1"><a class="header-anchor" href="#é¢è¯•è¦ç‚¹"><span>é¢è¯•è¦ç‚¹</span></a></h1><h2 id="javaåŸºç¡€" tabindex="-1"><a class="header-anchor" href="#javaåŸºç¡€"><span>JavaåŸºç¡€</span></a></h2><h3 id="_1-equals-å’Œ-çš„åŒºåˆ«-å¦‚ä½•æ­£ç¡®é‡å†™-equals-å’Œ-hashcode-æ–¹æ³•-ä¸ºä»€ä¹ˆéœ€è¦åŒæ—¶é‡å†™" tabindex="-1"><a class="header-anchor" href="#_1-equals-å’Œ-çš„åŒºåˆ«-å¦‚ä½•æ­£ç¡®é‡å†™-equals-å’Œ-hashcode-æ–¹æ³•-ä¸ºä»€ä¹ˆéœ€è¦åŒæ—¶é‡å†™"><span>1. equals() å’Œ == çš„åŒºåˆ«ï¼Ÿå¦‚ä½•æ­£ç¡®é‡å†™ equals() å’Œ hashCode() æ–¹æ³•ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦åŒæ—¶é‡å†™ï¼Ÿ</span></a></h3><h4 id="å’Œ-equals-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#å’Œ-equals-çš„åŒºåˆ«"><span>== å’Œ equals() çš„åŒºåˆ«</span></a></h4><ul><li><strong>== æ“ä½œç¬¦</strong>ï¼šå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹æ¯”è¾ƒå€¼ï¼Œå¯¹äºå¼•ç”¨ç±»å‹æ¯”è¾ƒå†…å­˜åœ°å€</li><li><strong>equals() æ–¹æ³•</strong>ï¼šObjectç±»é»˜è®¤å®ç°æ˜¯æ¯”è¾ƒå¼•ç”¨ï¼ŒStringç­‰ç±»é‡å†™åæ¯”è¾ƒå†…å®¹</li></ul><h4 id="æ­£ç¡®é‡å†™çš„äº”ä¸ªåŸåˆ™" tabindex="-1"><a class="header-anchor" href="#æ­£ç¡®é‡å†™çš„äº”ä¸ªåŸåˆ™"><span>æ­£ç¡®é‡å†™çš„äº”ä¸ªåŸåˆ™</span></a></h4><ol><li><strong>è‡ªåæ€§</strong>ï¼šx.equals(x) å¿…é¡»è¿”å› true</li><li><strong>å¯¹ç§°æ€§</strong>ï¼šx.equals(y) å’Œ y.equals(x) ç»“æœç›¸åŒ</li><li><strong>ä¼ é€’æ€§</strong>ï¼šå¦‚æœ x.equals(y) ä¸” y.equals(z)ï¼Œåˆ™ x.equals(z)</li><li><strong>ä¸€è‡´æ€§</strong>ï¼šå¤šæ¬¡è°ƒç”¨ç»“æœä¸€è‡´</li><li><strong>éç©ºæ€§</strong>ï¼šx.equals(null) è¿”å› false</li></ol><h4 id="ä¸ºä»€ä¹ˆè¦åŒæ—¶é‡å†™" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¦åŒæ—¶é‡å†™"><span>ä¸ºä»€ä¹ˆè¦åŒæ—¶é‡å†™ï¼Ÿ</span></a></h4><p>å› ä¸ºHashMap/HashSetçš„å·¥ä½œæœºåˆ¶ï¼šå…ˆç”¨hashCode()ç¡®å®šå­˜å‚¨ä½ç½®ï¼Œå†ç”¨equals()å¤„ç†å“ˆå¸Œå†²çªã€‚å¦‚æœä¸åŒæ—¶é‡å†™ä¼šå¯¼è‡´ç›¸ç­‰å¯¹è±¡æ— æ³•åœ¨HashMapä¸­æ­£ç¡®æŸ¥æ‰¾ã€‚Javaçº¦å®šï¼šå¦‚æœä¸¤ä¸ªå¯¹è±¡equals()è¿”å›trueï¼Œå®ƒä»¬çš„hashCode()å¿…é¡»ç›¸åŒã€‚</p><ul><li>equals æ–¹æ³•åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯ç›¸ç­‰çš„ï¼Œé‚£è¿™ä¸¤ä¸ªå¯¹è±¡çš„ hashCode å€¼ä¹Ÿè¦ç›¸ç­‰ã€‚</li><li>ä¸¤ä¸ªå¯¹è±¡æœ‰ç›¸åŒçš„ hashCode å€¼ï¼Œä»–ä»¬ä¹Ÿä¸ä¸€å®šæ˜¯ç›¸ç­‰çš„ï¼ˆå“ˆå¸Œç¢°æ’ï¼‰ã€‚</li></ul><table><thead><tr><th>é—®é¢˜</th><th>ç»“è®º</th></tr></thead><tbody><tr><td><code>equals()</code> æ¯”è¾ƒä»€ä¹ˆï¼Ÿ</td><td>å€¼æ˜¯å¦ç›¸ç­‰</td></tr><tr><td><code>hashCode()</code> ç”¨æ¥å¹²å˜›ï¼Ÿ</td><td>å¿«é€ŸæŸ¥æ‰¾æ¡¶</td></tr><tr><td>ä¸ºä»€ä¹ˆè¦åŒæ—¶é‡å†™ï¼Ÿ</td><td>ä¿è¯é›†åˆç±»æ­£å¸¸å·¥ä½œï¼Œé¿å…é€»è¾‘é”™è¯¯</td></tr><tr><td>ä¸é‡å†™ä¼šæ€æ ·ï¼Ÿ</td><td>æ•°æ®é‡å¤ã€æŸ¥æ‰¾å¤±è´¥ã€é€»è¾‘å¼‚å¸¸</td></tr></tbody></table><h3 id="_2-æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«-ä½•æ—¶ç”¨æ¥å£-ä½•æ—¶ç”¨æŠ½è±¡ç±»" tabindex="-1"><a class="header-anchor" href="#_2-æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«-ä½•æ—¶ç”¨æ¥å£-ä½•æ—¶ç”¨æŠ½è±¡ç±»"><span>2. æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼Ÿä½•æ—¶ç”¨æ¥å£ï¼Ÿä½•æ—¶ç”¨æŠ½è±¡ç±»ï¼Ÿ</span></a></h3><h4 id="ä¸»è¦åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#ä¸»è¦åŒºåˆ«"><span>ä¸»è¦åŒºåˆ«</span></a></h4><ul><li><strong>ç»§æ‰¿å…³ç³»</strong>ï¼šæ¥å£æ”¯æŒå¤šå®ç°ï¼ŒæŠ½è±¡ç±»åªèƒ½å•ç»§æ‰¿</li><li><strong>æ–¹æ³•</strong>ï¼šæ¥å£Java8å‰åªæœ‰æŠ½è±¡æ–¹æ³•ï¼ŒæŠ½è±¡ç±»å¯ä»¥æœ‰å…·ä½“å®ç°</li><li><strong>æˆå‘˜å˜é‡</strong>ï¼šæ¥å£åªèƒ½æœ‰å¸¸é‡ï¼ŒæŠ½è±¡ç±»å¯ä»¥æœ‰å„ç§æˆå‘˜å˜é‡</li><li><strong>æ„é€ æ–¹æ³•</strong>ï¼šæ¥å£ä¸èƒ½æœ‰ï¼ŒæŠ½è±¡ç±»å¯ä»¥æœ‰</li></ul><h4 id="ä½¿ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯"><span>ä½¿ç”¨åœºæ™¯</span></a></h4><ul><li><strong>æ¥å£</strong>ï¼šå®šä¹‰å¥‘çº¦è§„èŒƒã€å®ç°å¤šé‡&quot;ç»§æ‰¿&quot;ã€å¼ºè°ƒ&quot;èƒ½åšä»€ä¹ˆ&quot;ï¼ˆcan-doå…³ç³»ï¼‰</li><li><strong>æŠ½è±¡ç±»</strong>ï¼šä»£ç å¤ç”¨ã€æä¾›éƒ¨åˆ†å®ç°ã€å¼ºè°ƒ&quot;æ˜¯ä»€ä¹ˆ&quot;ï¼ˆis-aå…³ç³»ï¼‰ã€éœ€è¦æœ‰çŠ¶æ€</li></ul><table><thead><tr><th>ç‰¹æ€§</th><th>æ¥å£</th><th>æŠ½è±¡ç±»</th></tr></thead><tbody><tr><td>ç»§æ‰¿å…³ç³»</td><td>å¯å®ç°å¤šä¸ª</td><td>åªèƒ½ç»§æ‰¿ä¸€ä¸ª</td></tr><tr><td>æ–¹æ³•å®ç°</td><td>æŠ½è±¡æ–¹æ³•+é»˜è®¤æ–¹æ³•ï¼ˆJava8+ï¼‰</td><td>æŠ½è±¡æ–¹æ³•+å…·ä½“æ–¹æ³•</td></tr><tr><td>æˆå‘˜å˜é‡</td><td>åªèƒ½æœ‰å¸¸é‡</td><td>å¯ä»¥æœ‰å„ç§ç±»å‹å˜é‡</td></tr><tr><td>æ„é€ æ–¹æ³•</td><td>ä¸èƒ½æœ‰</td><td>å¯ä»¥æœ‰</td></tr><tr><td>å…³ç³»ç±»å‹</td><td>can-doï¼ˆèƒ½åšä»€ä¹ˆï¼‰</td><td>is-aï¼ˆæ˜¯ä»€ä¹ˆï¼‰</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>å®šä¹‰è§„èŒƒã€å¤šé‡ç»§æ‰¿</td><td>ä»£ç å¤ç”¨ã€éƒ¨åˆ†å®ç°ã€æœ‰çŠ¶æ€</td></tr></tbody></table><h3 id="_3-string-vs-stringbuffer-vs-stringbuilder" tabindex="-1"><a class="header-anchor" href="#_3-string-vs-stringbuffer-vs-stringbuilder"><span>3. String vs StringBuffer vs StringBuilder</span></a></h3><h4 id="ç‰¹æ€§å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#ç‰¹æ€§å¯¹æ¯”"><span>ç‰¹æ€§å¯¹æ¯”</span></a></h4><ul><li><strong>String</strong>ï¼šä¸å¯å˜ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œé¢‘ç¹æ“ä½œæ€§èƒ½å·®ï¼Œä¼šåˆ›å»ºå¤§é‡ä¸´æ—¶å¯¹è±¡</li><li><strong>StringBuffer</strong>ï¼šå¯å˜ï¼Œçº¿ç¨‹å®‰å…¨ï¼ˆsynchronizedï¼‰ï¼Œé€‚åˆå¤šçº¿ç¨‹ç¯å¢ƒ</li><li><strong>StringBuilder</strong>ï¼šå¯å˜ï¼Œçº¿ç¨‹ä¸å®‰å…¨ï¼Œå•çº¿ç¨‹ç¯å¢ƒæ€§èƒ½æœ€ä½³</li></ul><h4 id="é€‰æ‹©åŸåˆ™" tabindex="-1"><a class="header-anchor" href="#é€‰æ‹©åŸåˆ™"><span>é€‰æ‹©åŸåˆ™</span></a></h4><ul><li><strong>String</strong>ï¼šå­—ç¬¦ä¸²å¾ˆå°‘æ”¹å˜çš„æƒ…å†µ</li><li><strong>StringBuffer</strong>ï¼šå¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å­—ç¬¦ä¸²é¢‘ç¹æ“ä½œ</li><li><strong>StringBuilder</strong>ï¼šå•çº¿ç¨‹ç¯å¢ƒä¸‹çš„å­—ç¬¦ä¸²é¢‘ç¹æ“ä½œ</li></ul><table><thead><tr><th>ç‰¹æ€§</th><th>String</th><th>StringBuffer</th><th>StringBuilder</th></tr></thead><tbody><tr><td>å¯å˜æ€§</td><td>ä¸å¯å˜</td><td>å¯å˜</td><td>å¯å˜</td></tr><tr><td>çº¿ç¨‹å®‰å…¨</td><td>å®‰å…¨ï¼ˆä¸å¯å˜ï¼‰</td><td>å®‰å…¨ï¼ˆåŒæ­¥ï¼‰</td><td>ä¸å®‰å…¨</td></tr><tr><td>æ€§èƒ½</td><td>é¢‘ç¹æ“ä½œå·®</td><td>ä¸­ç­‰</td><td>æœ€ä½³</td></tr><tr><td>å†…å­˜ä½¿ç”¨</td><td>åˆ›å»ºæ–°å¯¹è±¡</td><td>å†…éƒ¨ç¼“å†²åŒº</td><td>å†…éƒ¨ç¼“å†²åŒº</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å°‘é‡æ“ä½œ</td><td>å¤šçº¿ç¨‹å­—ç¬¦ä¸²æ“ä½œ</td><td>å•çº¿ç¨‹å­—ç¬¦ä¸²æ“ä½œ</td></tr></tbody></table><h3 id="_4-è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±åŸç†åŠæ½œåœ¨é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_4-è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±åŸç†åŠæ½œåœ¨é—®é¢˜"><span>4. è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±åŸç†åŠæ½œåœ¨é—®é¢˜</span></a></h3><h4 id="åŸºæœ¬æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ¦‚å¿µ"><span>åŸºæœ¬æ¦‚å¿µ</span></a></h4><ul><li><strong>è‡ªåŠ¨è£…ç®±</strong>ï¼šåŸºæœ¬ç±»å‹è‡ªåŠ¨è½¬æ¢ä¸ºåŒ…è£…ç±»å‹ï¼ˆå¦‚intâ†’Integerï¼‰</li><li><strong>è‡ªåŠ¨æ‹†ç®±</strong>ï¼šåŒ…è£…ç±»å‹è‡ªåŠ¨è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹</li><li><strong>å®ç°åŸç†</strong>ï¼šç¼–è¯‘å™¨è‡ªåŠ¨æ’å…¥valueOf()å’ŒxxxValue()æ–¹æ³•è°ƒç”¨</li></ul><h4 id="å››å¤§æ½œåœ¨é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#å››å¤§æ½œåœ¨é—®é¢˜"><span>å››å¤§æ½œåœ¨é—®é¢˜</span></a></h4><ol><li><strong>ç¼“å­˜èŒƒå›´é—®é¢˜</strong>ï¼š-128åˆ°127èŒƒå›´å†…çš„Integerå¯¹è±¡ä¼šè¢«ç¼“å­˜å¤ç”¨ï¼Œè¶…å‡ºèŒƒå›´ä¼šåˆ›å»ºæ–°å¯¹è±¡</li><li><strong>æ€§èƒ½é—®é¢˜</strong>ï¼šé¢‘ç¹è£…ç®±æ‹†ç®±ä¼šå½±å“æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨å¾ªç¯ä¸­</li><li><strong>NullPointerException</strong>ï¼šnullçš„åŒ…è£…ç±»å‹æ‹†ç®±æ—¶ä¼šæŠ›NPE</li><li><strong>ä¸‰ç›®è¿ç®—ç¬¦é™·é˜±</strong>ï¼šç±»å‹ä¸ä¸€è‡´æ—¶ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ‹†ç®±ï¼Œå¯èƒ½å¯¼è‡´NPE</li></ol><h4 id="æœ€ä½³å®è·µ" tabindex="-1"><a class="header-anchor" href="#æœ€ä½³å®è·µ"><span>æœ€ä½³å®è·µ</span></a></h4><p>å°½é‡ä½¿ç”¨åŸºæœ¬ç±»å‹ã€æ¯”è¾ƒåŒ…è£…ç±»å‹ç”¨equals()ã€é¿å…å¾ªç¯ä¸­é¢‘ç¹è£…ç®±æ‹†ç®±ã€æ³¨æ„ç¼“å­˜èŒƒå›´ã€å°å¿ƒnullå€¼æ‹†ç®±</p><table><thead><tr><th>é—®é¢˜ç±»å‹</th><th>å…·ä½“è¡¨ç°</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>ç¼“å­˜èŒƒå›´é—®é¢˜</td><td>-128~127å¤–ç”¨==æ¯”è¾ƒç»“æœä¸ºfalse</td><td>ç”¨equals()æ¯”è¾ƒ</td></tr><tr><td>æ€§èƒ½é—®é¢˜</td><td>å¾ªç¯ä¸­é¢‘ç¹è£…ç®±æ‹†ç®±</td><td>ä½¿ç”¨åŸºæœ¬ç±»å‹</td></tr><tr><td>NPEé—®é¢˜</td><td>nullåŒ…è£…ç±»å‹æ‹†ç®±æ—¶æŠ›å¼‚å¸¸</td><td>åˆ¤ç©ºæˆ–ä½¿ç”¨åŸºæœ¬ç±»å‹</td></tr><tr><td>ä¸‰ç›®è¿ç®—ç¬¦é™·é˜±</td><td>ç±»å‹ä¸ä¸€è‡´å¯¼è‡´è‡ªåŠ¨æ‹†ç®±NPE</td><td>ä¿è¯ä¸¤è¾¹ç±»å‹ä¸€è‡´</td></tr><tr><td>æœ€ä½³å®è·µ</td><td>ä»€ä¹ˆæ—¶å€™ç”¨åŒ…è£…ç±»å‹ï¼Ÿ</td><td>éœ€è¦nullå€¼æˆ–æ³›å‹æ—¶æ‰ç”¨</td></tr></tbody></table><h3 id="_5-bioã€nioã€aioçš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_5-bioã€nioã€aioçš„åŒºåˆ«"><span>5. BIOã€NIOã€AIOçš„åŒºåˆ«ï¼Ÿ</span></a></h3><h4 id="i-oæ¨¡å‹æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#i-oæ¨¡å‹æ ¸å¿ƒæ¦‚å¿µ"><span>I/Oæ¨¡å‹æ ¸å¿ƒæ¦‚å¿µ</span></a></h4><p><strong>BIOã€NIOã€AIOä¸‰ç§I/Oæ¨¡å‹å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>BIOï¼ˆåŒæ­¥é˜»å¡ï¼‰</th><th>NIOï¼ˆåŒæ­¥éé˜»å¡ï¼‰</th><th>AIOï¼ˆå¼‚æ­¥éé˜»å¡ï¼‰</th></tr></thead><tbody><tr><td>å…¨ç§°</td><td>Blocking I/O</td><td>Non-blocking I/O</td><td>Asynchronous I/O</td></tr><tr><td>é˜»å¡æ€§</td><td>é˜»å¡</td><td>éé˜»å¡</td><td>å¼‚æ­¥</td></tr><tr><td>åŒæ­¥æ€§</td><td>åŒæ­¥</td><td>åŒæ­¥</td><td>å¼‚æ­¥</td></tr><tr><td>çº¿ç¨‹æ¨¡å‹</td><td>ä¸€çº¿ç¨‹ä¸€è¿æ¥</td><td>ä¸€çº¿ç¨‹å¤„ç†å¤šè¿æ¥</td><td>ä¸€çº¿ç¨‹å¤„ç†å¤šè¿æ¥</td></tr><tr><td>APIå¤æ‚åº¦</td><td>ç®€å•</td><td>å¤æ‚</td><td>å¤æ‚</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>è¿æ¥æ•°å°‘ã€å¹¶å‘åº¦ä½</td><td>è¿æ¥æ•°å¤šã€å¹¶å‘åº¦é«˜</td><td>è¿æ¥æ•°å¤šã€å¹¶å‘åº¦é«˜</td></tr></tbody></table><h4 id="å·¥ä½œåŸç†å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#å·¥ä½œåŸç†å¯¹æ¯”"><span>å·¥ä½œåŸç†å¯¹æ¯”</span></a></h4><table><thead><tr><th>I/Oæ¨¡å‹</th><th>å·¥ä½œåŸç†</th><th>çº¿ç¨‹åˆ©ç”¨ç‡</th><th>å†…å­˜æ¶ˆè€—</th><th>CPUåˆ©ç”¨ç‡</th></tr></thead><tbody><tr><td>BIO</td><td>æ¯ä¸ªè¿æ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹é˜»å¡ç­‰å¾…I/Oå®Œæˆ</td><td>ä½</td><td>é«˜</td><td>ä½</td></tr><tr><td>NIO</td><td>ä¸€ä¸ªçº¿ç¨‹é€šè¿‡Selectorè½®è¯¢å¤šä¸ªChannel</td><td>é«˜</td><td>ä¸­</td><td>é«˜</td></tr><tr><td>AIO</td><td>æ“ä½œç³»ç»Ÿå®ŒæˆI/Oåé€šçŸ¥åº”ç”¨ç¨‹åº</td><td>é«˜</td><td>ä½</td><td>ä¸­</td></tr></tbody></table><h4 id="æ€§èƒ½ç‰¹æ€§å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#æ€§èƒ½ç‰¹æ€§å¯¹æ¯”"><span>æ€§èƒ½ç‰¹æ€§å¯¹æ¯”</span></a></h4><table><thead><tr><th>æ€§èƒ½æŒ‡æ ‡</th><th>BIO</th><th>NIO</th><th>AIO</th></tr></thead><tbody><tr><td>ååé‡</td><td>ä½ï¼ˆå—çº¿ç¨‹æ•°é™åˆ¶ï¼‰</td><td>é«˜</td><td>é«˜</td></tr><tr><td>å»¶è¿Ÿ</td><td>ä¸­ç­‰</td><td>ä½</td><td>æœ€ä½</td></tr><tr><td>å†…å­˜å ç”¨</td><td>é«˜ï¼ˆå¤§é‡çº¿ç¨‹æ ˆï¼‰</td><td>ä¸­ç­‰</td><td>ä½</td></tr><tr><td>CPUæ¶ˆè€—</td><td>ä½ï¼ˆå¤§é‡é˜»å¡ç­‰å¾…ï¼‰</td><td>ä¸­ç­‰</td><td>ä½</td></tr><tr><td>å¯æ‰©å±•æ€§</td><td>å·®</td><td>å¥½</td><td>æœ€å¥½</td></tr></tbody></table><h4 id="ç¼–ç¨‹æ¨¡å‹å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#ç¼–ç¨‹æ¨¡å‹å¯¹æ¯”"><span>ç¼–ç¨‹æ¨¡å‹å¯¹æ¯”</span></a></h4><table><thead><tr><th>æ¨¡å‹</th><th>ç¼–ç¨‹æ¨¡å‹</th><th>äº‹ä»¶å¤„ç†</th><th>é”™è¯¯å¤„ç†</th><th>å­¦ä¹ æˆæœ¬</th></tr></thead><tbody><tr><td>BIO</td><td>é¡ºåºç¼–ç¨‹ï¼Œç¬¦åˆäººç±»æ€ç»´</td><td>åŒæ­¥å¤„ç†</td><td>try-catch</td><td>ä½</td></tr><tr><td>NIO</td><td>äº‹ä»¶é©±åŠ¨ï¼Œéœ€è¦çŠ¶æ€æœºç®¡ç†</td><td>äº‹ä»¶å¾ªç¯</td><td>å¤æ‚</td><td>é«˜</td></tr><tr><td>AIO</td><td>å›è°ƒé©±åŠ¨ï¼Œå¼‚æ­¥ç¼–ç¨‹</td><td>å›è°ƒå‡½æ•°</td><td>å›è°ƒåœ°ç‹±</td><td>é«˜</td></tr></tbody></table><h4 id="å®é™…åº”ç”¨åœºæ™¯é€‰æ‹©" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨åœºæ™¯é€‰æ‹©"><span>å®é™…åº”ç”¨åœºæ™¯é€‰æ‹©</span></a></h4><table><thead><tr><th>åº”ç”¨åœºæ™¯</th><th>æ¨èæ¨¡å‹</th><th>é€‰æ‹©ç†ç”±</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>WebæœåŠ¡å™¨</td><td>NIO</td><td>å¤§é‡è¿æ¥ï¼Œè¯·æ±‚å¤„ç†æ—¶é—´çŸ­</td><td>éœ€è¦å¤„ç†ç²˜åŒ…æ‹†åŒ…é—®é¢˜</td></tr><tr><td>æ–‡ä»¶æœåŠ¡å™¨</td><td>BIO</td><td>æ–‡ä»¶I/Oå¤šä¸ºé¡ºåºæ“ä½œï¼Œç¼–ç¨‹ç®€å•</td><td>æ§åˆ¶å¹¶å‘è¿æ¥æ•°</td></tr><tr><td>å³æ—¶é€šè®¯</td><td>NIO</td><td>é•¿è¿æ¥ï¼Œéœ€è¦é«˜å¹¶å‘</td><td>å¿ƒè·³æ£€æµ‹ï¼Œè¿æ¥ç®¡ç†</td></tr><tr><td>æ¸¸æˆæœåŠ¡å™¨</td><td>AIO</td><td>å®æ—¶æ€§è¦æ±‚é«˜ï¼Œæ€§èƒ½æ•æ„Ÿ</td><td>å›è°ƒå¤„ç†å¤æ‚</td></tr><tr><td>æ•°æ®åº“è¿æ¥æ± </td><td>BIO</td><td>è¿æ¥æ•°å¯æ§ï¼Œæ“ä½œå¤šä¸ºçŸ­è¿æ¥</td><td>è¿æ¥å¤ç”¨</td></tr><tr><td>å¤§æ•°æ®ä¼ è¾“</td><td>AIO</td><td>å¤§æ–‡ä»¶ä¼ è¾“ï¼Œå¼‚æ­¥å¤„ç†æ•ˆç‡é«˜</td><td>éœ€è¦å¤„ç†ä¼ è¾“ä¸­æ–­</td></tr></tbody></table><h4 id="æŠ€æœ¯é€‰å‹å†³ç­–" tabindex="-1"><a class="header-anchor" href="#æŠ€æœ¯é€‰å‹å†³ç­–"><span>æŠ€æœ¯é€‰å‹å†³ç­–</span></a></h4><table><thead><tr><th>è€ƒè™‘å› ç´ </th><th>æƒé‡</th><th>BIOè¯„åˆ†</th><th>NIOè¯„åˆ†</th><th>AIOè¯„åˆ†</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å¼€å‘éš¾åº¦ï¼ˆ20%ï¼‰</td><td>20%</td><td>9</td><td>6</td><td>5</td><td>BIOæœ€ç®€å•</td></tr><tr><td>æ€§èƒ½è¡¨ç°ï¼ˆ30%ï¼‰</td><td>30%</td><td>4</td><td>8</td><td>9</td><td>AIOæ€§èƒ½æœ€å¥½</td></tr><tr><td>å¹¶å‘èƒ½åŠ›ï¼ˆ25%ï¼‰</td><td>25%</td><td>3</td><td>8</td><td>9</td><td>NIO/AIOå¹¶å‘èƒ½åŠ›å¼º</td></tr><tr><td>ç¨³å®šæ€§ï¼ˆ15%ï¼‰</td><td>15%</td><td>9</td><td>7</td><td>6</td><td>BIOæœ€ç¨³å®š</td></tr><tr><td>ç”Ÿæ€æˆç†Ÿåº¦ï¼ˆ10%ï¼‰</td><td>10%</td><td>10</td><td>8</td><td>5</td><td>BIOç”Ÿæ€æœ€æˆç†Ÿ</td></tr><tr><td><strong>åŠ æƒæ€»åˆ†</strong></td><td></td><td><strong>5.9</strong></td><td><strong>7.3</strong></td><td><strong>7.4</strong></td><td>AIOç»¼åˆè¯„åˆ†ç•¥é«˜</td></tr></tbody></table><h3 id="_6-selectã€pollã€epollçš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_6-selectã€pollã€epollçš„åŒºåˆ«"><span>6. Selectã€Pollã€Epollçš„åŒºåˆ«</span></a></h3><p><strong>I/Oå¤šè·¯å¤ç”¨æœºåˆ¶å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>Select</th><th>Poll</th><th>Epoll</th></tr></thead><tbody><tr><td>æ“ä½œç³»ç»Ÿæ”¯æŒ</td><td>å‡ ä¹æ‰€æœ‰Unix/Linux</td><td>Unix/Linux</td><td>ä»…Linux</td></tr><tr><td>æ–‡ä»¶æè¿°ç¬¦é™åˆ¶</td><td>æœ‰é™åˆ¶ï¼ˆé€šå¸¸1024ï¼‰</td><td>æ— ç¡¬æ€§é™åˆ¶</td><td>æ— é™åˆ¶</td></tr><tr><td>æ•°æ®ç»“æ„</td><td>bitmapä½å›¾</td><td>é“¾è¡¨</td><td>çº¢é»‘æ ‘+åŒé“¾è¡¨</td></tr><tr><td>æ—¶é—´å¤æ‚åº¦</td><td>O(n)</td><td>O(n)</td><td>O(1)</td></tr><tr><td>å†…å­˜æ‹·è´</td><td>æ¯æ¬¡è°ƒç”¨éƒ½è¦æ‹·è´</td><td>æ¯æ¬¡è°ƒç”¨éƒ½è¦æ‹·è´</td><td>ä½¿ç”¨mmapå‡å°‘æ‹·è´</td></tr><tr><td>å·¥ä½œæ¨¡å¼</td><td>æ°´å¹³è§¦å‘</td><td>æ°´å¹³è§¦å‘</td><td>æ°´å¹³è§¦å‘+è¾¹ç¼˜è§¦å‘</td></tr></tbody></table><p><strong>å·¥ä½œåŸç†å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>æœºåˆ¶</th><th>å·¥ä½œæµç¨‹</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>Select</td><td>è½®è¯¢æ‰€æœ‰fdï¼Œè¿”å›å°±ç»ªçš„fdé›†åˆ</td><td>è·¨å¹³å°å…¼å®¹æ€§å¥½</td><td>æ€§èƒ½å·®ã€fdæ•°é‡é™åˆ¶</td></tr><tr><td>Poll</td><td>ä¸selectç±»ä¼¼ï¼Œä½†ä½¿ç”¨é“¾è¡¨å­˜å‚¨fd</td><td>æ²¡æœ‰fdæ•°é‡é™åˆ¶</td><td>æ€§èƒ½ä»ç„¶è¾ƒå·®</td></tr><tr><td>Epoll</td><td>åŸºäºäº‹ä»¶é€šçŸ¥ï¼Œåªè¿”å›æ´»è·ƒçš„fd</td><td>é«˜æ€§èƒ½ã€æ”¯æŒå¤§é‡è¿æ¥</td><td>ä»…æ”¯æŒLinux</td></tr></tbody></table><ul><li>fd File Descriptorï¼ˆæ–‡ä»¶æè¿°ç¬¦ï¼‰æ˜¯æ“ä½œç³»ç»Ÿå¯¹â€œæ‰“å¼€èµ„æºâ€çš„æ ‡è¯†ï¼ŒIO å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼ˆå¦‚ epollï¼‰è®©æˆ‘ä»¬èƒ½é«˜æ•ˆç®¡ç†å¤šä¸ª fdï¼Œä»è€Œæ„å»ºé«˜å¹¶å‘æœåŠ¡å™¨ã€‚</li></ul><h2 id="é›†åˆ" tabindex="-1"><a class="header-anchor" href="#é›†åˆ"><span>é›†åˆ</span></a></h2><h3 id="_1-hashmap-çš„å®ç°åŸç†-jdk-1-7å’Œ1-8çš„åŒºåˆ«-hash-æ–¹æ³•çš„ä½œç”¨-å¦‚ä½•å¤„ç†å“ˆå¸Œå†²çª" tabindex="-1"><a class="header-anchor" href="#_1-hashmap-çš„å®ç°åŸç†-jdk-1-7å’Œ1-8çš„åŒºåˆ«-hash-æ–¹æ³•çš„ä½œç”¨-å¦‚ä½•å¤„ç†å“ˆå¸Œå†²çª"><span>1. HashMap çš„å®ç°åŸç†ï¼ŸJDK 1.7å’Œ1.8çš„åŒºåˆ«ï¼Ÿhash()æ–¹æ³•çš„ä½œç”¨ï¼Ÿå¦‚ä½•å¤„ç†å“ˆå¸Œå†²çªï¼Ÿ</span></a></h3><h4 id="å®ç°åŸç†" tabindex="-1"><a class="header-anchor" href="#å®ç°åŸç†"><span>å®ç°åŸç†</span></a></h4><p>HashMapåŸºäºæ•°ç»„+é“¾è¡¨/çº¢é»‘æ ‘çš„æ•°æ®ç»“æ„ï¼Œé€šè¿‡hashç®—æ³•å°†keyæ˜ å°„åˆ°æ•°ç»„ç´¢å¼•ä½ç½®ã€‚</p><h4 id="jdk-1-7-vs-1-8-ä¸»è¦åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#jdk-1-7-vs-1-8-ä¸»è¦åŒºåˆ«"><span>JDK 1.7 vs 1.8 ä¸»è¦åŒºåˆ«</span></a></h4><ul><li><strong>æ•°æ®ç»“æ„</strong>ï¼š1.7æ˜¯æ•°ç»„+é“¾è¡¨ï¼Œ1.8æ˜¯æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘</li><li><strong>æ’å…¥æ–¹å¼</strong>ï¼š1.7å¤´æ’æ³•ï¼ˆå¹¶å‘ç¯å¢ƒå¯èƒ½æ­»å¾ªç¯ï¼‰ï¼Œ1.8å°¾æ’æ³•</li><li><strong>æ‰©å®¹æ—¶æœº</strong>ï¼š1.7å…ˆæ‰©å®¹å†æ’å…¥ï¼Œ1.8å…ˆæ’å…¥å†æ‰©å®¹</li><li><strong>hashç®—æ³•</strong>ï¼š1.8ä¼˜åŒ–äº†hashç®—æ³•ï¼Œå‡å°‘ç¢°æ’</li></ul><h4 id="hash-æ–¹æ³•ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#hash-æ–¹æ³•ä½œç”¨"><span>hash()æ–¹æ³•ä½œç”¨</span></a></h4><p>å°†keyçš„hashCodeè¿›è¡ŒäºŒæ¬¡hashï¼Œè®©hashå€¼æ›´å‡åŒ€åˆ†å¸ƒï¼Œå‡å°‘å“ˆå¸Œå†²çªã€‚</p><h4 id="å“ˆå¸Œå†²çªå¤„ç†" tabindex="-1"><a class="header-anchor" href="#å“ˆå¸Œå†²çªå¤„ç†"><span>å“ˆå¸Œå†²çªå¤„ç†</span></a></h4><ol><li><strong>é“¾è¡¨æ³•</strong>ï¼šç›¸åŒhashå€¼çš„å…ƒç´ ç”¨é“¾è¡¨è¿æ¥</li><li><strong>çº¢é»‘æ ‘ä¼˜åŒ–</strong>ï¼šå½“é“¾è¡¨é•¿åº¦â‰¥8ä¸”æ•°ç»„é•¿åº¦â‰¥64æ—¶ï¼Œé“¾è¡¨è½¬çº¢é»‘æ ‘ã€‚å½“çº¢é»‘æ ‘èŠ‚ç‚¹æ•°å°äº6æ—¶ï¼Œè½¬å›é“¾è¡¨</li><li><strong>æ‰©å®¹æœºåˆ¶</strong>ï¼šè´Ÿè½½å› å­è¶…è¿‡0.75æ—¶ï¼Œæ•°ç»„å®¹é‡ç¿»å€</li></ol><table><thead><tr><th>ç‰ˆæœ¬å¯¹æ¯”</th><th>JDK 1.7</th><th>JDK 1.8</th></tr></thead><tbody><tr><td>æ•°æ®ç»“æ„</td><td>æ•°ç»„+é“¾è¡¨</td><td>æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘</td></tr><tr><td>æ’å…¥æ–¹å¼</td><td>å¤´æ’æ³•</td><td>å°¾æ’æ³•</td></tr><tr><td>é“¾è¡¨è½¬æ ‘</td><td>æ— </td><td>é“¾è¡¨é•¿åº¦â‰¥8ä¸”æ•°ç»„é•¿åº¦â‰¥64æ—¶</td></tr><tr><td>æ‰©å®¹æ—¶æœº</td><td>å…ˆæ‰©å®¹å†æ’å…¥</td><td>å…ˆæ’å…¥å†æ‰©å®¹</td></tr><tr><td>å¹¶å‘é—®é¢˜</td><td>å¯èƒ½æ­»å¾ªç¯</td><td>é¿å…äº†æ­»å¾ªç¯</td></tr></tbody></table><h3 id="_2-concurrenthashmap-å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨" tabindex="-1"><a class="header-anchor" href="#_2-concurrenthashmap-å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨"><span>2. ConcurrentHashMap å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨ï¼Ÿ</span></a></h3><h4 id="jdk-1-7-åˆ†æ®µé”æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#jdk-1-7-åˆ†æ®µé”æœºåˆ¶"><span>JDK 1.7ï¼šåˆ†æ®µé”æœºåˆ¶</span></a></h4><ul><li><strong>Segmentæ•°ç»„</strong>ï¼šå°†HashMapåˆ†æˆå¤šä¸ªæ®µï¼Œæ¯ä¸ªæ®µæœ‰ç‹¬ç«‹çš„é”ï¼ˆReentrantLockï¼‰</li><li><strong>é”ç²’åº¦</strong>ï¼šåªé”éœ€è¦æ“ä½œçš„æ®µï¼Œå…¶ä»–æ®µå¯å¹¶å‘è®¿é—®</li><li><strong>å¹¶å‘åº¦</strong>ï¼šé»˜è®¤16ä¸ªæ®µï¼Œæœ€å¤šæ”¯æŒ16ä¸ªçº¿ç¨‹åŒæ—¶å†™å…¥</li></ul><h4 id="jdk-1-8-cas-synchronized" tabindex="-1"><a class="header-anchor" href="#jdk-1-8-cas-synchronized"><span>JDK 1.8ï¼šCAS + synchronized</span></a></h4><ul><li><strong>å–æ¶ˆSegment</strong>ï¼šç›´æ¥åœ¨NodeèŠ‚ç‚¹ä¸ŠåŠ é”</li><li><strong>CASæ“ä½œ</strong>ï¼šæ•°ç»„å…ƒç´ ä¸ºç©ºæ—¶ç”¨CASæ’å…¥</li><li><strong>synchronized</strong>ï¼šå‘ç”Ÿå†²çªæ—¶é”ä½é“¾è¡¨/çº¢é»‘æ ‘çš„å¤´èŠ‚ç‚¹</li><li><strong>æ›´ç»†ç²’åº¦</strong>ï¼šé”çš„æ˜¯å…·ä½“çš„hashæ¡¶ï¼Œå¹¶å‘æ€§èƒ½æ›´å¥½</li></ul><table><thead><tr><th>ç‰ˆæœ¬</th><th>JDK 1.7</th><th>JDK 1.8</th></tr></thead><tbody><tr><td>é”æœºåˆ¶</td><td>åˆ†æ®µé”ï¼ˆSegmentï¼‰</td><td>CAS + synchronized</td></tr><tr><td>é”ç²’åº¦</td><td>æ®µçº§åˆ«</td><td>èŠ‚ç‚¹çº§åˆ«</td></tr><tr><td>å¹¶å‘åº¦</td><td>æœ€å¤š16ä¸ªå†™çº¿ç¨‹</td><td>ç†è®ºä¸Šæ— é™åˆ¶</td></tr><tr><td>å†…å­˜å ç”¨</td><td>Segmenté¢å¤–å¼€é”€</td><td>æ›´å°‘çš„å†…å­˜å¼€é”€</td></tr><tr><td>æ€§èƒ½</td><td>è¯»å†™åˆ†ç¦»ï¼Œæ€§èƒ½è¾ƒå¥½</td><td>è¯»å†™æ€§èƒ½éƒ½æ›´ä¼˜</td></tr></tbody></table><h3 id="_3-arraylist-å’Œ-linkedlist-çš„åº•å±‚å®ç°ã€æ—¶é—´å¤æ‚åº¦" tabindex="-1"><a class="header-anchor" href="#_3-arraylist-å’Œ-linkedlist-çš„åº•å±‚å®ç°ã€æ—¶é—´å¤æ‚åº¦"><span>3. ArrayList å’Œ LinkedList çš„åº•å±‚å®ç°ã€æ—¶é—´å¤æ‚åº¦ï¼Ÿ</span></a></h3><h4 id="åº•å±‚å®ç°" tabindex="-1"><a class="header-anchor" href="#åº•å±‚å®ç°"><span>åº•å±‚å®ç°</span></a></h4><ul><li><strong>ArrayList</strong>ï¼šåŠ¨æ€æ•°ç»„ï¼Œè¿ç»­å†…å­˜ç©ºé—´å­˜å‚¨</li><li><strong>LinkedList</strong>ï¼šåŒå‘é“¾è¡¨ï¼ŒèŠ‚ç‚¹åŒ…å«dataã€prevã€nextæŒ‡é’ˆ</li></ul><h4 id="æ—¶é—´å¤æ‚åº¦å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#æ—¶é—´å¤æ‚åº¦å¯¹æ¯”"><span>æ—¶é—´å¤æ‚åº¦å¯¹æ¯”</span></a></h4><table><thead><tr><th>æ“ä½œ</th><th>ArrayList</th><th>LinkedList</th></tr></thead><tbody><tr><td>éšæœºè®¿é—®</td><td>O(1)</td><td>O(n)</td></tr><tr><td>å¤´éƒ¨æ’å…¥</td><td>O(n)</td><td>O(1)</td></tr><tr><td>å°¾éƒ¨æ’å…¥</td><td>O(1)</td><td>O(1)</td></tr><tr><td>ä¸­é—´æ’å…¥</td><td>O(n)</td><td>O(1)*</td></tr><tr><td>å¤´éƒ¨åˆ é™¤</td><td>O(n)</td><td>O(1)</td></tr><tr><td>å°¾éƒ¨åˆ é™¤</td><td>O(1)</td><td>O(1)</td></tr><tr><td>ä¸­é—´åˆ é™¤</td><td>O(n)</td><td>O(1)*</td></tr></tbody></table><p>*æ³¨ï¼šLinkedListä¸­é—´æ’å…¥/åˆ é™¤çš„O(1)æ˜¯æŒ‡å·²çŸ¥èŠ‚ç‚¹ä½ç½®çš„æƒ…å†µï¼ŒæŸ¥æ‰¾èŠ‚ç‚¹ä»éœ€O(n)</p><h4 id="ä½¿ç”¨åœºæ™¯-1" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-1"><span>ä½¿ç”¨åœºæ™¯</span></a></h4><ul><li><strong>ArrayList</strong>ï¼šé¢‘ç¹éšæœºè®¿é—®ã€å°‘é‡æ’å…¥åˆ é™¤</li><li><strong>LinkedList</strong>ï¼šé¢‘ç¹æ’å…¥åˆ é™¤ã€é¡ºåºè®¿é—®</li></ul><h3 id="_4-iterator-å’Œ-listiterator-çš„åŒºåˆ«-fail-fast-å’Œ-fail-safe-æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_4-iterator-å’Œ-listiterator-çš„åŒºåˆ«-fail-fast-å’Œ-fail-safe-æœºåˆ¶"><span>4. Iterator å’Œ ListIterator çš„åŒºåˆ«ï¼Ÿfail-fast å’Œ fail-safe æœºåˆ¶ï¼Ÿ</span></a></h3><h4 id="iterator-vs-listiterator" tabindex="-1"><a class="header-anchor" href="#iterator-vs-listiterator"><span>Iterator vs ListIterator</span></a></h4><table><thead><tr><th>ç‰¹æ€§</th><th>Iterator</th><th>ListIterator</th></tr></thead><tbody><tr><td>é€‚ç”¨èŒƒå›´</td><td>æ‰€æœ‰Collection</td><td>åªé€‚ç”¨äºList</td></tr><tr><td>éå†æ–¹å‘</td><td>å•å‘ï¼ˆå‘å‰ï¼‰</td><td>åŒå‘ï¼ˆå‰è¿›+åé€€ï¼‰</td></tr><tr><td>æ“ä½œèƒ½åŠ›</td><td>åªèƒ½åˆ é™¤</td><td>å¢åˆ æ”¹æŸ¥éƒ½æ”¯æŒ</td></tr><tr><td>ç´¢å¼•è®¿é—®</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒè·å–å½“å‰ç´¢å¼•</td></tr><tr><td>èµ·å§‹ä½ç½®</td><td>åªèƒ½ä»å¤´å¼€å§‹</td><td>å¯ä»¥ä»ä»»æ„ä½ç½®å¼€å§‹</td></tr></tbody></table><h4 id="fail-fast-vs-fail-safe" tabindex="-1"><a class="header-anchor" href="#fail-fast-vs-fail-safe"><span>fail-fast vs fail-safe</span></a></h4><p><strong>fail-fastï¼ˆå¿«é€Ÿå¤±è´¥ï¼‰ï¼š</strong></p><ul><li><strong>æœºåˆ¶</strong>ï¼šæ£€æµ‹åˆ°å¹¶å‘ä¿®æ”¹ç«‹å³æŠ›ConcurrentModificationException</li><li><strong>å®ç°</strong>ï¼šé€šè¿‡modCountè®¡æ•°å™¨æ£€æµ‹ç»“æ„æ€§ä¿®æ”¹</li><li><strong>ä»£è¡¨</strong>ï¼šArrayListã€HashMapçš„è¿­ä»£å™¨</li></ul><p><strong>fail-safeï¼ˆå®‰å…¨å¤±è´¥ï¼‰ï¼š</strong></p><ul><li><strong>æœºåˆ¶</strong>ï¼šåœ¨å‰¯æœ¬ä¸Šè¿­ä»£ï¼Œä¸ä¼šæŠ›å¼‚å¸¸ä½†å¯èƒ½è¯»åˆ°è¿‡æœŸæ•°æ®</li><li><strong>å®ç°</strong>ï¼šå¤åˆ¶ä¸€ä»½æ•°æ®è¿›è¡Œè¿­ä»£</li><li><strong>ä»£è¡¨</strong>ï¼šCopyOnWriteArrayListã€ConcurrentHashMap</li></ul><table><thead><tr><th>æœºåˆ¶</th><th>fail-fast</th><th>fail-safe</th></tr></thead><tbody><tr><td>å¼‚å¸¸å¤„ç†</td><td>ç«‹å³æŠ›å¼‚å¸¸</td><td>ä¸æŠ›å¼‚å¸¸</td></tr><tr><td>æ•°æ®ä¸€è‡´æ€§</td><td>å¼ºä¸€è‡´æ€§</td><td>å¯èƒ½è¯»åˆ°è¿‡æœŸæ•°æ®</td></tr><tr><td>æ€§èƒ½å¼€é”€</td><td>ä½</td><td>é«˜ï¼ˆéœ€è¦å¤åˆ¶ï¼‰</td></tr><tr><td>å†…å­˜ä½¿ç”¨</td><td>å°‘</td><td>å¤šï¼ˆé¢å¤–å‰¯æœ¬ï¼‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å•çº¿ç¨‹ç¯å¢ƒ</td><td>å¤šçº¿ç¨‹ç¯å¢ƒ</td></tr></tbody></table><h3 id="_5-å¦‚ä½•ä¿è¯é›†åˆçš„çº¿ç¨‹å®‰å…¨" tabindex="-1"><a class="header-anchor" href="#_5-å¦‚ä½•ä¿è¯é›†åˆçš„çº¿ç¨‹å®‰å…¨"><span>5. å¦‚ä½•ä¿è¯é›†åˆçš„çº¿ç¨‹å®‰å…¨ï¼Ÿ</span></a></h3><h4 id="äº”ç§è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#äº”ç§è§£å†³æ–¹æ¡ˆ"><span>äº”ç§è§£å†³æ–¹æ¡ˆ</span></a></h4><p><strong>1. Collections.synchronizedXXX()</strong></p><ul><li><strong>åŸç†</strong>ï¼šä¸ºæ¯ä¸ªæ–¹æ³•åŠ synchronizedå…³é”®å­—</li><li><strong>ç¼ºç‚¹</strong>ï¼šæ€§èƒ½è¾ƒå·®ï¼Œå¤åˆæ“ä½œä»ä¸å®‰å…¨</li></ul><p><strong>2. Vectorã€Hashtable</strong></p><ul><li><strong>åŸç†</strong>ï¼šæ–¹æ³•çº§åˆ«çš„synchronized</li><li><strong>ç¼ºç‚¹</strong>ï¼šè¿‡æ—¶çš„é‡é‡çº§åŒæ­¥ï¼Œæ€§èƒ½å·®</li></ul><p><strong>3. CopyOnWriteArrayList</strong></p><ul><li><strong>åŸç†</strong>ï¼šå†™æ—¶å¤åˆ¶ï¼Œè¯»å†™åˆ†ç¦»</li><li><strong>é€‚ç”¨</strong>ï¼šè¯»å¤šå†™å°‘çš„åœºæ™¯</li></ul><p><strong>4. ConcurrentHashMap</strong></p><ul><li><strong>åŸç†</strong>ï¼šåˆ†æ®µé”/CAS+synchronized</li><li><strong>ä¼˜ç‚¹</strong>ï¼šé«˜å¹¶å‘æ€§èƒ½å¥½</li></ul><p><strong>5. å¤–éƒ¨åŠ é”</strong></p><ul><li><strong>åŸç†</strong>ï¼šä½¿ç”¨å¤–éƒ¨é”æ§åˆ¶è®¿é—®</li><li><strong>çµæ´»æ€§</strong>ï¼šå¯æ§åˆ¶é”çš„ç²’åº¦</li></ul><table><thead><tr><th>æ–¹æ¡ˆ</th><th>æ€§èƒ½</th><th>é€‚ç”¨åœºæ™¯</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>Collections.synchronized</td><td>å·®</td><td>ç®€å•åœºæ™¯</td><td>å¤åˆæ“ä½œä¸å®‰å…¨</td></tr><tr><td>Vector/Hashtable</td><td>å·®</td><td>é—ç•™ä»£ç </td><td>é‡é‡çº§åŒæ­¥</td></tr><tr><td>CopyOnWriteArrayList</td><td>è¯»å¿«</td><td>è¯»å¤šå†™å°‘</td><td>å†™æ“ä½œå¼€é”€å¤§</td></tr><tr><td>ConcurrentHashMap</td><td>ä¼˜</td><td>é«˜å¹¶å‘Mapæ“ä½œ</td><td>åªé€‚ç”¨äºMap</td></tr><tr><td>å¤–éƒ¨åŠ é”</td><td>ä¸­</td><td>å¤æ‚ä¸šåŠ¡é€»è¾‘</td><td>éœ€è¦å°å¿ƒæ­»é”</td></tr></tbody></table><h3 id="_6-comparable-å’Œ-comparator-æ¥å£çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_6-comparable-å’Œ-comparator-æ¥å£çš„åŒºåˆ«"><span>6. Comparable å’Œ Comparator æ¥å£çš„åŒºåˆ«ï¼Ÿ</span></a></h3><h4 id="æ ¸å¿ƒåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#æ ¸å¿ƒåŒºåˆ«"><span>æ ¸å¿ƒåŒºåˆ«</span></a></h4><ul><li><strong>Comparable</strong>ï¼šå†…éƒ¨æ¯”è¾ƒå™¨ï¼Œå¯¹è±¡è‡ªå·±å®šä¹‰æ’åºè§„åˆ™</li><li><strong>Comparator</strong>ï¼šå¤–éƒ¨æ¯”è¾ƒå™¨ï¼Œç¬¬ä¸‰æ–¹å®šä¹‰æ’åºè§„åˆ™</li></ul><h4 id="è¯¦ç»†å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#è¯¦ç»†å¯¹æ¯”"><span>è¯¦ç»†å¯¹æ¯”</span></a></h4><p><strong>Comparableæ¥å£ï¼š</strong></p><ul><li><strong>æ–¹æ³•</strong>ï¼šcompareTo(T o)</li><li><strong>å®ç°ä½ç½®</strong>ï¼šåœ¨è¢«æ¯”è¾ƒçš„ç±»å†…éƒ¨å®ç°</li><li><strong>æ’åºè§„åˆ™</strong>ï¼šå›ºå®šçš„ï¼Œç±»çš„è‡ªç„¶æ’åº</li><li><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼šCollections.sort(list)</li></ul><p><strong>Comparatoræ¥å£ï¼š</strong></p><ul><li><strong>æ–¹æ³•</strong>ï¼šcompare(T o1, T o2)</li><li><strong>å®ç°ä½ç½®</strong>ï¼šå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å®ç°</li><li><strong>æ’åºè§„åˆ™</strong>ï¼šçµæ´»çš„ï¼Œå¯ä»¥æœ‰å¤šç§æ’åºæ–¹å¼</li><li><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼šCollections.sort(list, comparator)</li></ul><table><thead><tr><th>ç‰¹æ€§</th><th>Comparable</th><th>Comparator</th></tr></thead><tbody><tr><td>ä½ç½®</td><td>ç±»å†…éƒ¨å®ç°</td><td>å¤–éƒ¨å®ç°</td></tr><tr><td>æ–¹æ³•</td><td>compareTo()</td><td>compare()</td></tr><tr><td>æ’åºè§„åˆ™</td><td>å•ä¸€å›ºå®š</td><td>å¤šæ ·åŒ–çµæ´»</td></tr><tr><td>ä¿®æ”¹æˆæœ¬</td><td>éœ€è¦ä¿®æ”¹åŸç±»</td><td>ä¸éœ€è¦ä¿®æ”¹åŸç±»</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>ç±»æœ‰æ˜ç¡®çš„è‡ªç„¶æ’åº</td><td>éœ€è¦å¤šç§æ’åºæ–¹å¼æˆ–æ— æ³•ä¿®æ”¹åŸç±»</td></tr><tr><td>å®ç°æ•°é‡</td><td>ä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ç§</td><td>å¯ä»¥æœ‰å¤šä¸ªä¸åŒçš„å®ç°</td></tr></tbody></table><h2 id="å¤šçº¿ç¨‹" tabindex="-1"><a class="header-anchor" href="#å¤šçº¿ç¨‹"><span>å¤šçº¿ç¨‹</span></a></h2><h3 id="_1-è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«-åˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹å¼-å“ªç§æ›´æ¨è" tabindex="-1"><a class="header-anchor" href="#_1-è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«-åˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹å¼-å“ªç§æ›´æ¨è"><span>1. è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«ï¼Ÿåˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹å¼ï¼Ÿå“ªç§æ›´æ¨èï¼Ÿ</span></a></h3><p><strong>è¿›ç¨‹ vs çº¿ç¨‹ï¼š</strong></p><ul><li><strong>è¿›ç¨‹</strong>ï¼šæ“ä½œç³»ç»Ÿèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œæ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ <ul><li>æ¯ä¸ªè¿›ç¨‹æœ‰ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼ˆå†…å­˜ã€å †ã€æ ˆã€æ•°æ®æ®µç­‰ï¼‰</li></ul></li><li><strong>çº¿ç¨‹</strong>ï¼šCPU è°ƒåº¦å’Œæ‰§è¡Œçš„æœ€å°å•ä½ï¼ŒåŒä¸€è¿›ç¨‹å†…çš„çº¿ç¨‹å…±äº«å†…å­˜ç©ºé—´ <ul><li>åŒä¸€è¿›ç¨‹å†…çš„çº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼ˆå †ã€æ–¹æ³•åŒºç­‰ï¼‰ï¼Œä½†æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨ã€æ ˆç©ºé—´å’Œå±€éƒ¨å˜é‡è¡¨</li></ul></li></ul><table><thead><tr><th>ç‰¹æ€§</th><th>è¿›ç¨‹</th><th>çº¿ç¨‹</th></tr></thead><tbody><tr><td>èµ„æºå ç”¨</td><td>ç‹¬ç«‹å†…å­˜ç©ºé—´</td><td>å…±äº«è¿›ç¨‹å†…å­˜ç©ºé—´</td></tr><tr><td>åˆ›å»ºå¼€é”€</td><td>å¤§</td><td>å°</td></tr><tr><td>é€šä¿¡æ–¹å¼</td><td>IPCï¼ˆç®¡é“ã€æ¶ˆæ¯é˜Ÿåˆ—ï¼‰</td><td>å…±äº«å†…å­˜ã€åŒæ­¥æœºåˆ¶</td></tr><tr><td>å´©æºƒå½±å“</td><td>ä¸å½±å“å…¶ä»–è¿›ç¨‹</td><td>å¯èƒ½å½±å“æ•´ä¸ªè¿›ç¨‹</td></tr><tr><td>åˆ‡æ¢å¼€é”€</td><td>å¤§</td><td>å°</td></tr></tbody></table><ul><li>çº¿ç¨‹åˆ‡æ¢æ¯”è¿›ç¨‹åˆ‡æ¢å¿«æ˜¯å› ä¸ºçº¿ç¨‹å…±äº«åŒä¸€è¿›ç¨‹çš„åœ°å€ç©ºé—´å’Œèµ„æºï¼Œçº¿ç¨‹åˆ‡æ¢æ—¶åªéœ€åˆ‡æ¢å †æ ˆå’Œç¨‹åºè®¡æ•°å™¨ç­‰å°‘é‡ä¿¡æ¯ï¼Œè€Œä¸éœ€è¦åˆ‡æ¢åœ°å€ç©ºé—´ï¼Œé¿å…äº†è¿›ç¨‹åˆ‡æ¢æ—¶éœ€è¦åˆ‡æ¢å†…å­˜æ˜ å°„è¡¨ç­‰å¤§é‡èµ„æºçš„å¼€é”€ï¼Œä»è€ŒèŠ‚çœäº†æ—¶é—´å’Œç³»ç»Ÿèµ„æºã€‚</li></ul><p><strong>åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ï¼š</strong></p><table><thead><tr><th>æ–¹å¼</th><th>ç‰¹ç‚¹</th><th>æ¨èåº¦</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ç»§æ‰¿Threadç±»</td><td>ç®€å•ï¼Œä½†Javaå•ç»§æ‰¿é™åˆ¶</td><td>â­â­</td><td>ç®€å•åœºæ™¯ï¼Œä¸æ¨è</td></tr><tr><td>å®ç°Runnableæ¥å£</td><td>å¯å¤šç»§æ‰¿ï¼Œæ¨è</td><td>â­â­â­</td><td>ä¸€èˆ¬å¼‚æ­¥ä»»åŠ¡</td></tr><tr><td>å®ç°Callable+FutureTask</td><td>æœ‰è¿”å›å€¼ï¼Œå¯æŠ›å¼‚å¸¸</td><td>â­â­â­</td><td>éœ€è¦è¿”å›ç»“æœçš„ä»»åŠ¡</td></tr><tr><td>çº¿ç¨‹æ± </td><td>å¤ç”¨çº¿ç¨‹ï¼Œæ€§èƒ½å¥½ï¼Œèµ„æºå¯æ§</td><td>â­â­â­â­â­</td><td>ç”Ÿäº§ç¯å¢ƒï¼Œé«˜å¹¶å‘åœºæ™¯</td></tr></tbody></table><p><strong>æœ€æ¨è</strong>ï¼šçº¿ç¨‹æ± æ–¹å¼ï¼Œå› ä¸ºå¯ä»¥é¿å…é¢‘ç¹åˆ›å»ºé”€æ¯çº¿ç¨‹çš„å¼€é”€ï¼Œæ›´å¥½åœ°æ§åˆ¶å¹¶å‘æ•°é‡ã€‚</p><h3 id="_2-sleep-wait-yield-join-æ–¹æ³•çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_2-sleep-wait-yield-join-æ–¹æ³•çš„åŒºåˆ«"><span>2. sleep(), wait(), yield(), join() æ–¹æ³•çš„åŒºåˆ«ï¼Ÿ</span></a></h3><table><thead><tr><th>æ–¹æ³•</th><th>æ‰€å±ç±»</th><th>é”çŠ¶æ€</th><th>ä½¿ç”¨åœºæ™¯</th><th>å”¤é†’æ–¹å¼</th></tr></thead><tbody><tr><td>sleep()</td><td>Thread</td><td>ä¸é‡Šæ”¾é”</td><td>æš‚åœæŒ‡å®šæ—¶é—´</td><td>æ—¶é—´åˆ°è‡ªåŠ¨å”¤é†’</td></tr><tr><td>wait()</td><td>Object</td><td>é‡Šæ”¾é”</td><td>ç­‰å¾…æ¡ä»¶æ»¡è¶³</td><td>notify/notifyAll</td></tr><tr><td>yield()</td><td>Thread</td><td>ä¸é‡Šæ”¾é”</td><td>è®©å‡ºCPUç»™åŒä¼˜å…ˆçº§çº¿ç¨‹</td><td>ç«‹å³é‡æ–°å‚ä¸è°ƒåº¦</td></tr><tr><td>join()</td><td>Thread</td><td>ä¸é‡Šæ”¾é”</td><td>ç­‰å¾…çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</td><td>ç›®æ ‡çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</td></tr></tbody></table><p><strong>æ ¸å¿ƒåŒºåˆ«ï¼š</strong></p><ul><li><strong>sleep()å’Œwait()çš„æœ€å¤§åŒºåˆ«</strong>ï¼šsleepä¸é‡Šæ”¾é”ï¼Œwaité‡Šæ”¾é”</li><li><strong>yield()ä½œç”¨</strong>ï¼šæš‚åœå½“å‰çº¿ç¨‹ï¼Œè®©åŒä¼˜å…ˆçº§çº¿ç¨‹æœ‰æœºä¼šæ‰§è¡Œï¼Œä½†å®é™…æ˜¯å¦è®©å‡º CPU è¦çœ‹è°ƒåº¦å™¨ã€‚</li><li><strong>join()ç”¨é€”</strong>ï¼šä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åå†ç»§ç»­</li></ul><h3 id="_3-ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯ä»€ä¹ˆ-å¼€é”€åœ¨å“ªé‡Œ" tabindex="-1"><a class="header-anchor" href="#_3-ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯ä»€ä¹ˆ-å¼€é”€åœ¨å“ªé‡Œ"><span>3. ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯ä»€ä¹ˆï¼Ÿå¼€é”€åœ¨å“ªé‡Œï¼Ÿ</span></a></h3><p><strong>ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>ï¼šCPUä»ä¸€ä¸ªçº¿ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œéœ€è¦ä¿å­˜å½“å‰çº¿ç¨‹çŠ¶æ€å¹¶åŠ è½½æ–°çº¿ç¨‹çŠ¶æ€çš„è¿‡ç¨‹ã€‚</p><p><strong>å¼€é”€æ„æˆï¼š</strong></p><ol><li><strong>ä¿å­˜ç°åœº</strong>ï¼šå¯„å­˜å™¨ã€ç¨‹åºè®¡æ•°å™¨ã€æ ˆæŒ‡é’ˆç­‰</li><li><strong>åŠ è½½æ–°ç°åœº</strong>ï¼šæ–°çº¿ç¨‹çš„æ‰§è¡Œç¯å¢ƒ</li><li><strong>å†…å­˜ç¼“å­˜å¤±æ•ˆ</strong>ï¼šCPUç¼“å­˜å¯èƒ½å¤±æ•ˆï¼Œéœ€è¦é‡æ–°åŠ è½½</li><li><strong>å†…æ ¸æ€åˆ‡æ¢</strong>ï¼šç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„åˆ‡æ¢å¼€é”€</li></ol><table><thead><tr><th>å¼€é”€ç±»å‹</th><th>å…·ä½“å†…å®¹</th><th>å½±å“ç¨‹åº¦</th></tr></thead><tbody><tr><td>å¯„å­˜å™¨ä¿å­˜</td><td>CPUå¯„å­˜å™¨çŠ¶æ€ä¿å­˜/æ¢å¤</td><td>ä¸­ç­‰</td></tr><tr><td>å†…å­˜è®¿é—®</td><td>æ ˆã€å †å†…å­˜è®¿é—®æ¨¡å¼å˜åŒ–</td><td>é«˜</td></tr><tr><td>ç¼“å­˜å¤±æ•ˆ</td><td>CPUç¼“å­˜ã€TLBå¤±æ•ˆ</td><td>é«˜</td></tr><tr><td>ç³»ç»Ÿè°ƒç”¨</td><td>ç”¨æˆ·æ€/å†…æ ¸æ€åˆ‡æ¢</td><td>ä¸­ç­‰</td></tr></tbody></table><h3 id="_4-ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨-å¦‚ä½•ç†è§£åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§" tabindex="-1"><a class="header-anchor" href="#_4-ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨-å¦‚ä½•ç†è§£åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§"><span>4. ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿå¦‚ä½•ç†è§£åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§ï¼Ÿ</span></a></h3><p><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œä¸ä¼šäº§ç”Ÿæ•°æ®ä¸ä¸€è‡´æˆ–å…¶ä»–éé¢„æœŸçš„ç»“æœã€‚</p><p><strong>å¹¶å‘ç¼–ç¨‹ä¸‰å¤§ç‰¹æ€§ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>å®šä¹‰</th><th>é—®é¢˜è¡¨ç°</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>åŸå­æ€§</td><td>æ“ä½œä¸å¯è¢«ä¸­æ–­ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸè¦ä¹ˆå…¨éƒ¨å¤±è´¥</td><td>æ•°æ®ä¸ä¸€è‡´</td><td>synchronizedã€CAS</td></tr><tr><td>å¯è§æ€§</td><td>ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹å…±äº«å˜é‡ï¼Œå…¶ä»–çº¿ç¨‹èƒ½ç«‹å³çœ‹åˆ°</td><td>è¯»å–åˆ°è¿‡æœŸæ•°æ®</td><td>volatileã€synchronized</td></tr><tr><td>æœ‰åºæ€§</td><td>ç¨‹åºæ‰§è¡Œé¡ºåºä¸ä»£ç é¡ºåºä¸€è‡´</td><td>æŒ‡ä»¤é‡æ’åºå¯¼è‡´é€»è¾‘é”™è¯¯</td><td>volatileã€synchronized</td></tr></tbody></table><h3 id="_5-synchronized-å…³é”®å­—çš„åŸç†-ä½¿ç”¨æ–¹å¼-é”å‡çº§è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_5-synchronized-å…³é”®å­—çš„åŸç†-ä½¿ç”¨æ–¹å¼-é”å‡çº§è¿‡ç¨‹"><span>5. synchronized å…³é”®å­—çš„åŸç†ï¼Ÿä½¿ç”¨æ–¹å¼ï¼Ÿé”å‡çº§è¿‡ç¨‹ï¼Ÿ</span></a></h3><p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p><ul><li><strong>ä¿®é¥°å®ä¾‹æ–¹æ³•</strong>ï¼šé”çš„æ˜¯å½“å‰å®ä¾‹å¯¹è±¡</li><li><strong>ä¿®é¥°é™æ€æ–¹æ³•</strong>ï¼šé”çš„æ˜¯Classå¯¹è±¡</li><li><strong>ä¿®é¥°ä»£ç å—</strong>ï¼šé”çš„æ˜¯æŒ‡å®šå¯¹è±¡</li></ul><p><strong>é”å‡çº§è¿‡ç¨‹ï¼ˆJDK1.6+ï¼‰ï¼š</strong></p><table><thead><tr><th>é”çŠ¶æ€</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th><th>æ€§èƒ½</th></tr></thead><tbody><tr><td>æ— é”</td><td>æ²¡æœ‰é”ç«äº‰</td><td>å•çº¿ç¨‹è®¿é—®</td><td>æœ€é«˜</td></tr><tr><td>åå‘é”</td><td>åå‘ç¬¬ä¸€ä¸ªè·å¾—é”çš„çº¿ç¨‹</td><td>åŸºæœ¬æ²¡æœ‰ç«äº‰</td><td>é«˜</td></tr><tr><td>è½»é‡çº§é”</td><td>CASè‡ªæ—‹è·å–é”</td><td>ç«äº‰ä¸æ¿€çƒˆï¼ŒæŒé”æ—¶é—´çŸ­</td><td>ä¸­ç­‰</td></tr><tr><td>é‡é‡çº§é”</td><td>æ“ä½œç³»ç»Ÿäº’æ–¥é”</td><td>ç«äº‰æ¿€çƒˆï¼ŒæŒé”æ—¶é—´é•¿</td><td>ä½</td></tr></tbody></table><p><strong>å‡çº§è·¯å¾„</strong>ï¼šæ— é” â†’ åå‘é” â†’ è½»é‡çº§é” â†’ é‡é‡çº§é”ï¼ˆä¸å¯é€†ï¼‰</p><h3 id="_6-volatile-å…³é”®å­—çš„è¯­ä¹‰-åŸç†-èƒ½ä¿è¯åŸå­æ€§å—-é€‚ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#_6-volatile-å…³é”®å­—çš„è¯­ä¹‰-åŸç†-èƒ½ä¿è¯åŸå­æ€§å—-é€‚ç”¨åœºæ™¯"><span>6. volatile å…³é”®å­—çš„è¯­ä¹‰ï¼ŸåŸç†ï¼Ÿèƒ½ä¿è¯åŸå­æ€§å—ï¼Ÿé€‚ç”¨åœºæ™¯ï¼Ÿ</span></a></h3><p><strong>volatileçš„ä¸¤å¤§è¯­ä¹‰ï¼š</strong></p><ol><li><strong>ä¿è¯å¯è§æ€§</strong>ï¼šä¿®æ”¹ç«‹å³åˆ·æ–°åˆ°ä¸»å†…å­˜ï¼Œè¯»å–ç›´æ¥ä»ä¸»å†…å­˜è¯»</li><li><strong>ä¿è¯æœ‰åºæ€§</strong>ï¼šç¦æ­¢æŒ‡ä»¤é‡æ’åº</li></ol><p><strong>å®ç°åŸç†ï¼š</strong></p><ul><li><strong>å†…å­˜å±éšœ</strong>ï¼šç¼–è¯‘å™¨åœ¨volatileå˜é‡å‰åæ’å…¥å†…å­˜å±éšœæŒ‡ä»¤</li><li><strong>ç¼“å­˜ä¸€è‡´æ€§åè®®</strong>ï¼šMESIåè®®ç¡®ä¿ç¼“å­˜ä¸€è‡´æ€§</li></ul><p><strong>ä¸èƒ½ä¿è¯åŸå­æ€§</strong>ï¼švolatileä¸èƒ½ä¿è¯å¤åˆæ“ä½œçš„åŸå­æ€§ï¼Œå¦‚ i++ æ“ä½œã€‚</p><table><thead><tr><th>ç‰¹æ€§</th><th>volatile</th><th>synchronized</th></tr></thead><tbody><tr><td>åŸå­æ€§</td><td>âŒ</td><td>âœ…</td></tr><tr><td>å¯è§æ€§</td><td>âœ…</td><td>âœ…</td></tr><tr><td>æœ‰åºæ€§</td><td>âœ…</td><td>âœ…</td></tr><tr><td>é˜»å¡æ€§</td><td>ä¸é˜»å¡</td><td>å¯èƒ½é˜»å¡</td></tr><tr><td>æ€§èƒ½</td><td>é«˜</td><td>ç›¸å¯¹è¾ƒä½</td></tr></tbody></table><p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>çŠ¶æ€æ ‡è®°ï¼ˆå¦‚åœæ­¢æ ‡å¿—ï¼‰</li><li>åŒé‡æ£€æŸ¥é”å®šæ¨¡å¼</li><li>å•ä¾‹æ¨¡å¼ä¸­çš„å®ä¾‹å˜é‡</li></ul><h3 id="_7-synchronized-å’Œ-volatile-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_7-synchronized-å’Œ-volatile-çš„åŒºåˆ«"><span>7. synchronized å’Œ volatile çš„åŒºåˆ«ï¼Ÿ</span></a></h3><table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>synchronized</th><th>volatile</th></tr></thead><tbody><tr><td>ä½œç”¨å¯¹è±¡</td><td>æ–¹æ³•ã€ä»£ç å—</td><td>å˜é‡</td></tr><tr><td>åŸå­æ€§</td><td>ä¿è¯</td><td>ä¸ä¿è¯</td></tr><tr><td>å¯è§æ€§</td><td>ä¿è¯</td><td>ä¿è¯</td></tr><tr><td>æœ‰åºæ€§</td><td>ä¿è¯</td><td>ä¿è¯</td></tr><tr><td>é˜»å¡ç‰¹æ€§</td><td>å¯èƒ½é˜»å¡</td><td>ä¸é˜»å¡</td></tr><tr><td>é”æœºåˆ¶</td><td>äº’æ–¥é”</td><td>æ— é”</td></tr><tr><td>æ€§èƒ½å¼€é”€</td><td>è¾ƒé«˜</td><td>è¾ƒä½</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å¤åˆæ“ä½œã€ä¸´ç•ŒåŒº</td><td>çŠ¶æ€æ ‡è®°ã€ç®€å•èµ‹å€¼</td></tr></tbody></table><h3 id="_8-cas-æ“ä½œçš„åŸç†-atomicç±»å®ç°-abaé—®é¢˜åŠè§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_8-cas-æ“ä½œçš„åŸç†-atomicç±»å®ç°-abaé—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"><span>8. CAS æ“ä½œçš„åŸç†ï¼ŸAtomicç±»å®ç°ï¼ŸABAé—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼Ÿ</span></a></h3><p><strong>CASï¼ˆCompare-And-Swapï¼‰åŸç†ï¼š</strong> æ¯”è¾ƒå†…å­˜ä½ç½®çš„å€¼ä¸æœŸæœ›å€¼ï¼Œå¦‚æœç›¸åŒåˆ™æ›´æ–°ä¸ºæ–°å€¼ï¼Œæ•´ä¸ªæ“ä½œæ˜¯åŸå­çš„ã€‚</p><p><strong>ä¸‰ä¸ªæ“ä½œæ•°ï¼š</strong></p><ul><li><strong>å†…å­˜ä½ç½®V</strong>ï¼šè¦æ›´æ–°çš„å˜é‡</li><li><strong>é¢„æœŸå€¼A</strong>ï¼šæœŸæœ›çš„å½“å‰å€¼</li><li><strong>æ–°å€¼B</strong>ï¼šè¦è®¾ç½®çš„æ–°å€¼</li></ul><p><strong>Atomicç±»å®ç°ï¼š</strong> åŸºäºCAS + volatileï¼Œé€šè¿‡æ— é”ç®—æ³•å®ç°çº¿ç¨‹å®‰å…¨ã€‚</p><p><strong>ABAé—®é¢˜ï¼š</strong> å€¼ä»Aå˜æˆBå†å˜å›Aï¼ŒCASæ£€æµ‹ä¸åˆ°ä¸­é—´çš„å˜åŒ–è¿‡ç¨‹ã€‚</p><table><thead><tr><th>é—®é¢˜</th><th>è¡¨ç°</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>ABAé—®é¢˜</td><td>å€¼å˜åŒ–ååˆå˜å›åŸå€¼ï¼ŒCASè¯¯åˆ¤ä¸ºæœªå˜åŒ–</td><td>AtomicStampedReference å¼•å…¥äº†ç‰ˆæœ¬æˆ³</td></tr><tr><td>æ€§èƒ½é—®é¢˜</td><td>é«˜ç«äº‰æ—¶è‡ªæ—‹æ¶ˆè€—CPU</td><td>ç»“åˆsynchronized</td></tr><tr><td>åªèƒ½ä¿è¯å•å˜é‡</td><td>å¤šä¸ªå˜é‡çš„åŸå­æ€§æ— æ³•ä¿è¯</td><td>AtomicReferenceåŒ…è£…å¯¹è±¡</td></tr></tbody></table><h3 id="_9-threadlocal-çš„åŸç†-ä½¿ç”¨åœºæ™¯-å†…å­˜æ³„æ¼é—®é¢˜åŠå¦‚ä½•é¿å…" tabindex="-1"><a class="header-anchor" href="#_9-threadlocal-çš„åŸç†-ä½¿ç”¨åœºæ™¯-å†…å­˜æ³„æ¼é—®é¢˜åŠå¦‚ä½•é¿å…"><span>9. ThreadLocal çš„åŸç†ï¼Ÿä½¿ç”¨åœºæ™¯ï¼Ÿå†…å­˜æ³„æ¼é—®é¢˜åŠå¦‚ä½•é¿å…ï¼Ÿ</span></a></h3><p><strong>åŸç†ï¼š</strong> æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªThreadLocalMapï¼Œä»¥ThreadLocalä¸ºkeyå­˜å‚¨çº¿ç¨‹ç§æœ‰æ•°æ®ã€‚</p><p><strong>æ•°æ®ç»“æ„ï¼š</strong> Thread â†’ ThreadLocalMap â†’ Entry(ThreadLocal, Value)</p><p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p><ul><li><strong>æ•°æ®åº“è¿æ¥ç®¡ç†</strong>ï¼šæ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹çš„è¿æ¥</li><li><strong>ç”¨æˆ·ä¼šè¯ä¿¡æ¯</strong>ï¼šWebè¯·æ±‚ä¸­çš„ç”¨æˆ·ä¿¡æ¯</li><li><strong>æ•°æ®æ ¼å¼åŒ–</strong>ï¼šSimpleDateFormatç­‰éçº¿ç¨‹å®‰å…¨ç±»</li></ul><p><strong>å†…å­˜æ³„æ¼é—®é¢˜ï¼š</strong></p><table><thead><tr><th>é—®é¢˜åŸå› </th><th>åæœ</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>ThreadLocalè¢«å›æ”¶</td><td>keyä¸ºnull</td><td>æ‰‹åŠ¨è°ƒç”¨remove()</td></tr><tr><td>çº¿ç¨‹é•¿æœŸå­˜æ´»</td><td>valueæ— æ³•å›æ”¶</td><td>ä½¿ç”¨å®Œæ¯•ç«‹å³remove()</td></tr><tr><td>å¼ºå¼•ç”¨é“¾</td><td>æ•´ä¸ªå¯¹è±¡æ— æ³•å›æ”¶</td><td>é¿å…åœ¨çº¿ç¨‹æ± ä¸­ä½¿ç”¨é™æ€ThreadLocal</td></tr></tbody></table><p><strong>æœ€ä½³å®è·µï¼š</strong></p><ol><li>ä½¿ç”¨å®Œæ¯•åç«‹å³è°ƒç”¨ <code>remove()</code></li><li>ä½¿ç”¨ <code>try-finally</code> ç¡®ä¿æ¸…ç†</li><li>é¿å…åœ¨çº¿ç¨‹æ± ä¸­ä½¿ç”¨é™æ€ThreadLocal</li></ol><h2 id="æ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#æ•°æ®åº“"><span>æ•°æ®åº“</span></a></h2><h3 id="_1-sqlåŸºç¡€è¯­æ³•-ddl-dml-dql-dcl-å¸¸ç”¨å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#_1-sqlåŸºç¡€è¯­æ³•-ddl-dml-dql-dcl-å¸¸ç”¨å‡½æ•°"><span>1. SQLåŸºç¡€è¯­æ³•ï¼ˆDDL, DML, DQL, DCLï¼‰ï¼Ÿå¸¸ç”¨å‡½æ•°ï¼Ÿ</span></a></h3><p><strong>SQLè¯­è¨€åˆ†ç±»ï¼š</strong></p><table><thead><tr><th>ç±»å‹</th><th>å…¨ç§°</th><th>ä½œç”¨</th><th>å¸¸ç”¨è¯­å¥</th></tr></thead><tbody><tr><td>DDL</td><td>Data Definition Language</td><td>æ•°æ®å®šä¹‰è¯­è¨€</td><td>CREATEã€ALTERã€DROP</td></tr><tr><td>DML</td><td>Data Manipulation Language</td><td>æ•°æ®æ“ä½œè¯­è¨€</td><td>INSERTã€UPDATEã€DELETE</td></tr><tr><td>DQL</td><td>Data Query Language</td><td>æ•°æ®æŸ¥è¯¢è¯­è¨€</td><td>SELECT</td></tr><tr><td>DCL</td><td>Data Control Language</td><td>æ•°æ®æ§åˆ¶è¯­è¨€</td><td>GRANTã€REVOKEã€COMMITã€ROLLBACK</td></tr></tbody></table><p><strong>å¸¸ç”¨å‡½æ•°åˆ†ç±»ï¼š</strong></p><table><thead><tr><th>å‡½æ•°ç±»å‹</th><th>å¸¸ç”¨å‡½æ•°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>èšåˆå‡½æ•°</td><td>COUNTã€SUMã€AVGã€MAXã€MIN</td><td>ç»Ÿè®¡è®¡ç®—</td></tr><tr><td>å­—ç¬¦ä¸²å‡½æ•°</td><td>CONCATã€SUBSTRINGã€LENGTHã€UPPERã€LOWER</td><td>å­—ç¬¦ä¸²å¤„ç†</td></tr><tr><td>æ—¥æœŸå‡½æ•°</td><td>NOWã€CURDATEã€DATE_FORMATã€DATEDIFF</td><td>æ—¥æœŸæ—¶é—´å¤„ç†</td></tr><tr><td>æ•°å­¦å‡½æ•°</td><td>ROUNDã€CEILã€FLOORã€ABSã€MOD</td><td>æ•°å€¼è®¡ç®—</td></tr><tr><td>æ¡ä»¶å‡½æ•°</td><td>IFã€CASE WHENã€IFNULLã€NULLIF</td><td>æ¡ä»¶åˆ¤æ–­</td></tr></tbody></table><h3 id="_2-mysqlæ ¸å¿ƒåŒºåˆ«-äº‹åŠ¡ã€é”ã€å¤–é”®ã€ç´¢å¼•ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_2-mysqlæ ¸å¿ƒåŒºåˆ«-äº‹åŠ¡ã€é”ã€å¤–é”®ã€ç´¢å¼•ç»“æ„"><span>2. MySQLæ ¸å¿ƒåŒºåˆ«ï¼ˆäº‹åŠ¡ã€é”ã€å¤–é”®ã€ç´¢å¼•ç»“æ„ï¼‰ï¼Ÿ</span></a></h3><p><strong>å­˜å‚¨å¼•æ“å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>InnoDB</th><th>MyISAM</th><th>Memory</th></tr></thead><tbody><tr><td>äº‹åŠ¡æ”¯æŒ</td><td>âœ…æ”¯æŒACID</td><td>âŒä¸æ”¯æŒ</td><td>âŒä¸æ”¯æŒ</td></tr><tr><td>é”çº§åˆ«</td><td>è¡Œçº§é”</td><td>è¡¨çº§é”</td><td>è¡¨çº§é”</td></tr><tr><td>å¤–é”®æ”¯æŒ</td><td>âœ…æ”¯æŒ</td><td>âŒä¸æ”¯æŒ</td><td>âŒä¸æ”¯æŒ</td></tr><tr><td>ç´¢å¼•ç»“æ„</td><td>B+æ ‘èšé›†ç´¢å¼•</td><td>B+æ ‘éèšé›†ç´¢å¼•</td><td>Hashç´¢å¼•</td></tr><tr><td>å´©æºƒæ¢å¤</td><td>âœ…æ”¯æŒ</td><td>âŒä¸æ”¯æŒ</td><td>âŒä¸æ”¯æŒ</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>äº‹åŠ¡å¤„ç†ã€é«˜å¹¶å‘å†™å…¥</td><td>åªè¯»ã€æ•°æ®ä»“åº“</td><td>ä¸´æ—¶è¡¨ã€ç¼“å­˜</td></tr></tbody></table><h3 id="_3-ç´¢å¼•-ä»€ä¹ˆæ˜¯ç´¢å¼•-ä¸ºä»€ä¹ˆèƒ½æé«˜æŸ¥è¯¢æ•ˆç‡-ç´¢å¼•çš„ä¼˜ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#_3-ç´¢å¼•-ä»€ä¹ˆæ˜¯ç´¢å¼•-ä¸ºä»€ä¹ˆèƒ½æé«˜æŸ¥è¯¢æ•ˆç‡-ç´¢å¼•çš„ä¼˜ç¼ºç‚¹"><span>3. ç´¢å¼•ï¼šä»€ä¹ˆæ˜¯ç´¢å¼•ï¼Ÿä¸ºä»€ä¹ˆèƒ½æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Ÿç´¢å¼•çš„ä¼˜ç¼ºç‚¹ï¼Ÿ</span></a></h3><p><strong>ç´¢å¼•å®šä¹‰ï¼š</strong> ç´¢å¼•æ˜¯æ•°æ®åº“è¡¨ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—çš„å€¼æ’åºçš„æ•°æ®ç»“æ„ï¼Œç±»ä¼¼ä¹¦çš„ç›®å½•ï¼Œç”¨äºå¿«é€Ÿå®šä½æ•°æ®ã€‚</p><p><strong>æé«˜æ•ˆç‡åŸç†ï¼š</strong></p><ul><li><strong>å‡å°‘æ‰«æè¡Œæ•°</strong>ï¼šä»å…¨è¡¨æ‰«æå˜ä¸ºç´¢å¼•æŸ¥æ‰¾</li><li><strong>æœ‰åºå­˜å‚¨</strong>ï¼šB+æ ‘ç»“æ„ä¿è¯æ•°æ®æœ‰åºï¼Œæ”¯æŒèŒƒå›´æŸ¥è¯¢</li><li><strong>å‡å°‘I/Oæ“ä½œ</strong>ï¼šç´¢å¼•é€šå¸¸æ¯”æ•°æ®å°ï¼Œèƒ½ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼ˆMySQLçš„Buffer Poolï¼‰</li></ul><p><strong>ç´¢å¼•ä¼˜ç¼ºç‚¹ï¼š</strong></p><table><thead><tr><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>å¤§å¹…æé«˜æŸ¥è¯¢é€Ÿåº¦</td><td>å ç”¨é¢å¤–å­˜å‚¨ç©ºé—´</td></tr><tr><td>åŠ é€Ÿè¡¨è¿æ¥</td><td>é™ä½å†™æ“ä½œæ€§èƒ½ï¼ˆå¢åˆ æ”¹ï¼‰</td></tr><tr><td>å‡å°‘åˆ†ç»„å’Œæ’åºæ—¶é—´</td><td>ç»´æŠ¤ç´¢å¼•éœ€è¦é¢å¤–å¼€é”€</td></tr><tr><td>å”¯ä¸€ç´¢å¼•ä¿è¯æ•°æ®å”¯ä¸€æ€§</td><td>è¿‡å¤šç´¢å¼•å½±å“ä¼˜åŒ–å™¨é€‰æ‹©</td></tr></tbody></table><h3 id="_4-b-æ ‘ç´¢å¼•ç»“æ„-ä¸ºä»€ä¹ˆmysqlä½¿ç”¨b-æ ‘è€Œä¸æ˜¯bæ ‘æˆ–å“ˆå¸Œè¡¨" tabindex="-1"><a class="header-anchor" href="#_4-b-æ ‘ç´¢å¼•ç»“æ„-ä¸ºä»€ä¹ˆmysqlä½¿ç”¨b-æ ‘è€Œä¸æ˜¯bæ ‘æˆ–å“ˆå¸Œè¡¨"><span>4. B+æ ‘ç´¢å¼•ç»“æ„ï¼Ÿä¸ºä»€ä¹ˆMySQLä½¿ç”¨B+æ ‘è€Œä¸æ˜¯Bæ ‘æˆ–å“ˆå¸Œè¡¨ï¼Ÿ</span></a></h3><p><strong>B+æ ‘ç‰¹ç‚¹ï¼š</strong></p><ul><li><strong>æ‰€æœ‰æ•°æ®åœ¨å¶å­èŠ‚ç‚¹</strong>ï¼šéå¶å­èŠ‚ç‚¹åªå­˜å‚¨é”®å€¼</li><li><strong>å¶å­èŠ‚ç‚¹è¿æ¥</strong>ï¼šå¶å­èŠ‚ç‚¹é€šè¿‡æŒ‡é’ˆè¿æ¥ï¼Œæ”¯æŒèŒƒå›´æŸ¥è¯¢</li><li><strong>æ›´é«˜çš„æ‰‡å‡ºæ¯”</strong>ï¼šéå¶å­èŠ‚ç‚¹å¯å­˜å‚¨æ›´å¤šé”®å€¼</li></ul><p><strong>é€‰æ‹©B+æ ‘çš„åŸå› ï¼š</strong></p><table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>B+æ ‘</th><th>Bæ ‘</th><th>å“ˆå¸Œè¡¨</th></tr></thead><tbody><tr><td>èŒƒå›´æŸ¥è¯¢</td><td>âœ…ä¼˜ç§€</td><td>âŒè¾ƒå·®</td><td>âŒä¸æ”¯æŒ</td></tr><tr><td>é¡ºåºè®¿é—®</td><td>âœ…ä¼˜ç§€</td><td>âŒä¸€èˆ¬</td><td>âŒä¸æ”¯æŒ</td></tr><tr><td>ç£ç›˜I/O</td><td>âœ…å°‘</td><td>âŒå¤š</td><td>âœ…å°‘</td></tr><tr><td>å†…å­˜åˆ©ç”¨ç‡</td><td>âœ…é«˜</td><td>âŒä½</td><td>âœ…é«˜</td></tr><tr><td>ç­‰å€¼æŸ¥è¯¢</td><td>âœ…å¿«</td><td>âœ…å¿«</td><td>âœ…æœ€å¿«</td></tr><tr><td>æ•°æ®æœ‰åºæ€§</td><td>âœ…æœ‰åº</td><td>âœ…æœ‰åº</td><td>âŒæ— åº</td></tr></tbody></table><h3 id="_5-èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•çš„åŒºåˆ«-innodbçš„ä¸»é”®ç´¢å¼•ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_5-èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•çš„åŒºåˆ«-innodbçš„ä¸»é”®ç´¢å¼•ç»“æ„"><span>5. èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•çš„åŒºåˆ«ï¼ŸInnoDBçš„ä¸»é”®ç´¢å¼•ç»“æ„ï¼Ÿ</span></a></h3><p><strong>èšé›†ç´¢å¼• vs éèšé›†ç´¢å¼•ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>èšé›†ç´¢å¼•ï¼ˆä¸»é”®ç´¢å¼•ï¼‰</th><th>éèšé›†ç´¢å¼•ï¼ˆè¾…åŠ©ç´¢å¼•ï¼‰</th></tr></thead><tbody><tr><td>æ•°æ®å­˜å‚¨</td><td>å¶å­èŠ‚ç‚¹å­˜å‚¨å®Œæ•´è¡Œæ•°æ®</td><td>å¶å­èŠ‚ç‚¹å­˜å‚¨ä¸»é”®å€¼</td></tr><tr><td>æ•°æ®æ’åº</td><td>æ•°æ®æŒ‰ç´¢å¼•é”®ç‰©ç†æ’åº</td><td>æ•°æ®æ’åºä¸ç´¢å¼•æ— å…³</td></tr><tr><td>æŸ¥è¯¢æ€§èƒ½</td><td>ä¸€æ¬¡æŸ¥è¯¢è·å–æ‰€æœ‰æ•°æ®</td><td>å¯èƒ½éœ€è¦å›è¡¨æŸ¥è¯¢</td></tr><tr><td>æ¯è¡¨æ•°é‡</td><td>æœ€å¤šä¸€ä¸ª</td><td>å¯ä»¥æœ‰å¤šä¸ª</td></tr><tr><td>å­˜å‚¨å¼€é”€</td><td>æ— é¢å¤–å¼€é”€</td><td>éœ€è¦é¢å¤–å­˜å‚¨ç©ºé—´</td></tr></tbody></table><p><strong>InnoDBä¸»é”®ç´¢å¼•ç»“æ„ï¼š</strong></p><ul><li><strong>ä¸»é”®ç´¢å¼•</strong>ï¼šèšé›†ç´¢å¼•ï¼Œå¶å­èŠ‚ç‚¹å­˜å‚¨å®Œæ•´è¡Œæ•°æ®</li><li><strong>è¾…åŠ©ç´¢å¼•</strong>ï¼šéèšé›†ç´¢å¼•ï¼Œå¶å­èŠ‚ç‚¹å­˜å‚¨ä¸»é”®å€¼</li><li><strong>å›è¡¨æŸ¥è¯¢</strong>ï¼šé€šè¿‡è¾…åŠ©ç´¢å¼•æŸ¥è¯¢æ—¶ï¼Œéœ€è¦æ ¹æ®ä¸»é”®å€¼å†æŸ¥ä¸»é”®ç´¢å¼•</li></ul><h3 id="_6-ç´¢å¼•ç±»å‹åˆ†ç±»" tabindex="-1"><a class="header-anchor" href="#_6-ç´¢å¼•ç±»å‹åˆ†ç±»"><span>6. ç´¢å¼•ç±»å‹åˆ†ç±»ï¼Ÿ</span></a></h3><p><strong>æŒ‰åŠŸèƒ½åˆ†ç±»ï¼š</strong></p><table><thead><tr><th>ç´¢å¼•ç±»å‹</th><th>ç‰¹ç‚¹</th><th>ä½¿ç”¨åœºæ™¯</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>ä¸»é”®ç´¢å¼•</td><td>å”¯ä¸€+éç©ºï¼Œè‡ªåŠ¨åˆ›å»ºèšé›†ç´¢å¼•</td><td>ä¸»é”®å­—æ®µ</td><td>PRIMARY KEY</td></tr><tr><td>å”¯ä¸€ç´¢å¼•</td><td>å€¼å”¯ä¸€ï¼Œå…è®¸ä¸€ä¸ªNULL</td><td>èº«ä»½è¯å·ã€é‚®ç®±</td><td>UNIQUE</td></tr><tr><td>æ™®é€šç´¢å¼•</td><td>æ— å”¯ä¸€æ€§é™åˆ¶ï¼Œæé«˜æŸ¥è¯¢é€Ÿåº¦</td><td>æŸ¥è¯¢é¢‘ç¹çš„å­—æ®µ</td><td>INDEX</td></tr><tr><td>ç»„åˆç´¢å¼•</td><td>å¤šåˆ—è”åˆç´¢å¼•ï¼Œéµå¾ªæœ€å·¦å‰ç¼€åŸåˆ™</td><td>å¤šæ¡ä»¶æŸ¥è¯¢</td><td>(name, age, city)</td></tr><tr><td>å…¨æ–‡ç´¢å¼•</td><td>æ–‡æœ¬å…³é”®è¯æœç´¢</td><td>æ–‡ç« å†…å®¹æœç´¢</td><td>FULLTEXT</td></tr></tbody></table><h3 id="_7-ç´¢å¼•å¤±æ•ˆçš„å¸¸è§åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#_7-ç´¢å¼•å¤±æ•ˆçš„å¸¸è§åœºæ™¯"><span>7. ç´¢å¼•å¤±æ•ˆçš„å¸¸è§åœºæ™¯ï¼Ÿ</span></a></h3><p><strong>ç´¢å¼•å¤±æ•ˆæƒ…å†µï¼š</strong></p><table><thead><tr><th>å¤±æ•ˆåœºæ™¯</th><th>ç¤ºä¾‹</th><th>åŸå› </th></tr></thead><tbody><tr><td>å‡½æ•°æ“ä½œ</td><td>WHERE YEAR(date) = 2023</td><td>å¯¹ç´¢å¼•åˆ—ä½¿ç”¨å‡½æ•°</td></tr><tr><td>éšå¼ç±»å‹è½¬æ¢</td><td>WHERE age = &#39;18&#39;</td><td>æ•°æ®ç±»å‹ä¸åŒ¹é…</td></tr><tr><td>LIKEä»¥%å¼€å¤´</td><td>WHERE name LIKE &#39;%å¼ &#39;</td><td>æ— æ³•åˆ©ç”¨ç´¢å¼•çš„æœ‰åºæ€§</td></tr><tr><td>ORæ¡ä»¶</td><td>WHERE a = 1 OR b = 2</td><td>å…¶ä¸­ä¸€ä¸ªæ¡ä»¶æ²¡æœ‰ç´¢å¼•</td></tr><tr><td>ç»„åˆç´¢å¼•ä¸æ»¡è¶³æœ€å·¦å‰ç¼€</td><td>INDEX(a,b,c) WHERE b = 1</td><td>è¿åæœ€å·¦å‰ç¼€åŸåˆ™</td></tr><tr><td>ä¸ç­‰äºæ“ä½œ</td><td>WHERE age != 18</td><td>èŒƒå›´å¤ªå¤§ï¼Œä¼˜åŒ–å™¨é€‰æ‹©å…¨è¡¨æ‰«æ</td></tr><tr><td>IS NULLåˆ¤æ–­</td><td>WHERE name IS NULL</td><td>NULLå€¼ä¸å­˜å‚¨åœ¨ç´¢å¼•ä¸­</td></tr></tbody></table><h3 id="_8-explainå‘½ä»¤çš„ä½œç”¨-å…³é”®å­—æ®µçš„å«ä¹‰" tabindex="-1"><a class="header-anchor" href="#_8-explainå‘½ä»¤çš„ä½œç”¨-å…³é”®å­—æ®µçš„å«ä¹‰"><span>8. EXPLAINå‘½ä»¤çš„ä½œç”¨ï¼Ÿå…³é”®å­—æ®µçš„å«ä¹‰ï¼Ÿ</span></a></h3><p><strong>EXPLAINä½œç”¨ï¼š</strong> åˆ†æSQLè¯­å¥æ‰§è¡Œè®¡åˆ’ï¼Œå¸®åŠ©ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ã€‚</p><p><strong>å…³é”®å­—æ®µå«ä¹‰ï¼š</strong></p><table><thead><tr><th>å­—æ®µ</th><th>å«ä¹‰</th><th>é‡è¦å€¼</th></tr></thead><tbody><tr><td>type</td><td>è®¿é—®ç±»å‹</td><td>system &gt; const &gt; eq_ref &gt; ref &gt; range &gt; index &gt; ALL</td></tr><tr><td>key</td><td>å®é™…ä½¿ç”¨çš„ç´¢å¼•</td><td>NULLè¡¨ç¤ºæœªä½¿ç”¨ç´¢å¼•</td></tr><tr><td>rows</td><td>é¢„ä¼°æ‰«æè¡Œæ•°</td><td>æ•°å€¼è¶Šå°è¶Šå¥½</td></tr><tr><td>Extra</td><td>é¢å¤–ä¿¡æ¯</td><td>Using index &gt; Using where &gt; Using filesort</td></tr></tbody></table><p><strong>typeå­—æ®µè¯¦è§£ï¼š</strong></p><table><thead><tr><th>typeå€¼</th><th>æ€§èƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>system</td><td>æœ€ä¼˜</td><td>è¡¨åªæœ‰ä¸€è¡Œ</td></tr><tr><td>const</td><td>ä¼˜</td><td>ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•ç­‰å€¼æŸ¥è¯¢</td></tr><tr><td>eq_ref</td><td>ä¼˜</td><td>ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•å…³è”</td></tr><tr><td>ref</td><td>è‰¯</td><td>éå”¯ä¸€ç´¢å¼•ç­‰å€¼æŸ¥è¯¢</td></tr><tr><td>range</td><td>ä¸­</td><td>èŒƒå›´æŸ¥è¯¢</td></tr><tr><td>index</td><td>å·®</td><td>ç´¢å¼•å…¨æ‰«æ</td></tr><tr><td>ALL</td><td>æœ€å·®</td><td>å…¨è¡¨æ‰«æ</td></tr></tbody></table><h3 id="_9-é”-innodbçš„è¡Œé”ã€é—´éš™é”ã€ä¸´é”®é”-mvccçš„åŸç†-å¦‚ä½•è§£å†³å¹»è¯»" tabindex="-1"><a class="header-anchor" href="#_9-é”-innodbçš„è¡Œé”ã€é—´éš™é”ã€ä¸´é”®é”-mvccçš„åŸç†-å¦‚ä½•è§£å†³å¹»è¯»"><span>9. é”ï¼šInnoDBçš„è¡Œé”ã€é—´éš™é”ã€ä¸´é”®é”ï¼ŸMVCCçš„åŸç†ï¼Ÿå¦‚ä½•è§£å†³å¹»è¯»ï¼Ÿ</span></a></h3><p><strong>InnoDBé”ç±»å‹ï¼š</strong></p><table><thead><tr><th>é”ç±»å‹</th><th>é”èŒƒå›´</th><th>ä½œç”¨</th><th>ç¤ºä¾‹åœºæ™¯</th></tr></thead><tbody><tr><td>è¡Œé”</td><td>é”å®šå…·ä½“çš„è¡Œ</td><td>é˜²æ­¢å¹¶å‘ä¿®æ”¹åŒä¸€è¡Œæ•°æ®</td><td>UPDATEå…·ä½“è®°å½•</td></tr><tr><td>é—´éš™é”</td><td>é”å®šç´¢å¼•è®°å½•ä¹‹é—´çš„é—´éš™</td><td>é˜²æ­¢åœ¨é—´éš™ä¸­æ’å…¥æ–°è®°å½•</td><td>é˜²æ­¢å¹»è¯»</td></tr><tr><td>ä¸´é”®é”</td><td>è¡Œé”+é—´éš™é”çš„ç»„åˆ</td><td>æ—¢é”è®°å½•åˆé”é—´éš™</td><td>èŒƒå›´æŸ¥è¯¢æ—¶ä½¿ç”¨</td></tr><tr><td>æ„å‘é”</td><td>è¡¨çº§é”ï¼Œè¡¨ç¤ºäº‹åŠ¡çš„åŠ é”æ„å›¾</td><td>æé«˜è¡¨é”æ£€æµ‹æ•ˆç‡</td><td>åŠ è¡Œé”æ—¶è‡ªåŠ¨åŠ æ„å‘é”</td></tr></tbody></table><p><strong>MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰åŸç†ï¼š</strong></p><ul><li><strong>ç‰ˆæœ¬é“¾</strong>ï¼šæ¯è¡Œè®°å½•ç»´æŠ¤å¤šä¸ªç‰ˆæœ¬</li><li><strong>ReadView</strong>ï¼šäº‹åŠ¡å¼€å§‹æ—¶åˆ›å»ºçš„ä¸€è‡´æ€§è§†å›¾ï¼Œåœ¨RRçš„æ—¶å€™ï¼Œåœ¨ç¬¬ä¸€æ¬¡æŸ¥è¯¢çš„æ—¶å€™åˆ›å»ºä¸€ä¸ªReadViewå¹¶ä¸”åœ¨äº‹åŠ¡ä¸­å¤ç”¨ï¼Œåœ¨RCçš„æ—¶å€™ï¼Œæ¯æ¬¡è¯»å–æ•°æ®å‰éƒ½ä¼šåˆ›å»ºä¸€ä¸ªReadView</li><li><strong>undo log</strong>ï¼šå­˜å‚¨å†å²ç‰ˆæœ¬æ•°æ®</li><li><strong>å®ç°éš”ç¦»</strong>ï¼šä¸åŒäº‹åŠ¡çœ‹åˆ°ä¸åŒç‰ˆæœ¬çš„æ•°æ®</li></ul><p><strong>è§£å†³å¹»è¯»ï¼š</strong></p><ul><li><strong>å¿«ç…§è¯»</strong>ï¼šé€šè¿‡MVCCï¼Œè¯»å–äº‹åŠ¡å¼€å§‹æ—¶çš„æ•°æ®å¿«ç…§ <ul><li>å¿«ç…§è¯»ï¼šé»˜è®¤çš„ SELECT æŸ¥è¯¢ï¼Œåœ¨äº‹åŠ¡é‡Œè¯»çš„æ˜¯äº‹åŠ¡å¼€å§‹æ—¶çš„å¿«ç…§ï¼Œä¸ä¼šåŠ é”ï¼Œä¹Ÿä¸ä¼šè¢«å…¶ä»–äº‹åŠ¡å½±å“ã€‚</li></ul></li><li><strong>å½“å‰è¯»</strong>ï¼šé€šè¿‡ä¸´é”®é”ï¼Œé”å®šæŸ¥è¯¢èŒƒå›´é˜²æ­¢æ’å…¥æ–°æ•°æ® <ul><li>å½“å‰è¯»ï¼šä¼šåŠ é”é˜²æ­¢åˆ«çš„äº‹åŠ¡æ’å…¥/æ›´æ–°ä½ æ­£åœ¨çœ‹çš„èŒƒå›´ï¼Œç”¨æ¥ä¿è¯ä¸€è‡´æ€§æˆ–åšæ›´æ–°ï¼Œæ¯”å¦‚<code>select .. for update</code>ã€‚</li></ul></li></ul><h3 id="_10-äº‹åŠ¡éš”ç¦»çº§åˆ«-mysqlé»˜è®¤çº§åˆ«-ä¸åŒçº§åˆ«è§£å†³çš„é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_10-äº‹åŠ¡éš”ç¦»çº§åˆ«-mysqlé»˜è®¤çº§åˆ«-ä¸åŒçº§åˆ«è§£å†³çš„é—®é¢˜"><span>10. äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼ŸMySQLé»˜è®¤çº§åˆ«ï¼Ÿä¸åŒçº§åˆ«è§£å†³çš„é—®é¢˜ï¼Ÿ</span></a></h3><p><strong>å››å¤§éš”ç¦»çº§åˆ«ï¼š</strong></p><table><thead><tr><th>éš”ç¦»çº§åˆ«</th><th>è„è¯»</th><th>ä¸å¯é‡å¤è¯»</th><th>å¹»è¯»</th><th>å®ç°æ–¹å¼</th><th>æ€§èƒ½</th></tr></thead><tbody><tr><td>è¯»æœªæäº¤ï¼ˆREAD UNCOMMITTEDï¼‰</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>æ— é”</td><td>æœ€é«˜</td></tr><tr><td>è¯»å·²æäº¤ï¼ˆREAD COMMITTEDï¼‰</td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>è¡Œé”+MVCC</td><td>é«˜</td></tr><tr><td>å¯é‡å¤è¯»ï¼ˆREPEATABLE READï¼‰</td><td>âœ…</td><td>âœ…</td><td>éƒ¨åˆ†è§£å†³</td><td>ä¸´é”®é”+MVCC</td><td>ä¸­</td></tr><tr><td>ä¸²è¡ŒåŒ–ï¼ˆSERIALIZABLEï¼‰</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>è¡¨é”</td><td>ä½</td></tr></tbody></table><p>**MySQLé»˜è®¤éš”ç¦»çº§åˆ«ï¼š**å¯é‡å¤è¯»ï¼ˆREPEATABLE READï¼‰</p><p><strong>é—®é¢˜è¯´æ˜ï¼š</strong></p><ul><li><strong>è„è¯»</strong>ï¼šè¯»åˆ°å…¶ä»–äº‹åŠ¡æœªæäº¤çš„æ•°æ®</li><li><strong>ä¸å¯é‡å¤è¯»</strong>ï¼šåŒä¸€äº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ç»“æœä¸åŒ</li><li><strong>å¹»è¯»</strong>ï¼šåŒä¸€äº‹åŠ¡ä¸­å¤šæ¬¡æŸ¥è¯¢è®°å½•æ•°é‡ä¸åŒ</li></ul><h3 id="_11-å¦‚ä½•ä¼˜åŒ–æ…¢æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#_11-å¦‚ä½•ä¼˜åŒ–æ…¢æŸ¥è¯¢"><span>11. å¦‚ä½•ä¼˜åŒ–æ…¢æŸ¥è¯¢ï¼Ÿ</span></a></h3><p><strong>ä¼˜åŒ–ç­–ç•¥ï¼š</strong></p><table><thead><tr><th>ä¼˜åŒ–æ–¹å‘</th><th>å…·ä½“æ–¹æ³•</th><th>æ•ˆæœè¯„ä¼°</th></tr></thead><tbody><tr><td>ç´¢å¼•ä¼˜åŒ–</td><td>æ·»åŠ åˆé€‚ç´¢å¼•ã€ä¼˜åŒ–ç´¢å¼•ä½¿ç”¨</td><td>â­â­â­â­â­</td></tr><tr><td>SQLè¯­å¥ä¼˜åŒ–</td><td>é¿å…SELECT *ã€å‡å°‘å­æŸ¥è¯¢</td><td>â­â­â­â­</td></tr><tr><td>åˆ†åº“åˆ†è¡¨</td><td>æ°´å¹³/å‚ç›´åˆ†å‰²å‡å°‘å•è¡¨æ•°æ®é‡</td><td>â­â­â­â­â­</td></tr><tr><td>è¯»å†™åˆ†ç¦»</td><td>ä¸»åº“å†™ã€ä»åº“è¯»ï¼Œå‡å°‘ä¸»åº“å‹åŠ›</td><td>â­â­â­â­</td></tr></tbody></table><p><strong>å…·ä½“ä¼˜åŒ–æ‰‹æ®µï¼š</strong></p><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æ·»åŠ ç´¢å¼•</td><td>ä¸ºWHEREã€ORDER BYå­—æ®µæ·»åŠ ç´¢å¼•</td><td>æŸ¥è¯¢é¢‘ç¹çš„å­—æ®µ</td></tr><tr><td>ä¼˜åŒ–JOIN</td><td>ä½¿ç”¨å°è¡¨é©±åŠ¨å¤§è¡¨</td><td>å¤šè¡¨å…³è”æŸ¥è¯¢</td></tr><tr><td>é¿å…å‡½æ•°è®¡ç®—</td><td>ä¸åœ¨WHEREæ¡ä»¶ä¸­ä½¿ç”¨å‡½æ•°</td><td>æ‰€æœ‰æŸ¥è¯¢</td></tr><tr><td>åˆ†é¡µä¼˜åŒ–</td><td>ä½¿ç”¨å­æŸ¥è¯¢é€‰ä¸­ID+ç´¢å¼•ä»£æ›¿LIMITå¤§åç§»</td><td>æ·±åº¦åˆ†é¡µæŸ¥è¯¢</td></tr><tr><td>å‚ç›´åˆ†è¡¨</td><td>å°†å¤§å­—æ®µæ‹†åˆ†åˆ°ç‹¬ç«‹è¡¨</td><td>è¡¨å­—æ®µè¿‡å¤š</td></tr><tr><td>æ°´å¹³åˆ†è¡¨</td><td>æŒ‰è§„åˆ™å°†æ•°æ®åˆ†æ•£åˆ°å¤šä¸ªè¡¨</td><td>å•è¡¨æ•°æ®é‡è¿‡å¤§</td></tr><tr><td>ä½¿ç”¨ç¼“å­˜</td><td>Redisç¼“å­˜çƒ­ç‚¹æ•°æ®</td><td>è¯»å¤šå†™å°‘åœºæ™¯</td></tr><tr><td>è¿æ¥æ± ä¼˜åŒ–</td><td>åˆç†è®¾ç½®è¿æ¥æ± å‚æ•°</td><td>é«˜å¹¶å‘åœºæ™¯</td></tr></tbody></table><h3 id="_12-mysqlæ—¥å¿—-redo-logã€undo-logã€binlog" tabindex="-1"><a class="header-anchor" href="#_12-mysqlæ—¥å¿—-redo-logã€undo-logã€binlog"><span>12. MySQLæ—¥å¿—ï¼šredo logã€undo logã€binlog</span></a></h3><table><thead><tr><th>ç»´åº¦</th><th>Redo Log</th><th>Undo Log</th><th>Binlog</th></tr></thead><tbody><tr><td>å±‚çº§</td><td>InnoDB å¼•æ“å±‚</td><td>InnoDB å¼•æ“å±‚</td><td>MySQL Server å±‚</td></tr><tr><td>æ€§è´¨</td><td>ç‰©ç†æ—¥å¿—</td><td>é€»è¾‘æ—¥å¿—</td><td>é€»è¾‘æ—¥å¿—</td></tr><tr><td>å†™å…¥æ—¶æœº</td><td>å†™å…¥å‰å…ˆè½ç›˜ï¼ˆWALï¼‰</td><td>ä¿®æ”¹å‰ç”Ÿæˆ</td><td>äº‹åŠ¡æäº¤æ—¶ä¸€æ¬¡å†™å…¥</td></tr><tr><td>ç”¨é€”</td><td>å´©æºƒæ¢å¤</td><td>å›æ»š / MVCC</td><td>å¤åˆ¶ / å¤‡ä»½ / å®¡è®¡</td></tr><tr><td>æ ¼å¼</td><td>é¡µä¿®æ”¹å†…å®¹</td><td>åŸå§‹å€¼</td><td>è¡Œå˜åŒ–æˆ– SQL è¯­å¥</td></tr><tr><td>æ˜¯å¦åˆ·ç›˜</td><td>äº‹åŠ¡æäº¤æ—¶ fsync åˆ·ç›˜</td><td>å†…å­˜æ—¥å¿—ï¼ˆéç«‹å³åˆ·ç›˜ï¼‰</td><td>äº‹åŠ¡æäº¤æ—¶ fsync åˆ·ç›˜</td></tr></tbody></table><h2 id="redis" tabindex="-1"><a class="header-anchor" href="#redis"><span>Redis</span></a></h2><h3 id="_1-redisæ˜¯ä»€ä¹ˆ-å¸¸ç”¨æ•°æ®ç±»å‹åŠå…¶åº•å±‚å®ç°å’Œå…¸å‹åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#_1-redisæ˜¯ä»€ä¹ˆ-å¸¸ç”¨æ•°æ®ç±»å‹åŠå…¶åº•å±‚å®ç°å’Œå…¸å‹åº”ç”¨åœºæ™¯"><span>1. Redisæ˜¯ä»€ä¹ˆï¼Ÿå¸¸ç”¨æ•°æ®ç±»å‹åŠå…¶åº•å±‚å®ç°å’Œå…¸å‹åº”ç”¨åœºæ™¯ï¼Ÿ</span></a></h3><p><strong>Rediså®šä¹‰ï¼š</strong> Redisæ˜¯ä¸€ä¸ªå¼€æºçš„å†…å­˜æ•°æ®ç»“æ„å­˜å‚¨ç³»ç»Ÿï¼Œå¯ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä»£ç†ã€‚</p><p><strong>å¸¸ç”¨æ•°æ®ç±»å‹ï¼š</strong></p><table><thead><tr><th>æ•°æ®ç±»å‹</th><th>åº•å±‚å®ç°</th><th>å…¸å‹åº”ç”¨åœºæ™¯</th><th>å¸¸ç”¨å‘½ä»¤</th></tr></thead><tbody><tr><td>String</td><td>SDSï¼ˆç®€å•åŠ¨æ€å­—ç¬¦ä¸²ï¼‰</td><td>ç¼“å­˜ã€è®¡æ•°å™¨ã€åˆ†å¸ƒå¼é”</td><td>SETã€GETã€INCR</td></tr><tr><td>Hash</td><td>å‹ç¼©åˆ—è¡¨/å“ˆå¸Œè¡¨</td><td>ç”¨æˆ·ä¿¡æ¯ã€å•†å“ä¿¡æ¯</td><td>HSETã€HGETã€HMGET</td></tr><tr><td>List</td><td>å‹ç¼©åˆ—è¡¨/åŒå‘é“¾è¡¨</td><td>æ¶ˆæ¯é˜Ÿåˆ—ã€æœ€æ–°æ¶ˆæ¯åˆ—è¡¨</td><td>LPUSHã€RPOPã€LRANGE</td></tr><tr><td>Set</td><td>æ•´æ•°é›†åˆ/å“ˆå¸Œè¡¨</td><td>æ ‡ç­¾ã€å¥½å‹å…³ç³»ã€å”¯ä¸€æ€§ç»Ÿè®¡</td><td>SADDã€SMEMBERSã€SINTER</td></tr><tr><td>Sorted Set</td><td>å‹ç¼©åˆ—è¡¨/è·³è·ƒè¡¨</td><td>æ’è¡Œæ¦œã€å»¶æ—¶é˜Ÿåˆ—</td><td>ZADDã€ZRANGEã€ZRANK</td></tr><tr><td>HyperLogLog</td><td>åŸºæ•°ä¼°ç®—ç®—æ³•</td><td>UVç»Ÿè®¡ã€ç‹¬ç«‹è®¿å®¢ç»Ÿè®¡</td><td>PFADDã€PFCOUNT</td></tr><tr><td>Bitmap</td><td>ä½æ•°ç»„</td><td>ç”¨æˆ·ç­¾åˆ°ã€åœ¨çº¿çŠ¶æ€</td><td>SETBITã€GETBITã€BITCOUNT</td></tr><tr><td>Geospatial</td><td>Sorted Set + GeoHash</td><td>åœ°ç†ä½ç½®ã€é™„è¿‘çš„äºº</td><td>GEOADDã€GEORADIUS</td></tr><tr><td>Stream</td><td>Radix Tree + Listpack</td><td>æ¶ˆæ¯æµã€æ—¥å¿—æ”¶é›†</td><td>XADDã€XREADã€XGROUP</td></tr></tbody></table><h3 id="_2-redisä¸ºä»€ä¹ˆå¿«" tabindex="-1"><a class="header-anchor" href="#_2-redisä¸ºä»€ä¹ˆå¿«"><span>2. Redisä¸ºä»€ä¹ˆå¿«ï¼Ÿ</span></a></h3><p><strong>æ€§èƒ½ä¼˜åŠ¿åˆ†æï¼š</strong></p><table><thead><tr><th>ä¼˜åŠ¿</th><th>å…·ä½“è¡¨ç°</th><th>æ€§èƒ½å½±å“</th></tr></thead><tbody><tr><td>å†…å­˜å­˜å‚¨</td><td>æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œé¿å…ç£ç›˜I/O</td><td>â­â­â­â­â­</td></tr><tr><td>å•çº¿ç¨‹æ¨¡å‹</td><td>é¿å…çº¿ç¨‹åˆ‡æ¢å’Œé”ç«äº‰å¼€é”€</td><td>â­â­â­â­</td></tr><tr><td>I/Oå¤šè·¯å¤ç”¨</td><td>epollæœºåˆ¶å¤„ç†å¹¶å‘è¿æ¥</td><td>â­â­â­â­</td></tr><tr><td>é«˜æ•ˆæ•°æ®ç»“æ„</td><td>é’ˆå¯¹ä¸åŒåœºæ™¯ä¼˜åŒ–çš„æ•°æ®ç»“æ„</td><td>â­â­â­</td></tr><tr><td>ç®€å•åè®®</td><td>RESPåè®®ç®€å•ï¼Œè§£æå¼€é”€å°</td><td>â­â­â­</td></tr></tbody></table><p><strong>æ ¸å¿ƒåŸå› ï¼š</strong></p><ul><li><strong>çº¯å†…å­˜æ“ä½œ</strong>ï¼šé¿å…ç£ç›˜I/Oï¼Œé€Ÿåº¦å¿«10000å€</li><li><strong>å•çº¿ç¨‹é¿å…ç«äº‰</strong>ï¼šæ— é”è®¾è®¡ï¼Œå‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢</li><li><strong>éé˜»å¡I/O</strong>ï¼šé«˜æ•ˆå¤„ç†å¤§é‡å¹¶å‘è¿æ¥</li></ul><h3 id="_3-redisçš„æŒä¹…åŒ–æœºåˆ¶-ä¼˜ç¼ºç‚¹-å¦‚ä½•é€‰æ‹©" tabindex="-1"><a class="header-anchor" href="#_3-redisçš„æŒä¹…åŒ–æœºåˆ¶-ä¼˜ç¼ºç‚¹-å¦‚ä½•é€‰æ‹©"><span>3. Redisçš„æŒä¹…åŒ–æœºåˆ¶ï¼Ÿä¼˜ç¼ºç‚¹ï¼Ÿå¦‚ä½•é€‰æ‹©ï¼Ÿ</span></a></h3><p><strong>ä¸¤ç§æŒä¹…åŒ–æ–¹å¼ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>RDBå¿«ç…§</th><th>AOFæ—¥å¿—</th></tr></thead><tbody><tr><td>æŒä¹…åŒ–æ–¹å¼</td><td>å®šæœŸç”Ÿæˆæ•°æ®å¿«ç…§</td><td>è®°å½•æ¯ä¸ªå†™æ“ä½œå‘½ä»¤</td></tr><tr><td>æ–‡ä»¶å¤§å°</td><td>ç´§å‡‘ï¼Œæ–‡ä»¶å°</td><td>è¾ƒå¤§ï¼ŒåŒ…å«æ‰€æœ‰æ“ä½œ</td></tr><tr><td>æ¢å¤é€Ÿåº¦</td><td>å¿«</td><td>æ…¢</td></tr><tr><td>æ•°æ®å®Œæ•´æ€§</td><td>å¯èƒ½ä¸¢å¤±æœ€åä¸€æ¬¡å¿«ç…§åçš„æ•°æ®</td><td>æ ¹æ®åŒæ­¥ç­–ç•¥ï¼Œä¸¢å¤±è¾ƒå°‘</td></tr><tr><td>æ€§èƒ½å½±å“</td><td>forkå­è¿›ç¨‹æ—¶æœ‰çŸ­æš‚é˜»å¡</td><td>æŒç»­å†™å…¥ï¼Œå½±å“ç›¸å¯¹è¾ƒå°</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å¯¹æ•°æ®ä¸¢å¤±ä¸æ•æ„Ÿçš„åœºæ™¯</td><td>å¯¹æ•°æ®å®Œæ•´æ€§è¦æ±‚é«˜çš„åœºæ™¯</td></tr></tbody></table><p><strong>é€‰æ‹©ç­–ç•¥ï¼š</strong></p><table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>åŸå› </th></tr></thead><tbody><tr><td>ç¼“å­˜åœºæ™¯</td><td>ä»…RDB</td><td>æ•°æ®å¯é‡æ–°è®¡ç®—ï¼Œæ€§èƒ½ä¼˜å…ˆ</td></tr><tr><td>é‡è¦æ•°æ®å­˜å‚¨</td><td>RDB + AOF</td><td>åŒé‡ä¿éšœï¼Œç¡®ä¿æ•°æ®å®‰å…¨</td></tr><tr><td>é«˜å†™å…¥é‡åœºæ™¯</td><td>ä»…RDB</td><td>é¿å…AOFå†™å…¥å½±å“æ€§èƒ½</td></tr><tr><td>æ•°æ®å®Œæ•´æ€§è¦æ±‚æé«˜çš„åœºæ™¯</td><td>AOF</td><td>æœ€å¤§ç¨‹åº¦ä¿è¯æ•°æ®ä¸ä¸¢å¤±</td></tr></tbody></table><h3 id="_4-redisçš„è¿‡æœŸé”®åˆ é™¤ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_4-redisçš„è¿‡æœŸé”®åˆ é™¤ç­–ç•¥"><span>4. Redisçš„è¿‡æœŸé”®åˆ é™¤ç­–ç•¥ï¼Ÿ</span></a></h3><p><strong>ä¸‰ç§åˆ é™¤ç­–ç•¥ï¼š</strong></p><table><thead><tr><th>ç­–ç•¥</th><th>è§¦å‘æ—¶æœº</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>CPUæ¶ˆè€—</th><th>å†…å­˜æ¶ˆè€—</th></tr></thead><tbody><tr><td>å®šæ—¶åˆ é™¤</td><td>è®¾ç½®å®šæ—¶å™¨</td><td>å†…å­˜å‹å¥½</td><td>CPUæ¶ˆè€—å¤§</td><td>é«˜</td><td>ä½</td></tr><tr><td>æƒ°æ€§åˆ é™¤</td><td>è®¿é—®æ—¶æ£€æŸ¥</td><td>CPUå‹å¥½</td><td>å†…å­˜ä¸å‹å¥½</td><td>ä½</td><td>é«˜</td></tr><tr><td>å®šæœŸåˆ é™¤</td><td>å®šæœŸéšæœºæŠ½æŸ¥</td><td>å¹³è¡¡CPUå’Œå†…å­˜</td><td>å¯èƒ½æœ‰æ¼ç½‘ä¹‹é±¼</td><td>ä¸­</td><td>ä¸­</td></tr></tbody></table><p><strong>Rediså®é™…ç­–ç•¥ï¼š</strong> æƒ°æ€§åˆ é™¤ + å®šæœŸåˆ é™¤çš„ç»„åˆæ–¹å¼</p><h3 id="_5-å†…å­˜æ·˜æ±°ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_5-å†…å­˜æ·˜æ±°ç­–ç•¥"><span>5. å†…å­˜æ·˜æ±°ç­–ç•¥ï¼Ÿ</span></a></h3><p><strong>8ç§æ·˜æ±°ç­–ç•¥ï¼š</strong></p><table><thead><tr><th>ç­–ç•¥</th><th>ä½œç”¨èŒƒå›´</th><th>æ·˜æ±°ç®—æ³•</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>noeviction</td><td>æ— </td><td>ä¸æ·˜æ±°</td><td>å†…å­˜è¶³å¤Ÿï¼Œä¸å¸Œæœ›æ•°æ®ä¸¢å¤±</td></tr><tr><td>allkeys-lru</td><td>æ‰€æœ‰key</td><td>LRUæœ€è¿‘æœ€å°‘ä½¿ç”¨</td><td>é€šç”¨ç¼“å­˜ï¼Œè®¿é—®æœ‰çƒ­ç‚¹</td></tr><tr><td>volatile-lru</td><td>æœ‰è¿‡æœŸæ—¶é—´çš„key</td><td>LRU</td><td>åªæ·˜æ±°ä¸´æ—¶æ•°æ®</td></tr><tr><td>allkeys-random</td><td>æ‰€æœ‰key</td><td>éšæœº</td><td>è®¿é—®æ¨¡å¼å‡åŒ€</td></tr><tr><td>volatile-random</td><td>æœ‰è¿‡æœŸæ—¶é—´çš„key</td><td>éšæœº</td><td>ä¸´æ—¶æ•°æ®è®¿é—®å‡åŒ€</td></tr><tr><td>volatile-ttl</td><td>æœ‰è¿‡æœŸæ—¶é—´çš„key</td><td>TTLæœ€çŸ­ä¼˜å…ˆ</td><td>å¸Œæœ›å¿«åˆ°æœŸçš„æ•°æ®å…ˆåˆ é™¤</td></tr><tr><td>allkeys-lfu</td><td>æ‰€æœ‰key</td><td>LFUæœ€å°‘ä½¿ç”¨é¢‘ç‡</td><td>è®¿é—®é¢‘ç‡å·®å¼‚æ˜æ˜¾</td></tr><tr><td>volatile-lfu</td><td>æœ‰è¿‡æœŸæ—¶é—´çš„key</td><td>LFU</td><td>ä¸´æ—¶æ•°æ®è®¿é—®é¢‘ç‡å·®å¼‚æ˜æ˜¾</td></tr></tbody></table><p><strong>æ¨èé€‰æ‹©ï¼š</strong></p><ul><li><strong>é€šç”¨åœºæ™¯</strong>ï¼šallkeys-lruï¼ˆæœ€å¸¸ç”¨ï¼‰</li><li><strong>åªç¼“å­˜åœºæ™¯</strong>ï¼švolatile-lru</li><li><strong>æ··åˆæ•°æ®</strong>ï¼švolatile-ttl</li></ul><h3 id="_6-å¦‚ä½•ä¿è¯redisçš„é«˜å¯ç”¨-redis-clusterçš„æ§½åˆ†é…åŸç†" tabindex="-1"><a class="header-anchor" href="#_6-å¦‚ä½•ä¿è¯redisçš„é«˜å¯ç”¨-redis-clusterçš„æ§½åˆ†é…åŸç†"><span>6. å¦‚ä½•ä¿è¯Redisçš„é«˜å¯ç”¨ï¼ŸRedis Clusterçš„æ§½åˆ†é…åŸç†ï¼Ÿ</span></a></h3><p><strong>é«˜å¯ç”¨æ–¹æ¡ˆï¼š</strong></p><table><thead><tr><th>æ–¹æ¡ˆ</th><th>ç‰¹ç‚¹</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ä¸»ä»å¤åˆ¶</td><td>ä¸€ä¸»å¤šä»ï¼Œè¯»å†™åˆ†ç¦»</td><td>ç®€å•ï¼Œè¯»æ€§èƒ½å¥½</td><td>ä¸»èŠ‚ç‚¹å•ç‚¹æ•…éšœ</td><td>è¯»å¤šå†™å°‘</td></tr><tr><td>å“¨å…µæ¨¡å¼</td><td>è‡ªåŠ¨æ•…éšœè½¬ç§»</td><td>é«˜å¯ç”¨ï¼Œè‡ªåŠ¨åˆ‡æ¢</td><td>é…ç½®å¤æ‚</td><td>ä¸­å°å‹åº”ç”¨</td></tr><tr><td>Redis Cluster</td><td>åˆ†å¸ƒå¼ï¼Œæ— ä¸­å¿ƒèŠ‚ç‚¹</td><td>é«˜å¯ç”¨+é«˜æ€§èƒ½</td><td>è¿ç»´å¤æ‚</td><td>å¤§å‹åˆ†å¸ƒå¼åº”ç”¨</td></tr></tbody></table><p><strong>Redis Clusteræ§½åˆ†é…ï¼š</strong></p><ul><li><strong>æ€»æ§½æ•°</strong>ï¼š16384ä¸ªæ§½ï¼ˆ0-16383ï¼‰</li><li><strong>åˆ†é…åŸç†</strong>ï¼šCRC16(key) % 16384</li><li><strong>æ§½åˆ†å¸ƒ</strong>ï¼šå¹³å‡åˆ†é…åˆ°å„ä¸ªä¸»èŠ‚ç‚¹</li><li><strong>æ•°æ®åˆ†ç‰‡</strong>ï¼šæ ¹æ®keyè®¡ç®—æ§½ä½ï¼Œæ‰¾åˆ°å¯¹åº”èŠ‚ç‚¹</li></ul><table><thead><tr><th>é›†ç¾¤è§„æ¨¡</th><th>èŠ‚ç‚¹é…ç½®</th><th>æ§½åˆ†é…ç¤ºä¾‹</th></tr></thead><tbody><tr><td>3ä¸»3ä»</td><td>æ¯ä¸»1ä»</td><td>0-5460, 5461-10922, 10923-16383</td></tr><tr><td>6ä¸»6ä»</td><td>æ¯ä¸»1ä»</td><td>æ¯ä¸ªä¸»èŠ‚ç‚¹çº¦2730ä¸ªæ§½</td></tr><tr><td>9ä¸»9ä»</td><td>æ¯ä¸»1ä»</td><td>æ¯ä¸ªä¸»èŠ‚ç‚¹çº¦1820ä¸ªæ§½</td></tr></tbody></table><h3 id="_7-ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©çš„æ¦‚å¿µã€åŸå› åŠè§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_7-ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©çš„æ¦‚å¿µã€åŸå› åŠè§£å†³æ–¹æ¡ˆ"><span>7. ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©çš„æ¦‚å¿µã€åŸå› åŠè§£å†³æ–¹æ¡ˆï¼Ÿ</span></a></h3><p><strong>ä¸‰å¤§ç¼“å­˜é—®é¢˜å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>é—®é¢˜ç±»å‹</th><th>å®šä¹‰</th><th>åŸå› åˆ†æ</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>ç¼“å­˜ç©¿é€</td><td>æŸ¥è¯¢ä¸å­˜åœ¨çš„æ•°æ®ï¼Œç¼“å­˜å’Œæ•°æ®åº“éƒ½æ²¡æœ‰</td><td>æ¶æ„æ”»å‡»ã€ä¸šåŠ¡é€»è¾‘é”™è¯¯</td><td>å¸ƒéš†è¿‡æ»¤å™¨ã€ç©ºå€¼ç¼“å­˜ã€å‚æ•°æ ¡éªŒ</td></tr><tr><td>ç¼“å­˜å‡»ç©¿</td><td>çƒ­ç‚¹æ•°æ®è¿‡æœŸï¼Œå¤§é‡è¯·æ±‚åŒæ—¶è®¿é—®æ•°æ®åº“</td><td>çƒ­ç‚¹keyè¿‡æœŸ</td><td>äº’æ–¥é”ã€çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸã€æå‰æ›´æ–°ã€é€»è¾‘è¿‡æœŸ</td></tr><tr><td>ç¼“å­˜é›ªå´©</td><td>å¤§é‡ç¼“å­˜åŒæ—¶è¿‡æœŸï¼Œæ•°æ®åº“å‹åŠ›å‰§å¢</td><td>ç¼“å­˜é›†ä¸­è¿‡æœŸã€Rediså®•æœº</td><td>è¿‡æœŸæ—¶é—´éšæœºåŒ–ã€ç†”æ–­é™çº§ã€å¤šçº§ç¼“å­˜ã€é›†ç¾¤éƒ¨ç½²</td></tr></tbody></table><p><strong>è¯¦ç»†è§£å†³æ–¹æ¡ˆï¼š</strong></p><table><thead><tr><th>è§£å†³æ–¹æ¡ˆ</th><th>å®ç°æ–¹å¼</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>å¸ƒéš†è¿‡æ»¤å™¨</td><td>ä½æ•°ç»„+å¤šä¸ªhashå‡½æ•°</td><td>å†…å­˜å ç”¨å°ï¼ŒæŸ¥è¯¢å¿«</td><td>å­˜åœ¨è¯¯åˆ¤ï¼Œä¸æ”¯æŒåˆ é™¤</td></tr><tr><td>ç©ºå€¼ç¼“å­˜</td><td>å¯¹ç©ºç»“æœè®¾ç½®è¾ƒçŸ­è¿‡æœŸæ—¶é—´</td><td>ç®€å•æœ‰æ•ˆ</td><td>å ç”¨å†…å­˜</td></tr><tr><td>äº’æ–¥é”</td><td>åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŸ¥è¯¢æ•°æ®åº“</td><td>é¿å…é‡å¤æŸ¥è¯¢</td><td>å¯èƒ½é€ æˆé˜»å¡</td></tr><tr><td>ç†”æ–­é™çº§</td><td>å¤±è´¥ç‡è¶…è¿‡é˜ˆå€¼æ—¶åœæ­¢è®¿é—®</td><td>ä¿æŠ¤ç³»ç»Ÿ</td><td>å¯èƒ½å½±å“ç”¨æˆ·ä½“éªŒ</td></tr></tbody></table><h3 id="_8-å¦‚ä½•è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼é”-watch-dogæœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_8-å¦‚ä½•è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼é”-watch-dogæœºåˆ¶"><span>8. å¦‚ä½•è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼é”ï¼ŸWatch Dogæœºåˆ¶ï¼Ÿ</span></a></h3><p><strong>åˆ†å¸ƒå¼é”å®ç°è¦ç‚¹ï¼š</strong></p><table><thead><tr><th>è¦æ±‚</th><th>Rediså®ç°æ–¹å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>äº’æ–¥æ€§</td><td>SET key value NX EX</td><td>NXç¡®ä¿åŸå­æ€§è®¾ç½®</td></tr><tr><td>é˜²æ­»é”</td><td>è®¾ç½®è¿‡æœŸæ—¶é—´</td><td>é¿å…æŒé”è¿›ç¨‹å´©æºƒå¯¼è‡´æ­»é”</td></tr><tr><td>é˜²è¯¯åˆ </td><td>åˆ é™¤æ—¶æ ¡éªŒvalue</td><td>ç¡®ä¿åªèƒ½åˆ é™¤è‡ªå·±çš„é”</td></tr><tr><td>å¯é‡å…¥</td><td>è®°å½•çº¿ç¨‹IDå’Œé‡å…¥æ¬¡æ•°</td><td>æ”¯æŒåŒä¸€çº¿ç¨‹å¤šæ¬¡è·å–é”</td></tr><tr><td>é˜»å¡ç­‰å¾…</td><td>å¾ªç¯å°è¯•è·å–é”</td><td>è·å–å¤±è´¥æ—¶ç­‰å¾…é‡è¯•</td></tr></tbody></table><p><strong>Watch Dogæœºåˆ¶ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>å®ç°åŸç†</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>è‡ªåŠ¨ç»­æœŸ</td><td>å®šæ—¶ä»»åŠ¡å»¶é•¿é”è¿‡æœŸæ—¶é—´</td><td>é˜²æ­¢ä¸šåŠ¡æ‰§è¡Œæ—¶é—´è¶…è¿‡é”è¿‡æœŸæ—¶é—´</td></tr><tr><td>ç»­æœŸæ¡ä»¶</td><td>é”ä»è¢«å½“å‰çº¿ç¨‹æŒæœ‰</td><td>é¿å…ç»™å…¶ä»–çº¿ç¨‹çš„é”ç»­æœŸ</td></tr><tr><td>ç»­æœŸæ—¶é—´</td><td>é€šå¸¸ä¸ºé”è¿‡æœŸæ—¶é—´çš„1/3</td><td>ä¿è¯åœ¨é”è¿‡æœŸå‰å®Œæˆç»­æœŸ</td></tr><tr><td>åœæ­¢æ¡ä»¶</td><td>é”è¢«é‡Šæ”¾æˆ–çº¿ç¨‹ç»“æŸ</td><td>é¿å…æ— é™ç»­æœŸ</td></tr></tbody></table><p><strong>æ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>å®ç°æ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å•RedisèŠ‚ç‚¹</td><td>ç®€å•ï¼Œæ€§èƒ½å¥½</td><td>å•ç‚¹æ•…éšœ</td><td>å¯¹å¯ç”¨æ€§è¦æ±‚ä¸é«˜</td></tr><tr><td>Redisé›†ç¾¤</td><td>é«˜å¯ç”¨</td><td>è„‘è£‚æ—¶å¯èƒ½å‡ºç°å¤šä¸ªé”</td><td>ä¸€èˆ¬ä¸šåŠ¡åœºæ™¯</td></tr><tr><td>Redlockç®—æ³•</td><td>æ›´é«˜çš„å®‰å…¨æ€§</td><td>å¤æ‚ï¼Œæ€§èƒ½è¾ƒå·®</td><td>å¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚æé«˜</td></tr><tr><td>ZooKeeper</td><td>å¼ºä¸€è‡´æ€§ï¼Œè‡ªåŠ¨ç»­æœŸ</td><td>æ€§èƒ½è¾ƒå·®ï¼Œä¾èµ–ZKé›†ç¾¤</td><td>å¼ºä¸€è‡´æ€§è¦æ±‚</td></tr></tbody></table><h3 id="_9-rediså“¨å…µçš„åŸç†-å¦‚ä½•å®ç°æ•…éšœè½¬ç§»" tabindex="-1"><a class="header-anchor" href="#_9-rediså“¨å…µçš„åŸç†-å¦‚ä½•å®ç°æ•…éšœè½¬ç§»"><span>9. Rediså“¨å…µçš„åŸç†ï¼Ÿå¦‚ä½•å®ç°æ•…éšœè½¬ç§»ï¼Ÿ</span></a></h3><p><strong>Rediså“¨å…µå®šä¹‰ï¼š</strong> Redis Sentinelæ˜¯Rediså®˜æ–¹æä¾›çš„é«˜å¯ç”¨è§£å†³æ–¹æ¡ˆï¼Œç”¨äºç›‘æ§Redisä¸»ä»å¤åˆ¶é›†ç¾¤ï¼Œå¹¶åœ¨ä¸»èŠ‚ç‚¹æ•…éšœæ—¶è‡ªåŠ¨è¿›è¡Œæ•…éšœè½¬ç§»ã€‚</p><p><strong>æ ¸å¿ƒåŠŸèƒ½ï¼š</strong></p><table><thead><tr><th>åŠŸèƒ½</th><th>æè¿°</th><th>ä½œç”¨</th><th>å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td>ç›‘æ§</td><td>æŒç»­ç›‘æ§ä¸»ä»èŠ‚ç‚¹çš„å¥åº·çŠ¶æ€</td><td>åŠæ—¶å‘ç°èŠ‚ç‚¹æ•…éšœ</td><td>å®šæœŸå‘é€PINGå‘½ä»¤</td></tr><tr><td>é€šçŸ¥</td><td>å½“èŠ‚ç‚¹çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥ç®¡ç†å‘˜</td><td>æä¾›æ•…éšœå‘Šè­¦</td><td>å‘å¸ƒè®¢é˜…æœºåˆ¶</td></tr><tr><td>è‡ªåŠ¨æ•…éšœè½¬ç§»</td><td>ä¸»èŠ‚ç‚¹æ•…éšœæ—¶è‡ªåŠ¨é€‰ä¸¾æ–°çš„ä¸»èŠ‚ç‚¹</td><td>ä¿è¯æœåŠ¡æŒç»­å¯ç”¨</td><td>é€‰ä¸¾ç®—æ³•+é…ç½®æ›´æ–°</td></tr><tr><td>é…ç½®æä¾›</td><td>ä¸ºå®¢æˆ·ç«¯æä¾›å½“å‰ä¸»èŠ‚ç‚¹ä¿¡æ¯</td><td>å®¢æˆ·ç«¯è‡ªåŠ¨è¿æ¥åˆ°æ­£ç¡®çš„ä¸»èŠ‚ç‚¹</td><td>æœåŠ¡å‘ç°æœºåˆ¶</td></tr></tbody></table><p><strong>å“¨å…µå·¥ä½œåŸç†ï¼š</strong></p><table><thead><tr><th>é˜¶æ®µ</th><th>å·¥ä½œå†…å®¹</th><th>åˆ¤æ–­æ¡ä»¶</th><th>å¤„ç†æ–¹å¼</th></tr></thead><tbody><tr><td>ä¸»è§‚ä¸‹çº¿</td><td>å•ä¸ªå“¨å…µè®¤ä¸ºä¸»èŠ‚ç‚¹ä¸å¯ç”¨</td><td>è¶…è¿‡down-after-millisecondsæ—¶é—´æœªå“åº”</td><td>æ ‡è®°ä¸ºSDOWN</td></tr><tr><td>å®¢è§‚ä¸‹çº¿</td><td>å¤šä¸ªå“¨å…µç¡®è®¤ä¸»èŠ‚ç‚¹ä¸å¯ç”¨</td><td>è¾¾åˆ°quorumæ•°é‡çš„å“¨å…µç¡®è®¤ä¸»è§‚ä¸‹çº¿</td><td>æ ‡è®°ä¸ºODOWNå¹¶å¼€å§‹æ•…éšœè½¬ç§»</td></tr><tr><td>é¢†å¯¼è€…é€‰ä¸¾</td><td>é€‰å‡ºè´Ÿè´£æ•…éšœè½¬ç§»çš„å“¨å…µ</td><td>Raftç®—æ³•é€‰ä¸¾</td><td>è·å¾—majorityç¥¨æ•°çš„å“¨å…µæˆä¸ºé¢†å¯¼è€…</td></tr><tr><td>æ•…éšœè½¬ç§»</td><td>å°†ä»èŠ‚ç‚¹æå‡ä¸ºæ–°çš„ä¸»èŠ‚ç‚¹</td><td>é¢†å¯¼è€…å“¨å…µæ‰§è¡Œè½¬ç§»æµç¨‹</td><td>æ›´æ–°é…ç½®å¹¶é€šçŸ¥æ‰€æœ‰èŠ‚ç‚¹</td></tr></tbody></table><p><strong>æ•…éšœè½¬ç§»è¯¦ç»†æµç¨‹ï¼š</strong></p><table><thead><tr><th>æ­¥éª¤</th><th>æ“ä½œ</th><th>ç›®çš„</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>1</td><td>ä»ä»èŠ‚ç‚¹ä¸­é€‰æ‹©æ–°çš„ä¸»èŠ‚ç‚¹</td><td>é€‰å‡ºæœ€é€‚åˆçš„èŠ‚ç‚¹</td><td>è€ƒè™‘ä¼˜å…ˆçº§ã€å¤åˆ¶åç§»é‡ã€è¿è¡ŒID</td></tr><tr><td>2</td><td>å‘é€‰ä¸­çš„ä»èŠ‚ç‚¹å‘é€SLAVEOF NO ONE</td><td>å°†ä»èŠ‚ç‚¹æå‡ä¸ºä¸»èŠ‚ç‚¹</td><td>ç¡®ä¿å‘½ä»¤æ‰§è¡ŒæˆåŠŸ</td></tr><tr><td>3</td><td>å‘å…¶ä»–ä»èŠ‚ç‚¹å‘é€SLAVEOFå‘½ä»¤</td><td>è®©å…¶ä»–ä»èŠ‚ç‚¹è·Ÿéšæ–°ä¸»èŠ‚ç‚¹</td><td>æ›´æ–°ä¸»ä»å…³ç³»</td></tr><tr><td>4</td><td>æ›´æ–°å“¨å…µé…ç½®æ–‡ä»¶</td><td>è®°å½•æ–°çš„ä¸»èŠ‚ç‚¹ä¿¡æ¯</td><td>æŒä¹…åŒ–é…ç½®å˜æ›´</td></tr><tr><td>5</td><td>å‘å®¢æˆ·ç«¯å‘å¸ƒæ–°ä¸»èŠ‚ç‚¹ä¿¡æ¯</td><td>é€šçŸ¥å®¢æˆ·ç«¯è¿æ¥æ–°ä¸»èŠ‚ç‚¹</td><td>é€šè¿‡å‘å¸ƒè®¢é˜…æœºåˆ¶</td></tr></tbody></table><p><strong>ä»èŠ‚ç‚¹é€‰æ‹©ç­–ç•¥ï¼š</strong></p><table><thead><tr><th>ä¼˜å…ˆçº§</th><th>é€‰æ‹©æ¡ä»¶</th><th>æƒé‡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç¬¬ä¸€ä¼˜å…ˆçº§</td><td>slave-priorityæœ€é«˜</td><td>æœ€é«˜</td><td>æ‰‹åŠ¨è®¾ç½®çš„ä¼˜å…ˆçº§</td></tr><tr><td>ç¬¬äºŒä¼˜å…ˆçº§</td><td>å¤åˆ¶åç§»é‡æœ€å¤§</td><td>é«˜</td><td>æ•°æ®æœ€æ–°çš„ä»èŠ‚ç‚¹</td></tr><tr><td>ç¬¬ä¸‰ä¼˜å…ˆçº§</td><td>è¿è¡ŒIDæœ€å°</td><td>ä¸­</td><td>å¯åŠ¨æ—¶é—´æœ€æ—©çš„ä»èŠ‚ç‚¹</td></tr><tr><td>æ’é™¤æ¡ä»¶</td><td>ä¸»è§‚ä¸‹çº¿ã€æ–­çº¿æ—¶é—´è¿‡é•¿ã€INFO_REPLå“åº”å¼‚å¸¸</td><td>æ— </td><td>ä¸å¥åº·çš„èŠ‚ç‚¹ä¸å‚ä¸é€‰ä¸¾</td></tr></tbody></table><p><strong>å“¨å…µé…ç½®ç¤ºä¾‹ï¼š</strong></p><table><thead><tr><th>é…ç½®é¡¹</th><th>ç¤ºä¾‹å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>sentinel monitor</td><td>mymaster 127.0.0.1 6379 2</td><td>ç›‘æ§ä¸»èŠ‚ç‚¹ï¼Œquorumä¸º2</td></tr><tr><td>sentinel down-after-milliseconds</td><td>mymaster 30000</td><td>30ç§’æ— å“åº”åˆ¤å®šä¸ºä¸»è§‚ä¸‹çº¿</td></tr><tr><td>sentinel parallel-syncs</td><td>mymaster 1</td><td>æ•…éšœè½¬ç§»æ—¶åŒæ—¶åŒæ­¥çš„ä»èŠ‚ç‚¹æ•°é‡</td></tr><tr><td>sentinel failover-timeout</td><td>mymaster 180000</td><td>æ•…éšœè½¬ç§»è¶…æ—¶æ—¶é—´</td></tr><tr><td>sentinel auth-pass</td><td>mymaster mypassword</td><td>è¿æ¥å¯†ç </td></tr></tbody></table><p><strong>ä¼˜ç¼ºç‚¹å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>è‡ªåŠ¨æ•…éšœè½¬ç§»</td><td>é…ç½®ç›¸å¯¹å¤æ‚</td><td>ä¸­å°å‹åº”ç”¨</td></tr><tr><td>é«˜å¯ç”¨æ€§</td><td>è„‘è£‚é—®é¢˜</td><td>å¯¹å¯ç”¨æ€§è¦æ±‚é«˜çš„ç³»ç»Ÿ</td></tr><tr><td>æ”¯æŒå¤šä¸ªä»èŠ‚ç‚¹</td><td>æ•°æ®å¯èƒ½çŸ­æš‚ä¸ä¸€è‡´</td><td>è¯»å¤šå†™å°‘çš„ä¸šåŠ¡</td></tr><tr><td>å®¢æˆ·ç«¯é€æ˜</td><td>éœ€è¦è‡³å°‘3ä¸ªå“¨å…µèŠ‚ç‚¹</td><td>å•æœºæˆ¿éƒ¨ç½²</td></tr><tr><td>æˆç†Ÿç¨³å®š</td><td>ä¸æ”¯æŒæ•°æ®åˆ†ç‰‡</td><td>æ•°æ®é‡ä¸æ˜¯ç‰¹åˆ«å¤§çš„åœºæ™¯</td></tr></tbody></table><p><strong>ä¸å…¶ä»–æ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>Rediså“¨å…µ</th><th>Redis Cluster</th><th>ä¸»ä»å¤åˆ¶</th></tr></thead><tbody><tr><td>é«˜å¯ç”¨æ€§</td><td>è‡ªåŠ¨æ•…éšœè½¬ç§»</td><td>è‡ªåŠ¨æ•…éšœè½¬ç§»</td><td>æ‰‹åŠ¨æ•…éšœè½¬ç§»</td></tr><tr><td>æ•°æ®åˆ†ç‰‡</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>é…ç½®å¤æ‚åº¦</td><td>ä¸­ç­‰</td><td>é«˜</td><td>ä½</td></tr><tr><td>å®¢æˆ·ç«¯æ”¯æŒ</td><td>éœ€è¦æ”¯æŒå“¨å…µåè®®</td><td>éœ€è¦æ”¯æŒé›†ç¾¤åè®®</td><td>æ ‡å‡†Redisåè®®</td></tr><tr><td>é€‚ç”¨è§„æ¨¡</td><td>ä¸­å°å‹</td><td>å¤§å‹</td><td>å°å‹</td></tr><tr><td>æ•°æ®ä¸€è‡´æ€§</td><td>æœ€ç»ˆä¸€è‡´æ€§</td><td>æœ€ç»ˆä¸€è‡´æ€§</td><td>æœ€ç»ˆä¸€è‡´æ€§</td></tr></tbody></table><p><strong>æœ€ä½³å®è·µï¼š</strong></p><table><thead><tr><th>å®è·µå»ºè®®</th><th>å…·ä½“åšæ³•</th><th>åŸå› </th></tr></thead><tbody><tr><td>å¥‡æ•°ä¸ªå“¨å…µèŠ‚ç‚¹</td><td>éƒ¨ç½²3ä¸ªæˆ–5ä¸ªå“¨å…µ</td><td>é¿å…è„‘è£‚ï¼Œç¡®ä¿èƒ½é€‰å‡ºé¢†å¯¼è€…</td></tr><tr><td>åˆ†å¸ƒå¼éƒ¨ç½²</td><td>å“¨å…µéƒ¨ç½²åœ¨ä¸åŒçš„ç‰©ç†æœºå™¨ä¸Š</td><td>æé«˜å®¹ç¾èƒ½åŠ›</td></tr><tr><td>åˆç†è®¾ç½®quorum</td><td>ä¸€èˆ¬è®¾ç½®ä¸ºå“¨å…µæ•°é‡çš„ä¸€åŠ+1</td><td>å¹³è¡¡è¯¯åˆ¤å’Œå¯ç”¨æ€§</td></tr><tr><td>ç›‘æ§å“¨å…µçŠ¶æ€</td><td>ç›‘æ§å“¨å…µè¿›ç¨‹å’Œæ—¥å¿—</td><td>ç¡®ä¿å“¨å…µæœ¬èº«çš„å¯ç”¨æ€§</td></tr><tr><td>å®¢æˆ·ç«¯è¿æ¥æ± é…ç½®</td><td>é…ç½®å“¨å…µåœ°å€è€Œéç›´æ¥è¿æ¥Redis</td><td>å®ç°è‡ªåŠ¨æ•…éšœè½¬ç§»</td></tr></tbody></table><h2 id="jvm" tabindex="-1"><a class="header-anchor" href="#jvm"><span>JVM</span></a></h2><figure><img src="/assets/img/JVM.3c1ca3ce.png" alt="JVM" tabindex="0" loading="lazy"><figcaption>JVM</figcaption></figure><h3 id="_1-jvmå†…å­˜ç»“æ„-å„ä¸ªåŒºåŸŸçš„ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#_1-jvmå†…å­˜ç»“æ„-å„ä¸ªåŒºåŸŸçš„ä½œç”¨"><span>1. JVMå†…å­˜ç»“æ„ï¼Ÿå„ä¸ªåŒºåŸŸçš„ä½œç”¨ï¼Ÿ</span></a></h3><p><strong>JVMå†…å­˜æ¨¡å‹ï¼š</strong></p><table><thead><tr><th>å†…å­˜åŒºåŸŸ</th><th>çº¿ç¨‹ç§æœ‰/å…±äº«</th><th>ä½œç”¨</th><th>å­˜å‚¨å†…å®¹</th><th>æ˜¯å¦ä¼šOOM</th></tr></thead><tbody><tr><td>ç¨‹åºè®¡æ•°å™¨</td><td>ç§æœ‰</td><td>è®°å½•å½“å‰çº¿ç¨‹æ‰§è¡Œå­—èŠ‚ç ä½ç½®</td><td>å­—èŠ‚ç è¡Œå·æŒ‡ç¤ºå™¨</td><td>å¦</td></tr><tr><td>è™šæ‹Ÿæœºæ ˆ</td><td>ç§æœ‰</td><td>å­˜å‚¨æ–¹æ³•è°ƒç”¨çš„æ ˆå¸§</td><td>å±€éƒ¨å˜é‡ã€æ“ä½œæ•°æ ˆã€æ–¹æ³•è¿”å›åœ°å€</td><td>æ˜¯(StackOverflowError)</td></tr><tr><td>æœ¬åœ°æ–¹æ³•æ ˆ</td><td>ç§æœ‰</td><td>ä¸ºnativeæ–¹æ³•æœåŠ¡</td><td>nativeæ–¹æ³•è°ƒç”¨æ ˆ</td><td>æ˜¯</td></tr><tr><td>å †å†…å­˜</td><td>å…±äº«</td><td>å­˜å‚¨å¯¹è±¡å®ä¾‹</td><td>å¯¹è±¡å®ä¾‹ã€æ•°ç»„</td><td>æ˜¯(OutOfMemoryError)</td></tr><tr><td>æ–¹æ³•åŒº/å…ƒç©ºé—´</td><td>å…±äº«</td><td>å­˜å‚¨ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡</td><td>ç±»å…ƒæ•°æ®ã€å¸¸é‡æ± ã€é™æ€å˜é‡</td><td>æ˜¯</td></tr><tr><td>ç›´æ¥å†…å­˜</td><td>å…±äº«</td><td>NIOæ“ä½œã€å †å¤–å†…å­˜</td><td>DirectByteBufferç­‰</td><td>æ˜¯</td></tr></tbody></table><p><strong>å †å†…å­˜è¯¦ç»†ç»“æ„ï¼š</strong></p><table><thead><tr><th>åŒºåŸŸ</th><th>Java8å‰</th><th>Java8å</th><th>ä½œç”¨</th><th>GCé¢‘ç‡</th></tr></thead><tbody><tr><td>æ–°ç”Ÿä»£</td><td>Eden + Survivor(S0,S1)</td><td>åŒå·¦</td><td>æ–°å¯¹è±¡åˆ†é…</td><td>é¢‘ç¹</td></tr><tr><td>è€å¹´ä»£</td><td>Old Generation</td><td>åŒå·¦</td><td>é•¿æœŸå­˜æ´»å¯¹è±¡</td><td>è¾ƒå°‘</td></tr><tr><td>æ°¸ä¹…ä»£</td><td>PermGen</td><td>å·²ç§»é™¤</td><td>ç±»å…ƒæ•°æ®(Java8å‰)</td><td>å¾ˆå°‘</td></tr><tr><td>å…ƒç©ºé—´</td><td>ä¸å­˜åœ¨</td><td>Metaspace</td><td>ç±»å…ƒæ•°æ®(Java8å)</td><td>å¾ˆå°‘</td></tr></tbody></table><p><strong>åˆ†ä»£æ”¶é›†ç­–ç•¥ï¼š</strong></p><table><thead><tr><th>ç­–ç•¥</th><th>åŸç†</th><th>ä¼˜åŠ¿</th><th>å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td>æ–°ç”Ÿä»£</td><td>å¤§å¤šæ•°å¯¹è±¡æœç”Ÿå¤•æ­»</td><td>ä½¿ç”¨å¤åˆ¶ç®—æ³•ï¼Œæ•ˆç‡é«˜</td><td>é¢‘ç¹åˆ›å»ºçš„ä¸´æ—¶å¯¹è±¡</td></tr><tr><td>è€å¹´ä»£</td><td>å¯¹è±¡å­˜æ´»æ—¶é—´é•¿</td><td>ä½¿ç”¨æ ‡è®°-æ¸…é™¤æˆ–æ ‡è®°-æ•´ç†</td><td>é•¿æœŸä½¿ç”¨çš„å¯¹è±¡</td></tr><tr><td>è·¨ä»£å¼•ç”¨</td><td>è®°å¿†é›†(Remembered Set)</td><td>é¿å…å…¨å †æ‰«æ</td><td>è€å¹´ä»£å¼•ç”¨æ–°ç”Ÿä»£</td></tr></tbody></table><h3 id="_2-åƒåœ¾å›æ”¶ç®—æ³•-å„è‡ªçš„ä¼˜ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#_2-åƒåœ¾å›æ”¶ç®—æ³•-å„è‡ªçš„ä¼˜ç¼ºç‚¹"><span>2. åƒåœ¾å›æ”¶ç®—æ³•ï¼Ÿå„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Ÿ</span></a></h3><p><strong>å››å¤§åƒåœ¾å›æ”¶ç®—æ³•ï¼š</strong></p><table><thead><tr><th>ç®—æ³•</th><th>åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æ ‡è®°-æ¸…é™¤</td><td>æ ‡è®°åƒåœ¾å¯¹è±¡ï¼Œç„¶åæ¸…é™¤</td><td>ç®€å•ï¼Œä¸éœ€è¦ç§»åŠ¨å¯¹è±¡</td><td>äº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œæ•ˆç‡ä½</td><td>è€å¹´ä»£</td></tr><tr><td>å¤åˆ¶ç®—æ³•</td><td>å°†å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—å†…å­˜</td><td>æ•ˆç‡é«˜ï¼Œæ— å†…å­˜ç¢ç‰‡</td><td>æµªè´¹ä¸€åŠå†…å­˜ç©ºé—´</td><td>æ–°ç”Ÿä»£</td></tr><tr><td>æ ‡è®°-æ•´ç†</td><td>æ ‡è®°åå°†å­˜æ´»å¯¹è±¡å‘ä¸€ç«¯ç§»åŠ¨</td><td>æ— å†…å­˜ç¢ç‰‡ï¼Œç©ºé—´åˆ©ç”¨ç‡é«˜</td><td>ç§»åŠ¨å¯¹è±¡å¼€é”€å¤§</td><td>è€å¹´ä»£</td></tr><tr><td>åˆ†ä»£æ”¶é›†</td><td>ä¸åŒä»£ä½¿ç”¨ä¸åŒç®—æ³•</td><td>ç»“åˆå„ç®—æ³•ä¼˜ç‚¹</td><td>å®ç°å¤æ‚</td><td>æ•´ä¸ªå †å†…å­˜</td></tr></tbody></table><p><strong>ç®—æ³•è¯¦ç»†å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>æ ‡è®°-æ¸…é™¤</th><th>å¤åˆ¶ç®—æ³•</th><th>æ ‡è®°-æ•´ç†</th><th>åˆ†ä»£æ”¶é›†</th></tr></thead><tbody><tr><td>æ—¶é—´å¤æ‚åº¦</td><td>O(n)</td><td>O(å­˜æ´»å¯¹è±¡æ•°)</td><td>O(n)</td><td>å–å†³äºå…·ä½“ç®—æ³•</td></tr><tr><td>ç©ºé—´å¤æ‚åº¦</td><td>æ— é¢å¤–è¦æ±‚</td><td>éœ€è¦åŒå€ç©ºé—´</td><td>æ— é¢å¤–è¦æ±‚</td><td>æ ¹æ®åˆ†ä»£ç­–ç•¥</td></tr><tr><td>å†…å­˜ç¢ç‰‡</td><td>æœ‰</td><td>æ— </td><td>æ— </td><td>æ–°ç”Ÿä»£æ— ï¼Œè€å¹´ä»£å¯èƒ½æœ‰</td></tr><tr><td>æ•ˆç‡</td><td>ä¸­ç­‰</td><td>é«˜(å­˜æ´»ç‡ä½æ—¶)</td><td>ä½</td><td>æ•´ä½“è¾ƒé«˜</td></tr></tbody></table><p><strong>å¯¹è±¡åˆ†é…è¿‡ç¨‹ï¼š</strong></p><table><thead><tr><th>æ­¥éª¤</th><th>æ“ä½œ</th><th>è¯´æ˜</th><th>å¼‚å¸¸æƒ…å†µ</th></tr></thead><tbody><tr><td>1</td><td>EdenåŒºåˆ†é…</td><td>æ–°å¯¹è±¡ä¼˜å…ˆåœ¨EdenåŒºåˆ†é…</td><td>EdenåŒºæ»¡æ—¶è§¦å‘Minor GC</td></tr><tr><td>2</td><td>SurvivoråŒº</td><td>GCåå­˜æ´»å¯¹è±¡è¿›å…¥Survivor</td><td>ä¸¤ä¸ªSurvivoråŒºäº¤æ›¿ä½¿ç”¨</td></tr><tr><td>3</td><td>å¹´é¾„å¢é•¿</td><td>GCåå¯¹è±¡å¹´é¾„+1</td><td>é»˜è®¤15å²è¿›å…¥è€å¹´ä»£</td></tr><tr><td>4</td><td>è€å¹´ä»£</td><td>é•¿æœŸå­˜æ´»æˆ–å¤§å¯¹è±¡è¿›å…¥è€å¹´ä»£</td><td>è€å¹´ä»£æ»¡æ—¶è§¦å‘Major GC</td></tr><tr><td>5</td><td>æ™‹å‡å¤±è´¥</td><td>è€å¹´ä»£ç©ºé—´ä¸è¶³</td><td>è§¦å‘Full GC</td></tr></tbody></table><h3 id="_3-å¸¸è§åƒåœ¾å›æ”¶å™¨-ç‰¹ç‚¹å’Œä½¿ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#_3-å¸¸è§åƒåœ¾å›æ”¶å™¨-ç‰¹ç‚¹å’Œä½¿ç”¨åœºæ™¯"><span>3. å¸¸è§åƒåœ¾å›æ”¶å™¨ï¼Ÿç‰¹ç‚¹å’Œä½¿ç”¨åœºæ™¯ï¼Ÿ</span></a></h3><p><strong>åƒåœ¾å›æ”¶å™¨å‘å±•å†ç¨‹ï¼š</strong></p><table><thead><tr><th>å›æ”¶å™¨</th><th>å‘å¸ƒç‰ˆæœ¬</th><th>ç±»å‹</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th><th>åœé¡¿æ—¶é—´</th></tr></thead><tbody><tr><td>Serial</td><td>JDK1.3+</td><td>ä¸²è¡Œ</td><td>å•çº¿ç¨‹ï¼Œç®€å•ç¨³å®š</td><td>å°å‹åº”ç”¨ã€å®¢æˆ·ç«¯</td><td>è¾ƒé•¿</td></tr><tr><td>ParNew</td><td>JDK1.4+</td><td>å¹¶è¡Œ</td><td>Serialçš„å¤šçº¿ç¨‹ç‰ˆæœ¬</td><td>é…åˆCMSä½¿ç”¨</td><td>ä¸­ç­‰</td></tr><tr><td>Parallel Scavenge</td><td>JDK1.4+</td><td>å¹¶è¡Œ</td><td>å…³æ³¨ååé‡</td><td>åå°è®¡ç®—ä»»åŠ¡</td><td>ä¸­ç­‰</td></tr><tr><td>CMS</td><td>JDK1.5+</td><td>å¹¶å‘</td><td>ä½å»¶è¿Ÿï¼Œå¹¶å‘æ”¶é›†</td><td>å“åº”æ—¶é—´æ•æ„Ÿåº”ç”¨</td><td>çŸ­</td></tr><tr><td>G1</td><td>JDK1.7+</td><td>ä½å»¶è¿Ÿ</td><td>å¯é¢„æµ‹åœé¡¿æ—¶é—´</td><td>å¤§å †å†…å­˜åº”ç”¨</td><td>å¯æ§</td></tr><tr><td>ZGC</td><td>JDK11+</td><td>è¶…ä½å»¶è¿Ÿ</td><td>å‡ ä¹æ— åœé¡¿</td><td>è¶…å¤§å †å†…å­˜</td><td>æçŸ­(&lt;10ms)</td></tr><tr><td>Shenandoah</td><td>JDK12+</td><td>è¶…ä½å»¶è¿Ÿ</td><td>å¹¶å‘æ”¶é›†</td><td>ä½å»¶è¿Ÿè¦æ±‚</td><td>æçŸ­</td></tr></tbody></table><p><strong>æ”¶é›†å™¨ç»„åˆä½¿ç”¨ï¼š</strong></p><table><thead><tr><th>æ–°ç”Ÿä»£æ”¶é›†å™¨</th><th>è€å¹´ä»£æ”¶é›†å™¨</th><th>ç‰¹ç‚¹</th><th>æ¨èåœºæ™¯</th></tr></thead><tbody><tr><td>Serial</td><td>Serial Old</td><td>å…¨ä¸²è¡Œ</td><td>å°å‹åº”ç”¨</td></tr><tr><td>ParNew</td><td>CMS</td><td>ä½å»¶è¿Ÿç»„åˆ</td><td>Webåº”ç”¨</td></tr><tr><td>Parallel Scavenge</td><td>Parallel Old</td><td>é«˜ååé‡ç»„åˆ</td><td>æ‰¹å¤„ç†åº”ç”¨</td></tr><tr><td>G1</td><td>G1</td><td>ç»Ÿä¸€æ”¶é›†å™¨</td><td>å¤§å†…å­˜åº”ç”¨</td></tr></tbody></table><p><strong>G1åƒåœ¾å›æ”¶å™¨è¯¦è§£ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th><th>ä¼˜åŠ¿</th><th>é€‚ç”¨æ¡ä»¶</th></tr></thead><tbody><tr><td>Regionæ¦‚å¿µ</td><td>å°†å †åˆ†ä¸ºå¤šä¸ªå›ºå®šå¤§å°åŒºåŸŸ</td><td>å¯é¢„æµ‹åœé¡¿æ—¶é—´</td><td>å †å†…å­˜&gt;4GB</td></tr><tr><td>æ··åˆæ”¶é›†</td><td>åŒæ—¶æ”¶é›†æ–°ç”Ÿä»£å’Œè€å¹´ä»£</td><td>æ•´ä½“æ•ˆç‡é«˜</td><td>éœ€è¦è°ƒä¼˜å‚æ•°</td></tr><tr><td>å¹¶å‘æ ‡è®°</td><td>ä¸åº”ç”¨çº¿ç¨‹åŒæ—¶è¿›è¡Œ</td><td>å‡å°‘åœé¡¿æ—¶é—´</td><td>CPUèµ„æºå……è¶³</td></tr><tr><td>è®°å¿†é›†</td><td>è·¨Regionå¼•ç”¨è®°å½•</td><td>é¿å…å…¨å †æ‰«æ</td><td>å†…å­˜å¼€é”€å¯æ¥å—</td></tr></tbody></table><h3 id="_4-ç±»åŠ è½½æœºåˆ¶-åŒäº²å§”æ´¾æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_4-ç±»åŠ è½½æœºåˆ¶-åŒäº²å§”æ´¾æ¨¡å‹"><span>4. ç±»åŠ è½½æœºåˆ¶ï¼ŸåŒäº²å§”æ´¾æ¨¡å‹ï¼Ÿ</span></a></h3><p><strong>ç±»åŠ è½½è¿‡ç¨‹ï¼š</strong></p><table><thead><tr><th>é˜¶æ®µ</th><th>æ“ä½œ</th><th>è¯´æ˜</th><th>å¯é€†æ€§</th></tr></thead><tbody><tr><td>åŠ è½½(Loading)</td><td>è¯»å–classæ–‡ä»¶åˆ°å†…å­˜</td><td>é€šè¿‡ç±»åŠ è½½å™¨è¯»å–å­—èŠ‚ç </td><td>å¦</td></tr><tr><td>éªŒè¯(Verification)</td><td>éªŒè¯å­—èŠ‚ç æ­£ç¡®æ€§</td><td>ç¡®ä¿classæ–‡ä»¶ç¬¦åˆJVMè§„èŒƒ</td><td>å¦</td></tr><tr><td>å‡†å¤‡(Preparation)</td><td>ä¸ºé™æ€å˜é‡åˆ†é…å†…å­˜</td><td>è®¾ç½®é»˜è®¤åˆå§‹å€¼</td><td>å¦</td></tr><tr><td>è§£æ(Resolution)</td><td>ç¬¦å·å¼•ç”¨è½¬ç›´æ¥å¼•ç”¨</td><td>å°†å¸¸é‡æ± ç¬¦å·å¼•ç”¨è§£æä¸ºç›´æ¥å¼•ç”¨</td><td>æ˜¯</td></tr><tr><td>åˆå§‹åŒ–(Initialization)</td><td>æ‰§è¡Œé™æ€ä»£ç å—</td><td><code>æ‰§è¡Œ&lt;clinit&gt;æ–¹æ³•</code></td><td>å¦</td></tr></tbody></table><p><strong>åŒäº²å§”æ´¾æ¨¡å‹ï¼š</strong></p><table><thead><tr><th>ç±»åŠ è½½å™¨</th><th>å±‚çº§</th><th>åŠ è½½å†…å®¹</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>Bootstrap ClassLoader</td><td>é¡¶å±‚</td><td>JDKæ ¸å¿ƒç±»åº“(rt.jarç­‰)</td><td>C++å®ç°ï¼Œæ— çˆ¶åŠ è½½å™¨</td></tr><tr><td>Extension ClassLoader</td><td>æ‰©å±•</td><td>JDKæ‰©å±•ç±»åº“(extç›®å½•)</td><td>Javaå®ç°</td></tr><tr><td>Application ClassLoader</td><td>åº”ç”¨</td><td>åº”ç”¨ç¨‹åºç±»è·¯å¾„</td><td>é»˜è®¤ç±»åŠ è½½å™¨</td></tr><tr><td>Custom ClassLoader</td><td>è‡ªå®šä¹‰</td><td>ç‰¹å®šéœ€æ±‚çš„ç±»</td><td>ç”¨æˆ·è‡ªå®šä¹‰</td></tr></tbody></table><p><strong>åŒäº²å§”æ´¾ä¼˜åŠ¿ï¼š</strong></p><table><thead><tr><th>ä¼˜åŠ¿</th><th>è¯´æ˜</th><th>ä¸¾ä¾‹</th></tr></thead><tbody><tr><td>é¿å…é‡å¤åŠ è½½</td><td>çˆ¶åŠ è½½å™¨å·²åŠ è½½çš„ç±»ä¸ä¼šé‡å¤åŠ è½½</td><td>java.lang.ObjectåªåŠ è½½ä¸€æ¬¡</td></tr><tr><td>å®‰å…¨æ€§</td><td>æ ¸å¿ƒç±»åº“ä¸ä¼šè¢«æ›¿æ¢</td><td>æ— æ³•è‡ªå®šä¹‰java.lang.String</td></tr><tr><td>ä¸€è‡´æ€§</td><td>ä¿è¯ç±»çš„å”¯ä¸€æ€§</td><td>åŒä¸€ä¸ªç±»åœ¨JVMä¸­åªæœ‰ä¸€ä»½</td></tr></tbody></table><p><strong>ç ´ååŒäº²å§”æ´¾ï¼š</strong></p><table><thead><tr><th>æ–¹é¢</th><th>è¯´æ˜</th><th>å…·ä½“åŸå› /åœºæ™¯</th></tr></thead><tbody><tr><td><strong>åŒäº²å§”æ´¾æœºåˆ¶å®šä¹‰</strong></td><td>ç±»åŠ è½½æ—¶ï¼Œå…ˆå§”æ‰˜çˆ¶åŠ è½½å™¨åŠ è½½ï¼Œçˆ¶åŠ è½½å¤±è´¥æ‰è‡ªå·±åŠ è½½</td><td>ä¿è¯æ ¸å¿ƒç±»åº“ç»Ÿä¸€åŠ è½½ï¼Œé˜²æ­¢ç¯¡æ”¹</td></tr><tr><td><strong>ç ´ååŒäº²å§”æ´¾å«ä¹‰</strong></td><td>è·³è¿‡çˆ¶åŠ è½½å™¨ï¼Œè‡ªå·±ä¼˜å…ˆåŠ è½½æŒ‡å®šç±»</td><td>ç ´åçˆ¶å­åŠ è½½å™¨é¡ºåºï¼Œè‡ªå·±å…ˆåŠ è½½</td></tr><tr><td><strong>ä¸»è¦ç›®çš„</strong></td><td>å®ç°çƒ­éƒ¨ç½²ã€ç‰ˆæœ¬éš”ç¦»ã€å®šåˆ¶ç±»åŠ è½½é€»è¾‘</td><td>çƒ­æ›´æ–°ã€æ’ä»¶éš”ç¦»ã€å¤šç‰ˆæœ¬å…±å­˜</td></tr><tr><td><strong>åº”ç”¨åœºæ™¯</strong></td><td>1. çƒ­éƒ¨ç½² / çƒ­æ›´æ–°<br>2. å¤šç‰ˆæœ¬ä¾èµ–éš”ç¦»<br>3. åŠ¨æ€ç±»åŠ è½½<br>4. è§£å†³ç¬¬ä¸‰æ–¹åº“å†²çª</td><td>åº”ç”¨æœåŠ¡å™¨æ’ä»¶åŠ è½½ï¼Œå¤æ‚æ¡†æ¶ï¼Œè‡ªå®šä¹‰åŠ è½½</td></tr><tr><td><strong>å®ç°æ–¹å¼</strong></td><td>é‡å†™ <code>loadClass</code> æ–¹æ³•ï¼Œä¼˜å…ˆè‡ªå·±åŠ è½½ç‰¹å®šç±»</td><td>è‡ªå®šä¹‰ç±»åŠ è½½å™¨ä»£ç é€»è¾‘</td></tr><tr><td><strong>ä¼˜ç‚¹</strong></td><td>çµæ´»æ§åˆ¶åŠ è½½è¿‡ç¨‹ï¼Œæ”¯æŒçƒ­æ›´æ–°å’Œç‰ˆæœ¬å…±å­˜</td><td>åº”å¯¹å¤æ‚åº”ç”¨éœ€æ±‚</td></tr><tr><td><strong>é£é™©å’Œç¼ºç‚¹</strong></td><td>å¯èƒ½ç ´åå®‰å…¨æ€§ï¼Œå¯¼è‡´ç±»ä¸å…¼å®¹ï¼ˆClassCastExceptionï¼‰ï¼Œéš¾ä»¥è°ƒè¯•</td><td>å½±å“ç³»ç»Ÿç¨³å®šï¼Œå¸¦æ¥æ½œåœ¨é£é™©</td></tr></tbody></table><h3 id="_5-jvmå‚æ•°è°ƒä¼˜-å¸¸ç”¨å‚æ•°" tabindex="-1"><a class="header-anchor" href="#_5-jvmå‚æ•°è°ƒä¼˜-å¸¸ç”¨å‚æ•°"><span>5. JVMå‚æ•°è°ƒä¼˜ï¼Ÿå¸¸ç”¨å‚æ•°ï¼Ÿ</span></a></h3><p><strong>JVMå‚æ•°åˆ†ç±»ï¼š</strong></p><table><thead><tr><th>å‚æ•°ç±»å‹</th><th>æ ¼å¼</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>æ ‡å‡†å‚æ•°</td><td>-xxx</td><td>ç¨³å®šï¼Œå„ç‰ˆæœ¬é€šç”¨</td><td>-cp, -classpath</td></tr><tr><td>éæ ‡å‡†å‚æ•°</td><td>-Xxxx</td><td>é»˜è®¤JVMå®ç°ï¼Œå¯èƒ½å˜åŒ–</td><td>-Xms, -Xmx</td></tr><tr><td>ä¸ç¨³å®šå‚æ•°</td><td>-XX:xxx</td><td>ç‰¹å®šJVMå®ç°ï¼Œå¯èƒ½ç§»é™¤</td><td>-XX:+UseG1GC</td></tr></tbody></table><p><strong>å†…å­˜ç›¸å…³å‚æ•°ï¼š</strong></p><table><thead><tr><th>å‚æ•°</th><th>ä½œç”¨</th><th>å»ºè®®å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>-Xms</td><td>åˆå§‹å †å¤§å°</td><td>ä¸-Xmxç›¸åŒ</td><td>é¿å…åŠ¨æ€æ‰©å®¹</td></tr><tr><td>-Xmx</td><td>æœ€å¤§å †å¤§å°</td><td>ç³»ç»Ÿå†…å­˜çš„70-80%</td><td>é¢„ç•™ç»™ç³»ç»Ÿå’Œå…¶ä»–è¿›ç¨‹</td></tr><tr><td>-Xmn</td><td>æ–°ç”Ÿä»£å¤§å°</td><td>å †å†…å­˜çš„1/3-1/2</td><td>æ ¹æ®å¯¹è±¡å­˜æ´»æ—¶é—´è°ƒæ•´</td></tr><tr><td>-XX:MetaspaceSize</td><td>å…ƒç©ºé—´åˆå§‹å¤§å°</td><td>128M-256M</td><td>Java8+æ›¿ä»£PermGen</td></tr><tr><td>-XX:MaxMetaspaceSize</td><td>å…ƒç©ºé—´æœ€å¤§å¤§å°</td><td>ä¸è®¾ç½®(æ— é™åˆ¶)</td><td>é¿å…å†…å­˜æ³„æ¼</td></tr><tr><td>-Xss</td><td>çº¿ç¨‹æ ˆå¤§å°</td><td>256k-1M</td><td>æ ¹æ®é€’å½’æ·±åº¦è°ƒæ•´</td></tr></tbody></table><p><strong>åƒåœ¾å›æ”¶å™¨å‚æ•°ï¼š</strong></p><table><thead><tr><th>å‚æ•°</th><th>ä½œç”¨</th><th>é€‚ç”¨åœºæ™¯</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>-XX:+UseSerialGC</td><td>ä½¿ç”¨Serialæ”¶é›†å™¨</td><td>å°å‹åº”ç”¨</td><td>å•çº¿ç¨‹</td></tr><tr><td>-XX:+UseParallelGC</td><td>ä½¿ç”¨Parallelæ”¶é›†å™¨</td><td>ååé‡ä¼˜å…ˆ</td><td>JDK8é»˜è®¤</td></tr><tr><td>-XX:+UseConcMarkSweepGC</td><td>ä½¿ç”¨CMSæ”¶é›†å™¨</td><td>ä½å»¶è¿Ÿ</td><td>JDK9æ ‡è®°åºŸå¼ƒ</td></tr><tr><td>-XX:+UseG1GC</td><td>ä½¿ç”¨G1æ”¶é›†å™¨</td><td>å¤§å †å†…å­˜</td><td>JDK9+é»˜è®¤</td></tr><tr><td>-XX:MaxGCPauseMillis</td><td>æœ€å¤§GCåœé¡¿æ—¶é—´</td><td>G1æ”¶é›†å™¨</td><td>ä»…ä¸ºç›®æ ‡å€¼</td></tr></tbody></table><p><strong>æ€§èƒ½ç›‘æ§å‚æ•°ï¼š</strong></p><table><thead><tr><th>å‚æ•°</th><th>ä½œç”¨</th><th>è¾“å‡ºå†…å®¹</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>-XX:+PrintGC</td><td>æ‰“å°GCä¿¡æ¯</td><td>ç®€å•GCæ—¥å¿—</td><td>åŸºæœ¬ç›‘æ§</td></tr><tr><td>-XX:+PrintGCDetails</td><td>æ‰“å°è¯¦ç»†GCä¿¡æ¯</td><td>è¯¦ç»†GCæ—¥å¿—</td><td>æ€§èƒ½è°ƒä¼˜</td></tr><tr><td>-XX:+PrintGCTimeStamps</td><td>æ‰“å°GCæ—¶é—´æˆ³</td><td>å¸¦æ—¶é—´çš„GCæ—¥å¿—</td><td>é—®é¢˜å®šä½</td></tr><tr><td>-Xloggc:gc.log</td><td>GCæ—¥å¿—æ–‡ä»¶</td><td>è¾“å‡ºåˆ°æ–‡ä»¶</td><td>ç”Ÿäº§ç¯å¢ƒ</td></tr><tr><td>-XX:+HeapDumpOnOutOfMemoryError</td><td>OOMæ—¶ç”Ÿæˆå †è½¬å‚¨</td><td>hprofæ–‡ä»¶</td><td>é—®é¢˜è¯Šæ–­</td></tr></tbody></table><h3 id="_6-å†…å­˜æ³„æ¼vså†…å­˜æº¢å‡º-å¦‚ä½•æ’æŸ¥" tabindex="-1"><a class="header-anchor" href="#_6-å†…å­˜æ³„æ¼vså†…å­˜æº¢å‡º-å¦‚ä½•æ’æŸ¥"><span>6. å†…å­˜æ³„æ¼vså†…å­˜æº¢å‡ºï¼Ÿå¦‚ä½•æ’æŸ¥ï¼Ÿ</span></a></h3><p><strong>æ¦‚å¿µåŒºåˆ«ï¼š</strong></p><table><thead><tr><th>æ¦‚å¿µ</th><th>å®šä¹‰</th><th>åŸå› </th><th>è¡¨ç°</th></tr></thead><tbody><tr><td>å†…å­˜æ³„æ¼(Memory Leak)</td><td>å¯¹è±¡æ— æ³•è¢«GCå›æ”¶ä½†ä¸å†ä½¿ç”¨</td><td>å¼•ç”¨æ²¡æœ‰é‡Šæ”¾</td><td>å†…å­˜ä½¿ç”¨ç‡æŒç»­ä¸Šå‡</td></tr><tr><td>å†…å­˜æº¢å‡º(Out Of Memory)</td><td>å†…å­˜ç©ºé—´ä¸è¶³ä»¥åˆ†é…æ–°å¯¹è±¡</td><td>å†…å­˜ç©ºé—´è€—å°½</td><td>æŠ›å‡ºOutOfMemoryError</td></tr></tbody></table><p><strong>å¸¸è§å†…å­˜æ³„æ¼åœºæ™¯ï¼š</strong></p><table><thead><tr><th>åœºæ™¯</th><th>åŸå› </th><th>ç¤ºä¾‹</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>é™æ€é›†åˆ</td><td>é›†åˆæŒæœ‰å¯¹è±¡å¼•ç”¨ä¸é‡Šæ”¾</td><td><code>static List&lt;Object&gt; list</code></td><td>åŠæ—¶æ¸…ç†é›†åˆ</td></tr><tr><td>ç›‘å¬å™¨</td><td>æ³¨å†Œç›‘å¬å™¨æœªæ³¨é”€</td><td>addListeneræœªé…å¯¹removeListener</td><td>æ‰‹åŠ¨æ³¨é”€ç›‘å¬å™¨</td></tr><tr><td>å†…éƒ¨ç±»</td><td>éé™æ€å†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨</td><td>HandleræŒæœ‰Activityå¼•ç”¨</td><td>ä½¿ç”¨é™æ€å†…éƒ¨ç±»+å¼±å¼•ç”¨</td></tr><tr><td>çº¿ç¨‹æ± </td><td>çº¿ç¨‹ä¸ç»“æŸæŒæœ‰å¯¹è±¡å¼•ç”¨</td><td>ThreadLocalä½¿ç”¨åæœªæ¸…ç†</td><td>ä½¿ç”¨åè°ƒç”¨remove()</td></tr><tr><td>æ•°æ®åº“è¿æ¥</td><td>è¿æ¥æœªå…³é—­</td><td>Connectionã€ResultSetæœªå…³é—­</td><td>try-with-resources</td></tr></tbody></table><p><strong>å†…å­˜æº¢å‡ºç±»å‹ï¼š</strong></p><table><thead><tr><th>OOMç±»å‹</th><th>å‘ç”ŸåŒºåŸŸ</th><th>åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>Java heap space</td><td>å †å†…å­˜</td><td>å¯¹è±¡å¤ªå¤šæˆ–å†…å­˜æ³„æ¼</td><td>å¢åŠ å †å†…å­˜ã€æ’æŸ¥æ³„æ¼</td></tr><tr><td>GC overhead limit exceeded</td><td>å †å†…å­˜</td><td>GCæ—¶é—´è¿‡é•¿</td><td>ä¼˜åŒ–ä»£ç ã€è°ƒæ•´GCå‚æ•°</td></tr><tr><td>Metaspace</td><td>å…ƒç©ºé—´</td><td>ç±»å¤ªå¤š</td><td>å¢åŠ å…ƒç©ºé—´å¤§å°</td></tr><tr><td>unable to create new native thread</td><td>çº¿ç¨‹</td><td>çº¿ç¨‹æ•°è¶…é™</td><td>å‡å°‘çº¿ç¨‹æ•°ã€è°ƒæ•´ç³»ç»Ÿå‚æ•°</td></tr><tr><td>Direct buffer memory</td><td>ç›´æ¥å†…å­˜</td><td>NIOä½¿ç”¨è¿‡å¤šå †å¤–å†…å­˜</td><td>è°ƒæ•´-XX:MaxDirectMemorySize</td></tr></tbody></table><p><strong>æ’æŸ¥å·¥å…·å’Œæ–¹æ³•ï¼š</strong></p><table><thead><tr><th>å·¥å…·</th><th>ç”¨é€”</th><th>ä¼˜ç‚¹</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>jps</td><td>æŸ¥çœ‹Javaè¿›ç¨‹</td><td>ç®€å•å¿«é€Ÿ</td><td>åŸºç¡€æ’æŸ¥</td></tr><tr><td>jstat</td><td>ç›‘æ§GCå’Œå†…å­˜</td><td>å®æ—¶ç›‘æ§</td><td>æ€§èƒ½åˆ†æ</td></tr><tr><td>jmap</td><td>ç”Ÿæˆå †è½¬å‚¨</td><td>åˆ†æå†…å­˜ä½¿ç”¨</td><td>å†…å­˜é—®é¢˜æ’æŸ¥</td></tr><tr><td>jhat</td><td>åˆ†æå †è½¬å‚¨æ–‡ä»¶</td><td>åŸºç¡€åˆ†æ</td><td>ç®€å•åˆ†æ</td></tr><tr><td>MAT</td><td>Eclipse Memory Analyzer</td><td>åŠŸèƒ½å¼ºå¤§</td><td>æ·±åº¦åˆ†æ</td></tr><tr><td>JProfiler</td><td>å•†ä¸šæ€§èƒ½åˆ†æå·¥å…·</td><td>åŠŸèƒ½å…¨é¢</td><td>å…¨é¢æ€§èƒ½åˆ†æ</td></tr><tr><td>VisualVM</td><td>å¯è§†åŒ–ç›‘æ§å·¥å…·</td><td>ç•Œé¢å‹å¥½</td><td>å¼€å‘è°ƒè¯•</td></tr></tbody></table><h2 id="åˆ†å¸ƒå¼" tabindex="-1"><a class="header-anchor" href="#åˆ†å¸ƒå¼"><span>åˆ†å¸ƒå¼</span></a></h2><h3 id="_1-capç†è®º-baseç†è®º" tabindex="-1"><a class="header-anchor" href="#_1-capç†è®º-baseç†è®º"><span>1. CAPç†è®ºï¼ŸBASEç†è®ºï¼Ÿ</span></a></h3><p><strong>CAPç†è®ºï¼ˆå¸ƒé²å°”å®šç†ï¼‰ï¼š</strong> åˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯èƒ½åŒæ—¶æ»¡è¶³ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰ã€åˆ†åŒºå®¹é”™æ€§ï¼ˆPartition toleranceï¼‰ä¸‰ä¸ªç‰¹æ€§ã€‚</p><table><thead><tr><th>ç‰¹æ€§</th><th>å®šä¹‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ä¸€è‡´æ€§ï¼ˆCï¼‰</td><td>æ‰€æœ‰èŠ‚ç‚¹åŒæ—¶çœ‹åˆ°ç›¸åŒçš„æ•°æ®</td><td>æ•°æ®åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¿æŒåŒæ­¥</td></tr><tr><td>å¯ç”¨æ€§ï¼ˆAï¼‰</td><td>ç³»ç»ŸæŒç»­å¯ç”¨ï¼Œå¿«é€Ÿå“åº”</td><td>ç³»ç»Ÿä¸ä¼šå› ä¸ºéƒ¨åˆ†èŠ‚ç‚¹æ•…éšœè€Œåœæ­¢æœåŠ¡</td></tr><tr><td>åˆ†åŒºå®¹é”™æ€§ï¼ˆPï¼‰</td><td>ç³»ç»Ÿåœ¨ç½‘ç»œåˆ†åŒºæ•…éšœæ—¶ä»èƒ½ç»§ç»­è¿è¡Œ</td><td>ç½‘ç»œæ•…éšœä¸ä¼šå¯¼è‡´æ•´ä¸ªç³»ç»Ÿä¸å¯ç”¨</td></tr></tbody></table><p><strong>CAPç»„åˆé€‰æ‹©ï¼š</strong></p><table><thead><tr><th>ç»„åˆ</th><th>ç‰¹ç‚¹</th><th>å…¸å‹åº”ç”¨</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>CA</td><td>ä¸€è‡´æ€§+å¯ç”¨æ€§</td><td>ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“</td><td>å•æœºæˆ–å±€åŸŸç½‘ç¯å¢ƒ</td></tr><tr><td>CP</td><td>ä¸€è‡´æ€§+åˆ†åŒºå®¹é”™æ€§</td><td>Zookeeperã€Raftã€Paxos</td><td>æ•°æ®ä¸€è‡´æ€§è¦æ±‚é«˜</td></tr><tr><td>AP</td><td>å¯ç”¨æ€§+åˆ†åŒºå®¹é”™æ€§</td><td>Redis</td><td>é«˜å¯ç”¨æ€§è¦æ±‚ï¼Œå…è®¸æ•°æ®å»¶è¿Ÿ</td></tr></tbody></table><p><strong>BASEç†è®ºï¼š</strong> ä½œä¸ºCAPç†è®ºçš„å»¶ä¼¸ï¼Œæä¾›äº†ä¸€ç§åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®ç°é«˜å¯ç”¨çš„æ–¹å¼ã€‚</p><table><thead><tr><th>ç‰¹æ€§</th><th>å…¨ç§°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>åŸºæœ¬å¯ç”¨ï¼ˆBAï¼‰</td><td>Basically Available</td><td>ç³»ç»ŸåŸºæœ¬å¯ç”¨ï¼Œå…è®¸æŸå¤±éƒ¨åˆ†åŠŸèƒ½</td></tr><tr><td>è½¯çŠ¶æ€ï¼ˆSï¼‰</td><td>Soft State</td><td>å…è®¸ç³»ç»Ÿä¸­æ•°æ®å­˜åœ¨ä¸­é—´çŠ¶æ€</td></tr><tr><td>æœ€ç»ˆä¸€è‡´æ€§ï¼ˆEï¼‰</td><td>Eventually Consistent</td><td>ç³»ç»Ÿä¸­æ•°æ®æœ€ç»ˆè¾¾åˆ°ä¸€è‡´çŠ¶æ€</td></tr></tbody></table><h3 id="_2-åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_2-åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆ"><span>2. åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆï¼Ÿ</span></a></h3><p><strong>åˆ†å¸ƒå¼äº‹åŠ¡æŒ‘æˆ˜ï¼š</strong> è·¨å¤šä¸ªæœåŠ¡æˆ–æ•°æ®åº“çš„äº‹åŠ¡æ“ä½œï¼Œéœ€è¦ä¿è¯ACIDç‰¹æ€§ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>æ–¹æ¡ˆ</th><th>å®ç°åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>2PC</td><td>ä¸¤é˜¶æ®µæäº¤</td><td>å¼ºä¸€è‡´æ€§</td><td>é˜»å¡ã€å•ç‚¹æ•…éšœ</td><td>å¼ºä¸€è‡´æ€§è¦æ±‚</td></tr><tr><td>3PC</td><td>ä¸‰é˜¶æ®µæäº¤</td><td>å‡å°‘é˜»å¡æ—¶é—´</td><td>å¤æ‚åº¦é«˜ã€ç½‘ç»œåˆ†åŒºé—®é¢˜</td><td>å¯¹2PCçš„æ”¹è¿›</td></tr><tr><td>TCC</td><td>Try-Confirm-Cancel</td><td>ä¸šåŠ¡æ— ä¾µå…¥</td><td>å®ç°å¤æ‚ã€è¡¥å¿é€»è¾‘</td><td>ä¸šåŠ¡é€»è¾‘ç›¸å¯¹ç®€å•</td></tr><tr><td>Saga</td><td>é•¿äº‹åŠ¡æ‹†åˆ†+è¡¥å¿</td><td>é«˜æ€§èƒ½ã€æœ€ç»ˆä¸€è‡´æ€§</td><td>è¡¥å¿é€»è¾‘å¤æ‚</td><td>é•¿æµç¨‹ä¸šåŠ¡</td></tr><tr><td>æ¶ˆæ¯äº‹åŠ¡</td><td>æ¶ˆæ¯é˜Ÿåˆ—ä¿è¯æœ€ç»ˆä¸€è‡´æ€§</td><td>å¼‚æ­¥é«˜æ€§èƒ½</td><td>æœ€ç»ˆä¸€è‡´æ€§ã€æ¶ˆæ¯é‡å¤</td><td>å¼‚æ­¥å¤„ç†åœºæ™¯</td></tr><tr><td>æœ€å¤§åŠªåŠ›é€šçŸ¥</td><td>å®šæœŸé‡è¯•+äººå·¥ä»‹å…¥</td><td>ç®€å•æ˜“å®ç°</td><td>å¯èƒ½ä¸ä¸€è‡´</td><td>å¯¹ä¸€è‡´æ€§è¦æ±‚ä¸ä¸¥æ ¼</td></tr></tbody></table><p><strong>è¯¦ç»†æ–¹æ¡ˆåˆ†æï¼š</strong></p><table><thead><tr><th>æ–¹æ¡ˆç‰¹ç‚¹</th><th>2PC</th><th>TCC</th><th>Saga</th></tr></thead><tbody><tr><td>ä¸€è‡´æ€§</td><td>å¼ºä¸€è‡´æ€§</td><td>æœ€ç»ˆä¸€è‡´æ€§</td><td>æœ€ç»ˆä¸€è‡´æ€§</td></tr><tr><td>æ€§èƒ½</td><td>è¾ƒå·®</td><td>å¥½</td><td>å¥½</td></tr><tr><td>å¤æ‚åº¦</td><td>ç®€å•</td><td>ä¸­ç­‰</td><td>å¤æ‚</td></tr><tr><td>ä¸šåŠ¡ä¾µå…¥æ€§</td><td>æ— </td><td>ä¸­ç­‰</td><td>é«˜</td></tr><tr><td>æ•…éšœæ¢å¤</td><td>å›°éš¾</td><td>ç›¸å¯¹å®¹æ˜“</td><td>å®¹æ˜“</td></tr></tbody></table><h3 id="_3-åˆ†å¸ƒå¼é”çš„å®ç°" tabindex="-1"><a class="header-anchor" href="#_3-åˆ†å¸ƒå¼é”çš„å®ç°"><span>3. åˆ†å¸ƒå¼é”çš„å®ç°ï¼Ÿ</span></a></h3><p><strong>å®ç°æ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>å®ç°æ–¹æ¡ˆ</th><th>åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æ•°æ®åº“é”</td><td>åŸºäºæ•°æ®åº“å”¯ä¸€ç´¢å¼•</td><td>ç®€å•æ˜“ç†è§£</td><td>æ€§èƒ½å·®ã€å•ç‚¹æ•…éšœ</td><td>ç®€å•åœºæ™¯</td></tr><tr><td>Redisåˆ†å¸ƒå¼é”</td><td>SET NX EXå‘½ä»¤</td><td>æ€§èƒ½å¥½ã€æ”¯æŒè¿‡æœŸ</td><td>å¯èƒ½å‡ºç°é”ä¸¢å¤±</td><td>ä¸€èˆ¬ä¸šåŠ¡åœºæ™¯</td></tr><tr><td>ZooKeeperä¸´æ—¶èŠ‚ç‚¹</td><td>ä¸´æ—¶æœ‰åºèŠ‚ç‚¹</td><td>å¼ºä¸€è‡´æ€§ã€è‡ªåŠ¨é‡Šæ”¾</td><td>æ€§èƒ½ç›¸å¯¹è¾ƒå·®</td><td>å¼ºä¸€è‡´æ€§è¦æ±‚</td></tr><tr><td>Etcd</td><td>åŸºäºRaftç®—æ³•çš„åˆ†å¸ƒå¼é”</td><td>å¼ºä¸€è‡´æ€§ã€é«˜å¯ç”¨</td><td>ä¾èµ–é¢å¤–ç»„ä»¶</td><td>å¾®æœåŠ¡æ¶æ„</td></tr></tbody></table><p><strong>å„æ–¹æ¡ˆè¯¦ç»†å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Redis</th><th>ZooKeeper</th><th>æ•°æ®åº“</th><th>Etcd</th></tr></thead><tbody><tr><td>æ€§èƒ½</td><td>é«˜</td><td>ä¸­</td><td>ä½</td><td>ä¸­</td></tr><tr><td>å¯é æ€§</td><td>ä¸­</td><td>é«˜</td><td>ä¸­</td><td>é«˜</td></tr><tr><td>å¤æ‚åº¦</td><td>ä½</td><td>ä¸­</td><td>ä½</td><td>ä¸­</td></tr><tr><td>è¿ç»´æˆæœ¬</td><td>ä½</td><td>ä¸­</td><td>ä½</td><td>ä¸­</td></tr></tbody></table><h3 id="_4-åˆ†å¸ƒå¼idç”Ÿæˆæ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_4-åˆ†å¸ƒå¼idç”Ÿæˆæ–¹æ¡ˆ"><span>4. åˆ†å¸ƒå¼IDç”Ÿæˆæ–¹æ¡ˆï¼Ÿ</span></a></h3><p><strong>IDç”Ÿæˆæ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>æ–¹æ¡ˆ</th><th>å®ç°åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>UUID</td><td>éšæœºç”Ÿæˆ128ä½æ ‡è¯†ç¬¦</td><td>ç®€å•ã€æœ¬åœ°ç”Ÿæˆ</td><td>æ— åºã€å ç”¨ç©ºé—´å¤§</td><td>å¯¹é¡ºåºæ— è¦æ±‚çš„åœºæ™¯</td></tr><tr><td>æ•°æ®åº“è‡ªå¢ID</td><td>æ•°æ®åº“AUTO_INCREMENT</td><td>ç®€å•ã€æœ‰åº</td><td>æ€§èƒ½ç“¶é¢ˆã€å•ç‚¹æ•…éšœ</td><td>å•æœºåº”ç”¨</td></tr><tr><td>å·æ®µæ¨¡å¼</td><td>æ‰¹é‡è·å–IDæ®µ</td><td>é«˜æ€§èƒ½ã€å‡å°‘æ•°æ®åº“è®¿é—®</td><td>æµªè´¹IDã€é‡å¯ä¸¢å¤±</td><td>é«˜å¹¶å‘åœºæ™¯</td></tr><tr><td>é›ªèŠ±ç®—æ³•</td><td>æ—¶é—´æˆ³+æœºå™¨ID+åºåˆ—å·</td><td>æœ‰åºã€é«˜æ€§èƒ½ã€åˆ†å¸ƒå¼</td><td>æ—¶é’Ÿå›æ‹¨é—®é¢˜</td><td>åˆ†å¸ƒå¼é«˜å¹¶å‘</td></tr><tr><td>ç¾å›¢Leaf</td><td>å·æ®µæ¨¡å¼+é›ªèŠ±ç®—æ³•ä¼˜åŒ–</td><td>é«˜å¯ç”¨ã€æ€§èƒ½å¥½</td><td>å¤æ‚åº¦è¾ƒé«˜</td><td>å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿ</td></tr><tr><td>ç™¾åº¦UidGenerator</td><td>é›ªèŠ±ç®—æ³•ä¼˜åŒ–</td><td>è§£å†³æ—¶é’Ÿå›æ‹¨ã€é«˜æ€§èƒ½</td><td>ä¾èµ–æœºå™¨æ—¶é—´</td><td>å¯¹é¡ºåºæ€§è¦æ±‚é«˜çš„åœºæ™¯</td></tr></tbody></table><p><strong>é›ªèŠ±ç®—æ³•è¯¦è§£ï¼š</strong></p><table><thead><tr><th>ç»„æˆéƒ¨åˆ†</th><th>ä½æ•°</th><th>è¯´æ˜</th><th>å–å€¼èŒƒå›´</th></tr></thead><tbody><tr><td>ç¬¦å·ä½</td><td>1ä½</td><td>å›ºå®šä¸º0</td><td>0</td></tr><tr><td>æ—¶é—´æˆ³</td><td>41ä½</td><td>ç›¸å¯¹äºæŸä¸ªèµ·å§‹æ—¶é—´çš„æ¯«ç§’æ•°</td><td>69å¹´</td></tr><tr><td>æœºå™¨ID</td><td>10ä½</td><td>æ•°æ®ä¸­å¿ƒID(5ä½)+æœºå™¨ID(5ä½)</td><td>1024å°æœºå™¨</td></tr><tr><td>åºåˆ—å·</td><td>12ä½</td><td>æ¯«ç§’å†…çš„åºåˆ—å·</td><td>4096ä¸ªåºåˆ—å·</td></tr></tbody></table><p><strong>é›ªèŠ±ç®—æ³•æ—¶é’Ÿå›æ‹¨é—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼š</strong></p><p><strong>é—®é¢˜äº§ç”ŸåŸå› ï¼š</strong></p><ul><li>ç³»ç»Ÿæ—¶é’Ÿè¢«äººä¸ºè°ƒæ•´ï¼ˆå‘åè°ƒæ•´ï¼‰</li><li>NTPæ—¶é—´åŒæ­¥å¯¼è‡´æ—¶é’Ÿå›é€€</li><li>è™šæ‹Ÿæœºæ—¶é’Ÿæ¼‚ç§»</li><li>é—°ç§’è°ƒæ•´</li></ul><p><strong>è§£å†³æ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>è§£å†³æ–¹æ¡ˆ</th><th>å®ç°åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æŠ›å‡ºå¼‚å¸¸</td><td>æ£€æµ‹åˆ°å›æ‹¨ç«‹å³æŠ›å¼‚å¸¸</td><td>ç®€å•ï¼Œä¿è¯IDä¸é‡å¤</td><td>æœåŠ¡ä¸å¯ç”¨</td><td>å¯¹ä¸€è‡´æ€§è¦æ±‚æé«˜</td></tr><tr><td>ç­‰å¾…æ—¶é’Ÿè¿½ä¸Š</td><td>é˜»å¡ç­‰å¾…ç›´åˆ°æ—¶é’Ÿè¶…è¿‡ä¸Šæ¬¡æ—¶é—´æˆ³</td><td>IDç»å¯¹ä¸é‡å¤</td><td>å¯èƒ½é•¿æ—¶é—´é˜»å¡</td><td>å›æ‹¨æ—¶é—´è¾ƒçŸ­</td></tr><tr><td>ä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ</td><td>å›æ‹¨æ—¶åˆ‡æ¢åˆ°å…¶ä»–IDç”Ÿæˆæ–¹å¼</td><td>æœåŠ¡æŒç»­å¯ç”¨</td><td>éœ€è¦ç»´æŠ¤å¤šå¥—æ–¹æ¡ˆ</td><td>é«˜å¯ç”¨è¦æ±‚</td></tr><tr><td>å®¹å¿å°å¹…å›æ‹¨</td><td>å…è®¸å°èŒƒå›´ï¼ˆå¦‚5ç§’å†…ï¼‰å›æ‹¨</td><td>æ€§èƒ½å¥½ï¼Œå¯ç”¨æ€§é«˜</td><td>å¯èƒ½äº§ç”Ÿé‡å¤ID</td><td>ä¸€èˆ¬ä¸šåŠ¡åœºæ™¯</td></tr><tr><td>æœºå™¨ä½æ‰©å±•</td><td>å¢åŠ æœºå™¨ä½ï¼Œå‡å°‘æ—¶é—´æˆ³ä½æ•°</td><td>å‡å°‘æ—¶é’Ÿä¾èµ–</td><td>IDé•¿åº¦å¯èƒ½å¢åŠ </td><td>é›†ç¾¤è§„æ¨¡å¤§</td></tr></tbody></table><p><strong>è¯¦ç»†å®ç°æ–¹æ¡ˆï¼š</strong></p><table><thead><tr><th>æ–¹æ¡ˆç±»å‹</th><th>å…·ä½“å®ç°</th><th>ä»£ç é€»è¾‘</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>å¼‚å¸¸å¤„ç†</td><td>æ£€æµ‹å½“å‰æ—¶é—´ &lt; ä¸Šæ¬¡æ—¶é—´ï¼ŒæŠ›TimeBackException</td><td>if(current &lt; lastTime) throw</td><td>éœ€è¦ä¸Šå±‚è°ƒç”¨å¤„ç†å¼‚å¸¸</td></tr><tr><td>è‡ªæ—‹ç­‰å¾…</td><td>whileå¾ªç¯ç­‰å¾…æ—¶é’Ÿè¿½ä¸Š</td><td>while(current &lt;= lastTime)</td><td>å¯èƒ½é•¿æ—¶é—´å ç”¨CPU</td></tr><tr><td>åºåˆ—å·é¢„ç•™</td><td>é¢„ç•™éƒ¨åˆ†åºåˆ—å·ç»™å›æ‹¨æ—¶ä½¿ç”¨</td><td>æ­£å¸¸æ—¶ä½¿ç”¨0-2047ï¼Œå›æ‹¨æ—¶ä½¿ç”¨2048-4095</td><td>éœ€è¦åˆç†åˆ†é…åºåˆ—å·ç©ºé—´</td></tr><tr><td>æ—¶é—´æˆ³ç¼“å­˜</td><td>ç¼“å­˜æœ€è¿‘çš„æ—¶é—´æˆ³ï¼Œå›æ‹¨æ—¶ä½¿ç”¨ç¼“å­˜å€¼</td><td>ç»´æŠ¤æ—¶é—´æˆ³é˜Ÿåˆ—</td><td>éœ€è¦è€ƒè™‘ç¼“å­˜å¤§å°å’Œè¿‡æœŸç­–ç•¥</td></tr></tbody></table><p><strong>æ–¹æ¡ˆé€‰æ‹©å»ºè®®ï¼š</strong></p><table><thead><tr><th>åœºæ™¯éœ€æ±‚</th><th>æ¨èæ–¹æ¡ˆ</th><th>åŸå› </th></tr></thead><tbody><tr><td>å¯¹æ€§èƒ½è¦æ±‚ä¸é«˜</td><td>UUID</td><td>å®ç°ç®€å•</td></tr><tr><td>éœ€è¦æœ‰åºID</td><td>é›ªèŠ±ç®—æ³•</td><td>è¶‹åŠ¿é€’å¢ã€æ€§èƒ½å¥½</td></tr><tr><td>è¶…é«˜å¹¶å‘</td><td>å·æ®µæ¨¡å¼</td><td>æ‰¹é‡è·å–ã€å‡å°‘ç«äº‰</td></tr><tr><td>å¯¹å¯ç”¨æ€§è¦æ±‚æé«˜</td><td>ç¾å›¢Leaf/ç™¾åº¦UidGenerator</td><td>åŒbufferã€è§£å†³æ—¶é’Ÿå›æ‹¨é—®é¢˜</td></tr></tbody></table><h3 id="_5-è´Ÿè½½å‡è¡¡ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_5-è´Ÿè½½å‡è¡¡ç®—æ³•"><span>5. è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Ÿ</span></a></h3><p><strong>è´Ÿè½½å‡è¡¡ç®—æ³•å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç®—æ³•</th><th>å®ç°åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>è½®è¯¢</td><td>ä¾æ¬¡åˆ†é…è¯·æ±‚åˆ°æ¯ä¸ªæœåŠ¡å™¨</td><td>ç®€å•ã€åˆ†å¸ƒå‡åŒ€</td><td>ä¸è€ƒè™‘æœåŠ¡å™¨æ€§èƒ½å·®å¼‚</td><td>æœåŠ¡å™¨æ€§èƒ½ç›¸è¿‘</td></tr><tr><td>åŠ æƒè½®è¯¢</td><td>æ ¹æ®æƒé‡åˆ†é…è¯·æ±‚</td><td>è€ƒè™‘æœåŠ¡å™¨æ€§èƒ½å·®å¼‚</td><td>é™æ€æƒé‡ã€ä¸èƒ½åŠ¨æ€è°ƒæ•´</td><td>æœåŠ¡å™¨æ€§èƒ½å·®å¼‚å·²çŸ¥</td></tr><tr><td>æœ€å°‘è¿æ¥</td><td>åˆ†é…åˆ°è¿æ¥æ•°æœ€å°‘çš„æœåŠ¡å™¨</td><td>è€ƒè™‘æœåŠ¡å™¨å½“å‰è´Ÿè½½</td><td>éœ€è¦ç»´æŠ¤è¿æ¥æ•°ç»Ÿè®¡</td><td>é•¿è¿æ¥åœºæ™¯</td></tr><tr><td>åŠ æƒæœ€å°‘è¿æ¥</td><td>ç»“åˆæƒé‡å’Œè¿æ¥æ•°</td><td>ç»¼åˆè€ƒè™‘æ€§èƒ½å’Œè´Ÿè½½</td><td>è®¡ç®—å¤æ‚åº¦é«˜</td><td>å¤æ‚è´Ÿè½½åœºæ™¯</td></tr><tr><td>éšæœº</td><td>éšæœºé€‰æ‹©æœåŠ¡å™¨</td><td>å®ç°ç®€å•</td><td>å¯èƒ½åˆ†å¸ƒä¸å‡åŒ€</td><td>æœåŠ¡å™¨æ•°é‡å¤š</td></tr><tr><td>åŠ æƒéšæœº</td><td>æ ¹æ®æƒé‡éšæœºé€‰æ‹©</td><td>ç®€å•ã€è€ƒè™‘æ€§èƒ½å·®å¼‚</td><td>çŸ­æœŸå¯èƒ½ä¸å‡åŒ€</td><td>ä¸€èˆ¬ä¸šåŠ¡åœºæ™¯</td></tr><tr><td>IP Hash</td><td>æ ¹æ®å®¢æˆ·ç«¯IPå“ˆå¸Œé€‰æ‹©</td><td>ç›¸åŒIPè®¿é—®åŒä¸€æœåŠ¡å™¨</td><td>å¯èƒ½è´Ÿè½½ä¸å‡</td><td>éœ€è¦ä¼šè¯ä¿æŒ</td></tr><tr><td>æœ€çŸ­å“åº”æ—¶é—´</td><td>é€‰æ‹©å“åº”æ—¶é—´æœ€çŸ­çš„æœåŠ¡å™¨</td><td>è€ƒè™‘æœåŠ¡å™¨å®é™…æ€§èƒ½</td><td>éœ€è¦ç›‘æ§å“åº”æ—¶é—´</td><td>å¯¹å»¶è¿Ÿæ•æ„Ÿçš„åº”ç”¨</td></tr></tbody></table><p><strong>ç®—æ³•é€‚ç”¨åœºæ™¯è¯¦è§£ï¼š</strong></p><table><thead><tr><th>ä¸šåŠ¡ç‰¹ç‚¹</th><th>æ¨èç®—æ³•</th><th>åŸå› </th></tr></thead><tbody><tr><td>æ— çŠ¶æ€æœåŠ¡</td><td>è½®è¯¢/éšæœº</td><td>ç®€å•é«˜æ•ˆï¼Œåˆ†å¸ƒå‡åŒ€</td></tr><tr><td>æœ‰çŠ¶æ€æœåŠ¡</td><td>IP Hash</td><td>ä¿è¯åŒä¸€ç”¨æˆ·è®¿é—®åŒä¸€æœåŠ¡å™¨</td></tr><tr><td>æœåŠ¡å™¨æ€§èƒ½å·®å¼‚å¤§</td><td>åŠ æƒè½®è¯¢/åŠ æƒéšæœº</td><td>æ ¹æ®æ€§èƒ½åˆ†é…ä¸åŒæƒé‡</td></tr><tr><td>é•¿è¿æ¥åœºæ™¯</td><td>æœ€å°‘è¿æ¥</td><td>é¿å…è¿æ¥è¿‡åº¦é›†ä¸­</td></tr><tr><td>å¯¹å»¶è¿Ÿæ•æ„Ÿ</td><td>æœ€çŸ­å“åº”æ—¶é—´</td><td>é€‰æ‹©å“åº”æœ€å¿«çš„æœåŠ¡å™¨</td></tr><tr><td>é«˜å¹¶å‘åœºæ™¯</td><td>ä¸€è‡´æ€§å“ˆå¸Œ</td><td>é¿å…æœåŠ¡å™¨å˜åŒ–æ—¶å¤§é‡è¯·æ±‚é‡æ–°åˆ†é…</td></tr></tbody></table><ul><li>ä¸€è‡´æ€§å“ˆå¸Œï¼šä¸€è‡´æ€§å“ˆå¸Œæ˜¯ä¸€ç§åˆ†å¸ƒå¼å“ˆå¸Œç®—æ³•ï¼Œä¸»è¦ç”¨äºå°†æ•°æ®å‡åŒ€ä¸”ç¨³å®šåœ°åˆ†å¸ƒåˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œå‡å°‘èŠ‚ç‚¹å˜åŠ¨æ—¶æ•°æ®é‡æ–°åˆ†é…çš„å¼€é”€ã€‚å°†æ‰€æœ‰çš„èŠ‚ç‚¹å’Œæ•°æ®éƒ½æ˜ å°„åˆ°ä¸€ä¸ªè™šæ‹Ÿçš„å“ˆå¸Œç¯ï¼ˆ0 åˆ° 2Â³Â²-1 çš„èŒƒå›´ï¼‰ä¸Šã€‚æ•°æ®æ ¹æ®å“ˆå¸Œå€¼é¡ºæ—¶é’ˆæ‰¾åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¹¶å­˜å‚¨åœ¨è¯¥èŠ‚ç‚¹ä¸Šã€‚å½“æ–°å¢æˆ–ç§»é™¤èŠ‚ç‚¹æ—¶ï¼Œä»…éœ€é‡æ–°åˆ†é…è¯¥èŠ‚ç‚¹é¡ºæ—¶é’ˆé‚»å±…èŒƒå›´å†…çš„æ•°æ®ï¼Œé¿å…äº†æ•°æ®å¤§è§„æ¨¡è¿ç§»ï¼Œæé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§å’Œç¨³å®šæ€§ã€‚</li></ul><p><strong>å®ç°å±‚çº§å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>å®ç°å±‚çº§</th><th>ç‰¹ç‚¹</th><th>ä»£è¡¨äº§å“</th><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th></tr></thead><tbody><tr><td>4å±‚è´Ÿè½½å‡è¡¡</td><td>åŸºäºIPå’Œç«¯å£è¿›è¡Œè´Ÿè½½å‡è¡¡</td><td>LVSã€F5</td><td>æ€§èƒ½é«˜ã€é€æ˜</td><td>åŠŸèƒ½ç›¸å¯¹ç®€å•</td></tr><tr><td>7å±‚è´Ÿè½½å‡è¡¡</td><td>åŸºäºåº”ç”¨å±‚å†…å®¹è¿›è¡Œè´Ÿè½½å‡è¡¡</td><td>Nginxã€HAProxy</td><td>åŠŸèƒ½ä¸°å¯Œã€çµæ´»</td><td>æ€§èƒ½ç›¸å¯¹è¾ƒä½</td></tr><tr><td>DNSè´Ÿè½½å‡è¡¡</td><td>é€šè¿‡DNSè§£æå®ç°è´Ÿè½½å‡è¡¡</td><td>äº‘è§£æ</td><td>ç®€å•ã€åˆ†å¸ƒå¼</td><td>ç²¾åº¦ä¸é«˜ã€ç¼“å­˜é—®é¢˜</td></tr></tbody></table><h2 id="å¾®æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#å¾®æœåŠ¡"><span>å¾®æœåŠ¡</span></a></h2><h3 id="_1-å¾®æœåŠ¡çš„ä¼˜åŠ¿å’ŒæŒ‘æˆ˜" tabindex="-1"><a class="header-anchor" href="#_1-å¾®æœåŠ¡çš„ä¼˜åŠ¿å’ŒæŒ‘æˆ˜"><span>1. å¾®æœåŠ¡çš„ä¼˜åŠ¿å’ŒæŒ‘æˆ˜ï¼Ÿ</span></a></h3><p><strong>å¾®æœåŠ¡å®šä¹‰ï¼š</strong> å°†å•ä¸€åº”ç”¨ç¨‹åºæ‹†åˆ†ä¸ºä¸€ç»„å°å‹æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡è¿è¡Œåœ¨ç‹¬ç«‹è¿›ç¨‹ä¸­ï¼Œé€šè¿‡è½»é‡çº§é€šä¿¡æœºåˆ¶åä½œã€‚</p><p><strong>ä¼˜åŠ¿ vs æŒ‘æˆ˜å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç»´åº¦</th><th>ä¼˜åŠ¿</th><th>æŒ‘æˆ˜</th></tr></thead><tbody><tr><td>å¼€å‘ç»´æŠ¤</td><td>ä»£ç åº“å°ã€å›¢é˜Ÿç‹¬ç«‹å¼€å‘ã€æŠ€æœ¯æ ˆçµæ´»</td><td>æœåŠ¡é—´åè°ƒå¤æ‚ã€ç‰ˆæœ¬ç®¡ç†å›°éš¾</td></tr><tr><td>éƒ¨ç½²è¿ç»´</td><td>ç‹¬ç«‹éƒ¨ç½²ã€æ•…éšœéš”ç¦»ã€å¼¹æ€§ä¼¸ç¼©</td><td>è¿ç»´å¤æ‚åº¦é«˜ã€ç›‘æ§å›°éš¾</td></tr><tr><td>æ€§èƒ½æ‰©å±•</td><td>æŒ‰éœ€æ‰©å±•ã€èµ„æºåˆ©ç”¨ç‡é«˜</td><td>ç½‘ç»œå»¶è¿Ÿã€åˆ†å¸ƒå¼äº‹åŠ¡å¤æ‚</td></tr><tr><td>å›¢é˜Ÿåä½œ</td><td>å›¢é˜Ÿè‡ªæ²»ã€å¹¶è¡Œå¼€å‘</td><td>æœåŠ¡è¾¹ç•Œåˆ’åˆ†éš¾ã€å›¢é˜Ÿæ²Ÿé€šæˆæœ¬é«˜</td></tr><tr><td>ç³»ç»Ÿç¨³å®šæ€§</td><td>å•ç‚¹æ•…éšœå½±å“èŒƒå›´å°</td><td>æœåŠ¡é—´ä¾èµ–å¤æ‚ã€è°ƒè¯•å›°éš¾</td></tr></tbody></table><p><strong>é€‚ç”¨åœºæ™¯åˆ¤æ–­ï¼š</strong></p><table><thead><tr><th>é¡¹ç›®ç‰¹å¾</th><th>å•ä½“æ¶æ„</th><th>å¾®æœåŠ¡æ¶æ„</th><th>æ¨èç†ç”±</th></tr></thead><tbody><tr><td>å›¢é˜Ÿè§„æ¨¡</td><td>&lt; 10äºº</td><td>&gt; 10äºº</td><td>å¾®æœåŠ¡éœ€è¦è¶³å¤Ÿçš„å›¢é˜Ÿæ”¯æ’‘</td></tr><tr><td>ä¸šåŠ¡å¤æ‚åº¦</td><td>ç®€å•</td><td>å¤æ‚</td><td>å¤æ‚ä¸šåŠ¡é€‚åˆæ‹†åˆ†ç‹¬ç«‹ç»´æŠ¤</td></tr><tr><td>æŠ€æœ¯æ ˆè¦æ±‚</td><td>ç»Ÿä¸€</td><td>å¤šæ ·åŒ–</td><td>å¾®æœåŠ¡æ”¯æŒä¸åŒæŠ€æœ¯æ ˆ</td></tr><tr><td>éƒ¨ç½²é¢‘ç‡</td><td>ä½</td><td>é«˜</td><td>å¾®æœåŠ¡æ”¯æŒç‹¬ç«‹å¿«é€Ÿéƒ¨ç½²</td></tr><tr><td>æ‰©å±•æ€§è¦æ±‚</td><td>ä¸€èˆ¬</td><td>é«˜</td><td>å¾®æœåŠ¡æ”¯æŒæŒ‰éœ€ç²¾ç¡®æ‰©å±•</td></tr></tbody></table><h3 id="_2-æœåŠ¡æ³¨å†Œä¸å‘ç°-åŸç†-å¸¸ç”¨ç»„ä»¶-æ¯”è¾ƒ" tabindex="-1"><a class="header-anchor" href="#_2-æœåŠ¡æ³¨å†Œä¸å‘ç°-åŸç†-å¸¸ç”¨ç»„ä»¶-æ¯”è¾ƒ"><span>2. æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼šåŸç†ï¼Ÿå¸¸ç”¨ç»„ä»¶ï¼Ÿæ¯”è¾ƒï¼Ÿ</span></a></h3><p><strong>æœåŠ¡å‘ç°åŸç†ï¼š</strong> è§£å†³å¾®æœåŠ¡ç¯å¢ƒä¸‹æœåŠ¡å®ä¾‹åŠ¨æ€å˜åŒ–æ—¶çš„ç›¸äº’å‘ç°å’Œè°ƒç”¨é—®é¢˜ã€‚</p><p><strong>å®ç°æ¨¡å¼å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>æ¨¡å¼</th><th>åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å®¢æˆ·ç«¯å‘ç°</td><td>å®¢æˆ·ç«¯æŸ¥è¯¢æ³¨å†Œä¸­å¿ƒè·å–æœåŠ¡å®ä¾‹åˆ—è¡¨</td><td>æ€§èƒ½å¥½ã€è´Ÿè½½å‡è¡¡çµæ´»</td><td>å®¢æˆ·ç«¯é€»è¾‘å¤æ‚ã€è¯­è¨€ç»‘å®š</td><td>æ€§èƒ½è¦æ±‚é«˜</td></tr><tr><td>æœåŠ¡ç«¯å‘ç°</td><td>é€šè¿‡è´Ÿè½½å‡è¡¡å™¨ä»£ç†è®¿é—®æœåŠ¡</td><td>å®¢æˆ·ç«¯ç®€å•ã€è¯­è¨€æ— å…³</td><td>è´Ÿè½½å‡è¡¡å™¨æˆä¸ºç“¶é¢ˆ</td><td>å¤šè¯­è¨€ç¯å¢ƒ</td></tr><tr><td>æœåŠ¡ç½‘æ ¼</td><td>åŸºç¡€è®¾æ–½å±‚å¤„ç†æœåŠ¡é€šä¿¡</td><td>ä¸šåŠ¡æ— æ„ŸçŸ¥ã€åŠŸèƒ½ä¸°å¯Œ</td><td>æ¶æ„å¤æ‚ã€æ€§èƒ½å¼€é”€</td><td>å¤§è§„æ¨¡å¾®æœåŠ¡</td></tr></tbody></table><p><strong>ä¸»æµç»„ä»¶å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç»„ä»¶</th><th>ç±»å‹</th><th>ä¸€è‡´æ€§ç®—æ³•</th><th>å¤šæ•°æ®ä¸­å¿ƒ</th><th>å¥åº·æ£€æŸ¥</th><th>è´Ÿè½½å‡è¡¡</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Eureka</td><td>AP</td><td>æ— </td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>å®¢æˆ·ç«¯</td><td>Spring Cloud</td></tr><tr><td>Consul</td><td>CP</td><td>Raft</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>å¤šè¯­è¨€ç¯å¢ƒ</td></tr><tr><td>Zookeeper</td><td>CP</td><td>ZAB</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>Dubboç”Ÿæ€</td></tr><tr><td>Nacos</td><td>AP/CP</td><td>Raft</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>é˜¿é‡Œäº‘ç”Ÿæ€</td></tr><tr><td>Etcd</td><td>CP</td><td>Raft</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>Kubernetes</td></tr></tbody></table><h3 id="_3-æœåŠ¡è°ƒç”¨-restful-api-å’Œ-rpc-dubbo-grpc-æ¯”è¾ƒ" tabindex="-1"><a class="header-anchor" href="#_3-æœåŠ¡è°ƒç”¨-restful-api-å’Œ-rpc-dubbo-grpc-æ¯”è¾ƒ"><span>3. æœåŠ¡è°ƒç”¨ï¼šRESTful API å’Œ RPC (Dubbo, gRPC)ï¼Ÿæ¯”è¾ƒï¼Ÿ</span></a></h3><p><strong>è°ƒç”¨æ–¹å¼å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>RESTful API</th><th>RPC (Dubbo)</th><th>RPC (gRPC)</th></tr></thead><tbody><tr><td>åè®®</td><td>HTTP/HTTPS</td><td>TCP/HTTP</td><td>HTTP/2</td></tr><tr><td>åºåˆ—åŒ–</td><td>JSON/XML</td><td>Hessian/Kryo</td><td>Protocol Buffers</td></tr><tr><td>æ€§èƒ½</td><td>ä¸­ç­‰</td><td>é«˜</td><td>é«˜</td></tr><tr><td>è·¨è¯­è¨€æ”¯æŒ</td><td>ä¼˜ç§€</td><td>Javaç”Ÿæ€</td><td>ä¼˜ç§€</td></tr><tr><td>å­¦ä¹ æˆæœ¬</td><td>ä½</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td></tr><tr><td>ç”Ÿæ€å®Œæ•´æ€§</td><td>ä¸°å¯Œ</td><td>Javaç”Ÿæ€ä¸°å¯Œ</td><td>å¿«é€Ÿå‘å±•ä¸­</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>WebæœåŠ¡ã€å¯¹å¤–API</td><td>Javaå¾®æœåŠ¡</td><td>å¤šè¯­è¨€å¾®æœåŠ¡</td></tr></tbody></table><p><strong>æŠ€æœ¯é€‰å‹å»ºè®®ï¼š</strong></p><table><thead><tr><th>åœºæ™¯éœ€æ±‚</th><th>æ¨èæ–¹æ¡ˆ</th><th>åŸå› </th></tr></thead><tbody><tr><td>å¯¹å¤–å¼€æ”¾API</td><td>RESTful API</td><td>æ ‡å‡†åŒ–ã€æ˜“äºé›†æˆ</td></tr><tr><td>å†…éƒ¨æœåŠ¡é«˜æ€§èƒ½è°ƒç”¨</td><td>Dubbo/gRPC</td><td>æ€§èƒ½å¥½ã€åŠŸèƒ½ä¸°å¯Œ</td></tr><tr><td>å¤šè¯­è¨€å›¢é˜Ÿ</td><td>gRPC</td><td>è·¨è¯­è¨€æ”¯æŒå¥½</td></tr><tr><td>Spring Booté¡¹ç›®</td><td>RESTful API</td><td>ç”Ÿæ€é›†æˆåº¦é«˜</td></tr><tr><td>å¤§æ•°æ®é‡ä¼ è¾“</td><td>gRPC</td><td>äºŒè¿›åˆ¶åºåˆ—åŒ–ã€HTTP/2åè®®</td></tr><tr><td>å¿«é€ŸåŸå‹å¼€å‘</td><td>RESTful API</td><td>å¼€å‘ç®€å•ã€è°ƒè¯•æ–¹ä¾¿</td></tr></tbody></table><h3 id="_4-æœåŠ¡ç½‘å…³-api-gateway-ä½œç”¨-å¸¸ç”¨ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#_4-æœåŠ¡ç½‘å…³-api-gateway-ä½œç”¨-å¸¸ç”¨ç»„ä»¶"><span>4. æœåŠ¡ç½‘å…³ (API Gateway)ï¼šä½œç”¨ï¼Ÿå¸¸ç”¨ç»„ä»¶ï¼Ÿ</span></a></h3><p><strong>APIç½‘å…³ä½œç”¨ï¼š</strong> ä½œä¸ºæ‰€æœ‰å®¢æˆ·ç«¯è¯·æ±‚çš„ç»Ÿä¸€å…¥å£ï¼Œæä¾›è·¯ç”±ã€è®¤è¯ã€é™æµã€ç›‘æ§ç­‰åŠŸèƒ½ã€‚</p><p><strong>æ ¸å¿ƒåŠŸèƒ½å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>åŠŸèƒ½ç±»åˆ«</th><th>å…·ä½“åŠŸèƒ½</th><th>ä»·å€¼</th><th>å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td>è¯·æ±‚è·¯ç”±</td><td>åŠ¨æ€è·¯ç”±ã€è´Ÿè½½å‡è¡¡</td><td>è¯·æ±‚åˆ†å‘åˆ°æ­£ç¡®æœåŠ¡</td><td>è§„åˆ™é…ç½®ã€æœåŠ¡å‘ç°</td></tr><tr><td>å®‰å…¨è®¤è¯</td><td>èº«ä»½éªŒè¯ã€æƒé™æ§åˆ¶</td><td>ç»Ÿä¸€å®‰å…¨ç­–ç•¥</td><td>JWTã€OAuth2</td></tr><tr><td>æµé‡æ§åˆ¶</td><td>é™æµã€ç†”æ–­ã€é™çº§</td><td>ä¿æŠ¤åç«¯æœåŠ¡</td><td>ä»¤ç‰Œæ¡¶ã€ç†”æ–­å™¨</td></tr><tr><td>åè®®è½¬æ¢</td><td>HTTP/WebSocketç­‰</td><td>åè®®ç»Ÿä¸€</td><td>åè®®é€‚é…å™¨</td></tr><tr><td>ç›‘æ§è¿ç»´</td><td>æ—¥å¿—ã€ç›‘æ§ã€é“¾è·¯è¿½è¸ª</td><td>å¯è§‚æµ‹æ€§</td><td>APMé›†æˆ</td></tr></tbody></table><p><strong>ä¸»æµç½‘å…³å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç½‘å…³</th><th>ç±»å‹</th><th>æ€§èƒ½</th><th>åŠŸèƒ½ä¸°å¯Œåº¦</th><th>ç”Ÿæ€é›†æˆ</th><th>å­¦ä¹ æˆæœ¬</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Spring Cloud Gateway</td><td>å“åº”å¼</td><td>é«˜</td><td>ä¸°å¯Œ</td><td>Spring</td><td>ä¸­ç­‰</td><td>Spring Cloudé¡¹ç›®</td></tr><tr><td>Zuul</td><td>é˜»å¡å¼</td><td>ä¸­</td><td>åŸºç¡€</td><td>Spring</td><td>ä½</td><td>ç®€å•åœºæ™¯</td></tr><tr><td>Kong</td><td>é«˜æ€§èƒ½</td><td>å¾ˆé«˜</td><td>æä¸°å¯Œ</td><td>å¼€æ”¾</td><td>é«˜</td><td>ä¼ä¸šçº§åº”ç”¨</td></tr><tr><td>Nginx Plus</td><td>åå‘ä»£ç†</td><td>æé«˜</td><td>ä¸°å¯Œ</td><td>å¹¿æ³›</td><td>ä¸­ç­‰</td><td>é«˜å¹¶å‘åœºæ™¯</td></tr><tr><td>Envoy</td><td>ä»£ç†</td><td>é«˜</td><td>ä¸°å¯Œ</td><td>äº‘åŸç”Ÿ</td><td>é«˜</td><td>æœåŠ¡ç½‘æ ¼</td></tr></tbody></table><h3 id="_5-é…ç½®ä¸­å¿ƒ-ä½œç”¨-å¸¸ç”¨ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#_5-é…ç½®ä¸­å¿ƒ-ä½œç”¨-å¸¸ç”¨ç»„ä»¶"><span>5. é…ç½®ä¸­å¿ƒï¼šä½œç”¨ï¼Ÿå¸¸ç”¨ç»„ä»¶ï¼Ÿ</span></a></h3><p><strong>é…ç½®ä¸­å¿ƒä»·å€¼ï¼š</strong> é›†ä¸­ç®¡ç†å¾®æœåŠ¡é…ç½®ï¼Œæ”¯æŒåŠ¨æ€æ›´æ–°ï¼Œé¿å…é‡å¯æœåŠ¡ã€‚</p><p><strong>æ ¸å¿ƒèƒ½åŠ›å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>èƒ½åŠ›</th><th>ä¼ ç»Ÿé…ç½®æ–‡ä»¶</th><th>é…ç½®ä¸­å¿ƒ</th><th>æå‡æ•ˆæœ</th></tr></thead><tbody><tr><td>é…ç½®ç®¡ç†</td><td>æ•£è½åœ¨å„ä¸ªæœåŠ¡</td><td>é›†ä¸­ç»Ÿä¸€ç®¡ç†</td><td>ç®¡ç†æ•ˆç‡æå‡90%</td></tr><tr><td>åŠ¨æ€æ›´æ–°</td><td>éœ€è¦é‡å¯æœåŠ¡</td><td>å®æ—¶æ¨é€æ›´æ–°</td><td>å˜æ›´é€Ÿåº¦æå‡10å€</td></tr><tr><td>ç¯å¢ƒéš”ç¦»</td><td>æ‰‹åŠ¨ç»´æŠ¤å¤šå¥—é…ç½®</td><td>è‡ªåŠ¨ç¯å¢ƒåŒºåˆ†</td><td>é”™è¯¯ç‡é™ä½80%</td></tr><tr><td>æƒé™æ§åˆ¶</td><td>æ— æƒé™æ§åˆ¶</td><td>ç»†ç²’åº¦æƒé™ç®¡ç†</td><td>å®‰å…¨æ€§å¤§å¹…æå‡</td></tr><tr><td>ç‰ˆæœ¬ç®¡ç†</td><td>æ‰‹åŠ¨å¤‡ä»½</td><td>è‡ªåŠ¨ç‰ˆæœ¬æ§åˆ¶å’Œå›æ»š</td><td>å¯é æ€§æå‡</td></tr></tbody></table><p><strong>ä¸»æµé…ç½®ä¸­å¿ƒå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç»„ä»¶</th><th>æ•°æ®å­˜å‚¨</th><th>åŠ¨æ€æ¨é€</th><th>å¤šç¯å¢ƒ</th><th>æƒé™æ§åˆ¶</th><th>å¯è§†åŒ–ç•Œé¢</th><th>ç”Ÿæ€é›†æˆ</th></tr></thead><tbody><tr><td>Spring Cloud Config</td><td>Git/SVN</td><td>éœ€ç»“åˆBus</td><td>æ”¯æŒ</td><td>åŸºç¡€</td><td>åŸºç¡€</td><td>Springç”Ÿæ€</td></tr><tr><td>Apollo</td><td>MySQL</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>å®Œå–„</td><td>ä¼˜ç§€</td><td>å¤šè¯­è¨€</td></tr><tr><td>Nacos</td><td>å†…ç½®æ•°æ®åº“</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¼˜ç§€</td><td>é˜¿é‡Œäº‘ç”Ÿæ€</td></tr><tr><td>Consul</td><td>KVå­˜å‚¨</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>åŸºç¡€</td><td>HashiCorpç”Ÿæ€</td></tr></tbody></table><h3 id="_6-æœåŠ¡å®¹é”™-ç†”æ–­ã€é™çº§ã€é™æµ-ä»¤ç‰Œæ¡¶ã€æ¼æ¡¶-sentinelå’Œhystrix" tabindex="-1"><a class="header-anchor" href="#_6-æœåŠ¡å®¹é”™-ç†”æ–­ã€é™çº§ã€é™æµ-ä»¤ç‰Œæ¡¶ã€æ¼æ¡¶-sentinelå’Œhystrix"><span>6. æœåŠ¡å®¹é”™ï¼šç†”æ–­ã€é™çº§ã€é™æµ (ä»¤ç‰Œæ¡¶ã€æ¼æ¡¶)ï¼ŒSentinelå’ŒHystrixï¼Ÿ</span></a></h3><p><strong>å®¹é”™æœºåˆ¶å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>æœºåˆ¶</th><th>ç›®çš„</th><th>è§¦å‘æ¡ä»¶</th><th>æ¢å¤æœºåˆ¶</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ç†”æ–­</td><td>é¿å…è¿é”æ•…éšœ</td><td>é”™è¯¯ç‡/å“åº”æ—¶é—´è¶…é˜ˆå€¼</td><td>åŠå¼€çŠ¶æ€æ¢æµ‹</td><td>ä¾èµ–æœåŠ¡ä¸ç¨³å®š</td></tr><tr><td>é™çº§</td><td>ä¿è¯æ ¸å¿ƒåŠŸèƒ½å¯ç”¨</td><td>ç³»ç»Ÿè´Ÿè½½è¿‡é«˜</td><td>æ‰‹åŠ¨æˆ–è‡ªåŠ¨æ¢å¤</td><td>éæ ¸å¿ƒåŠŸèƒ½å¯ç‰ºç‰²</td></tr><tr><td>é™æµ</td><td>ä¿æŠ¤ç³»ç»Ÿä¸è¢«å‹å®</td><td>è¯·æ±‚é‡è¶…è¿‡ç³»ç»Ÿå¤„ç†èƒ½åŠ›</td><td>æ‹’ç»æˆ–æ’é˜Ÿç­‰å¾…</td><td>é«˜å¹¶å‘åœºæ™¯</td></tr></tbody></table><p><strong>é™æµç®—æ³•å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç®—æ³•</th><th>åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ä»¤ç‰Œæ¡¶</td><td>å›ºå®šé€Ÿç‡äº§ç”Ÿä»¤ç‰Œï¼Œè¯·æ±‚æ¶ˆè€—ä»¤ç‰Œ</td><td>å…è®¸çªå‘æµé‡</td><td>å®ç°ç›¸å¯¹å¤æ‚</td><td>å…è®¸çªå‘çš„ä¸šåŠ¡åœºæ™¯</td></tr><tr><td>æ¼æ¡¶</td><td>è¯·æ±‚ä»¥å›ºå®šé€Ÿç‡å¤„ç†</td><td>æµé‡å¹³æ»‘</td><td>ä¸èƒ½å¤„ç†çªå‘æµé‡</td><td>éœ€è¦å¹³æ»‘å¤„ç†çš„åœºæ™¯</td></tr><tr><td>å›ºå®šçª—å£</td><td>å›ºå®šæ—¶é—´çª—å£å†…é™åˆ¶è¯·æ±‚æ•°é‡</td><td>å®ç°ç®€å•</td><td>ä¸´ç•Œé—®é¢˜</td><td>ç®€å•é™æµåœºæ™¯</td></tr><tr><td>æ»‘åŠ¨çª—å£</td><td>åŠ¨æ€æ—¶é—´çª—å£ç»Ÿè®¡</td><td>æ›´ç²¾ç¡®çš„é™æµ</td><td>å†…å­˜å ç”¨å¤§</td><td>ç²¾ç¡®é™æµéœ€æ±‚</td></tr></tbody></table><p><strong>Sentinel vs Hystrixï¼š</strong></p><table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Sentinel</th><th>Hystrix</th></tr></thead><tbody><tr><td>å¼€å‘çŠ¶æ€</td><td>æ´»è·ƒå¼€å‘</td><td>åœæ­¢ç»´æŠ¤</td></tr><tr><td>æ€§èƒ½</td><td>æ›´ä¼˜</td><td>è¾ƒå¥½</td></tr><tr><td>åŠŸèƒ½ä¸°å¯Œåº¦</td><td>å…¨é¢ï¼ˆç†”æ–­+é™æµ+é™çº§+ç³»ç»Ÿä¿æŠ¤ï¼‰</td><td>ä¸»è¦ä¸“æ³¨ç†”æ–­é™çº§</td></tr><tr><td>æ§åˆ¶å°</td><td>åŠŸèƒ½å¼ºå¤§çš„å®æ—¶ç›‘æ§</td><td>åŸºç¡€ç›‘æ§</td></tr><tr><td>è§„åˆ™é…ç½®</td><td>æ”¯æŒå¤šç§æ•°æ®æºåŠ¨æ€é…ç½®</td><td>ä¸»è¦åŸºäºæ³¨è§£å’Œé…ç½®æ–‡ä»¶</td></tr><tr><td>ç”Ÿæ€é›†æˆ</td><td>Spring Cloud Alibaba</td><td>Spring Cloud Netflix</td></tr><tr><td>å­¦ä¹ æˆæœ¬</td><td>ä¸­ç­‰</td><td>è¾ƒä½</td></tr></tbody></table><h3 id="_7-é“¾è·¯è¿½è¸ª-ç›®çš„-åŸç†-å¸¸ç”¨ç»„ä»¶-zipkin-skywalking" tabindex="-1"><a class="header-anchor" href="#_7-é“¾è·¯è¿½è¸ª-ç›®çš„-åŸç†-å¸¸ç”¨ç»„ä»¶-zipkin-skywalking"><span>7. é“¾è·¯è¿½è¸ªï¼šç›®çš„ï¼ŸåŸç†ï¼Ÿå¸¸ç”¨ç»„ä»¶ (Zipkin, SkyWalking)ï¼Ÿ</span></a></h3><p><strong>é“¾è·¯è¿½è¸ªç›®çš„ï¼š</strong> åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è¿½è¸ªè¯·æ±‚çš„å®Œæ•´è°ƒç”¨é“¾è·¯ï¼Œå¿«é€Ÿå®šä½æ€§èƒ½ç“¶é¢ˆå’Œæ•…éšœæ ¹å› ã€‚</p><p><strong>æ ¸å¿ƒæ¦‚å¿µï¼š</strong></p><table><thead><tr><th>æ¦‚å¿µ</th><th>å®šä¹‰</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>Trace</td><td>ä¸€æ¬¡å®Œæ•´çš„è¯·æ±‚è°ƒç”¨é“¾è·¯</td><td>ä»£è¡¨ä¸€æ¬¡ä¸šåŠ¡è¯·æ±‚çš„å…¨é“¾è·¯</td></tr><tr><td>Span</td><td>é“¾è·¯ä¸­çš„ä¸€ä¸ªæ“ä½œå•å…ƒ</td><td>ä»£è¡¨ä¸€æ¬¡æœåŠ¡è°ƒç”¨æˆ–æ“ä½œ</td></tr><tr><td>SpanId</td><td>Spançš„å”¯ä¸€æ ‡è¯†</td><td>æ ‡è¯†å…·ä½“çš„æ“ä½œå•å…ƒ</td></tr><tr><td>TraceId</td><td>Traceçš„å”¯ä¸€æ ‡è¯†</td><td>ä¸²è”æ•´ä¸ªè°ƒç”¨é“¾è·¯</td></tr><tr><td>é‡‡æ ·ç‡</td><td>é‡‡é›†é“¾è·¯æ•°æ®çš„æ¯”ä¾‹</td><td>å¹³è¡¡æ€§èƒ½å’Œå¯è§‚æµ‹æ€§</td></tr></tbody></table><p><strong>å®ç°åŸç†ï¼š</strong></p><ol><li><strong>åŸ‹ç‚¹æ”¶é›†</strong>ï¼šåœ¨åº”ç”¨ä¸­æ’å…¥è¿½è¸ªä»£ç æ”¶é›†è°ƒç”¨ä¿¡æ¯</li><li><strong>ä¼ é€’TraceId</strong>ï¼šé€šè¿‡HTTPå¤´æˆ–RPCä¸Šä¸‹æ–‡ä¼ é€’è¿½è¸ªæ ‡è¯†</li><li><strong>æ•°æ®ä¸ŠæŠ¥</strong>ï¼šå¼‚æ­¥ä¸ŠæŠ¥é“¾è·¯æ•°æ®åˆ°è¿½è¸ªç³»ç»Ÿ</li><li><strong>å­˜å‚¨åˆ†æ</strong>ï¼šå­˜å‚¨å¹¶åˆ†æé“¾è·¯æ•°æ®ï¼Œæä¾›æŸ¥è¯¢ç•Œé¢</li></ol><p><strong>ä¸»æµç»„ä»¶å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç»„ä»¶</th><th>å¼€å‘è€…</th><th>è¯­è¨€æ”¯æŒ</th><th>å­˜å‚¨æ”¯æŒ</th><th>æ€§èƒ½å¼€é”€</th><th>ç•Œé¢å‹å¥½åº¦</th><th>ç”Ÿæ€é›†æˆ</th></tr></thead><tbody><tr><td>Zipkin</td><td>Twitter</td><td>å¤šè¯­è¨€</td><td>å¤šç§å­˜å‚¨åç«¯</td><td>ä½</td><td>ä¸€èˆ¬</td><td>å¹¿æ³›</td></tr><tr><td>SkyWalking</td><td>Apache</td><td>Javaä¸ºä¸»</td><td>ES/H2/MySQL</td><td>ä½</td><td>ä¼˜ç§€</td><td>Javaç”Ÿæ€</td></tr><tr><td>Jaeger</td><td>Uber</td><td>å¤šè¯­è¨€</td><td>å¤šç§å­˜å‚¨åç«¯</td><td>ä½</td><td>è‰¯å¥½</td><td>äº‘åŸç”Ÿ</td></tr><tr><td>Pinpoint</td><td>Naver</td><td>Java</td><td>HBase</td><td>ä¸­ç­‰</td><td>ä¼˜ç§€</td><td>Javaä¸“ç”¨</td></tr></tbody></table><p><strong>æŠ€æœ¯é€‰å‹å»ºè®®ï¼š</strong></p><table><thead><tr><th>åœºæ™¯éœ€æ±‚</th><th>æ¨èæ–¹æ¡ˆ</th><th>é€‰æ‹©ç†ç”±</th></tr></thead><tbody><tr><td>Javaå¾®æœåŠ¡</td><td>SkyWalking</td><td>æ— ä¾µå…¥ã€åŠŸèƒ½å…¨é¢ã€ç•Œé¢å‹å¥½</td></tr><tr><td>å¤šè¯­è¨€ç¯å¢ƒ</td><td>Zipkin/Jaeger</td><td>è¯­è¨€æ”¯æŒå¹¿æ³›</td></tr><tr><td>äº‘åŸç”Ÿæ¶æ„</td><td>Jaeger</td><td>CNCFé¡¹ç›®ï¼ŒK8sé›†æˆå¥½</td></tr><tr><td>æ€§èƒ½æ•æ„Ÿåº”ç”¨</td><td>è‡ªç ”æˆ–è½»é‡çº§æ–¹æ¡ˆ</td><td>å‡å°‘æ€§èƒ½å¼€é”€</td></tr><tr><td>å¤§æ•°æ®é‡åœºæ™¯</td><td>SkyWalking</td><td>æ”¯æŒé‡‡æ ·å’Œèšåˆåˆ†æ</td></tr><tr><td>å¿«é€Ÿä¸Šæ‰‹</td><td>Zipkin</td><td>ç®€å•æ˜“ç”¨ï¼Œç¤¾åŒºèµ„æºä¸°å¯Œ</td></tr></tbody></table><h3 id="_8-å¾®æœåŠ¡ä¸­çš„å¸¸è§æ¶æ„å’Œç»„ä»¶æœ‰å“ªäº›" tabindex="-1"><a class="header-anchor" href="#_8-å¾®æœåŠ¡ä¸­çš„å¸¸è§æ¶æ„å’Œç»„ä»¶æœ‰å“ªäº›"><span>8. å¾®æœåŠ¡ä¸­çš„å¸¸è§æ¶æ„å’Œç»„ä»¶æœ‰å“ªäº›ï¼Ÿ</span></a></h3><p><strong>å¾®æœåŠ¡æ¶æ„æ ¸å¿ƒç»„ä»¶åˆ†å±‚ï¼š</strong></p><table><thead><tr><th>ç»„ä»¶å±‚çº§</th><th>æ ¸å¿ƒç»„ä»¶</th><th>ä¸»è¦ä½œç”¨</th><th>ä»£è¡¨æŠ€æœ¯</th></tr></thead><tbody><tr><td>æ¥å…¥å±‚</td><td>APIç½‘å…³ã€è´Ÿè½½å‡è¡¡</td><td>æµé‡æ¥å…¥ã€è·¯ç”±åˆ†å‘</td><td>Spring Cloud Gatewayã€Kong</td></tr><tr><td>æ²»ç†å±‚</td><td>æœåŠ¡æ³¨å†Œå‘ç°ã€é…ç½®ä¸­å¿ƒ</td><td>æœåŠ¡ç®¡ç†ã€é…ç½®ç®¡ç†</td><td>Nacosã€Consulã€Eureka</td></tr><tr><td>é€šä¿¡å±‚</td><td>æœåŠ¡è°ƒç”¨ã€æ¶ˆæ¯é˜Ÿåˆ—</td><td>æœåŠ¡é—´é€šä¿¡</td><td>Feignã€Dubboã€RocketMQ</td></tr><tr><td>å®¹é”™å±‚</td><td>ç†”æ–­é™çº§ã€é™æµã€é‡è¯•</td><td>ç³»ç»Ÿä¿æŠ¤</td><td>Sentinelã€Hystrix</td></tr><tr><td>ç›‘æ§å±‚</td><td>é“¾è·¯è¿½è¸ªã€æŒ‡æ ‡ç›‘æ§ã€æ—¥å¿—æ”¶é›†</td><td>å¯è§‚æµ‹æ€§</td><td>SkyWalkingã€Prometheus</td></tr><tr><td>å®‰å…¨å±‚</td><td>è®¤è¯æˆæƒã€å¯†é’¥ç®¡ç†</td><td>å®‰å…¨ä¿éšœ</td><td>OAuth2ã€JWTã€Vault</td></tr></tbody></table><p><strong>æœåŠ¡æ³¨å†Œä¸å‘ç°ç»„ä»¶ï¼š</strong></p><table><thead><tr><th>ç»„ä»¶</th><th>æ¶æ„æ¨¡å¼</th><th>ä¸€è‡´æ€§</th><th>å¥åº·æ£€æŸ¥</th><th>è´Ÿè½½å‡è¡¡</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Eureka</td><td>AP</td><td>æœ€ç»ˆä¸€è‡´</td><td>æ”¯æŒ</td><td>å®¢æˆ·ç«¯</td><td>Spring Cloudç”Ÿæ€</td></tr><tr><td>Consul</td><td>CP</td><td>å¼ºä¸€è‡´</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>å¤šæ•°æ®ä¸­å¿ƒéƒ¨ç½²</td></tr><tr><td>Nacos</td><td>AP/CP</td><td>å¯é…ç½®</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>é˜¿é‡Œäº‘åŸç”Ÿåº”ç”¨</td></tr><tr><td>Zookeeper</td><td>CP</td><td>å¼ºä¸€è‡´</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>Dubboç”Ÿæ€</td></tr><tr><td>Etcd</td><td>CP</td><td>å¼ºä¸€è‡´</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>Kubernetes</td></tr></tbody></table><p><strong>APIç½‘å…³åŠŸèƒ½å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>åŠŸèƒ½ç±»åˆ«</th><th>Spring Cloud Gateway</th><th>Zuul</th><th>Kong</th><th>Nginx Plus</th></tr></thead><tbody><tr><td>æ€§èƒ½</td><td>é«˜ï¼ˆWebFluxå¼‚æ­¥ï¼‰</td><td>ä¸­ç­‰</td><td>æé«˜</td><td>æé«˜</td></tr><tr><td>è·¯ç”±è§„åˆ™</td><td>çµæ´»å¼ºå¤§</td><td>åŸºç¡€</td><td>æå…¶ä¸°å¯Œ</td><td>ä¸°å¯Œ</td></tr><tr><td>æ’ä»¶ç”Ÿæ€</td><td>Springç”Ÿæ€</td><td>æœ‰é™</td><td>æå…¶ä¸°å¯Œ</td><td>å•†ä¸šæ’ä»¶</td></tr><tr><td>é™æµç†”æ–­</td><td>ç»“åˆSentinel</td><td>åŸºç¡€</td><td>å†…ç½®</td><td>å†…ç½®</td></tr><tr><td>åè®®æ”¯æŒ</td><td>HTTP/WebSocket</td><td>HTTP</td><td>HTTP/TCPç­‰</td><td>å…¨åè®®</td></tr><tr><td>å­¦ä¹ æˆæœ¬</td><td>ä¸­ç­‰</td><td>ä½</td><td>é«˜</td><td>ä¸­ç­‰</td></tr></tbody></table><p><strong>æœåŠ¡è°ƒç”¨æ–¹å¼å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>è°ƒç”¨æ–¹å¼</th><th>åè®®</th><th>åºåˆ—åŒ–</th><th>æ€§èƒ½</th><th>è·¨è¯­è¨€æ”¯æŒ</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>HTTP REST</td><td>HTTP</td><td>JSON/XML</td><td>ä¸­ç­‰</td><td>ä¼˜ç§€</td><td>WebæœåŠ¡ã€å¯¹å¤–API</td></tr><tr><td>RPC (Dubbo)</td><td>TCP</td><td>Hessianç­‰</td><td>é«˜</td><td>Java</td><td>Javaå¾®æœåŠ¡</td></tr><tr><td>gRPC</td><td>HTTP/2</td><td>Protobuf</td><td>é«˜</td><td>ä¼˜ç§€</td><td>å¤šè¯­è¨€å¾®æœåŠ¡</td></tr><tr><td>GraphQL</td><td>HTTP</td><td>JSON</td><td>ä¸­ç­‰</td><td>ä¼˜ç§€</td><td>å‰åç«¯åˆ†ç¦»</td></tr><tr><td>æ¶ˆæ¯é˜Ÿåˆ—</td><td>TCP/AMQP</td><td>å¤šç§</td><td>é«˜</td><td>ä¼˜ç§€</td><td>å¼‚æ­¥è§£è€¦</td></tr></tbody></table><p><strong>é…ç½®ä¸­å¿ƒåŠŸèƒ½å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>é…ç½®ä¸­å¿ƒ</th><th>å­˜å‚¨æ–¹å¼</th><th>åŠ¨æ€æ¨é€</th><th>å¤šç¯å¢ƒ</th><th>ç‰ˆæœ¬ç®¡ç†</th><th>æƒé™æ§åˆ¶</th><th>ç•Œé¢å‹å¥½åº¦</th></tr></thead><tbody><tr><td>Spring Cloud Config</td><td>Git</td><td>éœ€Bus</td><td>æ”¯æŒ</td><td>Git</td><td>åŸºç¡€</td><td>ä¸€èˆ¬</td></tr><tr><td>Apollo</td><td>MySQL</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>å®Œå–„</td><td>ç»†ç²’åº¦</td><td>ä¼˜ç§€</td></tr><tr><td>Nacos</td><td>å†…ç½®DB</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>è‰¯å¥½</td></tr><tr><td>Consul KV</td><td>å†…ç½®</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>åŸºç¡€</td><td>ACL</td><td>ç®€æ´</td></tr></tbody></table><p><strong>å®¹é”™ä¿æŠ¤ç»„ä»¶ï¼š</strong></p><table><thead><tr><th>ç»„ä»¶</th><th>ç†”æ–­é™çº§</th><th>é™æµ</th><th>å®æ—¶ç›‘æ§</th><th>è§„åˆ™é…ç½®</th><th>æ€§èƒ½å¼€é”€</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Sentinel</td><td>æ”¯æŒ</td><td>å¤šç®—æ³•</td><td>å®æ—¶</td><td>åŠ¨æ€</td><td>ä½</td><td>é˜¿é‡Œäº‘ç”Ÿæ€</td></tr><tr><td>Hystrix</td><td>æ”¯æŒ</td><td>åŸºç¡€</td><td>æ”¯æŒ</td><td>æ³¨è§£</td><td>ä¸­ç­‰</td><td>NetflixæŠ€æœ¯æ ˆ</td></tr><tr><td>Resilience4j</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>å‡½æ•°å¼</td><td>ä½</td><td>ç°ä»£Javaåº”ç”¨</td></tr></tbody></table><p><strong>å¾®æœåŠ¡ç›‘æ§ä½“ç³»ï¼š</strong></p><table><thead><tr><th>ç›‘æ§ç±»å‹</th><th>ç›‘æ§å¯¹è±¡</th><th>å…³é”®æŒ‡æ ‡</th><th>æŠ€æœ¯é€‰å‹</th></tr></thead><tbody><tr><td>é“¾è·¯è¿½è¸ª</td><td>è¯·æ±‚è°ƒç”¨é“¾</td><td>å»¶è¿Ÿã€é”™è¯¯ç‡ã€ååé‡</td><td>SkyWalkingã€Zipkin</td></tr><tr><td>æŒ‡æ ‡ç›‘æ§</td><td>ç³»ç»Ÿå’Œä¸šåŠ¡æŒ‡æ ‡</td><td>CPUã€å†…å­˜ã€QPSã€ä¸šåŠ¡æŒ‡æ ‡</td><td>Prometheusã€Micrometer</td></tr><tr><td>æ—¥å¿—ç›‘æ§</td><td>åº”ç”¨æ—¥å¿—</td><td>é”™è¯¯æ—¥å¿—ã€ä¸šåŠ¡æ—¥å¿—</td><td>ELKã€Fluentd</td></tr><tr><td>å¥åº·æ£€æŸ¥</td><td>æœåŠ¡å¥åº·çŠ¶æ€</td><td>å­˜æ´»æ€§ã€å°±ç»ªæ€§</td><td>Spring Actuator</td></tr><tr><td>å‘Šè­¦é€šçŸ¥</td><td>å¼‚å¸¸æƒ…å†µ</td><td>é˜ˆå€¼å‘Šè­¦ã€è¶‹åŠ¿é¢„è­¦</td><td>AlertManagerã€é’‰é’‰</td></tr></tbody></table><p><strong>å¾®æœåŠ¡æ¶æ„æ¨¡å¼ï¼š</strong></p><table><thead><tr><th>æ¶æ„æ¨¡å¼</th><th>ç‰¹ç‚¹</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å•ä½“æ¶æ„</td><td>æ‰€æœ‰åŠŸèƒ½åœ¨ä¸€ä¸ªåº”ç”¨ä¸­</td><td>ç®€å•æ˜“éƒ¨ç½²</td><td>æ‰©å±•æ€§å·®ã€æŠ€æœ¯æ ˆå›ºå®š</td><td>å°å‹åº”ç”¨</td></tr><tr><td>å‚ç›´åˆ‡åˆ†</td><td>æŒ‰ä¸šåŠ¡åŠŸèƒ½æ‹†åˆ†</td><td>å›¢é˜Ÿç‹¬ç«‹ã€æŠ€æœ¯æ ˆçµæ´»</td><td>æ•°æ®å…±äº«å¤æ‚</td><td>ä¸­å‹åº”ç”¨</td></tr><tr><td>æ°´å¹³åˆ‡åˆ†</td><td>æŒ‰æ•°æ®æˆ–ç”¨æˆ·ç»´åº¦æ‹†åˆ†</td><td>é«˜å¯æ‰©å±•æ€§</td><td>æ¶æ„å¤æ‚</td><td>å¤§å‹åº”ç”¨</td></tr><tr><td>æœåŠ¡ç½‘æ ¼</td><td>åŸºç¡€è®¾æ–½å±‚å¤„ç†æœåŠ¡é€šä¿¡</td><td>ä¸šåŠ¡æ— æ„ŸçŸ¥ã€åŠŸèƒ½å¼ºå¤§</td><td>æ¶æ„å¤æ‚ã€å­¦ä¹ æˆæœ¬é«˜</td><td>å¤§è§„æ¨¡å¾®æœåŠ¡</td></tr><tr><td>Serverless</td><td>å‡½æ•°å³æœåŠ¡</td><td>æŒ‰éœ€æ‰©å±•ã€æˆæœ¬ä¼˜åŒ–</td><td>å†·å¯åŠ¨ã€çŠ¶æ€ç®¡ç†å›°éš¾</td><td>äº‹ä»¶é©±åŠ¨åº”ç”¨</td></tr></tbody></table><p><strong>å¾®æœåŠ¡æ•°æ®ç®¡ç†ï¼š</strong></p><table><thead><tr><th>æ•°æ®ç®¡ç†ç­–ç•¥</th><th>å®ç°æ–¹å¼</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æ•°æ®åº“peræœåŠ¡</td><td>æ¯ä¸ªæœåŠ¡ç‹¬ç«‹æ•°æ®åº“</td><td>æ¾è€¦åˆã€æŠ€æœ¯æ ˆçµæ´»</td><td>æ•°æ®ä¸€è‡´æ€§å¤æ‚</td><td>æ ‡å‡†å¾®æœåŠ¡æ¶æ„</td></tr><tr><td>å…±äº«æ•°æ®åº“</td><td>å¤šæœåŠ¡å…±äº«æ•°æ®åº“</td><td>æ•°æ®ä¸€è‡´æ€§ç®€å•</td><td>æœåŠ¡è€¦åˆåº¦é«˜</td><td>é—ç•™ç³»ç»Ÿæ”¹é€ </td></tr><tr><td>æ•°æ®åŒæ­¥</td><td>é€šè¿‡æ¶ˆæ¯åŒæ­¥æ•°æ®</td><td>æœ€ç»ˆä¸€è‡´æ€§</td><td>å¤æ‚åº¦é«˜</td><td>å¤§è§„æ¨¡åˆ†å¸ƒå¼</td></tr><tr><td>CQRS</td><td>è¯»å†™åˆ†ç¦»</td><td>è¯»å†™æ€§èƒ½ä¼˜åŒ–</td><td>æ¶æ„å¤æ‚</td><td>é«˜å¹¶å‘åœºæ™¯</td></tr><tr><td>äº‹ä»¶æº¯æº</td><td>å­˜å‚¨äº‹ä»¶è€Œéæœ€ç»ˆçŠ¶æ€</td><td>å®Œæ•´å†å²è®°å½•</td><td>æŸ¥è¯¢å¤æ‚</td><td>å®¡è®¡è¦æ±‚é«˜</td></tr></tbody></table><p><strong>å®¹å™¨åŒ–å’Œç¼–æ’ï¼š</strong></p><table><thead><tr><th>æŠ€æœ¯ç»„ä»¶</th><th>ä½œç”¨</th><th>ä¼˜åŠ¿</th><th>å­¦ä¹ æ›²çº¿</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Docker</td><td>å®¹å™¨åŒ–</td><td>ç¯å¢ƒä¸€è‡´æ€§ã€è½»é‡çº§</td><td>ä½</td><td>å¼€å‘æµ‹è¯•ç¯å¢ƒ</td></tr><tr><td>Kubernetes</td><td>å®¹å™¨ç¼–æ’</td><td>è‡ªåŠ¨æ‰©ç¼©å®¹ã€æœåŠ¡å‘ç°</td><td>é«˜</td><td>ç”Ÿäº§ç¯å¢ƒå®¹å™¨ç®¡ç†</td></tr><tr><td>Docker Compose</td><td>æœ¬åœ°å®¹å™¨ç¼–æ’</td><td>ç®€å•æ˜“ç”¨ã€é€‚åˆå¼€å‘</td><td>ä½</td><td>æœ¬åœ°å¼€å‘ç¯å¢ƒ</td></tr><tr><td>Helm</td><td>K8såŒ…ç®¡ç†</td><td>åº”ç”¨æ‰“åŒ…ã€ç‰ˆæœ¬ç®¡ç†</td><td>ä¸­ç­‰</td><td>K8såº”ç”¨éƒ¨ç½²</td></tr><tr><td>Istio</td><td>æœåŠ¡ç½‘æ ¼</td><td>æµé‡ç®¡ç†ã€å®‰å…¨ç­–ç•¥</td><td>é«˜</td><td>å¤§è§„æ¨¡å¾®æœåŠ¡æ²»ç†</td></tr></tbody></table><p><strong>å¾®æœåŠ¡éƒ¨ç½²ç­–ç•¥ï¼š</strong></p><table><thead><tr><th>éƒ¨ç½²ç­–ç•¥</th><th>å®ç°æ–¹å¼</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é£é™©ç­‰çº§</th></tr></thead><tbody><tr><td>è“ç»¿éƒ¨ç½²</td><td>ç»´æŠ¤ä¸¤å¥—å®Œå…¨ç›¸åŒçš„ç¯å¢ƒ</td><td>é›¶åœæœºã€å¿«é€Ÿå›æ»š</td><td>èµ„æºæ¶ˆè€—å¤§</td><td>ä½</td></tr><tr><td>æ»šåŠ¨éƒ¨ç½²</td><td>é€æ­¥æ›¿æ¢æ—§å®ä¾‹</td><td>èµ„æºåˆ©ç”¨ç‡é«˜</td><td>éƒ¨ç½²æ—¶é—´é•¿</td><td>ä¸­</td></tr><tr><td>é‡‘ä¸é›€éƒ¨ç½²</td><td>æ–°ç‰ˆæœ¬å…ˆéƒ¨ç½²åˆ°å°éƒ¨åˆ†æµé‡</td><td>é£é™©å¯æ§</td><td>å®ç°å¤æ‚</td><td>ä½</td></tr><tr><td>A/Bæµ‹è¯•éƒ¨ç½²</td><td>åŒæ—¶è¿è¡Œå¤šä¸ªç‰ˆæœ¬è¿›è¡Œå¯¹æ¯”æµ‹è¯•</td><td>æ•°æ®é©±åŠ¨å†³ç­–</td><td>ç»´æŠ¤æˆæœ¬é«˜</td><td>ä¸­</td></tr></tbody></table><p><strong>å¾®æœåŠ¡å®‰å…¨æ¶æ„ï¼š</strong></p><table><thead><tr><th>å®‰å…¨å±‚æ¬¡</th><th>å®‰å…¨æªæ–½</th><th>å®ç°æŠ€æœ¯</th><th>é˜²æŠ¤å¯¹è±¡</th></tr></thead><tbody><tr><td>ç½‘ç»œå®‰å…¨</td><td>VPCã€é˜²ç«å¢™ã€ç½‘ç»œéš”ç¦»</td><td>AWS VPCã€å®‰å…¨ç»„</td><td>ç½‘ç»œé€šä¿¡</td></tr><tr><td>ä¼ è¾“å®‰å…¨</td><td>HTTPSã€TLSã€è¯ä¹¦ç®¡ç†</td><td>SSLè¯ä¹¦ã€Let&#39;s Encrypt</td><td>æ•°æ®ä¼ è¾“</td></tr><tr><td>èº«ä»½è®¤è¯</td><td>ç»Ÿä¸€è®¤è¯ã€å•ç‚¹ç™»å½•</td><td>OAuth2ã€SAMLã€LDAP</td><td>ç”¨æˆ·èº«ä»½</td></tr><tr><td>æˆæƒæ§åˆ¶</td><td>RBACã€ABACæƒé™æ§åˆ¶</td><td>JWTã€Spring Security</td><td>èµ„æºè®¿é—®</td></tr><tr><td>APIå®‰å…¨</td><td>APIå¯†é’¥ã€é™æµã€ç­¾åéªŒè¯</td><td>API Gatewayã€HMAC</td><td>APIæ¥å£</td></tr><tr><td>æ•°æ®å®‰å…¨</td><td>æ•°æ®åŠ å¯†ã€è„±æ•ã€å¤‡ä»½</td><td>AESã€æ•°æ®åº“åŠ å¯†</td><td>æ•æ„Ÿæ•°æ®</td></tr></tbody></table><h2 id="æ¶ˆæ¯é˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#æ¶ˆæ¯é˜Ÿåˆ—"><span>æ¶ˆæ¯é˜Ÿåˆ—</span></a></h2><h3 id="_1-æ¶ˆæ¯é˜Ÿåˆ—çš„ä½œç”¨-è§£è€¦ã€å¼‚æ­¥ã€å‰Šå³°å¡«è°·" tabindex="-1"><a class="header-anchor" href="#_1-æ¶ˆæ¯é˜Ÿåˆ—çš„ä½œç”¨-è§£è€¦ã€å¼‚æ­¥ã€å‰Šå³°å¡«è°·"><span>1. æ¶ˆæ¯é˜Ÿåˆ—çš„ä½œç”¨ï¼Ÿï¼ˆè§£è€¦ã€å¼‚æ­¥ã€å‰Šå³°å¡«è°·ï¼‰</span></a></h3><p><strong>æ¶ˆæ¯é˜Ÿåˆ—å®šä¹‰ï¼š</strong> åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç”¨äºæœåŠ¡é—´é€šä¿¡çš„ä¸­é—´ä»¶ï¼Œå®ç°æ¶ˆæ¯çš„å¼‚æ­¥ä¼ é€’å’Œå¤„ç†ã€‚</p><p><strong>ä¸‰å¤§æ ¸å¿ƒä½œç”¨ï¼š</strong></p><table><thead><tr><th>ä½œç”¨</th><th>å®šä¹‰</th><th>è§£å†³é—®é¢˜</th><th>åº”ç”¨åœºæ™¯</th><th>æ•ˆæœè¯„ä¼°</th></tr></thead><tbody><tr><td>è§£è€¦</td><td>æ¶ˆæ¯å‘é€è€…å’Œæ¥æ”¶è€…ä¸ç›´æ¥ä¾èµ–</td><td>ç³»ç»Ÿé—´å¼ºè€¦åˆ</td><td>è®¢å•ç³»ç»Ÿé€šçŸ¥åº“å­˜ã€æ”¯ä»˜ã€ç‰©æµç³»ç»Ÿ</td><td>è€¦åˆåº¦é™ä½80%</td></tr><tr><td>å¼‚æ­¥</td><td>å‘é€æ¶ˆæ¯åç«‹å³è¿”å›ï¼Œä¸ç­‰å¾…å¤„ç†ç»“æœ</td><td>åŒæ­¥è°ƒç”¨å“åº”æ—¶é—´é•¿</td><td>ç”¨æˆ·æ³¨å†Œåå‘é€é‚®ä»¶ã€çŸ­ä¿¡</td><td>å“åº”æ—¶é—´å‡å°‘70%</td></tr><tr><td>å‰Šå³°å¡«è°·</td><td>ç¼“å†²é«˜å¹¶å‘è¯·æ±‚ï¼Œå¹³æ»‘å¤„ç†</td><td>ç¬æ—¶é«˜å¹¶å‘å†²å‡»</td><td>ç§’æ€æ´»åŠ¨ã€åŒ11ä¿ƒé”€</td><td>ç³»ç»Ÿç¨³å®šæ€§æå‡</td></tr></tbody></table><p><strong>ä½¿ç”¨å‰åå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>åœºæ™¯</th><th>ä¸ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—</th><th>ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—</th><th>æ”¹å–„æ•ˆæœ</th></tr></thead><tbody><tr><td>è®¢å•å¤„ç†</td><td>åŒæ­¥è°ƒç”¨åº“å­˜ã€æ”¯ä»˜ã€ç‰©æµï¼Œå“åº”æ—¶é—´3ç§’</td><td>å¼‚æ­¥é€šçŸ¥ï¼Œå“åº”æ—¶é—´500ms</td><td>å“åº”é€Ÿåº¦æå‡6å€</td></tr><tr><td>ç³»ç»Ÿæ•…éšœ</td><td>ä¸€ä¸ªæœåŠ¡æ•…éšœå¯¼è‡´æ•´ä¸ªé“¾è·¯å¤±è´¥</td><td>æœåŠ¡æ•…éšœä¸å½±å“æ¶ˆæ¯å‘é€ï¼Œå…·å¤‡å®¹é”™èƒ½åŠ›</td><td>å¯ç”¨æ€§ä»95%æå‡åˆ°99.9%</td></tr><tr><td>ä¿ƒé”€æ´»åŠ¨</td><td>ç¬æ—¶æµé‡å†²å®ç³»ç»Ÿ</td><td>æ¶ˆæ¯é˜Ÿåˆ—ç¼“å†²ï¼Œå¹³ç¨³å¤„ç†</td><td>ç³»ç»Ÿé›¶å®•æœº</td></tr></tbody></table><h3 id="_2-æ¶ˆæ¯æ¨¡å‹-ç‚¹å¯¹ç‚¹queueå’Œå‘å¸ƒ-è®¢é˜…topic" tabindex="-1"><a class="header-anchor" href="#_2-æ¶ˆæ¯æ¨¡å‹-ç‚¹å¯¹ç‚¹queueå’Œå‘å¸ƒ-è®¢é˜…topic"><span>2. æ¶ˆæ¯æ¨¡å‹ï¼Ÿï¼ˆç‚¹å¯¹ç‚¹Queueå’Œå‘å¸ƒ/è®¢é˜…Topicï¼‰</span></a></h3><p><strong>ä¸¤ç§æ¶ˆæ¯æ¨¡å‹å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>ç‚¹å¯¹ç‚¹æ¨¡å‹ï¼ˆQueueï¼‰</th><th>å‘å¸ƒ/è®¢é˜…æ¨¡å‹ï¼ˆTopicï¼‰</th></tr></thead><tbody><tr><td>æ¶ˆæ¯æ¶ˆè´¹</td><td>ä¸€æ¡æ¶ˆæ¯åªèƒ½è¢«ä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹</td><td>ä¸€æ¡æ¶ˆæ¯å¯ä»¥è¢«å¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹</td></tr><tr><td>æ¶ˆè´¹è€…å…³ç³»</td><td>ç«äº‰å…³ç³»</td><td>ç‹¬ç«‹å…³ç³»</td></tr><tr><td>æ¶ˆæ¯æŒä¹…åŒ–</td><td>æ¶ˆè´¹åä»é˜Ÿåˆ—åˆ é™¤</td><td>æ ¹æ®é…ç½®å†³å®šæ˜¯å¦åˆ é™¤</td></tr><tr><td>æ‰©å±•æ€§</td><td>é€šè¿‡å¢åŠ æ¶ˆè´¹è€…å®ç°è´Ÿè½½å‡è¡¡</td><td>é€šè¿‡å¢åŠ è®¢é˜…è€…å®ç°å¹¿æ’­</td></tr><tr><td>åº”ç”¨åœºæ™¯</td><td>ä»»åŠ¡åˆ†å‘ã€è´Ÿè½½å‡è¡¡</td><td>äº‹ä»¶é€šçŸ¥ã€æ•°æ®åŒæ­¥</td></tr><tr><td>å…¸å‹ä¾‹å­</td><td>è®¢å•å¤„ç†é˜Ÿåˆ—</td><td>ç”¨æˆ·æ³¨å†Œäº‹ä»¶å¹¿æ’­</td></tr></tbody></table><p><strong>ä½¿ç”¨åœºæ™¯é€‰æ‹©ï¼š</strong></p><table><thead><tr><th>ä¸šåŠ¡éœ€æ±‚</th><th>æ¨èæ¨¡å‹</th><th>åŸå› </th><th>å…¸å‹åº”ç”¨</th></tr></thead><tbody><tr><td>ä»»åŠ¡å¤„ç†</td><td>Queue</td><td>ç¡®ä¿æ¯ä¸ªä»»åŠ¡åªè¢«å¤„ç†ä¸€æ¬¡</td><td>é‚®ä»¶å‘é€ã€æ–‡ä»¶å¤„ç†</td></tr><tr><td>äº‹ä»¶å¹¿æ’­</td><td>Topic</td><td>å¤šä¸ªç³»ç»Ÿéœ€è¦å“åº”åŒä¸€äº‹ä»¶</td><td>ç”¨æˆ·æ³¨å†Œã€è®¢å•çŠ¶æ€å˜æ›´</td></tr><tr><td>è´Ÿè½½å‡è¡¡</td><td>Queue</td><td>å¤šä¸ªæ¶ˆè´¹è€…ç«äº‰å¤„ç†æ¶ˆæ¯</td><td>å¹¶å‘è®¢å•å¤„ç†</td></tr><tr><td>æ•°æ®åŒæ­¥</td><td>Topic</td><td>å¤šä¸ªä¸‹æ¸¸ç³»ç»Ÿéœ€è¦åŒæ­¥æ•°æ®</td><td>æ•°æ®ä»“åº“åŒæ­¥ã€ç¼“å­˜æ›´æ–°</td></tr><tr><td>æ—¥å¿—æ”¶é›†</td><td>Topic</td><td>å¤šä¸ªç›‘æ§ç³»ç»Ÿéœ€è¦æ”¶é›†æ—¥å¿—</td><td>ELKæ—¥å¿—åˆ†æ</td></tr></tbody></table><h3 id="_3-å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±" tabindex="-1"><a class="header-anchor" href="#_3-å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±"><span>3. å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ï¼Ÿ</span></a></h3><p><strong>æ¶ˆæ¯ä¸¢å¤±çš„ä¸‰ä¸ªé˜¶æ®µï¼š</strong></p><table><thead><tr><th>é˜¶æ®µ</th><th>ä¸¢å¤±åœºæ™¯</th><th>è§£å†³æ–¹æ¡ˆ</th><th>å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td>ç”Ÿäº§è€…é˜¶æ®µ</td><td>ç½‘ç»œæ•…éšœã€Brokerå®•æœº</td><td>ç”Ÿäº§è€…ç¡®è®¤æœºåˆ¶</td><td>åŒæ­¥å‘é€ã€å¼‚æ­¥å›è°ƒç¡®è®¤</td></tr><tr><td>Brokeré˜¶æ®µ</td><td>æ¶ˆæ¯æœªæŒä¹…åŒ–åˆ°ç£ç›˜</td><td>æ¶ˆæ¯æŒä¹…åŒ–</td><td>åŒæ­¥åˆ·ç›˜ã€ä¸»ä»å¤åˆ¶</td></tr><tr><td>æ¶ˆè´¹è€…é˜¶æ®µ</td><td>æ¶ˆè´¹è€…å®•æœºã€å¤„ç†å¤±è´¥</td><td>æ‰‹åŠ¨ACK</td><td>æ¶ˆè´¹æˆåŠŸåå†ç¡®è®¤</td></tr></tbody></table><p><strong>è¯¦ç»†ä¿éšœæœºåˆ¶ï¼š</strong></p><table><thead><tr><th>ä¿éšœæœºåˆ¶</th><th>å®ç°åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ç”Ÿäº§è€…ç¡®è®¤</td><td>Producerç­‰å¾…Brokerç¡®è®¤</td><td>ç¡®ä¿æ¶ˆæ¯åˆ°è¾¾Broker</td><td>æ€§èƒ½ç•¥æœ‰ä¸‹é™</td><td>é‡è¦ä¸šåŠ¡æ¶ˆæ¯</td></tr><tr><td>åŒæ­¥åˆ·ç›˜</td><td>æ¶ˆæ¯å†™å…¥ç£ç›˜åè¿”å›ç¡®è®¤</td><td>æ•°æ®å®‰å…¨æ€§é«˜</td><td>æ€§èƒ½å½±å“å¤§</td><td>é‡‘èçº§åˆ«å¯é æ€§</td></tr><tr><td>å¼‚æ­¥åˆ·ç›˜</td><td>æ¶ˆæ¯å…ˆå†™å…¥å†…å­˜ï¼Œå¼‚æ­¥å†™å…¥ç£ç›˜</td><td>æ€§èƒ½å¥½</td><td>æç«¯æƒ…å†µå¯èƒ½ä¸¢å¤±æ¶ˆæ¯</td><td>ä¸€èˆ¬ä¸šåŠ¡åœºæ™¯</td></tr><tr><td>ä¸»ä»å¤åˆ¶</td><td>ä¸»èŠ‚ç‚¹åŒæ­¥æ¶ˆæ¯åˆ°ä»èŠ‚ç‚¹</td><td>é«˜å¯ç”¨</td><td>ç½‘ç»œå¼€é”€</td><td>é«˜å¯ç”¨è¦æ±‚</td></tr><tr><td>æ‰‹åŠ¨ACK</td><td>æ¶ˆè´¹è€…å¤„ç†å®Œä¸šåŠ¡é€»è¾‘åæ‰‹åŠ¨ç¡®è®¤</td><td>ç¡®ä¿æ¶ˆæ¯è¢«æ­£ç¡®å¤„ç†</td><td>éœ€è¦å¤„ç†é‡å¤æ¶ˆæ¯</td><td>æ‰€æœ‰é‡è¦ä¸šåŠ¡</td></tr></tbody></table><ul><li>åˆ·ç›˜ï¼šæŠŠå†…å­˜ä¸­çš„æ•°æ®å†™å…¥ç£ç›˜æ–‡ä»¶ï¼Œç¡®ä¿æ•°æ®çœŸæ­£æŒä¹…åŒ–åˆ°ç¡¬ç›˜ã€‚</li></ul><h3 id="_4-å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸è¢«é‡å¤æ¶ˆè´¹-å¹‚ç­‰æ€§" tabindex="-1"><a class="header-anchor" href="#_4-å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸è¢«é‡å¤æ¶ˆè´¹-å¹‚ç­‰æ€§"><span>4. å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸è¢«é‡å¤æ¶ˆè´¹ï¼ˆå¹‚ç­‰æ€§ï¼‰ï¼Ÿ</span></a></h3><p><strong>é‡å¤æ¶ˆè´¹äº§ç”ŸåŸå› ï¼š</strong></p><ul><li>ç½‘ç»œæŠ–åŠ¨å¯¼è‡´ACKä¸¢å¤±</li><li>æ¶ˆè´¹è€…é‡å¯å¯¼è‡´æ¶ˆæ¯é‡æ–°æŠ•é€’</li><li>Brokeræ•…éšœæ¢å¤åé‡æ–°å‘é€æ¶ˆæ¯</li></ul><p><strong>å¹‚ç­‰æ€§ä¿éšœæ–¹æ¡ˆï¼š</strong></p><table><thead><tr><th>æ–¹æ¡ˆ</th><th>å®ç°åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å”¯ä¸€IDå»é‡</td><td>æ¯æ¡æ¶ˆæ¯æºå¸¦å”¯ä¸€æ ‡è¯†</td><td>ç®€å•æœ‰æ•ˆ</td><td>éœ€è¦å­˜å‚¨å·²å¤„ç†ID</td><td>é€šç”¨åœºæ™¯</td></tr><tr><td>æ•°æ®åº“å”¯ä¸€çº¦æŸ</td><td>åˆ©ç”¨æ•°æ®åº“å”¯ä¸€ç´¢å¼•</td><td>å®ç°ç®€å•</td><td>ä¾èµ–æ•°æ®åº“</td><td>æ•°æ®åº“æ“ä½œä¸ºä¸»çš„ä¸šåŠ¡</td></tr><tr><td>Rediså»é‡</td><td>ä½¿ç”¨Rediså­˜å‚¨æ¶ˆæ¯ID</td><td>æ€§èƒ½å¥½</td><td>éœ€è¦é¢å¤–çš„Rediså®ä¾‹</td><td>é«˜æ€§èƒ½è¦æ±‚</td></tr><tr><td>çŠ¶æ€æœºæ§åˆ¶</td><td>é€šè¿‡ä¸šåŠ¡çŠ¶æ€åˆ¤æ–­æ˜¯å¦å·²å¤„ç†</td><td>ä¸šåŠ¡è¯­ä¹‰æ˜ç¡®</td><td>ä¸šåŠ¡é€»è¾‘å¤æ‚</td><td>æœ‰æ˜ç¡®çŠ¶æ€çš„ä¸šåŠ¡æµç¨‹</td></tr><tr><td>ä¸šåŠ¡é€»è¾‘å¹‚ç­‰</td><td>è®¾è®¡å¤©ç„¶å¹‚ç­‰çš„ä¸šåŠ¡é€»è¾‘</td><td>æ— é¢å¤–å¼€é”€</td><td>å¹¶éæ‰€æœ‰ä¸šåŠ¡éƒ½èƒ½å®ç°</td><td>æŸ¥è¯¢ç±»æ“ä½œ</td></tr></tbody></table><p><strong>å®ç°ç¤ºä¾‹å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ä¸šåŠ¡åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>å®ç°æ–¹å¼</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>è´¦æˆ·æ‰£æ¬¾</td><td>æ•°æ®åº“å”¯ä¸€çº¦æŸ</td><td>è®¢å•å·ä½œä¸ºå”¯ä¸€çº¦æŸ</td><td>é¿å…é‡å¤æ‰£æ¬¾</td></tr><tr><td>å‘é€é‚®ä»¶</td><td>Rediså»é‡</td><td>æ¶ˆæ¯IDä½œä¸ºRedis key</td><td>è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´</td></tr><tr><td>æ•°æ®åŒæ­¥</td><td>çŠ¶æ€æœºæ§åˆ¶</td><td>æ£€æŸ¥ç›®æ ‡æ•°æ®æ˜¯å¦å·²å­˜åœ¨</td><td>å¤„ç†å¹¶å‘æ›´æ–°é—®é¢˜</td></tr><tr><td>ç§¯åˆ†å¢åŠ </td><td>ä¸šåŠ¡é€»è¾‘å¹‚ç­‰</td><td>ä½¿ç”¨CASæ“ä½œæ›´æ–°ç§¯åˆ†</td><td>å¤„ç†ABAé—®é¢˜</td></tr></tbody></table><h3 id="_5-å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§" tabindex="-1"><a class="header-anchor" href="#_5-å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§"><span>5. å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§ï¼Ÿ</span></a></h3><p><strong>é¡ºåºæ€§éœ€æ±‚åˆ†æï¼š</strong></p><table><thead><tr><th>é¡ºåºæ€§ç±»å‹</th><th>å®šä¹‰</th><th>å®ç°éš¾åº¦</th><th>æ€§èƒ½å½±å“</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å…¨å±€æœ‰åº</td><td>æ‰€æœ‰æ¶ˆæ¯ä¸¥æ ¼æŒ‰æ—¶é—´é¡ºåºå¤„ç†</td><td>é«˜</td><td>å¤§</td><td>é‡‘èäº¤æ˜“ã€è´¦åŠ¡æµæ°´</td></tr><tr><td>åˆ†åŒºæœ‰åº</td><td>åŒä¸€åˆ†åŒºå†…æ¶ˆæ¯æœ‰åº</td><td>ä¸­</td><td>å°</td><td>åŒä¸€ç”¨æˆ·çš„æ“ä½œåºåˆ—</td></tr><tr><td>å±€éƒ¨æœ‰åº</td><td>ç‰¹å®šä¸šåŠ¡åœºæ™¯ä¸‹çš„æ¶ˆæ¯æœ‰åº</td><td>ä½</td><td>æ— </td><td>å•ä¸ªè®¢å•çš„çŠ¶æ€å˜æ›´æµç¨‹</td></tr></tbody></table><p><strong>å®ç°æ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>æ–¹æ¡ˆ</th><th>å®ç°æ–¹å¼</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>æ€§èƒ½å½±å“</th></tr></thead><tbody><tr><td>å•é˜Ÿåˆ—å•æ¶ˆè´¹è€…</td><td>åªä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—å’Œä¸€ä¸ªæ¶ˆè´¹è€…</td><td>ä¸¥æ ¼æœ‰åº</td><td>æ€§èƒ½ç“¶é¢ˆã€æ— æ³•æ‰©å±•</td><td>æ€§èƒ½æœ€å·®</td></tr><tr><td>åˆ†åŒºæœ‰åº</td><td>ç›¸åŒKeyçš„æ¶ˆæ¯å‘é€åˆ°åŒä¸€åˆ†åŒº</td><td>å¹³è¡¡æ€§èƒ½ä¸é¡ºåº</td><td>åˆ†åŒºå†…æœ‰åºã€å…¨å±€æ— åº</td><td>æ€§èƒ½è¾ƒå¥½</td></tr><tr><td>æ¶ˆæ¯é˜Ÿåˆ—é¡ºåº</td><td>ä¸šåŠ¡å±‚é¢ä¿è¯åŒç±»æ¶ˆæ¯çš„é¡ºåºå¤„ç†</td><td>ä¸šåŠ¡çµæ´»æ€§é«˜</td><td>å®ç°å¤æ‚</td><td>æ€§èƒ½å½±å“å°</td></tr><tr><td>æ—¶é—´æˆ³æ’åº</td><td>æ¶ˆè´¹è€…æ ¹æ®æ—¶é—´æˆ³é‡æ–°æ’åº</td><td>å…¨å±€æœ‰åº</td><td>å»¶è¿Ÿé«˜ã€å†…å­˜å ç”¨å¤§</td><td>å»¶è¿Ÿå¢åŠ </td></tr></tbody></table><p><strong>æŠ€æœ¯é€‰å‹å»ºè®®ï¼š</strong></p><table><thead><tr><th>ä¸šåŠ¡åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>ç†ç”±</th><th>å®ç°è¦ç‚¹</th></tr></thead><tbody><tr><td>è‚¡ç¥¨äº¤æ˜“</td><td>å•é˜Ÿåˆ—å•æ¶ˆè´¹è€…</td><td>ä¸¥æ ¼æ—¶åºè¦æ±‚</td><td>å¯ä»¥ç‰ºç‰²æ€§èƒ½ä¿è¯æ­£ç¡®æ€§</td></tr><tr><td>ç”¨æˆ·æ“ä½œæ—¥å¿—</td><td>åˆ†åŒºæœ‰åº</td><td>åŒä¸€ç”¨æˆ·æ“ä½œéœ€è¦æœ‰åº</td><td>ä»¥ç”¨æˆ·IDä½œä¸ºåˆ†åŒºKey</td></tr><tr><td>è®¢å•çŠ¶æ€æµè½¬</td><td>æ¶ˆæ¯é˜Ÿåˆ—é¡ºåº</td><td>åªéœ€è¦åŒä¸€è®¢å•å†…æœ‰åº</td><td>ä»¥è®¢å•IDä½œä¸ºåˆ†ç»„</td></tr><tr><td>ç³»ç»Ÿæ—¥å¿—æ”¶é›†</td><td>æ— éœ€ä¸¥æ ¼é¡ºåº</td><td>æ—¥å¿—åˆ†æä¸ä¸¥æ ¼ä¾èµ–é¡ºåº</td><td>ä¼˜å…ˆè€ƒè™‘æ€§èƒ½å’Œååé‡</td></tr></tbody></table><h3 id="_6-å¸¸ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¯”è¾ƒ-kafkaã€rabbitmqã€rocketmq" tabindex="-1"><a class="header-anchor" href="#_6-å¸¸ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¯”è¾ƒ-kafkaã€rabbitmqã€rocketmq"><span>6. å¸¸ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¯”è¾ƒï¼Ÿï¼ˆKafkaã€RabbitMQã€RocketMQï¼‰</span></a></h3><p><strong>æ ¸å¿ƒç‰¹æ€§å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>Kafka</th><th>RabbitMQ</th><th>RocketMQ</th></tr></thead><tbody><tr><td>å¼€å‘è¯­è¨€</td><td>Scala/Java</td><td>Erlang</td><td>Java</td></tr><tr><td>æ€§èƒ½</td><td>æé«˜ï¼ˆç™¾ä¸‡çº§/ç§’ï¼‰</td><td>é«˜ï¼ˆä¸‡çº§/ç§’ï¼‰</td><td>é«˜ï¼ˆåä¸‡çº§/ç§’ï¼‰</td></tr><tr><td>å¯é æ€§</td><td>é«˜</td><td>æé«˜</td><td>é«˜</td></tr><tr><td>åŠŸèƒ½ä¸°å¯Œåº¦</td><td>åŸºç¡€</td><td>ä¸°å¯Œ</td><td>ä¸°å¯Œ</td></tr><tr><td>è¿ç»´å¤æ‚åº¦</td><td>ä¸­ç­‰</td><td>ç®€å•</td><td>ä¸­ç­‰</td></tr><tr><td>ç¤¾åŒºæ´»è·ƒåº¦</td><td>æé«˜</td><td>é«˜</td><td>ä¸­ç­‰</td></tr><tr><td>ä¼ä¸šæ”¯æŒ</td><td>ApacheåŸºé‡‘ä¼š</td><td>VMware</td><td>é˜¿é‡Œå·´å·´</td></tr></tbody></table><p><strong>è¯¦ç»†åŠŸèƒ½å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>åŠŸèƒ½</th><th>Kafka</th><th>RabbitMQ</th><th>RocketMQ</th></tr></thead><tbody><tr><td>æ¶ˆæ¯é¡ºåºæ€§</td><td>åˆ†åŒºæœ‰åº</td><td>é˜Ÿåˆ—æœ‰åº</td><td>åˆ†åŒºæœ‰åº</td></tr><tr><td>æ¶ˆæ¯è·¯ç”±</td><td>ç®€å•</td><td>çµæ´»å¼ºå¤§</td><td>ä¸°å¯Œ</td></tr><tr><td>æ¶ˆæ¯è¿‡æ»¤</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>æ­»ä¿¡é˜Ÿåˆ—</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>å»¶æ—¶æ¶ˆæ¯</td><td>ä¸æ”¯æŒ</td><td>æ’ä»¶æ”¯æŒ</td><td>åŸç”Ÿæ”¯æŒ</td></tr><tr><td>äº‹åŠ¡æ¶ˆæ¯</td><td>0.11ç‰ˆæœ¬åæ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>æ¶ˆæ¯é‡è¯•</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>é›†ç¾¤éƒ¨ç½²</td><td>åŸç”Ÿæ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr></tbody></table><p><strong>é€‚ç”¨åœºæ™¯æ¨èï¼š</strong></p><table><thead><tr><th>ä½¿ç”¨åœºæ™¯</th><th>æ¨èMQ</th><th>é€‰æ‹©ç†ç”±</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>æ—¥å¿—æ”¶é›†ã€å¤§æ•°æ®å¤„ç†</td><td>Kafka</td><td>è¶…é«˜ååé‡ã€æ°´å¹³æ‰©å±•èƒ½åŠ›å¼º</td><td>åŠŸèƒ½ç›¸å¯¹ç®€å•ï¼Œéœ€è¦è‡ªå·±å®ç°ä¸€äº›ç‰¹æ€§</td></tr><tr><td>ä¼ä¸šçº§åº”ç”¨ã€å¤æ‚è·¯ç”±</td><td>RabbitMQ</td><td>åŠŸèƒ½ä¸°å¯Œã€å¯é æ€§é«˜ã€è¿ç»´ç®€å•</td><td>æ€§èƒ½ç›¸å¯¹è¾ƒä½</td></tr><tr><td>ç”µå•†ã€é‡‘èç­‰ä¸šåŠ¡ç³»ç»Ÿ</td><td>RocketMQ</td><td>åŠŸèƒ½å…¨é¢ã€æ€§èƒ½å¥½ã€ä¸“é—¨ä¸ºä¸šåŠ¡åœºæ™¯è®¾è®¡</td><td>ç¤¾åŒºç›¸å¯¹è¾ƒå°</td></tr><tr><td>å¾®æœåŠ¡é—´é€šä¿¡</td><td>RabbitMQ</td><td>æ¶ˆæ¯è·¯ç”±çµæ´»ã€æ”¯æŒå¤šç§åè®®</td><td>éœ€è¦è€ƒè™‘æ¶ˆæ¯ç§¯å‹é—®é¢˜</td></tr><tr><td>å®æ—¶æ•°æ®æµå¤„ç†</td><td>Kafka</td><td>ä½å»¶è¿Ÿã€é«˜ååã€ä¸å¤§æ•°æ®ç”Ÿæ€é›†æˆå¥½</td><td>ä¸é€‚åˆå¤æ‚çš„ä¸šåŠ¡é€»è¾‘å¤„ç†</td></tr><tr><td>è®¢å•å¤„ç†ã€æ”¯ä»˜ç³»ç»Ÿ</td><td>RocketMQ</td><td>äº‹åŠ¡æ¶ˆæ¯ã€é¡ºåºæ¶ˆæ¯ã€é«˜å¯é æ€§</td><td>è¿ç»´å¤æ‚åº¦ç›¸å¯¹è¾ƒé«˜</td></tr></tbody></table><p><strong>æŠ€æœ¯é€‰å‹å†³ç­–çŸ©é˜µï¼š</strong></p><table><thead><tr><th>æƒé‡å› å­</th><th>Kafka</th><th>RabbitMQ</th><th>RocketMQ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ€§èƒ½è¦æ±‚ï¼ˆ30%ï¼‰</td><td>10</td><td>7</td><td>8</td><td>Kafkaæ€§èƒ½æœ€å¼º</td></tr><tr><td>åŠŸèƒ½ä¸°å¯Œåº¦ï¼ˆ25%ï¼‰</td><td>6</td><td>9</td><td>9</td><td>RabbitMQåŠŸèƒ½æœ€å…¨</td></tr><tr><td>å¯é æ€§ï¼ˆ20%ï¼‰</td><td>8</td><td>10</td><td>9</td><td>RabbitMQå¯é æ€§æœ€ä½³</td></tr><tr><td>è¿ç»´éš¾åº¦ï¼ˆ15%ï¼‰</td><td>7</td><td>9</td><td>7</td><td>RabbitMQæœ€æ˜“è¿ç»´</td></tr><tr><td>ç¤¾åŒºæ”¯æŒï¼ˆ10%ï¼‰</td><td>10</td><td>8</td><td>6</td><td>Kafkaç¤¾åŒºæœ€æ´»è·ƒ</td></tr><tr><td><strong>æ€»åˆ†</strong></td><td><strong>8.1</strong></td><td><strong>8.6</strong></td><td><strong>8.0</strong></td><td>RabbitMQç»¼åˆè¯„åˆ†æœ€é«˜</td></tr></tbody></table><h2 id="ä¸»æµæ¡†æ¶ã€ç³»ç»Ÿè®¾è®¡ã€ç¼–ç èƒ½åŠ›" tabindex="-1"><a class="header-anchor" href="#ä¸»æµæ¡†æ¶ã€ç³»ç»Ÿè®¾è®¡ã€ç¼–ç èƒ½åŠ›"><span>ä¸»æµæ¡†æ¶ã€ç³»ç»Ÿè®¾è®¡ã€ç¼–ç èƒ½åŠ›</span></a></h2><h3 id="_1-springæ–¹å‘-ioc-æ§åˆ¶åè½¬-di-ä¾èµ–æ³¨å…¥-aop-é¢å‘åˆ‡é¢ç¼–ç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-springæ–¹å‘-ioc-æ§åˆ¶åè½¬-di-ä¾èµ–æ³¨å…¥-aop-é¢å‘åˆ‡é¢ç¼–ç¨‹"><span>1. Springæ–¹å‘ - (IoC - æ§åˆ¶åè½¬ / DI - ä¾èµ–æ³¨å…¥, AOP - é¢å‘åˆ‡é¢ç¼–ç¨‹)</span></a></h3><p><strong>IoCï¼ˆæ§åˆ¶åè½¬ï¼‰æ ¸å¿ƒæ¦‚å¿µï¼š</strong></p><table><thead><tr><th>æ¦‚å¿µ</th><th>å®šä¹‰</th><th>ä¼ ç»Ÿæ–¹å¼</th><th>IoCæ–¹å¼</th><th>ä¼˜åŠ¿</th></tr></thead><tbody><tr><td>æ§åˆ¶åè½¬</td><td>å¯¹è±¡åˆ›å»ºæ§åˆ¶æƒä»ç¨‹åºä»£ç è½¬ç§»åˆ°å¤–éƒ¨å®¹å™¨</td><td>ç¨‹åºä¸»åŠ¨åˆ›å»ºä¾èµ–å¯¹è±¡</td><td>å®¹å™¨åˆ›å»ºå¹¶æ³¨å…¥å¯¹è±¡</td><td>é™ä½è€¦åˆåº¦ã€æé«˜å¯æµ‹è¯•æ€§</td></tr><tr><td>ä¾èµ–æ³¨å…¥</td><td>å®¹å™¨è´Ÿè´£å°†ä¾èµ–çš„å¯¹è±¡æ³¨å…¥åˆ°éœ€è¦çš„åœ°æ–¹</td><td>new å…³é”®å­—åˆ›å»ºå¯¹è±¡</td><td>@Autowiredç­‰æ³¨è§£æ³¨å…¥</td><td>è‡ªåŠ¨è£…é…ã€é…ç½®çµæ´»</td></tr><tr><td>å®¹å™¨ç®¡ç†</td><td>Springå®¹å™¨è´Ÿè´£å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†</td><td>æ‰‹åŠ¨ç®¡ç†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ</td><td>å®¹å™¨è‡ªåŠ¨ç®¡ç†</td><td>å‡å°‘å†…å­˜æ³„æ¼ã€æé«˜æ€§èƒ½</td></tr></tbody></table><p><strong>DIä¾èµ–æ³¨å…¥æ–¹å¼å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>æ³¨å…¥æ–¹å¼</th><th>å®ç°æ–¹å¼</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æ„é€ å™¨æ³¨å…¥</td><td>é€šè¿‡æ„é€ å‡½æ•°å‚æ•°æ³¨å…¥</td><td>å¼ºåˆ¶ä¾èµ–ã€ä¸å¯å˜å¯¹è±¡</td><td>æ„é€ å‡½æ•°å‚æ•°å¯èƒ½è¿‡å¤š</td><td>å¿…éœ€ä¾èµ–</td></tr><tr><td>Setteræ³¨å…¥</td><td>é€šè¿‡setteræ–¹æ³•æ³¨å…¥</td><td>å¯é€‰ä¾èµ–ã€çµæ´»é…ç½®</td><td>å¯èƒ½å¿˜è®°æ³¨å…¥æŸäº›ä¾èµ–</td><td>å¯é€‰ä¾èµ–</td></tr><tr><td>å­—æ®µæ³¨å…¥</td><td>ç›´æ¥åœ¨å­—æ®µä¸Šä½¿ç”¨@Autowired</td><td>ä»£ç ç®€æ´</td><td>éš¾ä»¥æµ‹è¯•ã€è¿åå°è£…æ€§</td><td>å¿«é€Ÿå¼€å‘</td></tr></tbody></table><h3 id="_2-aop-é¢å‘åˆ‡é¢ç¼–ç¨‹" tabindex="-1"><a class="header-anchor" href="#_2-aop-é¢å‘åˆ‡é¢ç¼–ç¨‹"><span>2. AOP (é¢å‘åˆ‡é¢ç¼–ç¨‹)</span></a></h3><p><strong>AOPæ ¸å¿ƒæ¦‚å¿µï¼š</strong></p><table><thead><tr><th>æ¦‚å¿µ</th><th>å®šä¹‰</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>åˆ‡é¢(Aspect)</td><td>æ¨ªåˆ‡å…³æ³¨ç‚¹çš„æ¨¡å—åŒ–</td><td>å°è£…æ¨ªåˆ‡é€»è¾‘</td><td>æ—¥å¿—åˆ‡é¢ã€äº‹åŠ¡åˆ‡é¢</td></tr><tr><td>è¿æ¥ç‚¹(JoinPoint)</td><td>ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­èƒ½å¤Ÿæ’å…¥åˆ‡é¢çš„ç‚¹</td><td>å®šä¹‰åˆ‡å…¥ä½ç½®</td><td>æ–¹æ³•è°ƒç”¨ã€å¼‚å¸¸æŠ›å‡º</td></tr><tr><td>åˆ‡å…¥ç‚¹(Pointcut)</td><td>åŒ¹é…è¿æ¥ç‚¹çš„è¡¨è¾¾å¼</td><td>å®šä¹‰åœ¨å“ªäº›åœ°æ–¹åˆ‡å…¥</td><td>execution(* com.<em>.</em>(..))</td></tr><tr><td>é€šçŸ¥(Advice)</td><td>åœ¨åˆ‡å…¥ç‚¹æ‰§è¡Œçš„ä»£ç </td><td>å®šä¹‰åˆ‡å…¥ååšä»€ä¹ˆ</td><td>@Beforeã€@After</td></tr><tr><td>ç»‡å…¥(Weaving)</td><td>å°†åˆ‡é¢åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡çš„è¿‡ç¨‹</td><td>å®ç°AOPåŠŸèƒ½</td><td>ç¼–è¯‘æ—¶ã€ç±»åŠ è½½æ—¶ã€è¿è¡Œæ—¶</td></tr></tbody></table><p><strong>Spring AOPå®ç°æ–¹å¼ï¼š</strong></p><table><thead><tr><th>å®ç°æ–¹å¼</th><th>åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>JDKåŠ¨æ€ä»£ç†</td><td>åŸºäºæ¥å£çš„ä»£ç†</td><td>æ ‡å‡†JDKå®ç°</td><td>åªèƒ½ä»£ç†æ¥å£</td><td>æœ‰æ¥å£çš„ç±»</td></tr><tr><td>CGLIBä»£ç†</td><td>åŸºäºç»§æ‰¿çš„ä»£ç†</td><td>å¯ä»¥ä»£ç†æ™®é€šç±»</td><td>ä¸èƒ½ä»£ç†finalç±»å’Œæ–¹æ³•</td><td>æ²¡æœ‰æ¥å£çš„ç±»</td></tr></tbody></table><p><strong>å¸¸ç”¨é€šçŸ¥ç±»å‹ï¼š</strong></p><table><thead><tr><th>é€šçŸ¥ç±»å‹</th><th>æ‰§è¡Œæ—¶æœº</th><th>ä½¿ç”¨åœºæ™¯</th><th>ç¤ºä¾‹ä»£ç </th></tr></thead><tbody><tr><td>@Before</td><td>æ–¹æ³•æ‰§è¡Œå‰</td><td>å‚æ•°æ ¡éªŒã€æƒé™æ£€æŸ¥</td><td>è®°å½•æ–¹æ³•è°ƒç”¨å‚æ•°</td></tr><tr><td>@After</td><td>æ–¹æ³•æ‰§è¡Œå</td><td>èµ„æºæ¸…ç†ã€æ—¥å¿—è®°å½•</td><td>è®°å½•æ–¹æ³•æ‰§è¡Œæ—¶é—´</td></tr><tr><td>@AfterReturning</td><td>æ–¹æ³•æ­£å¸¸è¿”å›å</td><td>ç»“æœå¤„ç†ã€æˆåŠŸæ—¥å¿—</td><td>è®°å½•æ–¹æ³•è¿”å›å€¼</td></tr><tr><td>@AfterThrowing</td><td>æ–¹æ³•æŠ›å¼‚å¸¸å</td><td>å¼‚å¸¸å¤„ç†ã€é”™è¯¯æ—¥å¿—</td><td>è®°å½•å¼‚å¸¸ä¿¡æ¯</td></tr><tr><td>@Around</td><td>æ–¹æ³•æ‰§è¡Œå‰å</td><td>æ€§èƒ½ç›‘æ§ã€äº‹åŠ¡æ§åˆ¶</td><td>è®¡ç®—æ–¹æ³•æ‰§è¡Œæ—¶é—´</td></tr></tbody></table><h3 id="_3-springäº‹åŠ¡ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#_3-springäº‹åŠ¡ç®¡ç†"><span>3. Springäº‹åŠ¡ç®¡ç†</span></a></h3><p><strong>äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼š</strong></p><table><thead><tr><th>ä¼ æ’­è¡Œä¸º</th><th>è¡Œä¸ºæè¿°</th><th>ä½¿ç”¨åœºæ™¯</th><th>é£é™©æç¤º</th></tr></thead><tbody><tr><td>REQUIREDï¼ˆé»˜è®¤ï¼‰</td><td>æœ‰äº‹åŠ¡å°±åŠ å…¥ï¼Œæ²¡æœ‰å°±æ–°å»º</td><td>æœ€å¸¸ç”¨çš„ä¼ æ’­è¡Œä¸º</td><td>æ— </td></tr><tr><td>REQUIRES_NEW</td><td>æ€»æ˜¯æ–°å»ºäº‹åŠ¡</td><td>éœ€è¦ç‹¬ç«‹äº‹åŠ¡çš„æ“ä½œ</td><td>å¯èƒ½å¯¼è‡´æ­»é”</td></tr><tr><td>SUPPORTS</td><td>æœ‰äº‹åŠ¡å°±åŠ å…¥ï¼Œæ²¡æœ‰å°±éäº‹åŠ¡æ‰§è¡Œ</td><td>æŸ¥è¯¢æ“ä½œ</td><td>æ•°æ®ä¸€è‡´æ€§é—®é¢˜</td></tr><tr><td>NOT_SUPPORTED</td><td>æ€»æ˜¯éäº‹åŠ¡æ‰§è¡Œ</td><td>çº¯æŸ¥è¯¢æ“ä½œ</td><td>ä¸æ”¯æŒäº‹åŠ¡å›æ»š</td></tr><tr><td>MANDATORY</td><td>å¿…é¡»åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œ</td><td>å¼ºåˆ¶äº‹åŠ¡çš„ä¸šåŠ¡é€»è¾‘</td><td>æ²¡æœ‰äº‹åŠ¡ä¼šæŠ›å¼‚å¸¸</td></tr><tr><td>NEVER</td><td>ä¸èƒ½åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œ</td><td>ä¸èƒ½æœ‰äº‹åŠ¡çš„æ“ä½œ</td><td>æœ‰äº‹åŠ¡ä¼šæŠ›å¼‚å¸¸</td></tr><tr><td>NESTED</td><td>åµŒå¥—äº‹åŠ¡</td><td>éƒ¨åˆ†å›æ»šåœºæ™¯</td><td>ä¾èµ–æ•°æ®åº“æ”¯æŒ</td></tr></tbody></table><p><strong>äº‹åŠ¡ç±»å‹å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>å£°æ˜å¼äº‹åŠ¡</th><th>ç¼–ç¨‹å¼äº‹åŠ¡</th></tr></thead><tbody><tr><td><strong>ä½¿ç”¨æ–¹æ³•</strong></td><td><code>@Transactional</code></td><td><code>TransactionTemplate</code></td></tr><tr><td><strong>ä¼˜ç‚¹</strong></td><td>ä½¿ç”¨ç®€å•</td><td>å¯ä»¥æ§åˆ¶äº‹åŠ¡æäº¤çš„å¼€å¯å’Œæäº¤æ—¶æœºï¼Œèƒ½å¤Ÿæ›´å°ç²’åº¦åœ°æ§åˆ¶äº‹åŠ¡çš„èŒƒå›´ï¼Œä¹Ÿæ›´åŠ ç›´è§‚</td></tr><tr><td><strong>ç¼ºç‚¹</strong></td><td>ä½¿ç”¨ä¸å½“äº‹åŠ¡å¯èƒ½å¤±æ•ˆï¼›å¤šä¸ªäº‹åŠ¡æ€§æ“ä½œå¯èƒ½å¯¼è‡´äº‹åŠ¡æ— æ³•æ­£å¸¸æäº¤ï¼Œå¯¼è‡´é•¿äº‹åŠ¡</td><td>éœ€è¦ç¡¬ç¼–ç æ¥æ§åˆ¶äº‹åŠ¡</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>åŒä¸€ä¸ªæ–¹æ³•ä¸­ï¼Œäº‹åŠ¡æ“ä½œæ¯”è¾ƒå¤š</td><td>å½“äº‹åŠ¡æ“ä½œçš„æ•°é‡å¾ˆå°‘</td></tr></tbody></table><p><strong>äº‹åŠ¡åµŒå¥—ï¼š</strong></p><table><thead><tr><th>ä¼ æ’­è¡Œä¸º</th><th>ä¸å¤–éƒ¨äº‹åŠ¡å…³ç³»</th><th>å›æ»šè¡Œä¸º</th></tr></thead><tbody><tr><td><code>REQUIRED</code></td><td>åŒä¸€ä¸ªäº‹åŠ¡</td><td>å†…éƒ¨å¼‚å¸¸å¯¼è‡´æ•´ä¸ªäº‹åŠ¡å›æ»š</td></tr><tr><td><code>REQUIRES_NEW</code></td><td>ç‹¬ç«‹äº‹åŠ¡</td><td>å†…éƒ¨å¼‚å¸¸åªå›æ»šè‡ªå·±äº‹åŠ¡ï¼Œå¤–éƒ¨ä¸å½±å“</td></tr><tr><td><code>NESTED</code></td><td>å­äº‹åŠ¡</td><td>å†…éƒ¨å¼‚å¸¸å›æ»šåˆ°ä¿å­˜ç‚¹ï¼Œå¤–éƒ¨å¯ç»§ç»­æˆ–å›æ»š</td></tr></tbody></table><ul><li>æ³¨æ„ï¼šå¼‚å¸¸å›æ»šé—®é¢˜ï¼šé»˜è®¤åªåœ¨æŠ›å‡º RuntimeException æˆ– Error æ—¶æ‰å›æ»šï¼Œchecked exception éœ€æ‰‹åŠ¨æŒ‡å®šï¼Œåœ¨æ³¨è§£ä¸Šæ·»åŠ  <code>rollbackFor = Exception.class</code>ï¼Œå¦åˆ™ä¸ä¼šå›æ»šã€‚</li></ul><h3 id="_4-spring-mvcçš„å·¥ä½œåŸç†-æ ¸å¿ƒç»„ä»¶-å¤„ç†è¯·æ±‚çš„æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_4-spring-mvcçš„å·¥ä½œåŸç†-æ ¸å¿ƒç»„ä»¶-å¤„ç†è¯·æ±‚çš„æµç¨‹"><span>4. Spring MVCçš„å·¥ä½œåŸç†ï¼Ÿæ ¸å¿ƒç»„ä»¶ï¼Ÿå¤„ç†è¯·æ±‚çš„æµç¨‹ï¼Ÿ</span></a></h3><p><strong>Spring MVCæ ¸å¿ƒç»„ä»¶ï¼š</strong></p><table><thead><tr><th>ç»„ä»¶</th><th>ä½œç”¨</th><th>æ ¸å¿ƒåŠŸèƒ½</th><th>é…ç½®æ–¹å¼</th></tr></thead><tbody><tr><td>DispatcherServlet</td><td>å‰ç«¯æ§åˆ¶å™¨ï¼Œç»Ÿä¸€è°ƒåº¦è¯·æ±‚</td><td>è¯·æ±‚åˆ†å‘ã€å¼‚å¸¸å¤„ç†ã€è§†å›¾æ¸²æŸ“</td><td>web.xmlæˆ–Javaé…ç½®</td></tr><tr><td>HandlerMapping</td><td>å¤„ç†å™¨æ˜ å°„å™¨ï¼Œæ‰¾åˆ°å¤„ç†è¯·æ±‚çš„Controller</td><td>URLæ˜ å°„ã€RESTfulè·¯ç”±</td><td>@RequestMapping</td></tr><tr><td>HandlerAdapter</td><td>å¤„ç†å™¨é€‚é…å™¨ï¼Œè°ƒç”¨å…·ä½“çš„å¤„ç†æ–¹æ³•</td><td>å‚æ•°è§£æã€è¿”å›å€¼å¤„ç†</td><td>è‡ªåŠ¨é…ç½®</td></tr><tr><td>ViewResolver</td><td>è§†å›¾è§£æå™¨ï¼Œè§£æé€»è¾‘è§†å›¾å</td><td>è§†å›¾è·¯å¾„è§£æã€æ¨¡æ¿å¼•æ“é›†æˆ</td><td>é…ç½®æ–‡ä»¶</td></tr></tbody></table><p><strong>è¯·æ±‚å¤„ç†æµç¨‹ï¼š</strong></p><table><thead><tr><th>æ­¥éª¤</th><th>ç»„ä»¶</th><th>å…·ä½“æ“ä½œ</th><th>æ•°æ®æµè½¬</th></tr></thead><tbody><tr><td>1</td><td>DispatcherServlet</td><td>æ¥æ”¶HTTPè¯·æ±‚</td><td>HttpServletRequest</td></tr><tr><td>2</td><td>HandlerMapping</td><td>æ ¹æ®URLæ‰¾åˆ°å¯¹åº”çš„Controllerå’Œæ–¹æ³•</td><td>HandlerExecutionChain</td></tr><tr><td>3</td><td>HandlerAdapter</td><td>è°ƒç”¨Controlleræ–¹æ³•ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘</td><td>ModelAndView</td></tr><tr><td>4</td><td>ViewResolver</td><td>è§£æé€»è¾‘è§†å›¾åï¼Œæ‰¾åˆ°å…·ä½“è§†å›¾æ¨¡æ¿</td><td>Viewå¯¹è±¡</td></tr><tr><td>5</td><td>View</td><td>æ¸²æŸ“è§†å›¾ï¼Œç”ŸæˆHTMLå“åº”</td><td>HttpServletResponse</td></tr></tbody></table><h3 id="_5-springå¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_5-springå¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–"><span>5. Springå¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–ï¼Ÿ</span></a></h3><table><thead><tr><th>ç¼“å­˜å</th><th>é¡ºåº</th><th>ç±»å‹</th><th>å­˜ä»€ä¹ˆ</th></tr></thead><tbody><tr><td><code>singletonObjects</code></td><td>ç¬¬ 1 çº§</td><td>æˆå“ç¼“å­˜</td><td>å·²ç»åˆ›å»ºå¥½ + åˆå§‹åŒ– + æ³¨å…¥å®Œçš„ Bean</td></tr><tr><td><code>earlySingletonObjects</code></td><td>ç¬¬ 2 çº§</td><td>åŠæˆå“ç¼“å­˜</td><td>åªå®ä¾‹åŒ–äº†ï¼Œè¿˜æ²¡æ³¨å…¥ä¾èµ–æˆ–åˆå§‹åŒ–çš„ Beanï¼ˆè£¸å¯¹è±¡ï¼‰</td></tr><tr><td><code>singletonFactories</code></td><td>ç¬¬ 3 çº§</td><td>å·¥å‚ç¼“å­˜</td><td>å¯ä»¥ç”Ÿæˆæ—©æœŸå¼•ç”¨çš„å¯¹è±¡ï¼ˆå¯èƒ½æ˜¯ä»£ç†å¯¹è±¡ï¼‰</td></tr></tbody></table><ul><li>äºŒçº§ç¼“å­˜åªèƒ½æš´éœ²è£¸å¯¹è±¡ï¼Œå¯¹äºéœ€è¦ AOP ä»£ç†çš„ Bean ä¸å¤Ÿçµæ´»ï¼Œå¯èƒ½ä¼šå¯¼è‡´ Bean è¢«æå‰æ³¨å…¥çš„æ˜¯æœªä»£ç†ç‰ˆæœ¬ã€‚</li><li>ä¸‰çº§ç¼“å­˜å…è®¸é€šè¿‡ ObjectFactory å»¶è¿Ÿåˆ›å»ºæœ€ç»ˆç‰ˆæœ¬ï¼ˆå¸¦ä»£ç†ï¼‰Beanï¼Œä»è€Œè§£å†³ä»£ç†å’Œä¾èµ–æ³¨å…¥çš„â€œå…ˆåé¡ºåºå†²çªâ€é—®é¢˜ã€‚</li></ul><p><strong>å…·ä½“æ­¥éª¤ï¼š</strong></p><ol><li>å®ä¾‹åŒ–Aå¯¹è±¡ï¼Œå¹¶åˆ›å»ºObjectFactoryå­˜å…¥ä¸‰çº§ç¼“å­˜ã€‚</li><li>Aåœ¨åˆå§‹åŒ–æ—¶éœ€è¦Bå¯¹è±¡ï¼Œå¼€å§‹Bçš„åˆ›å»ºé€»è¾‘ã€‚</li><li>Bå®ä¾‹åŒ–å®Œæˆï¼Œä¹Ÿåˆ›å»ºObjectFactoryå­˜å…¥ä¸‰çº§ç¼“å­˜ã€‚</li><li>Béœ€è¦æ³¨å…¥Aï¼Œé€šè¿‡ä¸‰çº§ç¼“å­˜è·å–ObjectFactoryç”ŸæˆAå¯¹è±¡ï¼Œå­˜å…¥äºŒçº§ç¼“å­˜ã€‚</li><li>Bé€šè¿‡äºŒçº§ç¼“å­˜è·å¾—Aå¯¹è±¡åï¼ŒBåˆ›å»ºæˆåŠŸï¼Œå­˜å…¥ä¸€çº§ç¼“å­˜ã€‚</li><li>Aå¯¹è±¡åˆå§‹åŒ–æ—¶ï¼Œç”±äºBå·²åˆ›å»ºå®Œæˆï¼Œå¯ä»¥ç›´æ¥æ³¨å…¥Bï¼ŒAåˆ›å»ºæˆåŠŸå­˜å…¥ä¸€çº§ç¼“å­˜ã€‚</li><li>æ¸…é™¤äºŒçº§ç¼“å­˜ä¸­çš„ä¸´æ—¶å¯¹è±¡Aã€‚</li></ol><ul><li><strong>Spring åªèƒ½è§£å†³â€œéæ„é€ å™¨æ³¨å…¥â€çš„å¾ªç¯ä¾èµ–ï¼ˆæ¯”å¦‚ setter æ³¨å…¥ä¸”æ˜¯åœ¨å•ä¾‹æ¨¡å¼ã€å­—æ®µæ³¨å…¥(@Autowired)ï¼‰</strong></li><li><strong>Spring æ— æ³•è§£å†³â€œæ„é€ å™¨æ³¨å…¥â€å¯¼è‡´çš„å¾ªç¯ä¾èµ–ï¼</strong><ul><li>å¯ä»¥ä½¿ç”¨ <code>@Lazy</code> æ³¨è§£å»¶è¿ŸåŠ è½½ï¼Œé¿å…ç«‹å³è§¦å‘å®ä¾‹åŒ–</li></ul></li></ul><h3 id="_6-1-ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_6-1-ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«"><span>6.1 ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«ï¼Ÿ</span></a></h3><p><strong>ç¼“å­˜çº§åˆ«å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>ä¸€çº§ç¼“å­˜ï¼ˆSqlSessionçº§åˆ«ï¼‰</th><th>äºŒçº§ç¼“å­˜ï¼ˆMapperçº§åˆ«ï¼‰</th></tr></thead><tbody><tr><td>ä½œç”¨åŸŸ</td><td>å•ä¸ªSqlSession</td><td>åŒä¸€ä¸ªMapperçš„æ‰€æœ‰SqlSession</td></tr><tr><td>ç”Ÿå‘½å‘¨æœŸ</td><td>SqlSessionå…³é—­æ—¶å¤±æ•ˆ</td><td>åº”ç”¨ç¨‹åºå…³é—­æ—¶å¤±æ•ˆ</td></tr><tr><td>é»˜è®¤å¼€å¯</td><td>é»˜è®¤å¼€å¯</td><td>éœ€è¦æ‰‹åŠ¨å¼€å¯</td></tr><tr><td>å…±äº«æ€§</td><td>ä¸å…±äº«</td><td>å¤šä¸ªSqlSessionå…±äº«</td></tr><tr><td>æ¸…ç©ºæ—¶æœº</td><td>commit/rollback/close</td><td>æ‰‹åŠ¨æ¸…ç©ºæˆ–é…ç½®è‡ªåŠ¨æ¸…ç©º</td></tr><tr><td>å­˜å‚¨ä½ç½®</td><td>SqlSessionå†…å­˜</td><td>å¯é…ç½®å¤šç§å­˜å‚¨æ–¹å¼</td></tr></tbody></table><p><strong>ç¼“å­˜é…ç½®å’Œä½¿ç”¨ï¼š</strong></p><table><thead><tr><th>é…ç½®é¡¹ç›®</th><th>ä¸€çº§ç¼“å­˜</th><th>äºŒçº§ç¼“å­˜</th></tr></thead><tbody><tr><td>å¼€å¯æ–¹å¼</td><td>æ— éœ€é…ç½®ï¼Œé»˜è®¤å¼€å¯</td><td><code>@CacheNamespace</code>æˆ–<code>&lt;cache&gt;</code></td></tr><tr><td>å¤±æ•ˆç­–ç•¥</td><td>è‡ªåŠ¨å¤±æ•ˆ</td><td>LRUã€FIFOã€SOFTã€WEAK</td></tr><tr><td>åˆ·æ–°ç­–ç•¥</td><td>å¢åˆ æ”¹æ“ä½œè‡ªåŠ¨æ¸…ç©º</td><td>å¯é…ç½®flushInterval</td></tr><tr><td>åºåˆ—åŒ–è¦æ±‚</td><td>æ— </td><td>å®ä½“ç±»éœ€å®ç°Serializableæ¥å£</td></tr></tbody></table><h3 id="_6-2-resultmap-å’Œ-resulttype-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_6-2-resultmap-å’Œ-resulttype-çš„åŒºåˆ«"><span>6.2 ResultMap å’Œ ResultType çš„åŒºåˆ«ï¼Ÿ</span></a></h3><p><strong>ä½¿ç”¨åœºæ™¯å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>ResultType</th><th>ResultMap</th></tr></thead><tbody><tr><td>é€‚ç”¨åœºæ™¯</td><td>ç®€å•æ˜ å°„ã€å­—æ®µåä¸€è‡´</td><td>å¤æ‚æ˜ å°„ã€å­—æ®µåä¸ä¸€è‡´ã€å…³è”æŸ¥è¯¢</td></tr><tr><td>é…ç½®å¤æ‚åº¦</td><td>ç®€å•</td><td>å¤æ‚</td></tr><tr><td>æ˜ å°„æ–¹å¼</td><td>è‡ªåŠ¨æ˜ å°„</td><td>æ‰‹åŠ¨é…ç½®æ˜ å°„å…³ç³»</td></tr><tr><td>æ€§èƒ½</td><td>è¾ƒå¥½</td><td>ç•¥å·®ï¼ˆéœ€è¦è§£æé…ç½®ï¼‰</td></tr><tr><td>åŠŸèƒ½</td><td>åŸºç¡€åŠŸèƒ½</td><td>æ”¯æŒåµŒå¥—ã€å…³è”ã€ç»§æ‰¿ç­‰é«˜çº§åŠŸèƒ½</td></tr><tr><td>ç»´æŠ¤æˆæœ¬</td><td>ä½</td><td>é«˜</td></tr></tbody></table><p><strong>é€‰æ‹©å»ºè®®ï¼š</strong></p><table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>åŸå› </th></tr></thead><tbody><tr><td>ç®€å•POJOæ˜ å°„</td><td>ResultType</td><td>é…ç½®ç®€å•ï¼Œæ€§èƒ½å¥½</td></tr><tr><td>å­—æ®µåä¸å±æ€§åä¸ä¸€è‡´</td><td>ResultMap</td><td>éœ€è¦æ‰‹åŠ¨æ˜ å°„</td></tr><tr><td>ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šå…³è”æŸ¥è¯¢</td><td>ResultMap</td><td>æ”¯æŒåµŒå¥—æ˜ å°„</td></tr><tr><td>éœ€è¦ç±»å‹è½¬æ¢</td><td>ResultMap</td><td>æ”¯æŒTypeHandler</td></tr><tr><td>ç»§æ‰¿å…³ç³»æ˜ å°„</td><td>ResultMap</td><td>æ”¯æŒç»§æ‰¿å’Œå¤šæ€</td></tr></tbody></table><h3 id="_6-3-å»¶è¿ŸåŠ è½½-æ‡’åŠ è½½-çš„åŸç†å’Œé…ç½®" tabindex="-1"><a class="header-anchor" href="#_6-3-å»¶è¿ŸåŠ è½½-æ‡’åŠ è½½-çš„åŸç†å’Œé…ç½®"><span>6.3 å»¶è¿ŸåŠ è½½ï¼ˆæ‡’åŠ è½½ï¼‰çš„åŸç†å’Œé…ç½®ï¼Ÿ</span></a></h3><p><strong>å»¶è¿ŸåŠ è½½æœºåˆ¶ï¼š</strong></p><table><thead><tr><th>æ¦‚å¿µ</th><th>å®šä¹‰</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å»¶è¿ŸåŠ è½½</td><td>å…³è”å¯¹è±¡åœ¨çœŸæ­£ä½¿ç”¨æ—¶æ‰åŠ è½½</td><td>æé«˜æ€§èƒ½ã€å‡å°‘å†…å­˜å ç”¨</td><td>å¯èƒ½äº§ç”ŸN+1é—®é¢˜</td><td>å¤§å¯¹è±¡å…³è”</td></tr><tr><td>ç«‹å³åŠ è½½</td><td>æŸ¥è¯¢æ—¶ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰å…³è”å¯¹è±¡</td><td>å‡å°‘æ•°æ®åº“è®¿é—®æ¬¡æ•°</td><td>å¯èƒ½åŠ è½½ä¸éœ€è¦çš„æ•°æ®</td><td>å°å¯¹è±¡å…³è”</td></tr></tbody></table><p><strong>é…ç½®æ–¹å¼ï¼š</strong></p><table><thead><tr><th>é…ç½®çº§åˆ«</th><th>é…ç½®ä½ç½®</th><th>é…ç½®é¡¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å…¨å±€é…ç½®</td><td>mybatis-config.xml</td><td>lazyLoadingEnabled=true</td><td>å…¨å±€å¼€å¯å»¶è¿ŸåŠ è½½</td></tr><tr><td>å±€éƒ¨é…ç½®</td><td>ResultMap</td><td>fetchType=&quot;lazy/eager&quot;</td><td>é’ˆå¯¹ç‰¹å®šå…³è”é…ç½®</td></tr><tr><td>æ–¹æ³•çº§é…ç½®</td><td>@Selectç­‰æ³¨è§£</td><td>fetchTypeå±æ€§</td><td>æ³¨è§£æ–¹å¼é…ç½®</td></tr></tbody></table><h3 id="_6-4-å¦‚ä½•å®ç°åˆ†é¡µ" tabindex="-1"><a class="header-anchor" href="#_6-4-å¦‚ä½•å®ç°åˆ†é¡µ"><span>6.4 å¦‚ä½•å®ç°åˆ†é¡µï¼Ÿ</span></a></h3><p><strong>åˆ†é¡µå®ç°æ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>æ–¹æ¡ˆ</th><th>å®ç°åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>RowBoundså†…å­˜åˆ†é¡µ</td><td>æŸ¥è¯¢æ‰€æœ‰æ•°æ®ååœ¨å†…å­˜ä¸­åˆ†é¡µ</td><td>å®ç°ç®€å•</td><td>æ€§èƒ½å·®ã€å†…å­˜å ç”¨å¤§</td><td>å°æ•°æ®é‡</td></tr><tr><td>PageHelperç‰©ç†åˆ†é¡µ</td><td>è‡ªåŠ¨æ”¹å†™SQLæ·»åŠ LIMIT</td><td>æ€§èƒ½å¥½ã€ä½¿ç”¨ç®€å•</td><td>ä¾èµ–æ’ä»¶</td><td>å¤§æ•°æ®é‡ã€ç”Ÿäº§ç¯å¢ƒ</td></tr><tr><td>æ‰‹å†™SQLåˆ†é¡µ</td><td>æ‰‹åŠ¨ç¼–å†™å¸¦LIMITçš„SQL</td><td>æ€§èƒ½æœ€å¥½ã€å¯æ§æ€§å¼º</td><td>å¼€å‘å¤æ‚ã€ç»´æŠ¤æˆæœ¬é«˜</td><td>å¤æ‚æŸ¥è¯¢åœºæ™¯</td></tr></tbody></table><p><strong>PageHelperä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p><table><thead><tr><th>ä½¿ç”¨æ–¹å¼</th><th>ä»£ç ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ–¹æ³•è°ƒç”¨</td><td><code>PageHelper.startPage(1, 10)</code></td><td>åœ¨æŸ¥è¯¢å‰è°ƒç”¨</td></tr><tr><td>æ³¨è§£æ–¹å¼</td><td><code>@Select + @Options</code></td><td>æ³¨è§£é…ç½®åˆ†é¡µå‚æ•°</td></tr><tr><td>å‚æ•°ä¼ é€’</td><td><code>PageInfo&lt;User&gt; pageInfo</code></td><td>å°è£…åˆ†é¡µç»“æœ</td></tr></tbody></table><h3 id="_7-è®¾è®¡ä¸€ä¸ªç§’æ€ç³»ç»Ÿ" tabindex="-1"><a class="header-anchor" href="#_7-è®¾è®¡ä¸€ä¸ªç§’æ€ç³»ç»Ÿ"><span>7. è®¾è®¡ä¸€ä¸ªç§’æ€ç³»ç»Ÿ</span></a></h3><p><strong>ç³»ç»Ÿæ¶æ„è®¾è®¡ï¼š</strong></p><table><thead><tr><th>å±‚æ¬¡</th><th>ç»„ä»¶</th><th>ä½œç”¨</th><th>æŠ€æœ¯é€‰å‹</th><th>å…³é”®æŒ‡æ ‡</th></tr></thead><tbody><tr><td>æ¥å…¥å±‚</td><td>CDN + è´Ÿè½½å‡è¡¡</td><td>é™æ€èµ„æºåŠ é€Ÿã€æµé‡åˆ†å‘</td><td>Nginxã€LVS</td><td>QPS: 10ä¸‡+</td></tr><tr><td>åº”ç”¨å±‚</td><td>å¾®æœåŠ¡é›†ç¾¤</td><td>ä¸šåŠ¡é€»è¾‘å¤„ç†</td><td>Spring Booté›†ç¾¤</td><td>å“åº”æ—¶é—´: &lt;100ms</td></tr><tr><td>ç¼“å­˜å±‚</td><td>Redisé›†ç¾¤</td><td>çƒ­ç‚¹æ•°æ®ç¼“å­˜</td><td>Redis Cluster</td><td>å‘½ä¸­ç‡: &gt;95%</td></tr><tr><td>æ•°æ®å±‚</td><td>MySQLä¸»ä»</td><td>æ•°æ®æŒä¹…åŒ–</td><td>MySQL 8.0</td><td>TPS: 1ä¸‡+</td></tr><tr><td>æ¶ˆæ¯å±‚</td><td>æ¶ˆæ¯é˜Ÿåˆ—</td><td>å¼‚æ­¥å¤„ç†ã€å‰Šå³°å¡«è°·</td><td>RocketMQ</td><td>ååé‡: 10ä¸‡æ¡/ç§’</td></tr></tbody></table><p><strong>æ ¸å¿ƒæŠ€æœ¯æ–¹æ¡ˆï¼š</strong></p><table><thead><tr><th>æŠ€æœ¯æŒ‘æˆ˜</th><th>è§£å†³æ–¹æ¡ˆ</th><th>å®ç°æ–¹å¼</th><th>æ•ˆæœè¯„ä¼°</th></tr></thead><tbody><tr><td>é«˜å¹¶å‘è¯»</td><td>å¤šçº§ç¼“å­˜ + CDN</td><td>Redis + æœ¬åœ°ç¼“å­˜ + CDNé™æ€åŒ–</td><td>å‡å°‘99%æ•°æ®åº“è®¿é—®</td></tr><tr><td>åº“å­˜æ‰£å‡</td><td>Redis Luaè„šæœ¬</td><td>åŸå­æ€§æ“ä½œï¼Œé¿å…è¶…å–</td><td>100%å‡†ç¡®æ€§</td></tr><tr><td>æµé‡å‰Šå³°</td><td>æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥å¤„ç†</td><td>ç§’æ€è¯·æ±‚å…ˆå…¥é˜Ÿï¼Œå¼‚æ­¥å¤„ç†è®¢å•</td><td>å‰Šå³°90%</td></tr><tr><td>é™æµä¿æŠ¤</td><td>ä»¤ç‰Œæ¡¶ + ç†”æ–­é™çº§</td><td>Sentinelé™æµï¼Œè¶…é™è¿”å›å‹å¥½æç¤º</td><td>ç³»ç»Ÿç¨³å®šæ€§99.9%</td></tr><tr><td>æ•°æ®ä¸€è‡´æ€§</td><td>åˆ†å¸ƒå¼äº‹åŠ¡</td><td>Seataåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œä¿è¯æœ€ç»ˆä¸€è‡´æ€§</td><td>æ•°æ®å‡†ç¡®æ€§100%</td></tr></tbody></table><p><strong>Redis Luaè„šæœ¬ç¤ºä¾‹ï¼š</strong></p><table><thead><tr><th>åŠŸèƒ½</th><th>è„šæœ¬é€»è¾‘</th><th>ä¼˜åŠ¿</th></tr></thead><tbody><tr><td>åº“å­˜æ‰£å‡</td><td>æ£€æŸ¥åº“å­˜ â†’ æ‰£å‡åº“å­˜ â†’ è®°å½•ç”¨æˆ·è´­ä¹°</td><td>åŸå­æ€§æ“ä½œï¼Œé¿å…è¶…å–</td></tr><tr><td>é˜²é‡å¤è´­ä¹°</td><td>æ£€æŸ¥ç”¨æˆ·è´­ä¹°è®°å½• â†’ æ‰§è¡Œè´­ä¹°é€»è¾‘</td><td>é¿å…é‡å¤ä¸‹å•</td></tr><tr><td>é™æµæ§åˆ¶</td><td>æ£€æŸ¥è¯·æ±‚é¢‘ç‡ â†’ æ›´æ–°è®¡æ•°å™¨</td><td>ç²¾ç¡®é™æµ</td></tr></tbody></table><h3 id="_8-è®¾è®¡ä¸€ä¸ªçŸ­é“¾æ¥ç³»ç»Ÿ" tabindex="-1"><a class="header-anchor" href="#_8-è®¾è®¡ä¸€ä¸ªçŸ­é“¾æ¥ç³»ç»Ÿ"><span>8. è®¾è®¡ä¸€ä¸ªçŸ­é“¾æ¥ç³»ç»Ÿ</span></a></h3><p><strong>çŸ­é“¾æ¥ç”Ÿæˆç®—æ³•å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç®—æ³•</th><th>åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é“¾æ¥é•¿åº¦</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å“ˆå¸Œç®—æ³•</td><td>MD5/SHA1+æˆªå–</td><td>å®ç°ç®€å•</td><td>å¯èƒ½å†²çª</td><td>6-8ä½</td><td>å°è§„æ¨¡ç³»ç»Ÿ</td></tr><tr><td>Base62ç¼–ç </td><td>æ•°å­—IDè½¬62è¿›åˆ¶</td><td>æ— å†²çªï¼Œæœ‰åº</td><td>éœ€è¦å…¨å±€ID</td><td>6-7ä½</td><td>å¤§è§„æ¨¡ç³»ç»Ÿ</td></tr><tr><td>éšæœºå­—ç¬¦ä¸²</td><td>éšæœºç”Ÿæˆ+å†²çªæ£€æµ‹</td><td>æ— è§„å¾‹æ€§</td><td>éœ€è¦æ£€æµ‹å†²çª</td><td>6-8ä½</td><td>å®‰å…¨æ€§è¦æ±‚é«˜</td></tr><tr><td>åˆ†å¸ƒå¼ID</td><td>é›ªèŠ±ç®—æ³•+Base62</td><td>åˆ†å¸ƒå¼å‹å¥½</td><td>å®ç°å¤æ‚</td><td>7-8ä½</td><td>å¾®æœåŠ¡æ¶æ„</td></tr></tbody></table><p><strong>æ¨èæ–¹æ¡ˆï¼šBase62ç¼–ç  + åˆ†å¸ƒå¼ID</strong></p><table><thead><tr><th>ç»„ä»¶</th><th>é€‰æ‹©</th><th>åŸå› </th><th>å®ç°ç»†èŠ‚</th></tr></thead><tbody><tr><td>IDç”Ÿæˆ</td><td>é›ªèŠ±ç®—æ³•</td><td>åˆ†å¸ƒå¼ã€æœ‰åºã€é«˜æ€§èƒ½</td><td>1ä½ç¬¦å·+41ä½æ—¶é—´æˆ³+10ä½æœºå™¨ID+12ä½åºåˆ—å·</td></tr><tr><td>ç¼–ç ç®—æ³•</td><td>Base62</td><td>åŒ…å«æ•°å­—+å¤§å°å†™å­—æ¯ï¼ŒURLå‹å¥½</td><td>0-9,a-z,A-Zå…±62ä¸ªå­—ç¬¦</td></tr><tr><td>çŸ­é“¾æ ¼å¼</td><td>http://t.co/xxxxxx</td><td>6-7ä½æ ‡è¯†ç¬¦</td><td>å‰ç¼€+Base62ç¼–ç </td></tr></tbody></table><p><strong>ç³»ç»Ÿæ¶æ„è®¾è®¡ï¼š</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>[å®¢æˆ·ç«¯] â†’ [è´Ÿè½½å‡è¡¡å™¨] â†’ [APIç½‘å…³] â†’ [çŸ­é“¾æ¥æœåŠ¡é›†ç¾¤]</span></span>
<span class="line"><span>                                              â†“</span></span>
<span class="line"><span>[Redisç¼“å­˜é›†ç¾¤] â† [æ¶ˆæ¯é˜Ÿåˆ—] â† [ç»Ÿè®¡æœåŠ¡] â† [æ•°æ®åº“é›†ç¾¤]</span></span>
<span class="line"><span>                     â†“</span></span>
<span class="line"><span>                [ç›‘æ§ç³»ç»Ÿ]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ ¸å¿ƒæœåŠ¡ç»„ä»¶ï¼š</strong></p><table><thead><tr><th>æœåŠ¡</th><th>èŒè´£</th><th>æŠ€æœ¯é€‰å‹</th><th>éƒ¨ç½²æ–¹å¼</th></tr></thead><tbody><tr><td>çŸ­é“¾æ¥æœåŠ¡</td><td>ç”Ÿæˆå’Œè§£æçŸ­é“¾æ¥</td><td>Spring Boot + Redis</td><td>æ— çŠ¶æ€é›†ç¾¤</td></tr><tr><td>è·³è½¬æœåŠ¡</td><td>å¤„ç†çŸ­é“¾æ¥è·³è½¬</td><td>Nginx + Luaè„šæœ¬</td><td>CDNè¾¹ç¼˜èŠ‚ç‚¹</td></tr><tr><td>ç»Ÿè®¡æœåŠ¡</td><td>æ”¶é›†å’Œåˆ†ææ•°æ®</td><td>Kafka + ClickHouse</td><td>å¼‚æ­¥å¤„ç†</td></tr><tr><td>ç¼“å­˜æœåŠ¡</td><td>çƒ­ç‚¹æ•°æ®ç¼“å­˜</td><td>Redis Cluster</td><td>ä¸»ä»+åˆ†ç‰‡</td></tr><tr><td>å­˜å‚¨æœåŠ¡</td><td>æŒä¹…åŒ–æ•°æ®</td><td>MySQLåˆ†åº“åˆ†è¡¨</td><td>è¯»å†™åˆ†ç¦»</td></tr></tbody></table><p><strong>æ•°æ®åº“è®¾è®¡ï¼š</strong></p><p><strong>çŸ­é“¾æ¥è¡¨ (url_mapping)ï¼š</strong></p><table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>ç´¢å¼•</th></tr></thead><tbody><tr><td>id</td><td>bigint</td><td>ä¸»é”®ï¼Œé›ªèŠ±ç®—æ³•ç”Ÿæˆ</td><td>ä¸»é”®</td></tr><tr><td>short_url</td><td>varchar(32)</td><td>çŸ­é“¾æ¥æ ‡è¯†ç¬¦</td><td>å”¯ä¸€ç´¢å¼•</td></tr><tr><td>long_url</td><td>text</td><td>åŸå§‹é•¿é“¾æ¥</td><td>-</td></tr><tr><td>user_id</td><td>bigint</td><td>åˆ›å»ºç”¨æˆ·ID</td><td>æ™®é€šç´¢å¼•</td></tr><tr><td>created_time</td><td>datetime</td><td>åˆ›å»ºæ—¶é—´</td><td>æ™®é€šç´¢å¼•</td></tr><tr><td>expired_time</td><td>datetime</td><td>è¿‡æœŸæ—¶é—´</td><td>æ™®é€šç´¢å¼•</td></tr><tr><td>status</td><td>tinyint</td><td>çŠ¶æ€(0åˆ é™¤,1æ­£å¸¸)</td><td>-</td></tr></tbody></table><p><strong>ç»Ÿè®¡è¡¨ (url_stats)ï¼š</strong></p><table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>ç´¢å¼•</th></tr></thead><tbody><tr><td>id</td><td>bigint</td><td>ä¸»é”®</td><td>ä¸»é”®</td></tr><tr><td>short_url</td><td>varchar(32)</td><td>çŸ­é“¾æ¥æ ‡è¯†ç¬¦</td><td>æ™®é€šç´¢å¼•</td></tr><tr><td>click_count</td><td>bigint</td><td>ç‚¹å‡»æ¬¡æ•°</td><td>-</td></tr><tr><td>unique_visitor</td><td>bigint</td><td>ç‹¬ç«‹è®¿å®¢æ•°</td><td>-</td></tr><tr><td>last_access_time</td><td>datetime</td><td>æœ€åè®¿é—®æ—¶é—´</td><td>-</td></tr><tr><td>date</td><td>date</td><td>ç»Ÿè®¡æ—¥æœŸ</td><td>æ™®é€šç´¢å¼•</td></tr></tbody></table><p><strong>åˆ†åº“åˆ†è¡¨ç­–ç•¥ï¼š</strong></p><table><thead><tr><th>ç­–ç•¥</th><th>åˆ†ç‰‡é”®</th><th>åˆ†ç‰‡è§„åˆ™</th><th>ä¼˜åŠ¿</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>æŒ‰çŸ­é“¾æ¥å“ˆå¸Œ</td><td>short_url</td><td>hash(short_url) % åº“æ•°</td><td>è¯»å†™å‡è¡¡</td><td>è·¨åº“æŸ¥è¯¢å›°éš¾</td></tr><tr><td>æŒ‰ç”¨æˆ·IDåˆ†ç‰‡</td><td>user_id</td><td>user_id % åº“æ•°</td><td>ç”¨æˆ·æ•°æ®èšåˆ</td><td>çƒ­ç‚¹ç”¨æˆ·é—®é¢˜</td></tr><tr><td>æŒ‰æ—¶é—´åˆ†ç‰‡</td><td>created_time</td><td>æŒ‰æœˆ/å¹´åˆ†è¡¨</td><td>ä¾¿äºæ•°æ®æ¸…ç†</td><td>è·¨æ—¶é—´æŸ¥è¯¢å¤æ‚</td></tr></tbody></table><p><strong>ç¼“å­˜è®¾è®¡ï¼š</strong></p><p><strong>å¤šçº§ç¼“å­˜æ¶æ„ï¼š</strong></p><table><thead><tr><th>ç¼“å­˜å±‚çº§</th><th>æŠ€æœ¯</th><th>TTL</th><th>å‘½ä¸­ç‡</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>æµè§ˆå™¨ç¼“å­˜</td><td>HTTP Cache</td><td>1å°æ—¶</td><td>30%</td><td>å‡å°‘è¯·æ±‚</td></tr><tr><td>CDNç¼“å­˜</td><td>è¾¹ç¼˜èŠ‚ç‚¹</td><td>24å°æ—¶</td><td>50%</td><td>å°±è¿‘è®¿é—®</td></tr><tr><td>åº”ç”¨ç¼“å­˜</td><td>æœ¬åœ°ç¼“å­˜</td><td>5åˆ†é’Ÿ</td><td>70%</td><td>çƒ­ç‚¹æ•°æ®</td></tr><tr><td>åˆ†å¸ƒå¼ç¼“å­˜</td><td>Redis</td><td>1å¤©</td><td>90%</td><td>æ•°æ®å…±äº«</td></tr></tbody></table><p><strong>ç¼“å­˜ç­–ç•¥ï¼š</strong></p><table><thead><tr><th>åœºæ™¯</th><th>ç­–ç•¥</th><th>å®ç°</th><th>å¥½å¤„</th></tr></thead><tbody><tr><td>çƒ­ç‚¹çŸ­é“¾æ¥</td><td>Cache Aside</td><td>å…ˆæŸ¥ç¼“å­˜ï¼Œç¼“å­˜å¤±æ•ˆæŸ¥DB</td><td>å‡å°‘DBå‹åŠ›</td></tr><tr><td>æ–°å¢çŸ­é“¾æ¥</td><td>Write Through</td><td>åŒæ—¶å†™ç¼“å­˜å’ŒDB</td><td>ä¿è¯ä¸€è‡´æ€§</td></tr><tr><td>æ‰¹é‡é¢„çƒ­</td><td>å®šæ—¶ä»»åŠ¡</td><td>å‡Œæ™¨é¢„çƒ­çƒ­ç‚¹æ•°æ®</td><td>æé«˜å‘½ä¸­ç‡</td></tr><tr><td>ç¼“å­˜ç©¿é€</td><td>å¸ƒéš†è¿‡æ»¤å™¨</td><td>é¢„å…ˆåˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨</td><td>é˜²æ­¢æ— æ•ˆæŸ¥è¯¢</td></tr></tbody></table><p><strong>æ ¸å¿ƒç®—æ³•å®ç°ï¼š</strong></p><p><strong>Base62ç¼–ç å®ç°ï¼š</strong></p><table><thead><tr><th>æ­¥éª¤</th><th>æ“ä½œ</th><th>ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td>ç”Ÿæˆå…¨å±€å”¯ä¸€ID</td><td>1234567890</td><td>é›ªèŠ±ç®—æ³•ç”Ÿæˆ</td></tr><tr><td>2</td><td>è½¬æ¢ä¸ºBase62</td><td>dBvJIh</td><td>62è¿›åˆ¶ç¼–ç </td></tr><tr><td>3</td><td>æ‹¼æ¥åŸŸå</td><td>http://t.co/dBvJIh</td><td>å½¢æˆå®Œæ•´çŸ­é“¾æ¥</td></tr></tbody></table><p><strong>è§£ç è¿‡ç¨‹ï¼š</strong></p><table><thead><tr><th>æ­¥éª¤</th><th>æ“ä½œ</th><th>ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td>æå–æ ‡è¯†ç¬¦</td><td>dBvJIh</td><td>ä»URLä¸­æå–</td></tr><tr><td>2</td><td>Base62è§£ç </td><td>1234567890</td><td>è½¬æ¢ä¸ºæ•°å­—ID</td></tr><tr><td>3</td><td>æŸ¥è¯¢æ˜ å°„å…³ç³»</td><td>ä»ç¼“å­˜/DBæŸ¥è¯¢</td><td>è·å–åŸå§‹URL</td></tr></tbody></table><p><strong>æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼š</strong></p><table><thead><tr><th>ä¼˜åŒ–ç‚¹</th><th>ç­–ç•¥</th><th>å®ç°æ–¹å¼</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td>è¯»æ€§èƒ½</td><td>ç¼“å­˜é¢„çƒ­</td><td>å®šæ—¶ä»»åŠ¡é¢„åŠ è½½çƒ­ç‚¹æ•°æ®</td><td>æå‡50%å“åº”é€Ÿåº¦</td></tr><tr><td>å†™æ€§èƒ½</td><td>æ‰¹é‡ç”Ÿæˆ</td><td>é¢„ç”ŸæˆçŸ­é“¾æ¥æ± </td><td>æå‡å†™å…¥TPS</td></tr><tr><td>æ•°æ®åº“</td><td>è¯»å†™åˆ†ç¦»</td><td>ä¸»åº“å†™ï¼Œä»åº“è¯»</td><td>åˆ†æ•£è¯»å‹åŠ›</td></tr><tr><td>ç½‘ç»œ</td><td>CDNåŠ é€Ÿ</td><td>å°±è¿‘è®¿é—®</td><td>å‡å°‘50%ç½‘ç»œå»¶è¿Ÿ</td></tr><tr><td>å­˜å‚¨</td><td>æ•°æ®å‹ç¼©</td><td>URLå‹ç¼©å­˜å‚¨</td><td>èŠ‚çœ30%å­˜å‚¨ç©ºé—´</td></tr></tbody></table><p><strong>é«˜å¯ç”¨è®¾è®¡ï¼š</strong></p><table><thead><tr><th>å±‚é¢</th><th>æ–¹æ¡ˆ</th><th>å®ç°</th><th>ç›®æ ‡</th></tr></thead><tbody><tr><td>åº”ç”¨å±‚</td><td>è´Ÿè½½å‡è¡¡</td><td>Nginx + å¤šå®ä¾‹</td><td>99.9%å¯ç”¨æ€§</td></tr><tr><td>ç¼“å­˜å±‚</td><td>Redisé›†ç¾¤</td><td>ä¸»ä»+å“¨å…µ</td><td>ç§’çº§æ•…éšœåˆ‡æ¢</td></tr><tr><td>æ•°æ®å±‚</td><td>MySQLé›†ç¾¤</td><td>ä¸»ä»å¤åˆ¶+MHA</td><td>åˆ†é’Ÿçº§æ•…éšœæ¢å¤</td></tr><tr><td>ç½‘ç»œå±‚</td><td>å¤šæœºæˆ¿éƒ¨ç½²</td><td>å¼‚åœ°å¤šæ´»</td><td>æœºæˆ¿çº§å®¹ç¾</td></tr></tbody></table><p><strong>ç›‘æ§å‘Šè­¦ï¼š</strong></p><table><thead><tr><th>ç›‘æ§æŒ‡æ ‡</th><th>é˜ˆå€¼</th><th>å‘Šè­¦æ–¹å¼</th><th>å¤„ç†æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>QPS</td><td>&gt;8000</td><td>çŸ­ä¿¡+é‚®ä»¶</td><td>è‡ªåŠ¨æ‰©å®¹</td></tr><tr><td>å“åº”æ—¶é—´</td><td>&gt;100ms</td><td>é’‰é’‰ç¾¤</td><td>æ£€æŸ¥ç¼“å­˜å‘½ä¸­ç‡</td></tr><tr><td>é”™è¯¯ç‡</td><td>&gt;1%</td><td>ç”µè¯å‘Šè­¦</td><td>ç´§æ€¥å¤„ç†</td></tr><tr><td>ç¼“å­˜å‘½ä¸­ç‡</td><td>&lt;90%</td><td>é‚®ä»¶é€šçŸ¥</td><td>ä¼˜åŒ–ç¼“å­˜ç­–ç•¥</td></tr><tr><td>å­˜å‚¨ç©ºé—´</td><td>&gt;80%</td><td>é‚®ä»¶é€šçŸ¥</td><td>æ•°æ®æ¸…ç†</td></tr></tbody></table><h3 id="_9-å„ç±»ä¸»æµç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_9-å„ç±»ä¸»æµç®—æ³•"><span>9. å„ç±»ä¸»æµç®—æ³•</span></a></h3><p><strong>ç®—æ³•åˆ†ç±»å’Œé‡è¦æ€§ï¼š</strong></p><table><thead><tr><th>ç®—æ³•ç±»å‹</th><th>é‡è¦ç®—æ³•</th><th>é¢è¯•é¢‘ç‡</th><th>éš¾åº¦ç­‰çº§</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æ’åºç®—æ³•</td><td>å¿«æ’ã€å½’å¹¶ã€å †æ’åº</td><td>â­â­â­â­â­</td><td>ä¸­ç­‰</td><td>æ•°æ®æ’åºã€TopKé—®é¢˜</td></tr><tr><td>æŸ¥æ‰¾ç®—æ³•</td><td>äºŒåˆ†æŸ¥æ‰¾ã€å“ˆå¸ŒæŸ¥æ‰¾</td><td>â­â­â­â­â­</td><td>ç®€å•</td><td>æ•°æ®æ£€ç´¢ã€å»é‡</td></tr><tr><td>åŠ¨æ€è§„åˆ’</td><td>èƒŒåŒ…ã€æœ€é•¿å­åºåˆ—ã€è·¯å¾„é—®é¢˜</td><td>â­â­â­â­</td><td>å›°éš¾</td><td>ä¼˜åŒ–é—®é¢˜ã€è®¡æ•°é—®é¢˜</td></tr><tr><td>å›¾ç®—æ³•</td><td>DFSã€BFSã€æœ€çŸ­è·¯å¾„</td><td>â­â­â­</td><td>ä¸­ç­‰</td><td>ç¤¾äº¤ç½‘ç»œã€è·¯å¾„è§„åˆ’</td></tr><tr><td>æ ‘ç®—æ³•</td><td>äºŒå‰æ ‘éå†ã€å¹³è¡¡æ ‘ã€å­—å…¸æ ‘</td><td>â­â­â­â­</td><td>ä¸­ç­‰</td><td>æ•°æ®ç»“æ„ã€æœç´¢å¼•æ“</td></tr><tr><td>è´ªå¿ƒç®—æ³•</td><td>åŒºé—´è°ƒåº¦ã€æœ€å°ç”Ÿæˆæ ‘</td><td>â­â­â­</td><td>ä¸­ç­‰</td><td>èµ„æºåˆ†é…ã€ç½‘ç»œä¼˜åŒ–</td></tr></tbody></table><p><strong>é¢è¯•å¸¸è€ƒç®—æ³•é¢˜å‹ï¼š</strong></p><table><thead><tr><th>é¢˜å‹</th><th>å…¸å‹ä¾‹é¢˜</th><th>è§£é¢˜æ€è·¯</th><th>æ—¶é—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>æ•°ç»„åŒæŒ‡é’ˆ</td><td>ä¸¤æ•°ä¹‹å’Œã€ä¸‰æ•°ä¹‹å’Œ</td><td>æ’åº+åŒæŒ‡é’ˆç§»åŠ¨</td><td>O(n) - O(nÂ²)</td></tr><tr><td>é“¾è¡¨æ“ä½œ</td><td>åè½¬é“¾è¡¨ã€ç¯å½¢é“¾è¡¨æ£€æµ‹</td><td>å¿«æ…¢æŒ‡é’ˆã€é€’å½’</td><td>O(n)</td></tr><tr><td>äºŒå‰æ ‘é€’å½’</td><td>æœ€å¤§æ·±åº¦ã€è·¯å¾„å’Œ</td><td>é€’å½’åˆ†æ²»</td><td>O(n)</td></tr><tr><td>åŠ¨æ€è§„åˆ’</td><td>çˆ¬æ¥¼æ¢¯ã€æœ€å¤§å­æ•°ç»„å’Œ</td><td>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</td><td>O(n) - O(nÂ²)</td></tr><tr><td>å›æº¯ç®—æ³•</td><td>å…¨æ’åˆ—ã€Nçš‡åé—®é¢˜</td><td>é€’å½’+å›æº¯</td><td>O(n!)</td></tr><tr><td>æ»‘åŠ¨çª—å£</td><td>æœ€é•¿æ— é‡å¤å­ä¸²</td><td>çª—å£æ‰©å±•å’Œæ”¶ç¼©</td><td>O(n)</td></tr></tbody></table><h2 id="è®¡ç®—æœºç½‘ç»œ" tabindex="-1"><a class="header-anchor" href="#è®¡ç®—æœºç½‘ç»œ"><span>è®¡ç®—æœºç½‘ç»œ</span></a></h2><h3 id="_1-tcpå’Œudpçš„åŒºåˆ«-tcpåŸºäºæµå’ŒudpåŸºäºæ•°æ®åŒ…çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_1-tcpå’Œudpçš„åŒºåˆ«-tcpåŸºäºæµå’ŒudpåŸºäºæ•°æ®åŒ…çš„åŒºåˆ«"><span>1. TCPå’ŒUDPçš„åŒºåˆ«ï¼ŸTCPåŸºäºæµå’ŒUDPåŸºäºæ•°æ®åŒ…çš„åŒºåˆ«ï¼Ÿ</span></a></h3><p><strong>åŸºæœ¬ç‰¹æ€§å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>TCP</th><th>UDP</th></tr></thead><tbody><tr><td>è¿æ¥æ€§</td><td>é¢å‘è¿æ¥ï¼ˆéœ€è¦å»ºç«‹è¿æ¥ï¼‰</td><td>æ— è¿æ¥ï¼ˆç›´æ¥å‘é€æ•°æ®ï¼‰</td></tr><tr><td>å¯é æ€§</td><td>å¯é ä¼ è¾“ï¼ˆç¡®è®¤ã€é‡ä¼ ã€æ’åºï¼‰</td><td>ä¸å¯é ä¼ è¾“ï¼ˆä¸ä¿è¯åˆ°è¾¾ï¼‰</td></tr><tr><td>æµé‡æ§åˆ¶</td><td>æ”¯æŒï¼ˆæ»‘åŠ¨çª—å£ï¼‰</td><td>ä¸æ”¯æŒ</td></tr><tr><td>æ‹¥å¡æ§åˆ¶</td><td>æ”¯æŒï¼ˆæ…¢å¯åŠ¨ã€æ‹¥å¡é¿å…ç­‰ï¼‰</td><td>ä¸æ”¯æŒ</td></tr><tr><td>æ•°æ®è¾¹ç•Œ</td><td>æ— è¾¹ç•Œï¼ˆæµå¼ä¼ è¾“ï¼‰</td><td>æœ‰è¾¹ç•Œï¼ˆæ•°æ®æŠ¥ä¼ è¾“ï¼‰</td></tr><tr><td>å¼€é”€</td><td>å¤§ï¼ˆ20å­—èŠ‚å¤´éƒ¨+è¿æ¥ç®¡ç†ï¼‰</td><td>å°ï¼ˆ8å­—èŠ‚å¤´éƒ¨ï¼‰</td></tr><tr><td>é€Ÿåº¦</td><td>ç›¸å¯¹è¾ƒæ…¢</td><td>å¿«</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å¯é æ€§è¦æ±‚é«˜çš„åº”ç”¨</td><td>å®æ—¶æ€§è¦æ±‚é«˜çš„åº”ç”¨</td></tr></tbody></table><p><strong>æµå¼ä¼ è¾“ vs æ•°æ®åŒ…ä¼ è¾“æ ¸å¿ƒåŒºåˆ«ï¼š</strong></p><table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>TCPæµå¼ä¼ è¾“</th><th>UDPæ•°æ®åŒ…ä¼ è¾“</th></tr></thead><tbody><tr><td>æ•°æ®ä¼ è¾“æ–¹å¼</td><td>è¿ç»­çš„å­—èŠ‚æµï¼Œæ— æ¶ˆæ¯è¾¹ç•Œ</td><td>ç‹¬ç«‹çš„æ•°æ®æŠ¥ï¼Œæœ‰æ˜ç¡®è¾¹ç•Œ</td></tr><tr><td>æ•°æ®é¡ºåº</td><td>ä¿è¯æŒ‰åºåˆ°è¾¾</td><td>ä¸ä¿è¯é¡ºåº</td></tr><tr><td>æ•°æ®å®Œæ•´æ€§</td><td>è‡ªåŠ¨é‡ä¼ ä¸¢å¤±æ•°æ®</td><td>ä¸¢å¤±å°±ä¸¢å¤±ï¼Œä¸é‡ä¼ </td></tr><tr><td>å‘é€/æ¥æ”¶</td><td>å¯åˆ†æ‰¹å‘é€ï¼Œå¯åˆ†æ‰¹æ¥æ”¶</td><td>ä¸€æ¬¡å‘é€ä¸€ä¸ªå®Œæ•´æ•°æ®æŠ¥</td></tr><tr><td>ç¼“å†²åŒºå¤„ç†</td><td>å†…æ ¸è‡ªåŠ¨ç®¡ç†å‘é€/æ¥æ”¶ç¼“å†²åŒº</td><td>åº”ç”¨å±‚ç›´æ¥å¤„ç†</td></tr><tr><td>æ¶ˆæ¯è¾¹ç•Œä¿æŠ¤</td><td>æ— æ¶ˆæ¯è¾¹ç•Œï¼Œéœ€è¦åº”ç”¨å±‚åè®®å®šä¹‰</td><td>å¤©ç„¶ä¿æŒæ¶ˆæ¯è¾¹ç•Œ</td></tr></tbody></table><p><strong>TCPå’ŒUDPå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç»´åº¦</th><th>TCP (Transmission Control Protocol)</th><th>UDP (User Datagram Protocol)</th></tr></thead><tbody><tr><td>æ˜¯å¦è¿æ¥</td><td>é¢å‘è¿æ¥ï¼šä¸‰æ¬¡æ¡æ‰‹å»ºç«‹ï¼Œå››æ¬¡æŒ¥æ‰‹é‡Šæ”¾</td><td>æ— è¿æ¥ï¼šç›´æ¥å‘æŠ¥æ–‡</td></tr><tr><td>å¯é æ€§</td><td>åºåˆ—å· + ACK + é‡ä¼  â†’ <strong>å¯é ã€æœ‰åºã€ä¸ä¸¢ä¸é‡</strong></td><td>Best-Effortï¼š<strong>å¯èƒ½ä¸¢ã€ä¹±åºã€é‡å¤ï¼Œä¸ä¿è¯é€è¾¾</strong></td></tr><tr><td>ä¼ è¾“ç²’åº¦</td><td>å­—èŠ‚æµï¼ˆStreamï¼‰ åº”ç”¨çœ‹ä¸åˆ°åˆ†æ®µ</td><td>æŠ¥æ–‡ï¼ˆDatagramï¼‰ ä¸€æ¬¡send()ï¼ä¸€æ¬¡å®Œæ•´åŒ…</td></tr><tr><td>æµé‡ / æ‹¥å¡æ§åˆ¶</td><td>æœ‰çª—å£ + æ‹¥å¡ç®—æ³•ï¼ˆæ…¢å¯åŠ¨ã€æ‹¥å¡é¿å…ã€BBRâ€¦ï¼‰</td><td>æ— æµæ§ã€æ— æ‹¥å¡æ§åˆ¶ï¼Œ<strong>å‘å¾—å¿«ä¸¢å¾—å¤š</strong></td></tr><tr><td>é¦–éƒ¨å¼€é”€</td><td>20 Byte èµ·ï¼Œå¸¦é€‰é¡¹å¯åˆ° 40â€“60 Byte</td><td>8 Byte å›ºå®šï¼Œç»“æ„ç®€å•</td></tr><tr><td>ä¼ è¾“é€Ÿåº¦</td><td>ç¨³å®šä½†æ¡æ‰‹ + æ‹¥å¡æ§åˆ¶ â†’ <strong>é¦–åŒ…æ…¢ï¼Œç¨³ä¸­æ±‚èƒœ</strong></td><td><strong>ä½å»¶è¿Ÿã€æŠ–åŠ¨å°</strong>ï¼Œä½†éœ€åº”ç”¨è‡ªè¡Œå®¹é”™</td></tr><tr><td>ç»„æ’­ / å¹¿æ’­</td><td>ä¸æ”¯æŒ</td><td>åŸç”Ÿæ”¯æŒå•æ’­ / ç»„æ’­ / å¹¿æ’­</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>HTTP/HTTPSã€FTPã€æ•°æ®åº“ã€ç”µå­é‚®ä»¶â€¦</td><td>DNSã€VoIPã€ç›´æ’­ã€åœ¨çº¿æ¸¸æˆã€DHCPâ€¦</td></tr><tr><td>ç¨³å®šæ€§æˆæœ¬</td><td>ç«¯å£å ç”¨å¤šã€FD å¸¸é©»ã€æ¡æ‰‹è€— RTT</td><td>èµ„æºå ç”¨ä½ã€æ— çŠ¶æ€ã€æœåŠ¡ç«¯æ˜“åšå¹¶å‘</td></tr><tr><td>æ¶ˆæ¯è¾¹ç•Œ</td><td>æ— ï¼Œéœ€åº”ç”¨å±‚è‡ªè¡Œåˆ’åˆ†</td><td>å¤©ç„¶ä¿ç•™è¾¹ç•Œï¼Œä¸€åŒ…ä¸€æ¶ˆæ¯</td></tr></tbody></table><h3 id="_2-osiä¸ƒå±‚æ¨¡å‹å’Œtcp-ipå››å±‚æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_2-osiä¸ƒå±‚æ¨¡å‹å’Œtcp-ipå››å±‚æ¨¡å‹"><span>2. OSIä¸ƒå±‚æ¨¡å‹å’ŒTCP/IPå››å±‚æ¨¡å‹ï¼Ÿ</span></a></h3><p><strong>æ¨¡å‹å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>OSIä¸ƒå±‚æ¨¡å‹</th><th>TCP/IPå››å±‚æ¨¡å‹</th><th>ä¸»è¦åè®®</th><th>åŠŸèƒ½æè¿°</th><th>å…¸å‹è®¾å¤‡</th></tr></thead><tbody><tr><td>åº”ç”¨å±‚</td><td>åº”ç”¨å±‚</td><td>HTTPã€HTTPSã€FTPã€SMTP</td><td>ä¸ºç”¨æˆ·æä¾›ç½‘ç»œæœåŠ¡æ¥å£</td><td>æµè§ˆå™¨ã€é‚®ä»¶å®¢æˆ·ç«¯</td></tr><tr><td>è¡¨ç¤ºå±‚</td><td>â†‘</td><td>SSL/TLSã€JPEGã€MPEG</td><td>æ•°æ®æ ¼å¼è½¬æ¢ã€åŠ å¯†è§£å¯†</td><td>-</td></tr><tr><td>ä¼šè¯å±‚</td><td>â†‘</td><td>NetBIOSã€RPC</td><td>å»ºç«‹ã€ç®¡ç†ã€ç»ˆæ­¢ä¼šè¯</td><td>-</td></tr><tr><td>ä¼ è¾“å±‚</td><td>ä¼ è¾“å±‚</td><td>TCPã€UDP</td><td>ç«¯åˆ°ç«¯çš„å¯é æ•°æ®ä¼ è¾“</td><td>å››å±‚äº¤æ¢æœº</td></tr><tr><td>ç½‘ç»œå±‚</td><td>ç½‘ç»œå±‚</td><td>IPã€ICMP</td><td>è·¯å¾„é€‰æ‹©ã€é€»è¾‘åœ°å€</td><td>è·¯ç”±å™¨</td></tr><tr><td>æ•°æ®é“¾è·¯å±‚</td><td>æ•°æ®é“¾è·¯å±‚</td><td>Ethernetã€PPPã€WiFiã€ARP</td><td>ç‰©ç†åœ°å€ã€é”™è¯¯æ£€æµ‹</td><td>äº¤æ¢æœºã€ç½‘å¡</td></tr><tr><td>ç‰©ç†å±‚</td><td>â†‘</td><td>RJ45ã€å…‰çº¤ã€æ— çº¿</td><td>æ¯”ç‰¹æµä¼ è¾“ã€ç‰©ç†è¿æ¥</td><td>é›†çº¿å™¨ã€ä¸­ç»§å™¨</td></tr></tbody></table><p><strong>æ•°æ®å°è£…è¿‡ç¨‹ï¼š</strong></p><table><thead><tr><th>å±‚æ¬¡</th><th>æ•°æ®å•ä½</th><th>æ·»åŠ çš„å¤´éƒ¨</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>åº”ç”¨å±‚</td><td>Data</td><td>åº”ç”¨å¤´éƒ¨</td><td>åº”ç”¨åè®®ä¿¡æ¯</td><td>HTTPè¯·æ±‚</td></tr><tr><td>ä¼ è¾“å±‚</td><td>Segment</td><td>TCP/UDPå¤´</td><td>ç«¯å£å·ã€åºåˆ—å·</td><td>TCPæ®µ</td></tr><tr><td>ç½‘ç»œå±‚</td><td>Packet</td><td>IPå¤´</td><td>æº/ç›®æ ‡IPåœ°å€</td><td>IPæ•°æ®åŒ…</td></tr><tr><td>æ•°æ®é“¾è·¯å±‚</td><td>Frame</td><td>ä»¥å¤ªç½‘å¤´</td><td>MACåœ°å€</td><td>ä»¥å¤ªç½‘å¸§</td></tr><tr><td>ç‰©ç†å±‚</td><td>Bit</td><td>-</td><td>ç”µä¿¡å·ä¼ è¾“</td><td>æ¯”ç‰¹æµ</td></tr></tbody></table><h3 id="_3-httpå’Œhttpsçš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_3-httpå’Œhttpsçš„åŒºåˆ«"><span>3. HTTPå’ŒHTTPSçš„åŒºåˆ«ï¼Ÿ</span></a></h3><p><strong>æ ¸å¿ƒå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>HTTP</th><th>HTTPS</th></tr></thead><tbody><tr><td>å®‰å…¨æ€§</td><td>æ˜æ–‡ä¼ è¾“ï¼Œä¸å®‰å…¨</td><td>SSL/TLSåŠ å¯†ï¼Œå®‰å…¨</td></tr><tr><td>ç«¯å£</td><td>80</td><td>443</td></tr><tr><td>æ€§èƒ½</td><td>å¿«</td><td>ç›¸å¯¹è¾ƒæ…¢ï¼ˆåŠ å¯†å¼€é”€ï¼‰</td></tr><tr><td>è¯ä¹¦</td><td>ä¸éœ€è¦</td><td>éœ€è¦CAè¯ä¹¦</td></tr><tr><td>SEO</td><td>ä¸€èˆ¬</td><td>æœç´¢å¼•æ“æ›´åå¥½</td></tr><tr><td>æˆæœ¬</td><td>ä½</td><td>é«˜ï¼ˆè¯ä¹¦è´¹ç”¨ï¼‰</td></tr></tbody></table><p><strong>HTTPçŠ¶æ€ç åˆ†ç±»ï¼š</strong></p><table><thead><tr><th>ç±»åˆ«</th><th>èŒƒå›´</th><th>å«ä¹‰</th><th>å¸¸è§çŠ¶æ€ç </th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ä¿¡æ¯å“åº”</td><td>1xx</td><td>è¯·æ±‚å·²æ¥æ”¶ï¼Œç»§ç»­å¤„ç†</td><td>100 Continue</td><td>å®¢æˆ·ç«¯åº”ç»§ç»­è¯·æ±‚</td></tr><tr><td>æˆåŠŸå“åº”</td><td>2xx</td><td>è¯·æ±‚æˆåŠŸå¤„ç†</td><td>200 OK, 201 Created</td><td>è¯·æ±‚æˆåŠŸ</td></tr><tr><td>é‡å®šå‘</td><td>3xx</td><td>éœ€è¦è¿›ä¸€æ­¥æ“ä½œ</td><td>301 Moved, 302 Found</td><td>èµ„æºå·²ç§»åŠ¨</td></tr><tr><td>å®¢æˆ·ç«¯é”™è¯¯</td><td>4xx</td><td>å®¢æˆ·ç«¯è¯·æ±‚é”™è¯¯</td><td>404 Not Found, 403 Forbidden</td><td>è¯·æ±‚é”™è¯¯</td></tr><tr><td>æœåŠ¡ç«¯é”™è¯¯</td><td>5xx</td><td>æœåŠ¡å™¨å¤„ç†é”™è¯¯</td><td>500 Internal Error, 502 Bad Gateway</td><td>æœåŠ¡å™¨é”™è¯¯</td></tr></tbody></table><p><strong>TLSæ¡æ‰‹è¿‡ç¨‹ï¼š</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>TLS 1.3 æ¡æ‰‹è¿‡ç¨‹ï¼š</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Client                         Server</span></span>
<span class="line"><span>  | ------- ClientHello --------&gt; |  ğŸ‘‹ åŒ…å«æ”¯æŒçš„åŠ å¯†ç®—æ³• + éšæœºæ•° + KeyShare</span></span>
<span class="line"><span>  | &lt;------ ServerHello --------- |  ğŸ¤ é€‰å®šç®—æ³•ï¼Œè¿”å›éšæœºæ•° + KeyShare</span></span>
<span class="line"><span>  | &lt;------ EncryptedExtensions - |</span></span>
<span class="line"><span>  | &lt;------ Certificate ----------|</span></span>
<span class="line"><span>  | &lt;------ CertificateVerify ----| ğŸªª éªŒè¯æœåŠ¡å™¨èº«ä»½</span></span>
<span class="line"><span>  | &lt;------ Finished -------------| âœ… æœåŠ¡ç«¯å®Œæˆæ¡æ‰‹</span></span>
<span class="line"><span>  | -------- Finished -----------&gt;| âœ… å®¢æˆ·ç«¯ç¡®è®¤å®Œæˆ</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-tcpä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹" tabindex="-1"><a class="header-anchor" href="#_4-tcpä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹"><span>4. TCPä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ï¼Ÿ</span></a></h3><p><strong>ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ï¼š</strong></p><table><thead><tr><th>æ­¥éª¤</th><th>å‘é€æ–¹</th><th>æ ‡å¿—ä½</th><th>åºåˆ—å·</th><th>ç¡®è®¤å·</th><th>ä½œç”¨</th><th>çŠ¶æ€å˜åŒ–</th></tr></thead><tbody><tr><td>1</td><td>å®¢æˆ·ç«¯</td><td>SYN=1</td><td>seq=x</td><td>-</td><td>è¯·æ±‚å»ºç«‹è¿æ¥</td><td>CLOSED â†’ SYN_SENT</td></tr><tr><td>2</td><td>æœåŠ¡ç«¯</td><td>SYN=1, ACK=1</td><td>seq=y</td><td>ack=x+1</td><td>åŒæ„è¿æ¥ï¼Œç¡®è®¤å®¢æˆ·ç«¯</td><td>SYN_SENT â†’ SYN_RCVD</td></tr><tr><td>3</td><td>å®¢æˆ·ç«¯</td><td>ACK=1</td><td>seq=x+1</td><td>ack=y+1</td><td>ç¡®è®¤æœåŠ¡ç«¯ï¼Œè¿æ¥å»ºç«‹</td><td>SYN_RCVD â†’ ESTABLISHED</td></tr></tbody></table><table><thead><tr><th>åç§°</th><th>ä½œç”¨é˜¶æ®µ</th><th>å­˜æ”¾ä»€ä¹ˆ</th><th>é˜Ÿåˆ—æ»¡ä¼šæ€æ ·</th></tr></thead><tbody><tr><td>åŠè¿æ¥é˜Ÿåˆ—</td><td>ç¬¬ä¸€æ¬¡åˆ°ç¬¬ä¸‰æ¬¡æ¡æ‰‹å‰</td><td>æ­£åœ¨è¿›è¡Œæ¡æ‰‹ï¼ˆSYNå·²æ”¶åˆ°ï¼‰</td><td>æ‹’ç»æ–°çš„ SYNï¼ˆå¯èƒ½å¯¼è‡´æ¡æ‰‹å¤±è´¥ï¼‰</td></tr><tr><td>å…¨è¿æ¥é˜Ÿåˆ—</td><td>æ¡æ‰‹å®Œæˆå</td><td>ç­‰å¾…è¢« <code>accept()</code> çš„è¿æ¥</td><td>æ–°è¿æ¥è¢«ä¸¢å¼ƒï¼ˆæ¡æ‰‹è™½ç„¶å®Œæˆï¼‰</td></tr></tbody></table><ul><li>åŠè¿æ¥é˜Ÿåˆ— â†’ é˜²æ”»å‡»ï¼š SYN æ´ªæ³›æ”»å‡»åˆ©ç”¨ä¸å‘æœ€åä¸€ä¸ª ACK æ¶ˆè€—æœåŠ¡ç«¯èµ„æºã€‚å¯ä»¥è®¾ç½®åŠè¿æ¥é˜Ÿåˆ—å¤§å°ï¼Œè¶…è¿‡åˆ™ä¸¢å¼ƒSYNåŒ…</li><li>å…¨è¿æ¥é˜Ÿåˆ— â†’ è§£è€¦ï¼š ä¸‰æ¬¡æ¡æ‰‹å®Œæˆä¸ç­‰äºåº”ç”¨ç«‹åˆ»å¤„ç†ï¼Œå› æ­¤éœ€è¦ç¼“å†²åŒºã€‚</li></ul><p><strong>å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹ï¼š</strong></p><table><thead><tr><th>æ­¥éª¤</th><th>å‘é€æ–¹</th><th>æ ‡å¿—ä½</th><th>è¯´æ˜</th><th>çŠ¶æ€å˜åŒ–</th></tr></thead><tbody><tr><td>1</td><td>å®¢æˆ·ç«¯</td><td>FIN=1</td><td>å®¢æˆ·ç«¯è¯·æ±‚å…³é—­è¿æ¥</td><td>FIN_WAIT_1</td></tr><tr><td>2</td><td>æœåŠ¡ç«¯</td><td>ACK=1</td><td>æœåŠ¡ç«¯ç¡®è®¤æ”¶åˆ°å…³é—­è¯·æ±‚</td><td>CLOSE_WAIT</td></tr><tr><td>3</td><td>æœåŠ¡ç«¯</td><td>FIN=1</td><td>æœåŠ¡ç«¯ä¹Ÿè¯·æ±‚å…³é—­è¿æ¥</td><td>LAST_ACK</td></tr><tr><td>4</td><td>å®¢æˆ·ç«¯</td><td>ACK=1</td><td>å®¢æˆ·ç«¯ç¡®è®¤ï¼Œè¿æ¥å…³é—­</td><td>TIME_WAIT â†’ CLOSED</td></tr></tbody></table><ul><li>TIME_WAIT çŠ¶æ€æ˜¯ TCP è¿æ¥åœ¨å…³é—­åä»ç„¶ä¿æŒçš„çŠ¶æ€ï¼Œç”¨äºç¡®ä¿è¿æ¥çš„å¯é å…³é—­ã€‚ <ul><li>é˜²æ­¢æ—§è¿æ¥çš„æ•°æ®åŒ…å¹²æ‰°æ–°è¿æ¥</li><li>ç¡®ä¿æœ€åçš„ACKèƒ½å¤Ÿåˆ°è¾¾å¯¹ç«¯</li><li>ç»™ç½‘ç»œä¸­çš„å»¶è¿ŸåŒ…è¶³å¤Ÿæ—¶é—´æ¶ˆå¤±</li><li>é»˜è®¤æ—¶é—´ï¼š2*MSLï¼ˆMaximum Segment Lifetimeï¼‰</li><li>TIME_WAIT è¿‡å¤šä¼šå¯¼è‡´æœ¬åœ° ç«¯å£è€—å°½ã€å†…å­˜/CPU å ç”¨å‡é«˜ï¼Œå½±å“æ–°è¿æ¥å»ºç«‹ä¸ç³»ç»Ÿååï¼Œå¯é€šè¿‡ é•¿è¿æ¥/è¿æ¥æ± ã€å†…æ ¸å‚æ•°è°ƒä¼˜ã€æ€¥è¿«å…³é—­ ç­‰æ–¹å¼ä¼˜åŒ–ã€‚</li></ul></li><li>é™¤äº†æ ‡å‡†çš„å››æ¬¡æŒ¥æ‰‹ï¼ˆFIN/ACKï¼‰ä¼˜é›…å…³é—­ï¼ŒTCP è¿˜å¯ä»¥é€šè¿‡å‘é€ RST æŠ¥æ–‡è¿›è¡Œæ€¥è¿«ä¸­æ–­ï¼ˆAbortive Closeï¼‰ï¼Œä»¥ç«‹å³é‡Šæ”¾è¿æ¥èµ„æºã€‚</li></ul><p><strong>ä¸ºä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ</strong></p><table><thead><tr><th>æ¬¡æ•°</th><th>é—®é¢˜</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ä¸€æ¬¡</td><td>æ— æ³•ç¡®è®¤æœåŠ¡ç«¯æ¥æ”¶èƒ½åŠ›</td><td>å®¢æˆ·ç«¯ä¸çŸ¥é“è‡ªå·±å‘çš„æ¶ˆæ¯æœåŠ¡ç«¯èƒ½å¦æ”¶åˆ°</td></tr><tr><td>ä¸¤æ¬¡</td><td>æ— æ³•ç¡®è®¤å®¢æˆ·ç«¯æ¥æ”¶èƒ½åŠ›</td><td>æœåŠ¡ç«¯ä¸çŸ¥é“è‡ªå·±å‘çš„æ¶ˆæ¯å®¢æˆ·ç«¯èƒ½å¦æ”¶åˆ°</td></tr><tr><td>ä¸‰æ¬¡</td><td>âœ… å®Œç¾è§£å†³</td><td>åŒæ–¹éƒ½ç¡®è®¤äº†å¯¹æ–¹çš„å‘é€å’Œæ¥æ”¶èƒ½åŠ›</td></tr><tr><td>å››æ¬¡</td><td>æµªè´¹èµ„æº</td><td>ä¸‰æ¬¡å·²ç»è¶³å¤Ÿï¼Œç¬¬å››æ¬¡æ˜¯å¤šä½™çš„</td></tr></tbody></table><p><strong>ä¸ºä»€ä¹ˆæ˜¯å››æ¬¡æŒ¥æ‰‹ï¼Ÿ</strong></p><table><thead><tr><th>åŸå› </th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>TCPå…¨åŒå·¥é€šä¿¡</td><td>éœ€è¦åˆ†åˆ«å…³é—­ä¸¤ä¸ªæ–¹å‘çš„è¿æ¥</td></tr><tr><td>æ•°æ®ä¼ è¾“å¯èƒ½æœªå®Œæˆ</td><td>æœåŠ¡ç«¯å¯èƒ½è¿˜æœ‰æ•°æ®è¦å‘é€</td></tr><tr><td>ACKå’ŒFINåˆ†å¼€å‘é€</td><td>æœåŠ¡ç«¯å…ˆç¡®è®¤æ”¶åˆ°å…³é—­è¯·æ±‚ï¼Œå†å‘é€è‡ªå·±çš„å…³é—­è¯·æ±‚</td></tr></tbody></table><h3 id="_5-ä»è¾“å…¥urlåˆ°é¡µé¢æ˜¾ç¤ºçš„å®Œæ•´è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_5-ä»è¾“å…¥urlåˆ°é¡µé¢æ˜¾ç¤ºçš„å®Œæ•´è¿‡ç¨‹"><span>5. ä»è¾“å…¥URLåˆ°é¡µé¢æ˜¾ç¤ºçš„å®Œæ•´è¿‡ç¨‹ï¼Ÿ</span></a></h3><p><strong>è¯¦ç»†æ­¥éª¤åˆ†è§£ï¼š</strong></p><table><thead><tr><th>é˜¶æ®µ</th><th>æ­¥éª¤</th><th>å…·ä½“æ“ä½œ</th><th>æ—¶é—´æ¶ˆè€—</th><th>æ¶‰åŠåè®®</th></tr></thead><tbody><tr><td><strong>URLè§£æ</strong></td><td>1</td><td>è§£æURLå„éƒ¨åˆ†</td><td>&lt;1ms</td><td>-</td></tr><tr><td><strong>DNSè§£æ</strong></td><td>2</td><td>åŸŸåè§£æä¸ºIPåœ°å€</td><td>20-120ms</td><td>DNS</td></tr><tr><td><strong>å»ºç«‹è¿æ¥</strong></td><td>3</td><td>TCPä¸‰æ¬¡æ¡æ‰‹</td><td>10-100ms</td><td>TCP</td></tr><tr><td></td><td>4</td><td>TLSæ¡æ‰‹(HTTPS)</td><td>50-200ms</td><td>TLS</td></tr><tr><td><strong>å‘é€è¯·æ±‚</strong></td><td>5</td><td>å‘é€HTTPè¯·æ±‚</td><td>1-10ms</td><td>HTTP</td></tr><tr><td><strong>æœåŠ¡å™¨å¤„ç†</strong></td><td>6</td><td>æœåŠ¡å™¨å¤„ç†è¯·æ±‚</td><td>10-500ms</td><td>-</td></tr><tr><td><strong>è¿”å›å“åº”</strong></td><td>7</td><td>è¿”å›HTMLå†…å®¹</td><td>10-100ms</td><td>HTTP</td></tr><tr><td><strong>é¡µé¢æ¸²æŸ“</strong></td><td>8</td><td>è§£æHTML</td><td>10-50ms</td><td>-</td></tr><tr><td></td><td>9</td><td>åŠ è½½CSS/JS/å›¾ç‰‡</td><td>100-2000ms</td><td>HTTP</td></tr><tr><td></td><td>10</td><td>æ¸²æŸ“é¡µé¢</td><td>50-500ms</td><td>-</td></tr></tbody></table><p><strong>æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹ï¼š</strong></p><table><thead><tr><th>æ­¥éª¤</th><th>æ“ä½œ</th><th>äº§ç”Ÿç»“æœ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td>è§£æHTML</td><td>DOMæ ‘</td><td>æ–‡æ¡£å¯¹è±¡æ¨¡å‹</td></tr><tr><td>2</td><td>è§£æCSS</td><td>CSSOMæ ‘</td><td>CSSå¯¹è±¡æ¨¡å‹</td></tr><tr><td>3</td><td>åˆå¹¶DOMå’ŒCSSOM</td><td>æ¸²æŸ“æ ‘</td><td>ç¡®å®šæ˜¾ç¤ºå…ƒç´ å’Œæ ·å¼</td></tr><tr><td>4</td><td>è®¡ç®—å¸ƒå±€(Layout)</td><td>ç›’æ¨¡å‹</td><td>ç¡®å®šå…ƒç´ ä½ç½®å’Œå¤§å°</td></tr><tr><td>5</td><td>ç»˜åˆ¶(Paint)</td><td>åƒç´ </td><td>å¡«å……åƒç´ åˆ°å±å¹•</td></tr><tr><td>6</td><td>åˆæˆ(Composite)</td><td>æœ€ç»ˆé¡µé¢</td><td>å¤„ç†å±‚å ã€é€æ˜åº¦ç­‰</td></tr></tbody></table><h3 id="_6-tcpç²˜åŒ…å’Œæ‹†åŒ…é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_6-tcpç²˜åŒ…å’Œæ‹†åŒ…é—®é¢˜"><span>6. TCPç²˜åŒ…å’Œæ‹†åŒ…é—®é¢˜ï¼Ÿ</span></a></h3><p><strong>ç²˜åŒ…æ‹†åŒ…ç°è±¡ï¼š</strong></p><table><thead><tr><th>ç°è±¡</th><th>æè¿°</th><th>äº§ç”ŸåŸå› </th><th>ç¤ºä¾‹åœºæ™¯</th></tr></thead><tbody><tr><td>ç²˜åŒ…</td><td>å¤šä¸ªæ•°æ®åŒ…è¢«åˆå¹¶åœ¨ä¸€èµ·æ¥æ”¶</td><td>TCPç¼“å†²åŒºä¼˜åŒ–ã€Nagleç®—æ³•</td><td>è¿ç»­å‘é€å°æ•°æ®åŒ…</td></tr><tr><td>æ‹†åŒ…</td><td>ä¸€ä¸ªæ•°æ®åŒ…è¢«åˆ†å‰²æˆå¤šæ¬¡æ¥æ”¶</td><td>æ•°æ®åŒ…å¤§äºMSSã€æ¥æ”¶ç¼“å†²åŒºä¸è¶³</td><td>å‘é€å¤§æ•°æ®åŒ…</td></tr><tr><td>åŠåŒ…</td><td>æ•°æ®åŒ…æ¥æ”¶ä¸å®Œæ•´</td><td>ç½‘ç»œæ‹¥å¡ã€ç¼“å†²åŒºå¤§å°é™åˆ¶</td><td>ç½‘ç»œç¯å¢ƒä¸ç¨³å®š</td></tr></tbody></table><p><strong>äº§ç”ŸåŸå› è¯¦è§£ï¼š</strong></p><table><thead><tr><th>åŸå› ç±»åˆ«</th><th>å…·ä½“åŸå› </th><th>å½±å“èŒƒå›´</th><th>è§£å†³éš¾åº¦</th></tr></thead><tbody><tr><td>TCPæœºåˆ¶</td><td>æµå¼ä¼ è¾“ç‰¹æ€§ï¼Œæ— æ¶ˆæ¯è¾¹ç•Œ</td><td>æ‰€æœ‰TCPåº”ç”¨</td><td>åº”ç”¨å±‚è§£å†³</td></tr><tr><td>ç¼“å†²åŒºæœºåˆ¶</td><td>å‘é€/æ¥æ”¶ç¼“å†²åŒºå¤§å°ä¸åŒ¹é…</td><td>é«˜é¢‘å°æ•°æ®ä¼ è¾“</td><td>è°ƒä¼˜é…ç½®</td></tr><tr><td>Nagleç®—æ³•</td><td>å°åŒ…åˆå¹¶ç®—æ³•ï¼Œæé«˜ç½‘ç»œåˆ©ç”¨ç‡</td><td>å°æ•°æ®åŒ…åœºæ™¯</td><td>å…³é—­ç®—æ³•</td></tr><tr><td>MSSé™åˆ¶</td><td>æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦é™åˆ¶ï¼Œå¤§åŒ…ä¼šè¢«åˆ†å‰²</td><td>å¤§æ•°æ®ä¼ è¾“</td><td>åˆ†ç‰‡å¤„ç†</td></tr><tr><td>ç½‘ç»œä¼ è¾“</td><td>ç½‘ç»œå»¶è¿Ÿã€ä¸¢åŒ…é‡ä¼ å¯¼è‡´æ•°æ®åˆ°è¾¾ä¸è¿ç»­</td><td>ä¸ç¨³å®šç½‘ç»œç¯å¢ƒ</td><td>ç½‘ç»œä¼˜åŒ–</td></tr></tbody></table><p><strong>è§£å†³æ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>è§£å†³æ–¹æ¡ˆ</th><th>å®ç°åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å›ºå®šé•¿åº¦</td><td>æ¯ä¸ªæ¶ˆæ¯å›ºå®šå­—èŠ‚æ•°</td><td>å®ç°ç®€å•</td><td>æµªè´¹ç©ºé—´ï¼Œä¸çµæ´»</td><td>å®šé•¿æ¶ˆæ¯åœºæ™¯</td></tr><tr><td>åˆ†éš”ç¬¦</td><td>ä½¿ç”¨ç‰¹å®šå­—ç¬¦ä½œä¸ºæ¶ˆæ¯åˆ†éš”ç¬¦</td><td>å®ç°ç®€å•ï¼ŒèŠ‚çœç©ºé—´</td><td>æ¶ˆæ¯å†…å®¹ä¸èƒ½åŒ…å«åˆ†éš”ç¬¦</td><td>æ–‡æœ¬åè®®</td></tr><tr><td>é•¿åº¦å‰ç¼€</td><td>æ¶ˆæ¯å¤´åŒ…å«æ¶ˆæ¯ä½“é•¿åº¦</td><td>çµæ´»ï¼Œæ”¯æŒå˜é•¿æ¶ˆæ¯</td><td>ç¨å¾®å¤æ‚</td><td>äºŒè¿›åˆ¶åè®®</td></tr><tr><td>å›ºå®šå¤´+å˜é•¿ä½“</td><td>å›ºå®šé•¿åº¦å¤´éƒ¨+å˜é•¿æ¶ˆæ¯ä½“</td><td>æœ€çµæ´»ï¼Œå·¥ä¸šæ ‡å‡†</td><td>å®ç°ç›¸å¯¹å¤æ‚</td><td>å¤æ‚åº”ç”¨åè®®</td></tr></tbody></table><p><strong>æ¡†æ¶è§£å†³æ–¹æ¡ˆï¼š</strong></p><table><thead><tr><th>æ¡†æ¶/åº“</th><th>è§£å†³æ–¹å¼</th><th>ç‰¹ç‚¹</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Netty</td><td>ByteToMessageDecoder</td><td>é«˜æ€§èƒ½ï¼Œçµæ´»çš„ç¼–è§£ç å™¨</td><td>é«˜å¹¶å‘ç½‘ç»œåº”ç”¨</td></tr><tr><td>Protobuf</td><td>é•¿åº¦å‰ç¼€+åºåˆ—åŒ–</td><td>è·¨è¯­è¨€ï¼Œé«˜æ•ˆåºåˆ—åŒ–</td><td>å¾®æœåŠ¡é€šä¿¡</td></tr><tr><td>Thrift</td><td>å¸§ä¼ è¾“+äºŒè¿›åˆ¶åè®®</td><td>RPCæ¡†æ¶ï¼Œè‡ªåŠ¨å¤„ç†</td><td>åˆ†å¸ƒå¼æœåŠ¡</td></tr><tr><td>HTTP</td><td>Content-Lengthå¤´</td><td>æ ‡å‡†åŒ–åè®®</td><td>Webåº”ç”¨</td></tr><tr><td>WebSocket</td><td>å¸§æ ¼å¼å®šä¹‰</td><td>å®æ—¶åŒå‘é€šä¿¡</td><td>å®æ—¶åº”ç”¨</td></tr><tr><td>MessagePack</td><td>è‡ªæè¿°æ ¼å¼</td><td>ç´§å‡‘çš„åºåˆ—åŒ–æ ¼å¼</td><td>æ•°æ®ä¼ è¾“ä¼˜åŒ–</td></tr></tbody></table><p><strong>æœ€ä½³å®è·µå»ºè®®ï¼š</strong></p><table><thead><tr><th>å®è·µå»ºè®®</th><th>å…·ä½“åšæ³•</th><th>é¢„æœŸæ•ˆæœ</th></tr></thead><tbody><tr><td>æ ¹æ®åº”ç”¨ç‰¹ç‚¹é€‰æ‹©æ–¹æ¡ˆ</td><td>æ–‡æœ¬åè®®ç”¨åˆ†éš”ç¬¦ï¼ŒäºŒè¿›åˆ¶åè®®ç”¨é•¿åº¦å‰ç¼€</td><td>å¹³è¡¡æ€§èƒ½å’Œå¤æ‚åº¦</td></tr><tr><td>è®¾ç½®åˆç†çš„ç¼“å†²åŒºå¤§å°</td><td>æ ¹æ®æ¶ˆæ¯å¤§å°è°ƒæ•´Socketç¼“å†²åŒº</td><td>å‡å°‘ç²˜åŒ…æ‹†åŒ…å‘ç”Ÿé¢‘ç‡</td></tr><tr><td>ä½¿ç”¨æˆç†Ÿæ¡†æ¶</td><td>ä¼˜å…ˆé€‰æ‹©Nettyç­‰æˆç†Ÿç½‘ç»œæ¡†æ¶</td><td>å‡å°‘å¼€å‘å·¥ä½œé‡å’ŒBug</td></tr><tr><td>å……åˆ†æµ‹è¯•è¾¹ç•Œæƒ…å†µ</td><td>æµ‹è¯•ç½‘ç»œå»¶è¿Ÿã€å¤§å°åŒ…æ··åˆç­‰åœºæ™¯</td><td>ç¡®ä¿åè®®è§£æçš„å¥å£®æ€§</td></tr><tr><td>ç›‘æ§å’Œæ—¥å¿—</td><td>è®°å½•è§£åŒ…å¤±è´¥ã€åè®®é”™è¯¯ç­‰å¼‚å¸¸</td><td>å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜</td></tr></tbody></table><h3 id="_7-dnsè§£æè¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_7-dnsè§£æè¿‡ç¨‹"><span>7. DNSè§£æè¿‡ç¨‹ï¼Ÿ</span></a></h3><p><strong>DNSè§£ææ­¥éª¤ï¼š</strong></p><table><thead><tr><th>æ­¥éª¤</th><th>æ“ä½œ</th><th>æ¶‰åŠçš„DNSæœåŠ¡å™¨</th><th>æŸ¥è¯¢ç±»å‹</th><th>ç¼“å­˜ä½ç½®</th></tr></thead><tbody><tr><td>1</td><td>æ£€æŸ¥æœ¬åœ°ç¼“å­˜</td><td>æœ¬åœ°DNSç¼“å­˜</td><td>-</td><td>æµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿ</td></tr><tr><td>2</td><td>æŸ¥è¯¢æœ¬åœ°DNSæœåŠ¡å™¨</td><td>é€’å½’DNSæœåŠ¡å™¨</td><td>é€’å½’æŸ¥è¯¢</td><td>ISP DNS</td></tr><tr><td>3</td><td>æŸ¥è¯¢æ ¹åŸŸåæœåŠ¡å™¨</td><td>æ ¹DNSæœåŠ¡å™¨</td><td>è¿­ä»£æŸ¥è¯¢</td><td>å…¨çƒ13ä¸ªæ ¹æœåŠ¡å™¨</td></tr><tr><td>4</td><td>æŸ¥è¯¢é¡¶çº§åŸŸDNSæœåŠ¡å™¨</td><td>TLD DNSæœåŠ¡å™¨</td><td>è¿­ä»£æŸ¥è¯¢</td><td>.com, .orgç­‰</td></tr><tr><td>5</td><td>æŸ¥è¯¢æƒå¨åŸŸåæœåŠ¡å™¨</td><td>æƒå¨DNSæœåŠ¡å™¨</td><td>è¿­ä»£æŸ¥è¯¢</td><td>åŸŸåæ³¨å†Œå•†</td></tr><tr><td>6</td><td>è¿”å›IPåœ°å€</td><td>-</td><td>-</td><td>é€å±‚ç¼“å­˜</td></tr></tbody></table><p><strong>DNSè®°å½•ç±»å‹ï¼š</strong></p><table><thead><tr><th>è®°å½•ç±»å‹</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>A</td><td>åŸŸåæŒ‡å‘IPv4åœ°å€</td><td>www.example.com â†’ 192.168.1.1</td><td>æœ€å¸¸è§çš„è®°å½•</td></tr><tr><td>AAAA</td><td>åŸŸåæŒ‡å‘IPv6åœ°å€</td><td>www.example.com â†’ 2001:db8::1</td><td>IPv6ç‰ˆæœ¬çš„Aè®°å½•</td></tr><tr><td>CNAME</td><td>åŸŸååˆ«å</td><td>www.example.com â†’ example.com</td><td>åŸŸåæŒ‡å‘å¦ä¸€ä¸ªåŸŸå</td></tr><tr><td>MX</td><td>é‚®ä»¶æœåŠ¡å™¨</td><td>example.com â†’ mail.example.com</td><td>é‚®ä»¶è·¯ç”±</td></tr><tr><td>NS</td><td>åŸŸåæœåŠ¡å™¨</td><td>example.com â†’ ns1.example.com</td><td>æŒ‡å®šæƒå¨DNS</td></tr><tr><td>TXT</td><td>æ–‡æœ¬è®°å½•</td><td>åŸŸåéªŒè¯ã€SPFè®°å½•</td><td>å¤šç”¨é€”æ–‡æœ¬ä¿¡æ¯</td></tr></tbody></table><h3 id="_8-cookieã€sessionã€localstorageã€jwtå¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#_8-cookieã€sessionã€localstorageã€jwtå¯¹æ¯”"><span>8. Cookieã€Sessionã€LocalStorageã€JWTå¯¹æ¯”</span></a></h3><h4 id="å­˜å‚¨ä½ç½®å’Œå®‰å…¨æ€§å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#å­˜å‚¨ä½ç½®å’Œå®‰å…¨æ€§å¯¹æ¯”"><span><strong>å­˜å‚¨ä½ç½®å’Œå®‰å…¨æ€§å¯¹æ¯”</strong></span></a></h4><table><thead><tr><th>ç‰¹æ€§</th><th>Cookie</th><th>Session</th><th>LocalStorage</th><th>JWT</th></tr></thead><tbody><tr><td><strong>å­˜å‚¨ä½ç½®</strong></td><td>å®¢æˆ·ç«¯æµè§ˆå™¨</td><td>æœåŠ¡ç«¯å†…å­˜/æ•°æ®åº“</td><td>å®¢æˆ·ç«¯æµè§ˆå™¨</td><td>å®¢æˆ·ç«¯æµè§ˆå™¨</td></tr><tr><td><strong>å­˜å‚¨å¤§å°</strong></td><td>4KBé™åˆ¶</td><td>æœåŠ¡å™¨å†…å­˜å†³å®š</td><td>5-10MB</td><td>æ— é™åˆ¶ï¼ˆä½†å»ºè®®&lt;4KBï¼‰</td></tr><tr><td><strong>å®‰å…¨æ€§</strong></td><td>ç›¸å¯¹ä¸å®‰å…¨</td><td>ç›¸å¯¹å®‰å…¨</td><td>ä¸å®‰å…¨</td><td>ç›¸å¯¹å®‰å…¨ï¼ˆç­¾åéªŒè¯ï¼‰</td></tr><tr><td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td><td>å¯è®¾ç½®è¿‡æœŸæ—¶é—´</td><td>ä¼šè¯ç»“æŸå³å¤±æ•ˆ</td><td>æ°¸ä¹…å­˜å‚¨ï¼ˆé™¤éæ‰‹åŠ¨åˆ é™¤ï¼‰</td><td>å¯è®¾ç½®è¿‡æœŸæ—¶é—´</td></tr><tr><td><strong>è·¨åŸŸæ”¯æŒ</strong></td><td>å—åŒæºç­–ç•¥é™åˆ¶</td><td>æœåŠ¡ç«¯æ§åˆ¶</td><td>åŒæºç­–ç•¥é™åˆ¶</td><td>å¯è·¨åŸŸä½¿ç”¨</td></tr><tr><td><strong>ç½‘ç»œä¼ è¾“</strong></td><td>æ¯æ¬¡è¯·æ±‚éƒ½å‘é€</td><td>åªä¼ è¾“SessionID</td><td>ä¸è‡ªåŠ¨ä¼ è¾“</td><td>æ¯æ¬¡è¯·æ±‚éƒ½å‘é€</td></tr></tbody></table><h4 id="å·¥ä½œæœºåˆ¶å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#å·¥ä½œæœºåˆ¶å¯¹æ¯”"><span><strong>å·¥ä½œæœºåˆ¶å¯¹æ¯”</strong></span></a></h4><table><thead><tr><th>æ­¥éª¤</th><th>Cookieæœºåˆ¶</th><th>Sessionæœºåˆ¶</th><th>LocalStorageæœºåˆ¶</th><th>JWTæœºåˆ¶</th></tr></thead><tbody><tr><td><strong>1</strong></td><td>æœåŠ¡ç«¯è®¾ç½®Set-Cookieå“åº”å¤´</td><td>æœåŠ¡ç«¯åˆ›å»ºSessionå¯¹è±¡</td><td>å®¢æˆ·ç«¯JavaScriptè®¾ç½®</td><td>æœåŠ¡ç«¯ç”ŸæˆJWT</td></tr><tr><td><strong>2</strong></td><td>æµè§ˆå™¨ä¿å­˜Cookieåˆ°æœ¬åœ°</td><td>æœåŠ¡ç«¯ç”ŸæˆSessionID</td><td>æµè§ˆå™¨ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨</td><td>æœåŠ¡ç«¯è¿”å›JWTç»™å®¢æˆ·ç«¯</td></tr><tr><td><strong>3</strong></td><td>åç»­è¯·æ±‚è‡ªåŠ¨æºå¸¦Cookie</td><td>SessionIDé€šè¿‡Cookieå‘é€ç»™å®¢æˆ·ç«¯</td><td>éœ€è¦æ‰‹åŠ¨æ·»åŠ åˆ°è¯·æ±‚å¤´</td><td>å®¢æˆ·ç«¯ä¿å­˜JWT</td></tr><tr><td><strong>4</strong></td><td>æœåŠ¡ç«¯è¯»å–Cookieä¿¡æ¯</td><td>å®¢æˆ·ç«¯åç»­è¯·æ±‚æºå¸¦SessionID</td><td>å®¢æˆ·ç«¯JavaScriptè¯»å–</td><td>å®¢æˆ·ç«¯è¯·æ±‚æ—¶æºå¸¦JWT</td></tr><tr><td><strong>5</strong></td><td>-</td><td>æœåŠ¡ç«¯æ ¹æ®SessionIDæŸ¥æ‰¾Session</td><td>-</td><td>æœåŠ¡ç«¯éªŒè¯JWTç­¾å</td></tr></tbody></table><h4 id="è¯¦ç»†ç‰¹æ€§å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#è¯¦ç»†ç‰¹æ€§å¯¹æ¯”"><span><strong>è¯¦ç»†ç‰¹æ€§å¯¹æ¯”</strong></span></a></h4><h5 id="_1-å®‰å…¨æ€§" tabindex="-1"><a class="header-anchor" href="#_1-å®‰å…¨æ€§"><span><strong>1. å®‰å…¨æ€§</strong></span></a></h5><ul><li><strong>Cookie</strong>ï¼šå®¹æ˜“è¢«XSSæ”»å‡»ï¼Œå¯è®¾ç½®HttpOnlyæé«˜å®‰å…¨æ€§</li><li><strong>Session</strong>ï¼šæœ€å®‰å…¨ï¼Œæ•æ„Ÿä¿¡æ¯å­˜å‚¨åœ¨æœåŠ¡ç«¯</li><li><strong>LocalStorage</strong>ï¼šæœ€ä¸å®‰å…¨ï¼Œå®¹æ˜“è¢«XSSæ”»å‡»</li><li><strong>JWT</strong>ï¼šç›¸å¯¹å®‰å…¨ï¼Œé€šè¿‡ç­¾åé˜²æ­¢ç¯¡æ”¹ï¼Œä½†payloadæ˜¯æ˜æ–‡</li></ul><h5 id="_2-æ€§èƒ½å½±å“" tabindex="-1"><a class="header-anchor" href="#_2-æ€§èƒ½å½±å“"><span><strong>2. æ€§èƒ½å½±å“</strong></span></a></h5><ul><li><strong>Cookie</strong>ï¼šæ¯æ¬¡è¯·æ±‚éƒ½å‘é€ï¼Œå¢åŠ ç½‘ç»œå¼€é”€</li><li><strong>Session</strong>ï¼šåªä¼ è¾“SessionIDï¼Œç½‘ç»œå¼€é”€å°</li><li><strong>LocalStorage</strong>ï¼šä¸è‡ªåŠ¨ä¼ è¾“ï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†</li><li><strong>JWT</strong>ï¼šæ¯æ¬¡è¯·æ±‚éƒ½å‘é€ï¼Œä½†æœåŠ¡ç«¯æ— éœ€æŸ¥è¯¢æ•°æ®åº“</li></ul><h5 id="_3-æœåŠ¡ç«¯è´Ÿè½½" tabindex="-1"><a class="header-anchor" href="#_3-æœåŠ¡ç«¯è´Ÿè½½"><span><strong>3. æœåŠ¡ç«¯è´Ÿè½½</strong></span></a></h5><ul><li><strong>Cookie</strong>ï¼šæœåŠ¡ç«¯éœ€è¦è§£æCookie</li><li><strong>Session</strong>ï¼šæœåŠ¡ç«¯éœ€è¦å­˜å‚¨å’ŒæŸ¥è¯¢Session</li><li><strong>LocalStorage</strong>ï¼šæœåŠ¡ç«¯æ— æ„ŸçŸ¥</li><li><strong>JWT</strong>ï¼šæœåŠ¡ç«¯åªéœ€éªŒè¯ç­¾åï¼Œæ— çŠ¶æ€</li></ul><h4 id="ä½¿ç”¨åœºæ™¯å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯å¯¹æ¯”"><span><strong>ä½¿ç”¨åœºæ™¯å¯¹æ¯”</strong></span></a></h4><table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>åŸå› </th></tr></thead><tbody><tr><td><strong>ç”¨æˆ·ç™»å½•çŠ¶æ€</strong></td><td>Session/JWT</td><td>Sessionæ›´å®‰å…¨ï¼ŒJWTæ›´é€‚åˆåˆ†å¸ƒå¼</td></tr><tr><td><strong>è´­ç‰©è½¦ä¿¡æ¯</strong></td><td>LocalStorage + Session</td><td>LocalStorageå­˜å‚¨å•†å“åˆ—è¡¨ï¼ŒSessionå­˜å‚¨ç”¨æˆ·ä¿¡æ¯</td></tr><tr><td><strong>ç”¨æˆ·åå¥½è®¾ç½®</strong></td><td>LocalStorage</td><td>ç®€å•ä¿¡æ¯ï¼Œå¯ä»¥æŒä¹…åŒ–ä¿å­˜</td></tr><tr><td><strong>ä¸´æ—¶æ•°æ®</strong></td><td>Session</td><td>ä¼šè¯ç»“æŸè‡ªåŠ¨æ¸…ç†</td></tr><tr><td><strong>APIè®¤è¯</strong></td><td>JWT</td><td>æ— çŠ¶æ€ï¼Œé€‚åˆå¾®æœåŠ¡æ¶æ„</td></tr><tr><td><strong>è·¨åŸŸè®¤è¯</strong></td><td>JWT</td><td>å¯ä»¥è·¨åŸŸä½¿ç”¨ï¼Œæ— éœ€æœåŠ¡ç«¯å­˜å‚¨</td></tr><tr><td><strong>è®°ä½ç™»å½•</strong></td><td>Cookie</td><td>å¯ä»¥è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè‡ªåŠ¨å‘é€</td></tr></tbody></table><p><strong>é€‰æ‹©å»ºè®®ï¼š</strong></p><ul><li><strong>ä¼ ç»ŸWebåº”ç”¨</strong>ï¼šSession + Cookie</li><li><strong>SPAåº”ç”¨</strong>ï¼šJWT + LocalStorage</li><li><strong>å¾®æœåŠ¡æ¶æ„</strong>ï¼šJWT</li><li><strong>ç®€å•æ•°æ®å­˜å‚¨</strong>ï¼šLocalStorage</li><li><strong>è·¨åŸŸåº”ç”¨</strong>ï¼šJWT</li></ul><p><strong>å®‰å…¨è€ƒè™‘ï¼š</strong></p><ul><li>æ•æ„Ÿä¿¡æ¯ä¸è¦å­˜å‚¨åœ¨å®¢æˆ·ç«¯</li><li>ä½¿ç”¨HttpOnly Cookieé˜²æ­¢XSS</li><li>JWTè¦è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´</li><li>LocalStorageåªå­˜å‚¨éæ•æ„Ÿä¿¡æ¯</li></ul><h3 id="_9-websocketåŸç†å’Œåº”ç”¨" tabindex="-1"><a class="header-anchor" href="#_9-websocketåŸç†å’Œåº”ç”¨"><span>9. WebSocketåŸç†å’Œåº”ç”¨ï¼Ÿ</span></a></h3><p><strong>WebSocket vs HTTPï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>HTTP</th><th>WebSocket</th></tr></thead><tbody><tr><td>è¿æ¥æ¨¡å¼</td><td>è¯·æ±‚-å“åº”ï¼ŒçŸ­è¿æ¥</td><td>æŒä¹…è¿æ¥ï¼Œå…¨åŒå·¥</td></tr><tr><td>æ•°æ®æ ¼å¼</td><td>æ–‡æœ¬ï¼ˆHTTPå¤´+å†…å®¹ï¼‰</td><td>äºŒè¿›åˆ¶å¸§æˆ–æ–‡æœ¬å¸§</td></tr><tr><td>å¼€é”€</td><td>æ¯æ¬¡è¯·æ±‚éƒ½æœ‰HTTPå¤´å¼€é”€</td><td>æ¡æ‰‹åå¼€é”€æå°</td></tr><tr><td>å®æ—¶æ€§</td><td>éœ€è¦è½®è¯¢ï¼Œå®æ—¶æ€§å·®</td><td>çœŸæ­£å®æ—¶é€šä¿¡</td></tr><tr><td>æœåŠ¡ç«¯ä¸»åŠ¨æ¨é€</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>æ™®é€šWebåº”ç”¨</td><td>å®æ—¶åº”ç”¨ï¼ˆèŠå¤©ã€æ¸¸æˆï¼‰</td></tr></tbody></table><p><strong>WebSocketæ¡æ‰‹è¿‡ç¨‹ï¼š</strong></p><table><thead><tr><th>æ­¥éª¤</th><th>å‘é€æ–¹</th><th>å†…å®¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td>å®¢æˆ·ç«¯</td><td><code>Upgrade: websocket</code></td><td>è¯·æ±‚åè®®å‡çº§</td></tr><tr><td>2</td><td>å®¢æˆ·ç«¯</td><td><code>Sec-WebSocket-Key: xxx</code></td><td>éšæœºkey</td></tr><tr><td>3</td><td>æœåŠ¡ç«¯</td><td><code>HTTP/1.1 101 Switching Protocols</code></td><td>åŒæ„åè®®å‡çº§</td></tr><tr><td>4</td><td>æœåŠ¡ç«¯</td><td><code>Sec-WebSocket-Accept: yyy</code></td><td>åŸºäºå®¢æˆ·ç«¯keyè®¡ç®—çš„å“åº”</td></tr><tr><td>5</td><td>åŒæ–¹</td><td>å¼€å§‹WebSocketé€šä¿¡</td><td>ä½¿ç”¨WebSocketåè®®</td></tr></tbody></table><p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p><table><thead><tr><th>åº”ç”¨ç±»å‹</th><th>ä½¿ç”¨åŸå› </th><th>å…¸å‹ä¾‹å­</th></tr></thead><tbody><tr><td>å³æ—¶èŠå¤©</td><td>éœ€è¦å®æ—¶åŒå‘é€šä¿¡</td><td>å¾®ä¿¡ç½‘é¡µç‰ˆã€QQç©ºé—´</td></tr><tr><td>åœ¨çº¿æ¸¸æˆ</td><td>å®æ—¶äº¤äº’ï¼Œä½å»¶è¿Ÿ</td><td>ç½‘é¡µæ¸¸æˆã€H5æ¸¸æˆ</td></tr><tr><td>å®æ—¶æ•°æ®</td><td>æœåŠ¡ç«¯ä¸»åŠ¨æ¨é€æ•°æ®</td><td>è‚¡ç¥¨è¡Œæƒ…ã€ä½“è‚²æ¯”åˆ†</td></tr><tr><td>åä½œç¼–è¾‘</td><td>å¤šäººå®æ—¶ç¼–è¾‘</td><td>Google Docsã€çŸ³å¢¨æ–‡æ¡£</td></tr><tr><td>ç›´æ’­å¼¹å¹•</td><td>å¤§é‡å®æ—¶æ¶ˆæ¯</td><td>ç›´æ’­å¹³å°å¼¹å¹•ç³»ç»Ÿ</td></tr></tbody></table><h3 id="_10-tcpå¦‚ä½•ä¿è¯å¯é ä¼ è¾“" tabindex="-1"><a class="header-anchor" href="#_10-tcpå¦‚ä½•ä¿è¯å¯é ä¼ è¾“"><span>10. TCPå¦‚ä½•ä¿è¯å¯é ä¼ è¾“ï¼Ÿ</span></a></h3><h4 id="_1-åºåˆ—å·å’Œç¡®è®¤æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_1-åºåˆ—å·å’Œç¡®è®¤æœºåˆ¶"><span>1. <strong>åºåˆ—å·å’Œç¡®è®¤æœºåˆ¶</strong></span></a></h4><ul><li><strong>åºåˆ—å·</strong>ï¼šæ¯ä¸ªå­—èŠ‚éƒ½æœ‰å”¯ä¸€åºåˆ—å·ï¼Œç”¨äºæ ‡è¯†æ•°æ®é¡ºåº</li><li><strong>ç¡®è®¤å·ï¼ˆACKï¼‰</strong>ï¼šæ¥æ”¶æ–¹ç¡®è®¤å·²æ”¶åˆ°çš„æ•°æ®</li><li><strong>ç´¯ç§¯ç¡®è®¤</strong>ï¼šç¡®è®¤å·è¡¨ç¤ºæœŸæœ›æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªå­—èŠ‚çš„åºåˆ—å·</li></ul><h4 id="_2-è¶…æ—¶é‡ä¼ æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_2-è¶…æ—¶é‡ä¼ æœºåˆ¶"><span>2. <strong>è¶…æ—¶é‡ä¼ æœºåˆ¶</strong></span></a></h4><ul><li><strong>RTOï¼ˆé‡ä¼ è¶…æ—¶ï¼‰</strong>ï¼šåŠ¨æ€è®¡ç®—é‡ä¼ è¶…æ—¶æ—¶é—´</li><li><strong>å¿«é€Ÿé‡ä¼ </strong>ï¼šæ”¶åˆ°3ä¸ªé‡å¤ACKç«‹å³é‡ä¼ </li><li><strong>æŒ‡æ•°é€€é¿</strong>ï¼šé‡ä¼ å¤±è´¥åå¢åŠ è¶…æ—¶æ—¶é—´</li></ul><h4 id="_3-æµé‡æ§åˆ¶-flow-control" tabindex="-1"><a class="header-anchor" href="#_3-æµé‡æ§åˆ¶-flow-control"><span>3. <strong>æµé‡æ§åˆ¶ï¼ˆFlow Controlï¼‰</strong></span></a></h4><ul><li><strong>æ»‘åŠ¨çª—å£</strong>ï¼šæ¥æ”¶æ–¹é€šè¿‡çª—å£å¤§å°æ§åˆ¶å‘é€æ–¹å‘é€é€Ÿç‡</li><li><strong>çª—å£å¤§å°</strong>ï¼šæ¥æ”¶æ–¹ç¼“å†²åŒºå¯ç”¨ç©ºé—´</li><li><strong>é›¶çª—å£æ¢æµ‹</strong>ï¼šçª—å£ä¸º0æ—¶å®šæœŸå‘é€æ¢æµ‹åŒ…</li></ul><h4 id="_4-æ‹¥å¡æ§åˆ¶-congestion-control" tabindex="-1"><a class="header-anchor" href="#_4-æ‹¥å¡æ§åˆ¶-congestion-control"><span>4. <strong>æ‹¥å¡æ§åˆ¶ï¼ˆCongestion Controlï¼‰</strong></span></a></h4><ul><li><strong>æ…¢å¯åŠ¨</strong>ï¼šè¿æ¥åˆæœŸæŒ‡æ•°å¢é•¿çª—å£å¤§å°ï¼Œæ¢æµ‹ç½‘ç»œå¸¦å®½ï¼Œå¿«é€Ÿå»ºç«‹æ‹¥å¡çª—å£</li><li><strong>æ‹¥å¡é¿å…</strong>ï¼šè¾¾åˆ°é˜ˆå€¼åçº¿æ€§å¢é•¿ï¼Œé¿å…æ‹¥å¡ã€ä¿æŒç¨³å®šå¢é•¿</li><li><strong>å¿«é€Ÿæ¢å¤</strong>ï¼šè¿ç»­æ”¶åˆ°3ä¸ªé‡å¤ACKæ—¶å¿«é€Ÿæ¢å¤ï¼Œç¼©çŸ­æ•°æ®é‡ä¼ æ—¶é—´</li><li><strong>å¿«é€Ÿé‡ä¼ </strong>ï¼šç«‹å³é‡ä¼ ä¸¢å¤±çš„åŒ…ï¼Œä¸ç”¨å›åˆ°æ…¢å¯åŠ¨ï¼Œè¿æ¥æ¢å¤é€Ÿåº¦æ›´å¿«</li></ul><h4 id="_5-è¿æ¥ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#_5-è¿æ¥ç®¡ç†"><span>5. <strong>è¿æ¥ç®¡ç†</strong></span></a></h4><ul><li><strong>ä¸‰æ¬¡æ¡æ‰‹</strong>ï¼šå»ºç«‹è¿æ¥æ—¶åŒæ­¥åºåˆ—å·</li><li><strong>å››æ¬¡æŒ¥æ‰‹</strong>ï¼šå®‰å…¨å…³é—­è¿æ¥</li><li><strong>TIME_WAIT</strong>ï¼šé˜²æ­¢æ—§è¿æ¥çš„æ•°æ®åŒ…å¹²æ‰°æ–°è¿æ¥</li></ul><h4 id="_6-æ•°æ®å®Œæ•´æ€§" tabindex="-1"><a class="header-anchor" href="#_6-æ•°æ®å®Œæ•´æ€§"><span>6. <strong>æ•°æ®å®Œæ•´æ€§</strong></span></a></h4><ul><li><strong>æ ¡éªŒå’Œ</strong>ï¼šæ£€æµ‹ä¼ è¾“è¿‡ç¨‹ä¸­çš„æ•°æ®é”™è¯¯</li><li><strong>æ ¡éªŒå¤±è´¥</strong>ï¼šä¸¢å¼ƒé”™è¯¯åŒ…ï¼Œè§¦å‘é‡ä¼ </li></ul><h4 id="_7-åˆ†ç‰‡å’Œé‡ç»„" tabindex="-1"><a class="header-anchor" href="#_7-åˆ†ç‰‡å’Œé‡ç»„"><span>7. <strong>åˆ†ç‰‡å’Œé‡ç»„</strong></span></a></h4><ul><li><strong>MSSï¼ˆæœ€å¤§åˆ†æ®µå¤§å°ï¼‰</strong>ï¼šæ ¹æ®MTUç¡®å®šåˆ†æ®µå¤§å°</li><li><strong>æœ‰åºé‡ç»„</strong>ï¼šæ¥æ”¶æ–¹æŒ‰åºåˆ—å·é‡ç»„æ•°æ®</li><li><strong>ä¹±åºå¤„ç†</strong>ï¼šç¼“å­˜ä¹±åºåˆ°è¾¾çš„æ•°æ®</li></ul><h2 id="æ“ä½œç³»ç»Ÿ" tabindex="-1"><a class="header-anchor" href="#æ“ä½œç³»ç»Ÿ"><span>æ“ä½œç³»ç»Ÿ</span></a></h2><h3 id="_1-è™šæ‹Ÿå†…å­˜ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#_1-è™šæ‹Ÿå†…å­˜ç®¡ç†"><span>1. è™šæ‹Ÿå†…å­˜ç®¡ç†ï¼Ÿ</span></a></h3><ul><li>è™šæ‹Ÿå†…å­˜ï¼ˆVirtual Memoryï¼‰æ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„ä¸€ç§å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œå®ƒè®©åº”ç”¨ç¨‹åºä»¥ä¸ºè‡ªå·±æ‹¥æœ‰ä¸€ä¸ªè¿ç»­çš„ã€å¤§å®¹é‡çš„å†…å­˜ç©ºé—´ï¼Œä½†å®é™…ä¸Šè¿™äº›å†…å­˜å¯èƒ½åªæ˜¯éƒ¨åˆ†åœ¨ç‰©ç†å†…å­˜ä¸­ï¼Œå…¶ä»–çš„å­˜åœ¨ç£ç›˜é‡Œã€‚</li></ul><p><strong>è™šæ‹Ÿå†…å­˜æ ¸å¿ƒæ¦‚å¿µï¼š</strong></p><table><thead><tr><th>æ¦‚å¿µ</th><th>å®šä¹‰</th><th>ä½œç”¨</th><th>ä¼˜åŠ¿</th></tr></thead><tbody><tr><td>è™šæ‹Ÿåœ°å€</td><td>ç¨‹åºä½¿ç”¨çš„é€»è¾‘åœ°å€</td><td>ç¨‹åºåœ°å€ç©ºé—´æŠ½è±¡</td><td>ç¨‹åºé—´åœ°å€éš”ç¦»</td></tr><tr><td>ç‰©ç†åœ°å€</td><td>å®é™…å†…å­˜ä½ç½®</td><td>ç¡¬ä»¶å†…å­˜è®¿é—®</td><td>çœŸå®å†…å­˜å®šä½</td></tr><tr><td>åœ°å€è½¬æ¢</td><td>è™šæ‹Ÿåœ°å€â†’ç‰©ç†åœ°å€</td><td>MMUç¡¬ä»¶å®Œæˆ</td><td>é€æ˜çš„åœ°å€æ˜ å°„</td></tr><tr><td>é¡µè¡¨</td><td>åœ°å€æ˜ å°„è¡¨</td><td>è®°å½•é¡µé¢æ˜ å°„å…³ç³»</td><td>å®ç°åœ°å€è½¬æ¢</td></tr></tbody></table><p><strong>è™šæ‹Ÿå†…å­˜ä¼˜åŠ¿ï¼š</strong></p><table><thead><tr><th>ä¼˜åŠ¿</th><th>è¯´æ˜</th><th>è§£å†³çš„é—®é¢˜</th><th>å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td>å†…å­˜ä¿æŠ¤</td><td>è¿›ç¨‹é—´å†…å­˜éš”ç¦»</td><td>é¿å…è¿›ç¨‹é—´ç›¸äº’å¹²æ‰°</td><td>é¡µè¡¨æƒé™æ§åˆ¶</td></tr><tr><td>å†…å­˜æ‰©å±•</td><td>é€»è¾‘å†…å­˜&gt;ç‰©ç†å†…å­˜</td><td>è¿è¡Œè¶…å¤§ç¨‹åº</td><td>ç£ç›˜äº¤æ¢ç©ºé—´</td></tr><tr><td>åœ°å€æ— å…³</td><td>ç¨‹åºå¯åœ¨ä»»æ„ä½ç½®åŠ è½½</td><td>ç®€åŒ–ç¨‹åºè®¾è®¡</td><td>åŠ¨æ€åœ°å€æ˜ å°„</td></tr><tr><td>å†…å­˜å…±äº«</td><td>å¤šè¿›ç¨‹å…±äº«å†…å­˜é¡µ</td><td>èŠ‚çœç‰©ç†å†…å­˜</td><td>å…±äº«é¡µé¢æ˜ å°„</td></tr></tbody></table><p><strong>åˆ†é¡µæœºåˆ¶ï¼š</strong></p><table><thead><tr><th>æ¦‚å¿µ</th><th>å¤§å°</th><th>ä½œç”¨</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>é¡µé¢(Page)</td><td>é€šå¸¸4KB</td><td>è™šæ‹Ÿå†…å­˜ç®¡ç†å•ä½</td><td>å›ºå®šå¤§å°ï¼Œä¾¿äºç®¡ç†</td></tr><tr><td>é¡µæ¡†(Frame)</td><td>é€šå¸¸4KB</td><td>ç‰©ç†å†…å­˜ç®¡ç†å•ä½</td><td>ä¸é¡µé¢å¤§å°ç›¸åŒ</td></tr><tr><td>é¡µè¡¨é¡¹(PTE)</td><td>4-8å­—èŠ‚</td><td>å­˜å‚¨æ˜ å°„å…³ç³»å’Œæ§åˆ¶ä¿¡æ¯</td><td>åŒ…å«æƒé™ä½ã€æœ‰æ•ˆä½ç­‰</td></tr><tr><td>TLB</td><td>ç¡¬ä»¶ç¼“å­˜</td><td>åŠ é€Ÿåœ°å€è½¬æ¢</td><td>ç¼“å­˜é¡µè¡¨é¡¹</td></tr></tbody></table><h3 id="_2-é¡µé¢ç½®æ¢ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_2-é¡µé¢ç½®æ¢ç®—æ³•"><span>2. é¡µé¢ç½®æ¢ç®—æ³•ï¼Ÿ</span></a></h3><p><strong>ç®—æ³•å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç®—æ³•</th><th>å…¨ç§°</th><th>åŸç†</th><th>æ—¶é—´å¤æ‚åº¦</th><th>ç¼ºé¡µç‡</th><th>å®ç°éš¾åº¦</th></tr></thead><tbody><tr><td>FIFO</td><td>å…ˆè¿›å…ˆå‡º</td><td>æœ€æ—©è¿›å…¥çš„é¡µé¢å…ˆè¢«ç½®æ¢</td><td>O(1)</td><td>é«˜</td><td>ç®€å•</td></tr><tr><td>LRU</td><td>æœ€è¿‘æœ€å°‘ä½¿ç”¨</td><td>æœ€ä¹…æœªè®¿é—®çš„é¡µé¢è¢«ç½®æ¢</td><td>O(n)</td><td>ä¸­ä½</td><td>å¤æ‚</td></tr><tr><td>LFU</td><td>æœ€å°‘ä½¿ç”¨é¢‘ç‡</td><td>è®¿é—®æ¬¡æ•°æœ€å°‘çš„é¡µé¢è¢«ç½®æ¢</td><td>O(n)</td><td>ä¸­</td><td>å¤æ‚</td></tr><tr><td>OPT</td><td>æœ€ä¼˜ç®—æ³•</td><td>æœ€è¿œå°†æ¥æ‰è®¿é—®çš„é¡µé¢è¢«ç½®æ¢</td><td>O(n)</td><td>æœ€ä½</td><td>æ— æ³•å®ç°</td></tr><tr><td>Clock</td><td>æ—¶é’Ÿç®—æ³•</td><td>ç¯å½¢é˜Ÿåˆ—+è®¿é—®ä½</td><td>O(n)</td><td>ä¸­</td><td>ä¸­ç­‰</td></tr><tr><td>æ”¹è¿›Clock</td><td>å¢å¼ºæ—¶é’Ÿ</td><td>è€ƒè™‘è®¿é—®ä½å’Œä¿®æ”¹ä½</td><td>O(n)</td><td>ä¸­ä½</td><td>ä¸­ç­‰</td></tr></tbody></table><p><strong>LRUç®—æ³•å®ç°æ–¹å¼ï¼š</strong></p><table><thead><tr><th>å®ç°æ–¹å¼</th><th>æ•°æ®ç»“æ„</th><th>æ—¶é—´å¤æ‚åº¦</th><th>ç©ºé—´å¤æ‚åº¦</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>é“¾è¡¨å®ç°</td><td>åŒå‘é“¾è¡¨</td><td>O(n)</td><td>O(n)</td><td>æŸ¥æ‰¾æ…¢ï¼Œç§»åŠ¨å¿«</td></tr><tr><td>æ ˆå®ç°</td><td>æ ˆ</td><td>O(n)</td><td>O(n)</td><td>éœ€è¦æœç´¢æ ˆ</td></tr><tr><td>å“ˆå¸Œ+é“¾è¡¨</td><td>HashMap + åŒå‘é“¾è¡¨</td><td>O(1)</td><td>O(n)</td><td>æœ€ä¼˜å®ç°</td></tr><tr><td>ç¡¬ä»¶æ”¯æŒ</td><td>ç‰¹æ®Šå¯„å­˜å™¨</td><td>O(1)</td><td>O(1)</td><td>æˆæœ¬é«˜</td></tr></tbody></table><p><strong>Beladyå¼‚å¸¸ï¼š</strong></p><table><thead><tr><th>ç®—æ³•</th><th>æ˜¯å¦å­˜åœ¨Beladyå¼‚å¸¸</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>FIFO</td><td>æ˜¯</td><td>å¢åŠ ç‰©ç†é¡µé¢å¯èƒ½å¯¼è‡´ç¼ºé¡µç‡å¢åŠ </td></tr><tr><td>LRU</td><td>å¦</td><td>æ ˆå¼ç®—æ³•ï¼Œå•è°ƒæ€§</td></tr><tr><td>OPT</td><td>å¦</td><td>ç†è®ºæœ€ä¼˜ç®—æ³•</td></tr><tr><td>LFU</td><td>å¦</td><td>åŸºäºè®¿é—®é¢‘ç‡çš„æ ˆå¼ç®—æ³•</td></tr></tbody></table><h3 id="_3-æ­»é”é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_3-æ­»é”é—®é¢˜"><span>3. æ­»é”é—®é¢˜ï¼Ÿ</span></a></h3><p><strong>æ­»é”å››ä¸ªå¿…è¦æ¡ä»¶ï¼š</strong></p><table><thead><tr><th>æ¡ä»¶</th><th>å®šä¹‰</th><th>ä¸¾ä¾‹</th><th>ç ´åæ–¹æ³•</th></tr></thead><tbody><tr><td>äº’æ–¥æ¡ä»¶</td><td>èµ„æºä¸èƒ½è¢«å¤šä¸ªè¿›ç¨‹åŒæ—¶ä½¿ç”¨</td><td>æ‰“å°æœºã€æ–‡ä»¶é”</td><td>èµ„æºå…±äº«åŒ–</td></tr><tr><td>æŒæœ‰å¹¶ç­‰å¾…</td><td>è¿›ç¨‹æŒæœ‰èµ„æºçš„åŒæ—¶ç­‰å¾…å…¶ä»–èµ„æº</td><td>æ‹¿ç€Aç­‰B</td><td>ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æº</td></tr><tr><td>ä¸å¯å‰¥å¤º</td><td>èµ„æºä¸èƒ½è¢«å¼ºåˆ¶å›æ”¶</td><td>è¿›ç¨‹ç‹¬å CPU</td><td>å…è®¸èµ„æºæŠ¢å </td></tr><tr><td>å¾ªç¯ç­‰å¾…</td><td>å¤šä¸ªè¿›ç¨‹å½¢æˆç­‰å¾…ç¯è·¯</td><td>Aç­‰Bï¼ŒBç­‰A</td><td>èµ„æºæœ‰åºåˆ†é…</td></tr></tbody></table><p><strong>æ­»é”å¤„ç†ç­–ç•¥ï¼š</strong></p><table><thead><tr><th>ç­–ç•¥</th><th>æ–¹æ³•</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æ­»é”é¢„é˜²</td><td>ç ´åå››ä¸ªå¿…è¦æ¡ä»¶ä¹‹ä¸€</td><td>ä¸ä¼šå‘ç”Ÿæ­»é”</td><td>èµ„æºåˆ©ç”¨ç‡ä½</td><td>å®æ—¶ç³»ç»Ÿ</td></tr><tr><td>æ­»é”é¿å…</td><td>é“¶è¡Œå®¶ç®—æ³•</td><td>å®‰å…¨æ€§é«˜</td><td>éœ€è¦é¢„çŸ¥èµ„æºéœ€æ±‚</td><td>èµ„æºå›ºå®šçš„ç³»ç»Ÿ</td></tr><tr><td>æ­»é”æ£€æµ‹</td><td>å®šæœŸæ£€æµ‹èµ„æºåˆ†é…å›¾</td><td>èµ„æºåˆ©ç”¨ç‡é«˜</td><td>éœ€è¦é¢å¤–å¼€é”€</td><td>ä¸€èˆ¬ç³»ç»Ÿ</td></tr><tr><td>æ­»é”æ¢å¤</td><td>æ’¤é”€è¿›ç¨‹æˆ–å›æ”¶èµ„æº</td><td>çµæ´»æ€§é«˜</td><td>å¯èƒ½ä¸¢å¤±å·¥ä½œ</td><td>å®¹é”™ç³»ç»Ÿ</td></tr></tbody></table><p><strong>é“¶è¡Œå®¶ç®—æ³•æ­¥éª¤ï¼š</strong></p><ul><li>åœ¨åˆ†é…èµ„æºå‰ï¼Œæ¨¡æ‹Ÿåˆ†é…å¹¶æ£€æŸ¥æ˜¯å¦ä¼šå¯¼è‡´ä¸å®‰å…¨çŠ¶æ€ã€‚</li></ul><h3 id="_4-cpuè°ƒåº¦ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_4-cpuè°ƒåº¦ç®—æ³•"><span>4. CPUè°ƒåº¦ç®—æ³•ï¼Ÿ</span></a></h3><p><strong>è°ƒåº¦ç®—æ³•å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç®—æ³•</th><th>è°ƒåº¦æ–¹å¼</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>FCFS</td><td>å…ˆæ¥å…ˆæœåŠ¡</td><td>ç®€å•å…¬å¹³</td><td>å¹³å‡ç­‰å¾…æ—¶é—´é•¿</td><td>æ‰¹å¤„ç†ç³»ç»Ÿ</td></tr><tr><td>SJF</td><td>çŸ­ä½œä¸šä¼˜å…ˆ</td><td>å¹³å‡ç­‰å¾…æ—¶é—´æœ€çŸ­</td><td>é•¿ä½œä¸šå¯èƒ½é¥¥é¥¿</td><td>æ‰¹å¤„ç†ç³»ç»Ÿ</td></tr><tr><td>SRTF</td><td>çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆ</td><td>å“åº”æ—¶é—´å¥½</td><td>é¢‘ç¹åˆ‡æ¢å¼€é”€</td><td>äº¤äº’ç³»ç»Ÿ</td></tr><tr><td>RR</td><td>æ—¶é—´ç‰‡è½®è½¬</td><td>å“åº”æ—¶é—´å‡åŒ€</td><td>æ—¶é—´ç‰‡é€‰æ‹©å›°éš¾</td><td>åˆ†æ—¶ç³»ç»Ÿ</td></tr><tr><td>ä¼˜å…ˆçº§è°ƒåº¦</td><td>æŒ‰ä¼˜å…ˆçº§é€‰æ‹©</td><td>é‡è¦ä»»åŠ¡ä¼˜å…ˆ</td><td>ä½ä¼˜å…ˆçº§é¥¥é¥¿</td><td>å®æ—¶ç³»ç»Ÿ</td></tr><tr><td>å¤šçº§é˜Ÿåˆ—</td><td>ä¸åŒé˜Ÿåˆ—ä¸åŒç®—æ³•</td><td>çµæ´»æ€§å¼º</td><td>å¤æ‚åº¦é«˜</td><td>é€šç”¨ç³»ç»Ÿ</td></tr></tbody></table><p><strong>æ—¶é—´ç‰‡é€‰æ‹©åŸåˆ™ï¼š</strong></p><table><thead><tr><th>æ—¶é—´ç‰‡å¤§å°</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨æƒ…å†µ</th></tr></thead><tbody><tr><td>å¾ˆå°(1-5ms)</td><td>å“åº”æ—¶é—´å¿«</td><td>åˆ‡æ¢å¼€é”€å¤§</td><td>I/Oå¯†é›†å‹ä»»åŠ¡</td></tr><tr><td>é€‚ä¸­(10-100ms)</td><td>å¹³è¡¡æ€§èƒ½å’Œå“åº”</td><td>éœ€è¦è°ƒä¼˜</td><td>æ··åˆå‹ä»»åŠ¡</td></tr><tr><td>å¾ˆå¤§(&gt;100ms)</td><td>åˆ‡æ¢å¼€é”€å°</td><td>å“åº”æ—¶é—´æ…¢</td><td>CPUå¯†é›†å‹ä»»åŠ¡</td></tr></tbody></table><p><strong>è°ƒåº¦è¯„ä»·æŒ‡æ ‡ï¼š</strong></p><table><thead><tr><th>æŒ‡æ ‡</th><th>å®šä¹‰</th><th>è®¡ç®—æ–¹å¼</th><th>é‡è¦æ€§</th></tr></thead><tbody><tr><td>å‘¨è½¬æ—¶é—´</td><td>ä½œä¸šå®Œæˆæ—¶é—´-æäº¤æ—¶é—´</td><td>å®Œæˆæ—¶é—´-åˆ°è¾¾æ—¶é—´</td><td>é«˜</td></tr><tr><td>ç­‰å¾…æ—¶é—´</td><td>è¿›ç¨‹åœ¨å°±ç»ªé˜Ÿåˆ—ä¸­ç­‰å¾…çš„æ€»æ—¶é—´</td><td>å‘¨è½¬æ—¶é—´-è¿è¡Œæ—¶é—´</td><td>é«˜</td></tr><tr><td>å“åº”æ—¶é—´</td><td>é¦–æ¬¡å“åº”çš„æ—¶é—´</td><td>é¦–æ¬¡è¿è¡Œæ—¶é—´-åˆ°è¾¾æ—¶é—´</td><td>äº¤äº’ç³»ç»Ÿé‡è¦</td></tr><tr><td>ååé‡</td><td>å•ä½æ—¶é—´å®Œæˆçš„ä½œä¸šæ•°</td><td>å®Œæˆä½œä¸šæ•°/æ€»æ—¶é—´</td><td>æ‰¹å¤„ç†é‡è¦</td></tr></tbody></table><h3 id="_5-åŒæ­¥ä¸å¼‚æ­¥ã€é˜»å¡ä¸éé˜»å¡" tabindex="-1"><a class="header-anchor" href="#_5-åŒæ­¥ä¸å¼‚æ­¥ã€é˜»å¡ä¸éé˜»å¡"><span>5. åŒæ­¥ä¸å¼‚æ­¥ã€é˜»å¡ä¸éé˜»å¡ï¼Ÿ</span></a></h3><p><strong>æ¦‚å¿µåŒºåˆ«ï¼š</strong></p><table><thead><tr><th>æ¦‚å¿µ</th><th>å…³æ³¨ç‚¹</th><th>æè¿°</th><th>ä¸¾ä¾‹</th></tr></thead><tbody><tr><td>åŒæ­¥</td><td>æ¶ˆæ¯é€šä¿¡æœºåˆ¶</td><td>è°ƒç”¨åç­‰å¾…ç»“æœè¿”å›</td><td>æ‰“ç”µè¯</td></tr><tr><td>å¼‚æ­¥</td><td>æ¶ˆæ¯é€šä¿¡æœºåˆ¶</td><td>è°ƒç”¨åç«‹å³è¿”å›ï¼Œç»“æœé€šè¿‡å›è°ƒè·å–</td><td>å‘çŸ­ä¿¡</td></tr><tr><td>é˜»å¡</td><td>ç¨‹åºç­‰å¾…çŠ¶æ€</td><td>è°ƒç”¨çº¿ç¨‹è¢«æŒ‚èµ·</td><td>ç­‰çº¢ç»¿ç¯</td></tr><tr><td>éé˜»å¡</td><td>ç¨‹åºç­‰å¾…çŠ¶æ€</td><td>è°ƒç”¨çº¿ç¨‹ä¸è¢«æŒ‚èµ·</td><td>è¾¹èµ°è¾¹çœ‹æ‰‹æœº</td></tr></tbody></table><p><strong>å››ç§ç»„åˆæ–¹å¼ï¼š</strong></p><table><thead><tr><th>ç»„åˆ</th><th>ç‰¹ç‚¹</th><th>åº”ç”¨åœºæ™¯</th><th>æ€§èƒ½ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>åŒæ­¥é˜»å¡</td><td>ç­‰å¾…ç»“æœï¼Œçº¿ç¨‹æŒ‚èµ·</td><td>ç®€å•é¡ºåºå¤„ç†</td><td>ç®€å•ä½†æ•ˆç‡ä½</td></tr><tr><td>åŒæ­¥éé˜»å¡</td><td>ç­‰å¾…ç»“æœï¼Œçº¿ç¨‹ä¸æŒ‚èµ·</td><td>è½®è¯¢æ£€æŸ¥</td><td>å ç”¨CPUèµ„æº</td></tr><tr><td>å¼‚æ­¥é˜»å¡</td><td>ä¸ç­‰å¾…ç»“æœï¼Œçº¿ç¨‹æŒ‚èµ·</td><td>å¾ˆå°‘ä½¿ç”¨</td><td>æ²¡æœ‰æ„ä¹‰</td></tr><tr><td>å¼‚æ­¥éé˜»å¡</td><td>ä¸ç­‰å¾…ç»“æœï¼Œçº¿ç¨‹ä¸æŒ‚èµ·</td><td>é«˜å¹¶å‘å¤„ç†</td><td>æœ€é«˜æ•ˆç‡</td></tr></tbody></table><p><strong>å®é™…åº”ç”¨å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>åœºæ™¯</th><th>åŒæ­¥é˜»å¡</th><th>åŒæ­¥éé˜»å¡</th><th>å¼‚æ­¥éé˜»å¡</th></tr></thead><tbody><tr><td>æ–‡ä»¶è¯»å–</td><td>fread()</td><td>fcntlè®¾ç½®O_NONBLOCK</td><td>aio_read()</td></tr><tr><td>ç½‘ç»œé€šä¿¡</td><td>recv()</td><td>select/pollè½®è¯¢</td><td>epoll + å›è°ƒ</td></tr><tr><td>æ•°æ®åº“æ“ä½œ</td><td>JDBCåŒæ­¥æŸ¥è¯¢</td><td>è½®è¯¢æŸ¥è¯¢çŠ¶æ€</td><td>å¼‚æ­¥å›è°ƒæŸ¥è¯¢</td></tr></tbody></table><h3 id="_6-å†…å­˜åˆ†é…ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_6-å†…å­˜åˆ†é…ç®—æ³•"><span>6. å†…å­˜åˆ†é…ç®—æ³•ï¼Ÿ</span></a></h3><p><strong>åˆ†é…ç®—æ³•å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç®—æ³•</th><th>åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>é¦–æ¬¡é€‚åº”</td><td>ä»å¤´å¼€å§‹æ‰¾ç¬¬ä¸€ä¸ªå¤Ÿå¤§çš„å—</td><td>ç®€å•å¿«é€Ÿ</td><td>å®¹æ˜“äº§ç”Ÿå°ç¢ç‰‡</td><td>ä¸€èˆ¬åº”ç”¨</td></tr><tr><td>æœ€ä½³é€‚åº”</td><td>æ‰¾æœ€å°çš„å¤Ÿç”¨çš„å—</td><td>ç¢ç‰‡å°</td><td>æœç´¢æ—¶é—´é•¿</td><td>å†…å­˜ç´§å¼ æ—¶</td></tr><tr><td>æœ€åé€‚åº”</td><td>æ‰¾æœ€å¤§çš„å—</td><td>å‰©ä½™å—å¤§</td><td>æµªè´¹å¤§å—å†…å­˜</td><td>éœ€è¦å¤§å—å†…å­˜æ—¶</td></tr><tr><td>å¿«é€Ÿé€‚åº”</td><td>ä¸ºä¸åŒå¤§å°ç»´æŠ¤ç©ºé—²é“¾è¡¨</td><td>åˆ†é…å›æ”¶å¿«</td><td>å†…å­˜å¼€é”€å¤§</td><td>é¢‘ç¹åˆ†é…å›æ”¶</td></tr></tbody></table><p><strong>å†…å­˜ç¢ç‰‡é—®é¢˜ï¼š</strong></p><table><thead><tr><th>ç¢ç‰‡ç±»å‹</th><th>äº§ç”ŸåŸå› </th><th>è§£å†³æ–¹æ³•</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td>å†…éƒ¨ç¢ç‰‡</td><td>åˆ†é…å•ä½å¤§äºå®é™…éœ€æ±‚</td><td>å‡å°åˆ†é…å•ä½</td><td>æé«˜å†…å­˜åˆ©ç”¨ç‡</td></tr><tr><td>å¤–éƒ¨ç¢ç‰‡</td><td>é¢‘ç¹åˆ†é…å›æ”¶é€ æˆä¸è¿ç»­</td><td>å†…å­˜ç´§ç¼©ã€åˆ†é¡µ</td><td>åˆå¹¶ç©ºé—²ç©ºé—´</td></tr></tbody></table><p><strong>ä¼™ä¼´ç³»ç»Ÿç®—æ³•ï¼š</strong></p><table><thead><tr><th>ç‰¹ç‚¹</th><th>è¯´æ˜</th><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th></tr></thead><tbody><tr><td>å—å¤§å°</td><td>2çš„å¹‚æ¬¡æ–¹(1,2,4,8,...)</td><td>å¿«é€Ÿåˆ†é…å’Œåˆå¹¶</td><td>å†…éƒ¨ç¢ç‰‡è¾ƒå¤§</td></tr><tr><td>åˆ†å‰²ç­–ç•¥</td><td>å¤§å—åˆ†å‰²ä¸ºä¸¤ä¸ªç›¸ç­‰çš„å°å—</td><td>ç®—æ³•ç®€å•</td><td>å¯èƒ½æµªè´¹ç©ºé—´</td></tr><tr><td>åˆå¹¶ç­–ç•¥</td><td>ç›¸é‚»çš„ä¼™ä¼´å—å¯ä»¥åˆå¹¶</td><td>å‡å°‘å¤–éƒ¨ç¢ç‰‡</td><td>éœ€è¦ç»´æŠ¤ä¼™ä¼´å…³ç³»</td></tr></tbody></table><h3 id="_7-æ–‡ä»¶ç³»ç»Ÿ" tabindex="-1"><a class="header-anchor" href="#_7-æ–‡ä»¶ç³»ç»Ÿ"><span>7. æ–‡ä»¶ç³»ç»Ÿï¼Ÿ</span></a></h3><p><strong>æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼š</strong></p><table><thead><tr><th>æ–‡ä»¶ç³»ç»Ÿ</th><th>ç‰¹ç‚¹</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>FAT32</td><td>ç®€å•çš„æ–‡ä»¶åˆ†é…è¡¨</td><td>å…¼å®¹æ€§å¥½</td><td>å•æ–‡ä»¶4GBé™åˆ¶</td><td>Uç›˜ã€å°å­˜å‚¨</td></tr><tr><td>NTFS</td><td>Windowsä¸»æµæ–‡ä»¶ç³»ç»Ÿ</td><td>æ”¯æŒå¤§æ–‡ä»¶ã€æƒé™æ§åˆ¶</td><td>Linuxæ”¯æŒæœ‰é™</td><td>Windowsç³»ç»Ÿ</td></tr><tr><td>ext4</td><td>Linuxä¸»æµæ–‡ä»¶ç³»ç»Ÿ</td><td>æ€§èƒ½å¥½ã€å¯é æ€§é«˜</td><td>Windowsä¸æ”¯æŒ</td><td>Linuxç³»ç»Ÿ</td></tr><tr><td>ZFS</td><td>é«˜çº§æ–‡ä»¶ç³»ç»Ÿ</td><td>æ•°æ®å®Œæ•´æ€§ã€å¿«ç…§</td><td>å†…å­˜æ¶ˆè€—å¤§</td><td>ä¼ä¸šå­˜å‚¨</td></tr></tbody></table><p><strong>æ–‡ä»¶åˆ†é…æ–¹æ³•ï¼š</strong></p><table><thead><tr><th>åˆ†é…æ–¹æ³•</th><th>åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>è¿ç»­åˆ†é…</td><td>æ–‡ä»¶å ç”¨è¿ç»­çš„ç£ç›˜å—</td><td>è®¿é—®é€Ÿåº¦å¿«</td><td>å¤–éƒ¨ç¢ç‰‡ä¸¥é‡</td><td>é¡ºåºè®¿é—®</td></tr><tr><td>é“¾å¼åˆ†é…</td><td>æ–‡ä»¶å—é€šè¿‡æŒ‡é’ˆé“¾æ¥</td><td>æ— å¤–éƒ¨ç¢ç‰‡</td><td>éšæœºè®¿é—®æ…¢</td><td>é¡ºåºè®¿é—®æ–‡ä»¶</td></tr><tr><td>ç´¢å¼•åˆ†é…</td><td>ç”¨ç´¢å¼•å—è®°å½•æ–‡ä»¶å—ä½ç½®</td><td>æ”¯æŒéšæœºè®¿é—®</td><td>ç´¢å¼•å—å¼€é”€</td><td>éšæœºè®¿é—®æ–‡ä»¶</td></tr></tbody></table><h3 id="_8-epoll-çš„åŸç†åŠå…¶-o-1-æŸ¥è¯¢é€Ÿåº¦-æœ‰å“ªä¸¤ç§å·¥ä½œæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_8-epoll-çš„åŸç†åŠå…¶-o-1-æŸ¥è¯¢é€Ÿåº¦-æœ‰å“ªä¸¤ç§å·¥ä½œæ¨¡å¼"><span>8. epoll çš„åŸç†åŠå…¶ O(1) æŸ¥è¯¢é€Ÿåº¦ï¼Ÿæœ‰å“ªä¸¤ç§å·¥ä½œæ¨¡å¼ï¼Ÿ</span></a></h3><p><strong>epoll åŸç†ï¼š</strong></p><ul><li>äº‹ä»¶é©±åŠ¨ï¼šepoll é€šè¿‡äº‹ä»¶é€šçŸ¥æœºåˆ¶ï¼Œé¿å…äº†åå¤éå†æ–‡ä»¶æè¿°ç¬¦é›†ï¼Œæé«˜äº†æ•ˆç‡ã€‚</li><li>å†…æ ¸æ”¯æŒï¼šepoll åœ¨å†…æ ¸ä¸­ç»´æŠ¤ä¸€ä¸ªçº¢é»‘æ ‘å’Œä¸€ä¸ªå°±ç»ªé“¾è¡¨ï¼Œçº¢é»‘æ ‘ç”¨äºå­˜å‚¨æ‰€æœ‰æ³¨å†Œçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå°±ç»ªé“¾è¡¨ç”¨äºå­˜å‚¨å·²å°±ç»ªçš„äº‹ä»¶ã€‚</li><li>O(1) æŸ¥è¯¢ï¼šç”±äºå°±ç»ªé“¾è¡¨åªåŒ…å«å·²å°±ç»ªçš„äº‹ä»¶ï¼Œepoll_wait åªéœ€éå†å°±ç»ªé“¾è¡¨ï¼ŒæŸ¥è¯¢é€Ÿåº¦ä¸º O(1)ã€‚</li><li>çº¢é»‘æ ‘ï¼šå­˜å‚¨æ‰€æœ‰æ³¨å†Œçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œæ”¯æŒå¿«é€Ÿå¢åˆ æŸ¥ã€‚</li><li>å°±ç»ªé“¾è¡¨ï¼šå­˜å‚¨å·²å°±ç»ªçš„äº‹ä»¶ï¼Œæ”¯æŒå¿«é€Ÿéå†ã€‚</li></ul><p><strong>epoll å·¥ä½œæ¨¡å¼ï¼š</strong></p><table><thead><tr><th>æ¨¡å¼</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>LTï¼ˆæ°´å¹³è§¦å‘ï¼‰</td><td>äº‹ä»¶è§¦å‘åï¼Œå†…æ ¸é€šçŸ¥åº”ç”¨ï¼Œåº”ç”¨éœ€è¦ä¸»åŠ¨å¤„ç†</td><td>é•¿è¿æ¥ã€æ–‡ä»¶ç›‘æ§</td></tr><tr><td>ETï¼ˆè¾¹ç¼˜è§¦å‘ï¼‰</td><td>äº‹ä»¶è§¦å‘åï¼Œå†…æ ¸é€šçŸ¥åº”ç”¨ï¼Œåº”ç”¨éœ€è¦å¤„ç†å®Œæ‰€æœ‰äº‹ä»¶</td><td>ä½å»¶è¿Ÿç½‘ç»œã€é«˜æ€§èƒ½åœºåˆ</td></tr></tbody></table><ul><li>LT åœ¨çŠ¶æ€æ»¡è¶³æ—¶åå¤é€šçŸ¥ï¼ŒET åªåœ¨çŠ¶æ€å˜åŒ–æ—¶é€šçŸ¥ä¸€æ¬¡ã€‚</li></ul><p><strong>ç³»ç»Ÿè°ƒç”¨æœºåˆ¶ï¼š</strong></p><table><thead><tr><th>ç³»ç»Ÿè°ƒç”¨ç±»å‹</th><th>åŠŸèƒ½</th><th>å…¸å‹ä¾‹å­</th><th>è¿”å›å€¼</th></tr></thead><tbody><tr><td>è¿›ç¨‹æ§åˆ¶</td><td>è¿›ç¨‹ç®¡ç†</td><td>fork(), exec(), exit()</td><td>è¿›ç¨‹IDæˆ–çŠ¶æ€</td></tr><tr><td>æ–‡ä»¶æ“ä½œ</td><td>æ–‡ä»¶I/O</td><td>open(), read(), write()</td><td>æ–‡ä»¶æè¿°ç¬¦æˆ–å­—èŠ‚æ•°</td></tr><tr><td>è®¾å¤‡ç®¡ç†</td><td>è®¾å¤‡æ§åˆ¶</td><td>ioctl()</td><td>æˆåŠŸ/å¤±è´¥çŠ¶æ€</td></tr><tr><td>ä¿¡æ¯ç»´æŠ¤</td><td>è·å–ç³»ç»Ÿä¿¡æ¯</td><td>getpid(), time()</td><td>ç›¸åº”çš„ä¿¡æ¯å€¼</td></tr><tr><td>é€šä¿¡</td><td>è¿›ç¨‹é—´é€šä¿¡</td><td>pipe(), socket()</td><td>é€šä¿¡æè¿°ç¬¦</td></tr></tbody></table><h3 id="_9-linuxå¸¸ç”¨å‘½ä»¤-æŸ¥çœ‹è¿›ç¨‹æœ‰å“ªäº›å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_9-linuxå¸¸ç”¨å‘½ä»¤-æŸ¥çœ‹è¿›ç¨‹æœ‰å“ªäº›å‘½ä»¤"><span>9. Linuxå¸¸ç”¨å‘½ä»¤ï¼Ÿ æŸ¥çœ‹è¿›ç¨‹æœ‰å“ªäº›å‘½ä»¤ï¼Ÿ</span></a></h3><p><strong>Linuxå¸¸ç”¨å‘½ä»¤åˆ†ç±»ï¼š</strong></p><table><thead><tr><th>ç±»åˆ«</th><th>å‘½ä»¤</th><th>ä½œç”¨</th><th>å¸¸ç”¨ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>æ–‡ä»¶æ“ä½œ</strong></td><td><code>ls</code>, <code>cd</code>, <code>pwd</code>, <code>mkdir</code>, <code>rm</code>, <code>cp</code>, <code>mv</code></td><td>æ–‡ä»¶å’Œç›®å½•åŸºæœ¬æ“ä½œ</td><td><code>ls -la</code>, <code>rm -rf dir</code></td></tr><tr><td><strong>æ–‡ä»¶æŸ¥çœ‹</strong></td><td><code>cat</code>, <code>less</code>, <code>head</code>, <code>tail</code>, <code>grep</code></td><td>æŸ¥çœ‹å’Œæœç´¢æ–‡ä»¶å†…å®¹</td><td><code>tail -f app.log</code>, <code>grep &quot;error&quot; *.log</code></td></tr><tr><td><strong>æƒé™ç®¡ç†</strong></td><td><code>chmod</code>, <code>chown</code>, <code>chgrp</code></td><td>ä¿®æ”¹æ–‡ä»¶æƒé™å’Œæ‰€æœ‰è€…</td><td><code>chmod 755 script.sh</code></td></tr><tr><td><strong>å‹ç¼©è§£å‹</strong></td><td><code>tar</code>, <code>zip</code>, <code>unzip</code>, <code>gzip</code></td><td>æ–‡ä»¶å‹ç¼©å’Œè§£å‹</td><td><code>tar -czf backup.tar.gz dir/</code></td></tr><tr><td><strong>ç½‘ç»œå·¥å…·</strong></td><td><code>ping</code>, <code>wget</code>, <code>curl</code>, <code>netstat</code>, <code>ss</code></td><td>ç½‘ç»œè¿æ¥å’Œä¸‹è½½</td><td><code>netstat -tlnp</code>, <code>curl -I url</code></td></tr><tr><td><strong>ç³»ç»Ÿç›‘æ§</strong></td><td><code>top</code>, <code>htop</code>, <code>free</code>, <code>df</code>, <code>du</code></td><td>ç³»ç»Ÿèµ„æºç›‘æ§</td><td><code>top</code>, <code>df -h</code>, <code>free -m</code></td></tr></tbody></table><p><strong>æŸ¥çœ‹è¿›ç¨‹å‘½ä»¤è¯¦è§£ï¼š</strong></p><table><thead><tr><th>å‘½ä»¤</th><th>ä½œç”¨</th><th>å¸¸ç”¨å‚æ•°</th><th>å®é™…åº”ç”¨</th></tr></thead><tbody><tr><td><strong><code>ps</code></strong></td><td>æŸ¥çœ‹è¿›ç¨‹å¿«ç…§</td><td><code>-ef</code>(å…¨æ ¼å¼), <code>-aux</code>(è¯¦ç»†ä¿¡æ¯)</td><td><code>ps -ef | grep java</code></td></tr><tr><td><strong><code>top</code></strong></td><td>å®æ—¶æŸ¥çœ‹è¿›ç¨‹</td><td><code>-p PID</code>(æŒ‡å®šè¿›ç¨‹), <code>-u user</code>(æŒ‡å®šç”¨æˆ·)</td><td><code>top -p 1234</code></td></tr><tr><td><strong><code>htop</code></strong></td><td>å¢å¼ºç‰ˆtop</td><td>äº¤äº’å¼æ“ä½œï¼Œå½©è‰²æ˜¾ç¤º</td><td><code>htop</code></td></tr><tr><td><strong><code>pgrep</code></strong></td><td>æŒ‰åç§°æŸ¥æ‰¾PID</td><td><code>-f</code>(å®Œæ•´å‘½ä»¤è¡Œ), <code>-u</code>(æŒ‡å®šç”¨æˆ·)</td><td><code>pgrep -f tomcat</code></td></tr><tr><td><strong><code>pidof</code></strong></td><td>æŸ¥æ‰¾ç¨‹åºPID</td><td>ç›´æ¥è·Ÿç¨‹åºå</td><td><code>pidof nginx</code></td></tr><tr><td><strong><code>pstree</code></strong></td><td>æ ‘å½¢æ˜¾ç¤ºè¿›ç¨‹å…³ç³»</td><td><code>-p</code>(æ˜¾ç¤ºPID), <code>-u</code>(æ˜¾ç¤ºç”¨æˆ·)</td><td><code>pstree -p</code></td></tr><tr><td><strong><code>jobs</code></strong></td><td>æŸ¥çœ‹åå°ä½œä¸š</td><td>å½“å‰shellçš„åå°è¿›ç¨‹</td><td><code>jobs -l</code></td></tr></tbody></table><ul><li><code>lsof -i :80</code> æŸ¥çœ‹80ç«¯å£è¢«è°å ç”¨</li></ul><p><strong>è¿›ç¨‹ç®¡ç†å‘½ä»¤ï¼š</strong></p><table><thead><tr><th>å‘½ä»¤</th><th>ä½œç”¨</th><th>å¸¸ç”¨æ–¹å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong><code>kill</code></strong></td><td>ç»ˆæ­¢è¿›ç¨‹</td><td><code>kill PID</code>, <code>kill -9 PID</code></td><td>-9å¼ºåˆ¶æ€æ­»</td></tr><tr><td><strong><code>killall</code></strong></td><td>æŒ‰åç§°æ€è¿›ç¨‹</td><td><code>killall processname</code></td><td>æ€æ­»æ‰€æœ‰åŒåè¿›ç¨‹</td></tr><tr><td><strong><code>nohup</code></strong></td><td>åå°è¿è¡Œç¨‹åº</td><td><code>nohup command &amp;</code></td><td>å¿½ç•¥æŒ‚æ–­ä¿¡å·</td></tr><tr><td><strong><code>bg</code></strong></td><td>åå°è¿è¡Œä½œä¸š</td><td><code>bg %1</code></td><td>å°†æš‚åœçš„ä½œä¸šæ”¾åˆ°åå°</td></tr><tr><td><strong><code>fg</code></strong></td><td>å‰å°è¿è¡Œä½œä¸š</td><td><code>fg %1</code></td><td>å°†åå°ä½œä¸šè°ƒåˆ°å‰å°</td></tr></tbody></table><p><strong>é¢è¯•é‡ç‚¹å›ç­”ï¼š</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Linuxå¸¸ç”¨å‘½ä»¤ä¸»è¦åˆ†å‡ ç±»ï¼š</span></span>
<span class="line"><span>1. æ–‡ä»¶æ“ä½œï¼šlsã€cdã€mkdirã€rmã€cpã€mv</span></span>
<span class="line"><span>2. æ–‡ä»¶æŸ¥çœ‹ï¼šcatã€grepã€tailã€head  </span></span>
<span class="line"><span>3. ç³»ç»Ÿç›‘æ§ï¼štopã€psã€freeã€df</span></span>
<span class="line"><span>4. ç½‘ç»œå·¥å…·ï¼špingã€curlã€netstat</span></span>
<span class="line"><span></span></span>
<span class="line"><span>æŸ¥çœ‹è¿›ç¨‹ä¸»è¦ç”¨ï¼š</span></span>
<span class="line"><span>- ps -efï¼šæŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹è¯¦ç»†ä¿¡æ¯</span></span>
<span class="line"><span>- topï¼šå®æ—¶ç›‘æ§è¿›ç¨‹èµ„æºä½¿ç”¨</span></span>
<span class="line"><span>- pgrepï¼šæ ¹æ®è¿›ç¨‹åå¿«é€ŸæŸ¥æ‰¾PID</span></span>
<span class="line"><span>- htopï¼šå¢å¼ºç‰ˆtopï¼Œç•Œé¢æ›´å‹å¥½</span></span>
<span class="line"><span></span></span>
<span class="line"><span>è¿›ç¨‹ç®¡ç†ç”¨killæ€è¿›ç¨‹ï¼Œnohupåå°è¿è¡Œç¨‹åºã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>é«˜é¢‘é¢è¯•åœºæ™¯ï¼š</strong></p><table><thead><tr><th>åœºæ™¯</th><th>å‘½ä»¤ç»„åˆ</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>æŸ¥æ‰¾å¹¶æ€æ­»è¿›ç¨‹</td><td><code>ps -ef | grep java | kill $(awk &#39;{print $2}&#39;)</code></td><td>æŸ¥æ‰¾javaè¿›ç¨‹å¹¶æ€æ­»</td></tr><tr><td>æŸ¥çœ‹ç«¯å£å ç”¨</td><td><code>netstat -tlnp | grep :8080</code></td><td>æŸ¥çœ‹8080ç«¯å£è¢«è°å ç”¨</td></tr><tr><td>æŸ¥çœ‹æ—¥å¿—å°¾éƒ¨</td><td><code>tail -f app.log | grep ERROR</code></td><td>å®æ—¶æŸ¥çœ‹é”™è¯¯æ—¥å¿—</td></tr><tr><td>æŸ¥çœ‹ç£ç›˜ä½¿ç”¨</td><td><code>df -h &amp;&amp; du -sh /*</code></td><td>æŸ¥çœ‹ç£ç›˜ç©ºé—´å’Œç›®å½•å¤§å°</td></tr><tr><td>æŸ¥çœ‹å†…å­˜ä½¿ç”¨</td><td><code>free -m &amp;&amp; top -o %MEM</code></td><td>æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ</td></tr></tbody></table><h2 id="è®¾è®¡æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#è®¾è®¡æ¨¡å¼"><span>è®¾è®¡æ¨¡å¼</span></a></h2><h3 id="_1-springä¸­ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_1-springä¸­ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼"><span>1. Springä¸­ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</span></a></h3><table><thead><tr><th>è®¾è®¡æ¨¡å¼</th><th>åº”ç”¨åœºæ™¯</th><th>å…·ä½“å®ç°</th><th>ä½œç”¨</th><th>å¥½å¤„</th></tr></thead><tbody><tr><td><strong>å•ä¾‹æ¨¡å¼</strong></td><td>Beanå®¹å™¨ç®¡ç†</td><td>IoCå®¹å™¨</td><td>ç¡®ä¿Beanå”¯ä¸€å®ä¾‹</td><td>èŠ‚çœå†…å­˜ï¼Œæé«˜æ€§èƒ½</td></tr><tr><td><strong>å·¥å‚æ¨¡å¼</strong></td><td>Beanåˆ›å»º</td><td>BeanFactoryã€ApplicationContext</td><td>ç»Ÿä¸€ç®¡ç†Beançš„åˆ›å»º</td><td>è§£è€¦å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨</td></tr><tr><td><strong>ä»£ç†æ¨¡å¼</strong></td><td>AOPåˆ‡é¢ç¼–ç¨‹</td><td>JDKåŠ¨æ€ä»£ç†ã€CGLIB</td><td>å¢å¼ºåŠŸèƒ½è€Œä¸ä¿®æ”¹åŸä»£ç </td><td>å®ç°æ¨ªåˆ‡å…³æ³¨ç‚¹</td></tr><tr><td><strong>æ¨¡æ¿æ–¹æ³•</strong></td><td>æ•°æ®è®¿é—®</td><td>JdbcTemplateã€HibernateTemplate</td><td>å®šä¹‰ç®—æ³•éª¨æ¶</td><td>ä»£ç å¤ç”¨ï¼Œå‡å°‘é‡å¤</td></tr><tr><td><strong>ç­–ç•¥æ¨¡å¼</strong></td><td>é…ç½®é€‰æ‹©</td><td>æ•°æ®æºé…ç½®ã€ç¼“å­˜ç­–ç•¥</td><td>æ ¹æ®é…ç½®é€‰æ‹©å®ç°</td><td>æ˜“äºæ‰©å±•ï¼Œç¬¦åˆå¼€é—­åŸåˆ™</td></tr><tr><td><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong></td><td>äº‹ä»¶æœºåˆ¶</td><td>ApplicationEventã€ApplicationListener</td><td>ç»„ä»¶é—´è§£è€¦é€šä¿¡</td><td>æ¾è€¦åˆï¼Œæ˜“äºç»´æŠ¤</td></tr><tr><td><strong>é€‚é…å™¨æ¨¡å¼</strong></td><td>æ¥å£é€‚é…</td><td>HandlerAdapterã€ViewResolver</td><td>è®©ä¸å…¼å®¹æ¥å£ä¸€èµ·å·¥ä½œ</td><td>æé«˜ç³»ç»Ÿçµæ´»æ€§</td></tr><tr><td><strong>è£…é¥°å™¨æ¨¡å¼</strong></td><td>åŠŸèƒ½å¢å¼º</td><td>BeanPostProcessorã€AOP</td><td>åŠ¨æ€æ·»åŠ æ–°åŠŸèƒ½</td><td>ä¸æ”¹å˜åŸç±»æ‰©å±•åŠŸèƒ½</td></tr><tr><td><strong>å»ºé€ è€…æ¨¡å¼</strong></td><td>å¤æ‚å¯¹è±¡æ„å»º</td><td>BeanDefinitionBuilder</td><td>æ„å»ºå¤æ‚å¯¹è±¡</td><td>æ„å»ºè¿‡ç¨‹æ¸…æ™°ï¼Œå‚æ•°çµæ´»</td></tr><tr><td><strong>è´£ä»»é“¾æ¨¡å¼</strong></td><td>è¯·æ±‚å¤„ç†</td><td>Filteré“¾ã€Interceptoré“¾</td><td>è§£è€¦å‘é€è€…å’Œæ¥æ”¶è€…</td><td>åŠ¨æ€ç»„åˆå¤„ç†é“¾</td></tr></tbody></table><p><strong>é¢è¯•é‡ç‚¹ï¼š</strong></p><ul><li><strong>æ ¸å¿ƒæ¨¡å¼</strong>ï¼šå•ä¾‹ã€å·¥å‚ã€ä»£ç†</li><li><strong>ä¸»è¦ä½œç”¨</strong>ï¼šæä¾›çµæ´»æ€§å’Œå¯æ‰©å±•æ€§</li><li><strong>è®¾è®¡åŸåˆ™</strong>ï¼šéµå¾ªå¼€é—­åŸåˆ™ï¼Œæ”¯æŒæ‰©å±•</li><li><strong>å®é™…ä»·å€¼</strong>ï¼šè®©Springæ¡†æ¶æ›´åŠ ä¼˜é›…å’Œå¼ºå¤§</li></ul><h2 id="äº‘è®¡ç®—" tabindex="-1"><a class="header-anchor" href="#äº‘è®¡ç®—"><span>äº‘è®¡ç®—</span></a></h2><h3 id="_1-äº‘å’Œäº‘åŸç”Ÿçš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_1-äº‘å’Œäº‘åŸç”Ÿçš„åŒºåˆ«"><span>1. äº‘å’Œäº‘åŸç”Ÿçš„åŒºåˆ«ï¼Ÿ</span></a></h3><p><strong>äº‘ï¼ˆCloudï¼‰ï¼š</strong></p><ul><li>æ˜¯ä¸€ç§<strong>æŠ€æœ¯æ¶æ„æ¨¡å¼</strong>ï¼Œå°†è®¡ç®—èµ„æºï¼ˆæœåŠ¡å™¨ã€å­˜å‚¨ã€ç½‘ç»œï¼‰é€šè¿‡äº’è”ç½‘æŒ‰éœ€æä¾›</li><li>ä¸»è¦ç‰¹ç‚¹ï¼šå¼¹æ€§ä¼¸ç¼©ã€æŒ‰éœ€ä»˜è´¹ã€èµ„æºå…±äº«</li><li>ä»£è¡¨æœåŠ¡ï¼šIaaSï¼ˆåŸºç¡€è®¾æ–½å³æœåŠ¡ï¼‰ã€PaaSï¼ˆå¹³å°å³æœåŠ¡ï¼‰ã€SaaSï¼ˆè½¯ä»¶å³æœåŠ¡ï¼‰</li></ul><p><strong>äº‘åŸç”Ÿï¼ˆCloud Nativeï¼‰ï¼š</strong></p><ul><li>æ˜¯ä¸€ç§<strong>åº”ç”¨å¼€å‘å’Œéƒ¨ç½²çš„æ–¹æ³•è®º</strong>ï¼Œä¸“é—¨ä¸ºäº‘ç¯å¢ƒè®¾è®¡</li><li>æ ¸å¿ƒåŸåˆ™ï¼šå¾®æœåŠ¡æ¶æ„ã€å®¹å™¨åŒ–éƒ¨ç½²ã€è‡ªåŠ¨åŒ–è¿ç»´ã€æŒç»­äº¤ä»˜</li><li>ä»£è¡¨æŠ€æœ¯ï¼šDockerã€Kubernetesã€å¾®æœåŠ¡ã€DevOps</li></ul><p><strong>ç®€å•ç†è§£ï¼š</strong></p><ul><li>äº‘ = åŸºç¡€è®¾æ–½ï¼ˆæˆ¿å­ï¼‰</li><li>äº‘åŸç”Ÿ = åœ¨äº‘ä¸Šæ„å»ºåº”ç”¨çš„æœ€ä½³å®è·µï¼ˆè£…ä¿®æ–¹æ¡ˆï¼‰</li></ul><h3 id="_2-è™šæ‹Ÿæœºå’Œå®¹å™¨çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_2-è™šæ‹Ÿæœºå’Œå®¹å™¨çš„åŒºåˆ«"><span>2. è™šæ‹Ÿæœºå’Œå®¹å™¨çš„åŒºåˆ«ï¼Ÿ</span></a></h3><table><thead><tr><th>ç»´åº¦</th><th>è™šæ‹Ÿæœº</th><th>å®¹å™¨</th></tr></thead><tbody><tr><td><strong>éš”ç¦»çº§åˆ«</strong></td><td>ç¡¬ä»¶çº§éš”ç¦»ï¼ˆå®Œæ•´OSï¼‰</td><td>è¿›ç¨‹çº§éš”ç¦»ï¼ˆå…±äº«OSå†…æ ¸ï¼‰</td></tr><tr><td><strong>å¯åŠ¨é€Ÿåº¦</strong></td><td>åˆ†é’Ÿçº§</td><td>ç§’çº§</td></tr><tr><td><strong>èµ„æºå ç”¨</strong></td><td>è¾ƒå¤§ï¼ˆGBçº§åˆ«ï¼‰</td><td>è¾ƒå°ï¼ˆMBçº§åˆ«ï¼‰</td></tr><tr><td><strong>æ€§èƒ½å¼€é”€</strong></td><td>è¾ƒé«˜ï¼ˆè™šæ‹ŸåŒ–å±‚ï¼‰</td><td>è¾ƒä½ï¼ˆç›´æ¥è°ƒç”¨ï¼‰</td></tr><tr><td><strong>éƒ¨ç½²å¯†åº¦</strong></td><td>ä½ï¼ˆä¸€å°æœºå™¨å‡ ä¸ªVMï¼‰</td><td>é«˜ï¼ˆä¸€å°æœºå™¨å‡ ç™¾ä¸ªå®¹å™¨ï¼‰</td></tr><tr><td><strong>è¿ç§»æ€§</strong></td><td>è¾ƒå·®ï¼ˆä¾èµ–è™šæ‹ŸåŒ–å¹³å°ï¼‰</td><td>å¥½ï¼ˆæ ‡å‡†æ ¼å¼ï¼Œè·¨å¹³å°ï¼‰</td></tr></tbody></table><p><strong>é¢è¯•è¦ç‚¹ï¼š</strong></p><ul><li>è™šæ‹Ÿæœºï¼šå®Œæ•´çš„æ“ä½œç³»ç»Ÿ + åº”ç”¨</li><li>å®¹å™¨ï¼šåº”ç”¨ + ä¾èµ–åº“ï¼Œå…±äº«ä¸»æœºOSå†…æ ¸</li><li>å®¹å™¨æ›´è½»é‡ã€å¯åŠ¨æ›´å¿«ã€èµ„æºåˆ©ç”¨ç‡æ›´é«˜</li><li>è™šæ‹Ÿæœºéš”ç¦»æ€§æ›´å¼ºï¼Œå®‰å…¨æ€§æ›´é«˜</li></ul><p><strong>å®é™…åº”ç”¨ï¼š</strong></p><ul><li>è™šæ‹Ÿæœºï¼šä¼ ç»Ÿåº”ç”¨ã€éœ€è¦å¼ºéš”ç¦»çš„åœºæ™¯</li><li>å®¹å™¨ï¼šå¾®æœåŠ¡ã€äº‘åŸç”Ÿåº”ç”¨ã€å¿«é€Ÿéƒ¨ç½²åœºæ™¯</li></ul><h3 id="_3-servlesså†·å¯åŠ¨çš„è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_3-servlesså†·å¯åŠ¨çš„è§£å†³æ–¹æ¡ˆ"><span>3. Servlesså†·å¯åŠ¨çš„è§£å†³æ–¹æ¡ˆ</span></a></h3><p><strong>ä»€ä¹ˆæ˜¯å†·å¯åŠ¨ï¼Ÿ</strong></p><ul><li>å½“å‡½æ•°ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨æ—¶ï¼Œéœ€è¦åˆ›å»ºæ–°çš„æ‰§è¡Œç¯å¢ƒï¼ˆå®¹å™¨ï¼‰</li><li>åŒ…æ‹¬ä¸‹è½½ä»£ç ã€å®‰è£…ä¾èµ–ã€åˆå§‹åŒ–è¿è¡Œæ—¶çš„è¿‡ç¨‹</li><li>å¯¼è‡´é¦–æ¬¡å“åº”æ—¶é—´è¾ƒé•¿ï¼ˆå‡ ç§’åˆ°å‡ åç§’ï¼‰</li></ul><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><h4 id="_1-é¢„çƒ­ç­–ç•¥-warm-up" tabindex="-1"><a class="header-anchor" href="#_1-é¢„çƒ­ç­–ç•¥-warm-up"><span>1. é¢„çƒ­ç­–ç•¥ï¼ˆWarm-upï¼‰</span></a></h4><ul><li><strong>å®šæ—¶é¢„çƒ­</strong>ï¼šå®šæœŸè°ƒç”¨å‡½æ•°ä¿æŒå®¹å™¨æ´»è·ƒ</li><li><strong>é¢„åˆ†é…</strong>ï¼šæå‰åˆ›å»ºä¸€å®šæ•°é‡çš„å®¹å™¨å®ä¾‹</li><li><strong>æ™ºèƒ½é¢„æµ‹</strong>ï¼šæ ¹æ®å†å²è°ƒç”¨æ¨¡å¼é¢„æµ‹éœ€æ±‚</li></ul><h4 id="_2-ä»£ç ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_2-ä»£ç ä¼˜åŒ–"><span>2. ä»£ç ä¼˜åŒ–</span></a></h4><ul><li><strong>å‡å°‘ä¾èµ–</strong>ï¼šåªå¼•å…¥å¿…è¦çš„åº“</li><li><strong>ä»£ç å‹ç¼©</strong>ï¼šå‡å°ä»£ç åŒ…ä½“ç§¯</li><li><strong>åˆ†å±‚éƒ¨ç½²</strong>ï¼šå°†ä¾èµ–å’Œä¸šåŠ¡ä»£ç åˆ†ç¦»</li></ul><h4 id="_3-è¿è¡Œæ—¶ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_3-è¿è¡Œæ—¶ä¼˜åŒ–"><span>3. è¿è¡Œæ—¶ä¼˜åŒ–</span></a></h4><ul><li><strong>é€‰æ‹©è½»é‡è¿è¡Œæ—¶</strong>ï¼šå¦‚Node.jsã€Python</li><li><strong>ä½¿ç”¨é¢„ç¼–è¯‘è¯­è¨€</strong>ï¼šGoã€Rustç­‰ç¼–è¯‘å‹è¯­è¨€</li><li><strong>ä¼˜åŒ–å¯åŠ¨é…ç½®</strong>ï¼šåˆç†è®¾ç½®å†…å­˜å’Œè¶…æ—¶æ—¶é—´</li></ul><h4 id="_4-æ¶æ„è®¾è®¡" tabindex="-1"><a class="header-anchor" href="#_4-æ¶æ„è®¾è®¡"><span>4. æ¶æ„è®¾è®¡</span></a></h4><ul><li><strong>æ··åˆæ¶æ„</strong>ï¼šå…³é”®æœåŠ¡ç”¨å¸¸é©»æœåŠ¡ï¼Œéå…³é”®ç”¨Serverless</li><li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šå°†è€—æ—¶æ“ä½œå¼‚æ­¥åŒ–</li><li><strong>ç¼“å­˜ç­–ç•¥</strong>ï¼šä½¿ç”¨Redisç­‰å¤–éƒ¨ç¼“å­˜</li></ul><h4 id="_5-å¹³å°çº§è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_5-å¹³å°çº§è§£å†³æ–¹æ¡ˆ"><span>5. å¹³å°çº§è§£å†³æ–¹æ¡ˆ</span></a></h4><ul><li><strong>é¢„ç•™å®ä¾‹</strong>ï¼šAWS Lambda Provisioned Concurrency</li><li><strong>å®¹å™¨å¤ç”¨</strong>ï¼šå¤ç”¨å·²åˆ›å»ºçš„å®¹å™¨å®ä¾‹</li><li><strong>æ™ºèƒ½è°ƒåº¦</strong>ï¼šæ ¹æ®è´Ÿè½½è‡ªåŠ¨è°ƒæ•´é¢„çƒ­ç­–ç•¥</li></ul><p><strong>é¢è¯•è¦ç‚¹ï¼š</strong></p><ul><li>å†·å¯åŠ¨æ˜¯Serverlessçš„ä¸»è¦ç—›ç‚¹</li><li>è§£å†³æ–¹æ¡ˆéœ€è¦ä»ä»£ç ã€æ¶æ„ã€å¹³å°å¤šä¸ªå±‚é¢è€ƒè™‘</li><li>é¢„çƒ­æ˜¯æœ€å¸¸ç”¨çš„è§£å†³æ–¹æ¡ˆ</li><li>éœ€è¦æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„ç­–ç•¥</li></ul><h3 id="_4-k8sçš„å¸¸è§ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#_4-k8sçš„å¸¸è§ç»„ä»¶"><span>4. K8Sçš„å¸¸è§ç»„ä»¶ï¼Ÿ</span></a></h3><h4 id="æ ¸å¿ƒèµ„æºç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#æ ¸å¿ƒèµ„æºç»„ä»¶"><span><strong>æ ¸å¿ƒèµ„æºç»„ä»¶</strong></span></a></h4><table><thead><tr><th>èµ„æºç±»å‹</th><th>ä½œç”¨</th><th>ç‰¹ç‚¹</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Pod</strong></td><td>æœ€å°éƒ¨ç½²å•å…ƒï¼ŒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨</td><td>ä¸´æ—¶æ€§ï¼Œå¯è¢«è°ƒåº¦</td><td>è¿è¡Œåº”ç”¨ç¨‹åº</td></tr><tr><td><strong>Service</strong></td><td>ä¸ºPodæä¾›å›ºå®šè®¿é—®ç‚¹ï¼Œè´Ÿè½½å‡è¡¡</td><td>ç¨³å®šIPï¼ŒæœåŠ¡å‘ç°</td><td>å†…éƒ¨æœåŠ¡è®¿é—®</td></tr><tr><td><strong>Deployment</strong></td><td>ç®¡ç†Podå‰¯æœ¬ï¼Œæ”¯æŒæ»šåŠ¨æ›´æ–°</td><td>å£°æ˜å¼ï¼Œè‡ªåŠ¨æ‰©ç¼©å®¹</td><td>æ— çŠ¶æ€åº”ç”¨</td></tr><tr><td><strong>StatefulSet</strong></td><td>ç®¡ç†æœ‰çŠ¶æ€åº”ç”¨</td><td>å›ºå®šç½‘ç»œæ ‡è¯†ï¼Œæœ‰åºéƒ¨ç½²</td><td>æ•°æ®åº“ã€å­˜å‚¨åº”ç”¨</td></tr><tr><td><strong>DaemonSet</strong></td><td>æ¯ä¸ªèŠ‚ç‚¹è¿è¡Œä¸€ä¸ªPod</td><td>èŠ‚ç‚¹çº§éƒ¨ç½²</td><td>ç›‘æ§ã€æ—¥å¿—æ”¶é›†</td></tr><tr><td><strong>Job/CronJob</strong></td><td>æ‰§è¡Œä¸€æ¬¡æ€§ä»»åŠ¡</td><td>ä»»åŠ¡å®Œæˆåè‡ªåŠ¨åˆ é™¤</td><td>æ‰¹å¤„ç†ã€å®šæ—¶ä»»åŠ¡</td></tr></tbody></table><h4 id="ç½‘ç»œå’Œå­˜å‚¨ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#ç½‘ç»œå’Œå­˜å‚¨ç»„ä»¶"><span><strong>ç½‘ç»œå’Œå­˜å‚¨ç»„ä»¶</strong></span></a></h4><table><thead><tr><th>èµ„æºç±»å‹</th><th>ä½œç”¨</th><th>ç‰¹ç‚¹</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Ingress</strong></td><td>å¤–éƒ¨è®¿é—®å…¥å£ï¼ŒHTTP/HTTPSè·¯ç”±</td><td>ä¸ƒå±‚è´Ÿè½½å‡è¡¡ï¼ŒSSLç»ˆæ­¢</td><td>å¤–éƒ¨æµé‡æ¥å…¥</td></tr><tr><td><strong>ConfigMap</strong></td><td>é…ç½®ç®¡ç†</td><td>é”®å€¼å¯¹ï¼ŒæŒ‚è½½åˆ°å®¹å™¨</td><td>åº”ç”¨é…ç½®</td></tr><tr><td><strong>Secret</strong></td><td>æ•æ„Ÿä¿¡æ¯ç®¡ç†</td><td>åŠ å¯†å­˜å‚¨ï¼Œbase64ç¼–ç </td><td>å¯†ç ã€è¯ä¹¦</td></tr><tr><td><strong>PersistentVolume</strong></td><td>æŒä¹…åŒ–å­˜å‚¨</td><td>æŠ½è±¡å­˜å‚¨æ¥å£</td><td>æ•°æ®åº“å­˜å‚¨</td></tr><tr><td><strong>Namespace</strong></td><td>èµ„æºéš”ç¦»</td><td>é€»è¾‘åˆ†ç»„ï¼Œæƒé™æ§åˆ¶</td><td>å¤šç§Ÿæˆ·ã€ç¯å¢ƒéš”ç¦»</td></tr></tbody></table><h3 id="è¯¦ç»†å¯¹æ¯”è¡¨æ ¼" tabindex="-1"><a class="header-anchor" href="#è¯¦ç»†å¯¹æ¯”è¡¨æ ¼"><span><strong>è¯¦ç»†å¯¹æ¯”è¡¨æ ¼</strong></span></a></h3><h4 id="pod-vs-service" tabindex="-1"><a class="header-anchor" href="#pod-vs-service"><span><strong>Pod vs Service</strong></span></a></h4><table><thead><tr><th>ç‰¹æ€§</th><th>Pod</th><th>Service</th></tr></thead><tbody><tr><td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td><td>ä¸´æ—¶ï¼Œå¯è¢«åˆ é™¤é‡å»º</td><td>ç¨³å®šï¼Œé•¿æœŸå­˜åœ¨</td></tr><tr><td><strong>IPåœ°å€</strong></td><td>åŠ¨æ€åˆ†é…ï¼ŒPodé‡å¯ä¼šå˜</td><td>å›ºå®šClusterIP</td></tr><tr><td><strong>è®¿é—®æ–¹å¼</strong></td><td>ç›´æ¥è®¿é—®Pod IP</td><td>é€šè¿‡Serviceåç§°è®¿é—®</td></tr><tr><td><strong>è´Ÿè½½å‡è¡¡</strong></td><td>ä¸æ”¯æŒ</td><td>è‡ªåŠ¨è´Ÿè½½å‡è¡¡</td></tr><tr><td><strong>æœåŠ¡å‘ç°</strong></td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒDNSæœåŠ¡å‘ç°</td></tr></tbody></table><h4 id="deployment-vs-statefulset" tabindex="-1"><a class="header-anchor" href="#deployment-vs-statefulset"><span><strong>Deployment vs StatefulSet</strong></span></a></h4><table><thead><tr><th>ç‰¹æ€§</th><th>Deployment</th><th>StatefulSet</th></tr></thead><tbody><tr><td><strong>ç½‘ç»œæ ‡è¯†</strong></td><td>éšæœºåç§°</td><td>å›ºå®šåç§°ï¼ˆstatefulset-0,1,2...ï¼‰</td></tr><tr><td><strong>å­˜å‚¨</strong></td><td>å…±äº«å­˜å‚¨</td><td>æ¯ä¸ªPodç‹¬ç«‹å­˜å‚¨</td></tr><tr><td><strong>éƒ¨ç½²é¡ºåº</strong></td><td>å¹¶è¡Œéƒ¨ç½²</td><td>æœ‰åºéƒ¨ç½²ï¼ˆ0,1,2...ï¼‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>æ— çŠ¶æ€åº”ç”¨</td><td>æœ‰çŠ¶æ€åº”ç”¨ï¼ˆæ•°æ®åº“ï¼‰</td></tr><tr><td><strong>æ‰©ç¼©å®¹</strong></td><td>æ”¯æŒ</td><td>æ”¯æŒï¼Œä½†æœ‰é™åˆ¶</td></tr></tbody></table><p><strong>æ ¸å¿ƒç†è§£ï¼š</strong></p><ul><li><strong>Pod</strong>ï¼šæœ€å°éƒ¨ç½²å•å…ƒï¼Œä¸´æ—¶æ€§</li><li><strong>Service</strong>ï¼šä¸ºPodæä¾›ç¨³å®šè®¿é—®ç‚¹</li><li><strong>Deployment</strong>ï¼šç®¡ç†æ— çŠ¶æ€åº”ç”¨</li><li><strong>StatefulSet</strong>ï¼šç®¡ç†æœ‰çŠ¶æ€åº”ç”¨</li><li><strong>Ingress</strong>ï¼šå¤–éƒ¨æµé‡å…¥å£</li></ul><p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p><ul><li><strong>Webåº”ç”¨</strong>ï¼šDeployment + Service + Ingress</li><li><strong>æ•°æ®åº“</strong>ï¼šStatefulSet + PersistentVolume</li><li><strong>ç›‘æ§ç³»ç»Ÿ</strong>ï¼šDaemonSet + ConfigMap</li><li><strong>æ‰¹å¤„ç†</strong>ï¼šJob/CronJob</li></ul><p><strong>å…³é”®æ¦‚å¿µï¼š</strong></p><ul><li>æœåŠ¡å‘ç°é€šè¿‡Serviceå®ç°</li><li>é…ç½®ç®¡ç†é€šè¿‡ConfigMap/Secret</li><li>å­˜å‚¨é€šè¿‡PersistentVolume</li><li>ç½‘ç»œéš”ç¦»é€šè¿‡Namespace</li></ul><h2 id="elasticsearch" tabindex="-1"><a class="header-anchor" href="#elasticsearch"><span>ElasticSearch</span></a></h2><h3 id="_1-å¯¹esçš„ç†è§£" tabindex="-1"><a class="header-anchor" href="#_1-å¯¹esçš„ç†è§£"><span>1. å¯¹ESçš„ç†è§£ï¼Ÿ</span></a></h3><p>ESæ˜¯ä¸€ä¸ª<strong>åˆ†å¸ƒå¼æœç´¢å¼•æ“</strong>ï¼ŒåŸºäºLuceneæ„å»ºï¼Œä¸“é—¨è§£å†³å¤§è§„æ¨¡æ•°æ®çš„<strong>æœç´¢å’Œåˆ†æ</strong>é—®é¢˜ã€‚</p><h4 id="æ ¸å¿ƒç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#æ ¸å¿ƒç‰¹æ€§"><span><strong>æ ¸å¿ƒç‰¹æ€§</strong></span></a></h4><ul><li><strong>å…¨æ–‡æœç´¢</strong>ï¼šæ”¯æŒå¤æ‚çš„æ–‡æœ¬æœç´¢å’ŒåŒ¹é…</li><li><strong>åˆ†å¸ƒå¼æ¶æ„</strong>ï¼šé€šè¿‡åˆ†ç‰‡æœºåˆ¶æ”¯æŒæ°´å¹³æ‰©å±•</li><li><strong>è¿‘å®æ—¶æœç´¢</strong>ï¼š1ç§’å†…å¯æœç´¢åˆ°æ–°æ•°æ®</li><li><strong>èšåˆåˆ†æ</strong>ï¼šå¼ºå¤§çš„æ•°æ®åˆ†æå’Œç»Ÿè®¡èƒ½åŠ›</li></ul><h4 id="æŠ€æœ¯åŸç†" tabindex="-1"><a class="header-anchor" href="#æŠ€æœ¯åŸç†"><span><strong>æŠ€æœ¯åŸç†</strong></span></a></h4><ul><li><strong>å€’æ’ç´¢å¼•</strong>ï¼šå…³é”®è¯åˆ°æ–‡æ¡£çš„æ˜ å°„ï¼Œå®ç°å¿«é€Ÿæœç´¢</li><li><strong>åˆ†ç‰‡æœºåˆ¶</strong>ï¼šæ•°æ®æ°´å¹³åˆ†å‰²ï¼Œæ”¯æŒå¹¶è¡Œå¤„ç†</li><li><strong>å‰¯æœ¬æœºåˆ¶</strong>ï¼šä¿è¯é«˜å¯ç”¨å’Œå®¹é”™èƒ½åŠ›</li></ul><h4 id="åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#åº”ç”¨åœºæ™¯"><span><strong>åº”ç”¨åœºæ™¯</strong></span></a></h4><ul><li><strong>æ—¥å¿—åˆ†æ</strong>ï¼šELK Stackï¼Œå®æ—¶ç›‘æ§</li><li><strong>ç”µå•†æœç´¢</strong>ï¼šå•†å“æœç´¢ã€æ™ºèƒ½æ¨è</li><li><strong>ä¼ä¸šæœç´¢</strong>ï¼šæ–‡æ¡£æœç´¢ã€çŸ¥è¯†åº“</li></ul><h4 id="ä¼˜åŠ¿" tabindex="-1"><a class="header-anchor" href="#ä¼˜åŠ¿"><span><strong>ä¼˜åŠ¿</strong></span></a></h4><ul><li>æœç´¢æ€§èƒ½ä¼˜ç§€ï¼ˆæ¯«ç§’çº§å“åº”ï¼‰</li><li>æ”¯æŒå¤§è§„æ¨¡æ•°æ®å’Œé«˜å¹¶å‘</li><li>ç”Ÿæ€ä¸°å¯Œï¼Œå·¥å…·é“¾å®Œå–„</li></ul><h4 id="æŒ‘æˆ˜" tabindex="-1"><a class="header-anchor" href="#æŒ‘æˆ˜"><span><strong>æŒ‘æˆ˜</strong></span></a></h4><ul><li>å­¦ä¹ æ›²çº¿è¾ƒé™¡</li><li>è¿ç»´å¤æ‚ï¼Œèµ„æºæ¶ˆè€—å¤§</li><li>æœ€ç»ˆä¸€è‡´æ€§æ¨¡å‹</li></ul><p><strong>æ€»ç»“ï¼š</strong> ESæ˜¯æœç´¢å’Œåˆ†æåœºæ™¯çš„<strong>æœ€ä½³é€‰æ‹©</strong>ï¼Œç‰¹åˆ«é€‚åˆéœ€è¦å¿«é€Ÿæœç´¢å’Œå®æ—¶åˆ†æçš„åœºæ™¯ã€‚</p><h3 id="_2-esçš„æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_2-esçš„æ ¸å¿ƒæ¦‚å¿µ"><span>2. ESçš„æ ¸å¿ƒæ¦‚å¿µ</span></a></h3><p><strong>Q: ä»€ä¹ˆæ˜¯ç´¢å¼•ã€åˆ†ç‰‡ã€å‰¯æœ¬ï¼Ÿ</strong></p><ul><li><strong>ç´¢å¼•ï¼ˆIndexï¼‰</strong>ï¼šç±»ä¼¼æ•°æ®åº“è¡¨ï¼Œæ˜¯æ•°æ®çš„é€»è¾‘å®¹å™¨</li><li><strong>åˆ†ç‰‡ï¼ˆShardï¼‰</strong>ï¼šæ•°æ®åˆ†å‰²çš„æœ€å°å•ä½ï¼Œæ”¯æŒæ°´å¹³æ‰©å±•</li><li><strong>å‰¯æœ¬ï¼ˆReplicaï¼‰</strong>ï¼šåˆ†ç‰‡çš„å¤‡ä»½ï¼Œæä¾›é«˜å¯ç”¨å’Œè´Ÿè½½å‡è¡¡</li></ul><h3 id="_3-å€’æ’ç´¢å¼•åŸç†" tabindex="-1"><a class="header-anchor" href="#_3-å€’æ’ç´¢å¼•åŸç†"><span>3. å€’æ’ç´¢å¼•åŸç†</span></a></h3><p><strong>Q: ä»€ä¹ˆæ˜¯å€’æ’ç´¢å¼•ï¼Ÿ</strong></p><ul><li><strong>æ­£å‘ç´¢å¼•</strong>ï¼šæ–‡æ¡£ID â†’ å†…å®¹</li><li><strong>å€’æ’ç´¢å¼•</strong>ï¼šå…³é”®è¯ â†’ æ–‡æ¡£IDåˆ—è¡¨</li><li><strong>ä¼˜åŠ¿</strong>ï¼šå¿«é€Ÿå®šä½åŒ…å«å…³é”®è¯çš„æ–‡æ¡£</li></ul><h3 id="_4-å†™å…¥æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_4-å†™å…¥æµç¨‹"><span>4. å†™å…¥æµç¨‹</span></a></h3><p><strong>Q: æ–‡æ¡£å†™å…¥ESçš„æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><ol><li>å†™å…¥å†…å­˜ç¼“å†²åŒº</li><li>å†™å…¥äº‹åŠ¡æ—¥å¿—</li><li>å®šæœŸåˆ·æ–°åˆ°æ®µæ–‡ä»¶ï¼ˆå¯æœç´¢ï¼‰</li><li>å®šæœŸæäº¤åˆ°ç£ç›˜ï¼ˆæŒä¹…åŒ–ï¼‰</li></ol><h3 id="_5-è¿‘å®æ—¶æœç´¢" tabindex="-1"><a class="header-anchor" href="#_5-è¿‘å®æ—¶æœç´¢"><span>5. è¿‘å®æ—¶æœç´¢</span></a></h3><p><strong>Q: ä¸ºä»€ä¹ˆESæ˜¯è¿‘å®æ—¶è€Œä¸æ˜¯å®æ—¶ï¼Ÿ</strong></p><ul><li><strong>åˆ·æ–°é—´éš”</strong>ï¼šé»˜è®¤1ç§’åˆ·æ–°ä¸€æ¬¡</li><li><strong>å¹³è¡¡æ€§èƒ½</strong>ï¼šå‡å°‘åˆ·æ–°é¢‘ç‡æé«˜å†™å…¥æ€§èƒ½</li><li><strong>å¯é…ç½®</strong>ï¼šå¯ä»¥è°ƒæ•´åˆ·æ–°é—´éš”</li></ul><h3 id="_6-èŠ‚ç‚¹è§’è‰²" tabindex="-1"><a class="header-anchor" href="#_6-èŠ‚ç‚¹è§’è‰²"><span>6. èŠ‚ç‚¹è§’è‰²</span></a></h3><p><strong>Q: ESæœ‰å“ªäº›èŠ‚ç‚¹è§’è‰²ï¼Ÿ</strong></p><ul><li><strong>MasterèŠ‚ç‚¹</strong>ï¼šé›†ç¾¤ç®¡ç†ï¼Œå…ƒæ•°æ®ç»´æŠ¤</li><li><strong>DataèŠ‚ç‚¹</strong>ï¼šæ•°æ®å­˜å‚¨å’Œæœç´¢</li><li><strong>IngestèŠ‚ç‚¹</strong>ï¼šæ•°æ®é¢„å¤„ç†</li><li><strong>CoordinatingèŠ‚ç‚¹</strong>ï¼šè¯·æ±‚åè°ƒ</li></ul><h3 id="_7-æ€§èƒ½ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_7-æ€§èƒ½ä¼˜åŒ–"><span>7. æ€§èƒ½ä¼˜åŒ–</span></a></h3><p><strong>Q: å¦‚ä½•ä¼˜åŒ–ESæ€§èƒ½ï¼Ÿ</strong></p><ul><li><strong>åˆç†åˆ†ç‰‡</strong>ï¼šæ ¹æ®æ•°æ®é‡è®¾ç½®åˆ†ç‰‡æ•°</li><li><strong>å†…å­˜é…ç½®</strong>ï¼šå †å†…å­˜ä¸è¶…è¿‡50%</li><li><strong>ç´¢å¼•ä¼˜åŒ–</strong>ï¼šåˆç†è®¾ç½®mapping</li><li><strong>æŸ¥è¯¢ä¼˜åŒ–</strong>ï¼šé¿å…æ·±åº¦åˆ†é¡µ</li></ul><h3 id="_8-é«˜å¯ç”¨" tabindex="-1"><a class="header-anchor" href="#_8-é«˜å¯ç”¨"><span>8. é«˜å¯ç”¨</span></a></h3><p><strong>Q: ESå¦‚ä½•ä¿è¯é«˜å¯ç”¨ï¼Ÿ</strong></p><ul><li><strong>å‰¯æœ¬æœºåˆ¶</strong>ï¼šæ¯ä¸ªåˆ†ç‰‡æœ‰å‰¯æœ¬</li><li><strong>æ•…éšœè½¬ç§»</strong>ï¼šèŠ‚ç‚¹æ•…éšœæ—¶å‰¯æœ¬è‡ªåŠ¨æå‡</li><li><strong>è„‘è£‚ä¿æŠ¤</strong>ï¼šå¤šæ•°æ´¾é€‰ä¸¾æœºåˆ¶</li></ul><h3 id="_9-æ•°æ®ä¸€è‡´æ€§" tabindex="-1"><a class="header-anchor" href="#_9-æ•°æ®ä¸€è‡´æ€§"><span>9. æ•°æ®ä¸€è‡´æ€§</span></a></h3><p><strong>Q: ESçš„æ•°æ®ä¸€è‡´æ€§å¦‚ä½•ä¿è¯ï¼Ÿ</strong></p><ul><li><strong>å†™å…¥ä¸€è‡´æ€§</strong>ï¼šä¸»åˆ†ç‰‡å†™å…¥æˆåŠŸæ‰è¿”å›</li><li><strong>è¯»å–ä¸€è‡´æ€§</strong>ï¼šå¯é…ç½®ä¸€è‡´æ€§çº§åˆ«</li><li><strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼šå‰¯æœ¬é—´å¯èƒ½å­˜åœ¨çŸ­æš‚ä¸ä¸€è‡´</li></ul><h2 id="å…¶ä»–" tabindex="-1"><a class="header-anchor" href="#å…¶ä»–"><span>å…¶ä»–</span></a></h2><h3 id="_1-ä»‹ç»ä¸€ä¸‹disruptor-ä¸ºä»€ä¹ˆé€‚åˆæ’®åˆå¼•æ“" tabindex="-1"><a class="header-anchor" href="#_1-ä»‹ç»ä¸€ä¸‹disruptor-ä¸ºä»€ä¹ˆé€‚åˆæ’®åˆå¼•æ“"><span>1. ä»‹ç»ä¸€ä¸‹Disruptorï¼Ÿä¸ºä»€ä¹ˆé€‚åˆæ’®åˆå¼•æ“ï¼Ÿ</span></a></h3><p>Disruptor æ˜¯ä¸€ä¸ªåŸºäº <strong>ç¯å½¢æ•°ç»„ï¼ˆRingBufferï¼‰</strong> çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼Œæ›¿ä»£ä¼ ç»Ÿé˜Ÿåˆ—ï¼ˆå¦‚ LinkedBlockingQueueï¼‰ã€‚</p><table><thead><tr><th>ç‰¹æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td>æ— é”å¹¶å‘</td><td>é€šè¿‡ CASã€è‡ªæ—‹ç­‰æŠ€æœ¯é¿å…é”ç«äº‰</td></tr><tr><td>é«˜æ€§èƒ½</td><td>æ¯”ä¼ ç»Ÿé˜»å¡é˜Ÿåˆ—é«˜å‡º <strong>10~100 å€åå</strong></td></tr><tr><td>å•å†™å¤šè¯»</td><td>å¤šä¸ªæ¶ˆè´¹è€…ç‹¬ç«‹è¯»å–åŒä¸€ä¸ªäº‹ä»¶æµ</td></tr><tr><td>å†…å­˜é¢„åˆ†é…</td><td>æ•°æ®ç»“æ„å…¨éƒ¨åœ¨å†…å­˜ä¸­å®Œæˆåˆå§‹åŒ–ï¼Œé¿å… GC</td></tr><tr><td>é¿å…ä¼ªå…±äº«</td><td>ç²¾å¿ƒè®¾è®¡çš„ç¼“å­˜è¡Œå¯¹é½ç­–ç•¥ï¼Œé¿å… CPU ç¼“å­˜ä¼ªå…±äº«é—®é¢˜</td></tr></tbody></table><h4 id="æ’®åˆå¼•æ“æ ¸å¿ƒè¯‰æ±‚" tabindex="-1"><a class="header-anchor" href="#æ’®åˆå¼•æ“æ ¸å¿ƒè¯‰æ±‚"><span>æ’®åˆå¼•æ“æ ¸å¿ƒè¯‰æ±‚ï¼š</span></a></h4><ul><li>æä½å»¶è¿Ÿï¼šä¹°å•å–å•éœ€è¦å¿«é€Ÿæ’®åˆ</li><li>é«˜å¹¶å‘å¤„ç†ï¼šæ¯ç§’å¯èƒ½æˆåƒä¸Šä¸‡è®¢å•</li><li>æœ‰åºæ€§å¼ºï¼šäº‹ä»¶é¡ºåºå½±å“æ’®åˆç»“æœ</li><li>é«˜ååé‡ï¼šååç“¶é¢ˆä¼šç›´æ¥å½±å“æ’®åˆé€Ÿåº¦</li></ul><h4 id="disruptor-çš„ä¼˜åŠ¿åœ¨æ’®åˆä¸­å¦‚ä½•ä½“ç°" tabindex="-1"><a class="header-anchor" href="#disruptor-çš„ä¼˜åŠ¿åœ¨æ’®åˆä¸­å¦‚ä½•ä½“ç°"><span>Disruptor çš„ä¼˜åŠ¿åœ¨æ’®åˆä¸­å¦‚ä½•ä½“ç°ï¼Ÿ</span></a></h4><table><thead><tr><th>æ’®åˆç—›ç‚¹</th><th>Disruptor ä¼˜åŠ¿</th><th>å¯¹åº”æœºåˆ¶</th></tr></thead><tbody><tr><td>CPUç«äº‰ä¸¥é‡</td><td><strong>æ— é”å¹¶å‘</strong>ï¼Œé¿å…ä¸Šä¸‹æ–‡åˆ‡æ¢</td><td>CAS + ringbuffer</td></tr><tr><td>æ’®åˆå»¶è¿Ÿé«˜</td><td>æä½å»¶è¿Ÿã€æ”¯æŒæ‰¹é‡å¤„ç†</td><td>é¡ºåºå†™å…¥+æ¶ˆè´¹è€…æ‰¹å¤„ç†</td></tr><tr><td>æ’®åˆé¡ºåºä¹±</td><td>ä¿è¯æœ‰åºæ¶ˆè´¹</td><td>å•ç”Ÿäº§è€…æ¨¡å‹ä¸‹å¤©ç„¶é¡ºåº</td></tr><tr><td>GCå¼•å‘æŠ–åŠ¨</td><td><strong>å†…å­˜é¢„åˆ†é…</strong>ï¼Œå‡å°‘GC</td><td>å›ºå®šå¤§å°ç¯å½¢ç¼“å†²åŒº</td></tr><tr><td>æ•°æ®è½åœ°æ…¢</td><td>æ”¯æŒå¼‚æ­¥æ¶ˆè´¹è€…å¹¶å‘å¤„ç†</td><td>å¤šæ¶ˆè´¹è€…æ¨¡å‹ï¼ŒèŒè´£åˆ†ç¦»</td></tr></tbody></table><h4 id="ä¸¾ä¸ªç®€å•ä¾‹å­-æ’®åˆç³»ç»Ÿæ¶æ„å›¾-åŸºäº-disruptor" tabindex="-1"><a class="header-anchor" href="#ä¸¾ä¸ªç®€å•ä¾‹å­-æ’®åˆç³»ç»Ÿæ¶æ„å›¾-åŸºäº-disruptor"><span>ä¸¾ä¸ªç®€å•ä¾‹å­ï¼šæ’®åˆç³»ç»Ÿæ¶æ„å›¾ï¼ˆåŸºäº Disruptorï¼‰</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>                 â”‚è®¢å•æ¥æ”¶çº¿ç¨‹â”‚ â† APIè¯·æ±‚ã€MQã€Socket ç­‰</span></span>
<span class="line"><span>                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>                      â”‚</span></span>
<span class="line"><span>                      â–¼</span></span>
<span class="line"><span>             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>             â”‚ RingBufferï¼ˆè®¢å•äº‹ä»¶ï¼‰ â”‚ â† Disruptoræ ¸å¿ƒ</span></span>
<span class="line"><span>             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>               â–²        â–²         â–²</span></span>
<span class="line"><span>         æ’®åˆå™¨A   æ’®åˆå™¨B     è½åº“çº¿ç¨‹ï¼ˆå¼‚æ­¥ï¼‰</span></span>
<span class="line"><span>       (BTCæ’®åˆ) (ETHæ’®åˆ)     (å†™MySQL)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>æ¥æ”¶çº¿ç¨‹</strong>ï¼šå°†è®¢å•å°è£…ä¸º Eventï¼Œå‘å¸ƒåˆ° RingBuffer</li><li><strong>å¤šä¸ªæ¶ˆè´¹è€…</strong>ï¼šæ ¹æ®å¸ç§æˆ–å¸‚åœºåˆ†é…åˆ°å¯¹åº”æ’®åˆå™¨</li><li><strong>è½åœ°çº¿ç¨‹</strong>ï¼šæ’®åˆå®Œæˆçš„æˆäº¤å•å¼‚æ­¥å†™åº“ï¼Œä¸é˜»å¡æ’®åˆé€»è¾‘</li></ul><h4 id="å’Œä¼ ç»Ÿé˜Ÿåˆ—å¯¹æ¯”-å¦‚-linkedblockingqueue" tabindex="-1"><a class="header-anchor" href="#å’Œä¼ ç»Ÿé˜Ÿåˆ—å¯¹æ¯”-å¦‚-linkedblockingqueue"><span>å’Œä¼ ç»Ÿé˜Ÿåˆ—å¯¹æ¯”ï¼ˆå¦‚ LinkedBlockingQueueï¼‰</span></a></h4><table><thead><tr><th>ç‰¹æ€§</th><th>LinkedBlockingQueue</th><th>Disruptor</th></tr></thead><tbody><tr><td>é”æœºåˆ¶</td><td>ReentrantLockï¼ˆæœ‰é”ï¼‰</td><td>CASï¼ˆæ— é”ï¼‰</td></tr><tr><td>ååé‡</td><td>ä¸­ç­‰</td><td>æé«˜</td></tr><tr><td>å»¶è¿Ÿ</td><td>é«˜</td><td>çº³ç§’çº§å»¶è¿Ÿ</td></tr><tr><td>å†…å­˜åˆ†é…</td><td>åŠ¨æ€</td><td>é¢„åˆ†é…ï¼ˆæ— GCï¼‰</td></tr><tr><td>å¤šæ¶ˆè´¹è€…æ¨¡å¼</td><td>æ”¯æŒä½†æ•ˆç‡ä½</td><td>æ”¯æŒä¸”é«˜æ•ˆ</td></tr><tr><td>æ˜¯å¦é€‚åˆæ’®åˆç³»ç»Ÿ</td><td>âŒ</td><td>âœ… å¼ºçƒˆæ¨è</td></tr></tbody></table><h4 id="ä½¿ç”¨å»ºè®®-å®æˆ˜ä¸­" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨å»ºè®®-å®æˆ˜ä¸­"><span>ä½¿ç”¨å»ºè®®ï¼ˆå®æˆ˜ä¸­ï¼‰</span></a></h4><ul><li><strong>ç”Ÿäº§è€…çº¿ç¨‹</strong>ï¼šæ¥æ”¶è¯·æ±‚æˆ–MQï¼Œå°†è®¢å•å‘å¸ƒåˆ° ring buffer</li><li><strong>æ¶ˆè´¹è€…çº¿ç¨‹</strong>ï¼šæ ¹æ®äº§å“çº¿ã€äº¤æ˜“å¯¹åˆ’åˆ†å¤šä¸ªæ¶ˆè´¹è€…åšæ’®åˆ</li><li><strong>å¼‚æ­¥è½åº“ã€æ¨é€</strong>ï¼šé€šè¿‡åç½®æ¶ˆè´¹è€…é“¾å®Œæˆè½åº“æˆ–æ¨é€æ¶ˆæ¯ï¼ˆå¦‚ WebSocketï¼‰</li></ul></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/Crc011220/Crc011220.github.io/edit/main/src/zh/posts/review/é¢è¯•è¦ç‚¹.md" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="vp-meta-info" data-allow-mismatch="text">2025/8/6 01:25:56</span></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: ruocchen1220@gmail.com">Ruochen Chen</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/zh/posts/review/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html" aria-label="è®¡ç®—æœºç½‘ç»œ"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>è®¡ç®—æœºç½‘ç»œ</div></a><!----></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">å­¦æµ·æ— æ¶¯</div><div class="vp-copyright">Copyright Â© 2025 Ruochen Chen </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script src="/assets/js/runtime~app.257655cf.js" defer></script><script src="/assets/js/6312.2d95f1ad.js" defer></script><script src="/assets/js/app.9e127fe8.js" defer></script>
  </body>
</html>
