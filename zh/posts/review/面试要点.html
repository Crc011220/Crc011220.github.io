<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.59" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://crc011220.github.io/zh/posts/review/%E9%9D%A2%E8%AF%95%E8%A6%81%E7%82%B9.html"><meta property="og:site_name" content="Ruochen Chen"><meta property="og:title" content="é¢è¯•è¦ç‚¹"><meta property="og:description" content="é¢è¯•è¦ç‚¹ JavaåŸºç¡€ 1. equals() å’Œ == çš„åŒºåˆ«ï¼Ÿå¦‚ä½•æ­£ç¡®é‡å†™ equals() å’Œ hashCode() æ–¹æ³•ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦åŒæ—¶é‡å†™ï¼Ÿ == å’Œ equals() çš„åŒºåˆ« == æ“ä½œç¬¦ï¼šå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹æ¯”è¾ƒå€¼ï¼Œå¯¹äºå¼•ç”¨ç±»å‹æ¯”è¾ƒå†…å­˜åœ°å€ equals() æ–¹æ³•ï¼šObjectç±»é»˜è®¤å®ç°æ˜¯æ¯”è¾ƒå¼•ç”¨ï¼ŒStringç­‰ç±»é‡å†™åæ¯”è¾ƒå†…å®¹ æ­£ç¡®é‡å†™çš„äº”..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-07-30T07:46:18.000Z"><meta property="article:tag" content="Review"><meta property="article:published_time" content="2025-07-27T00:00:00.000Z"><meta property="article:modified_time" content="2025-07-30T07:46:18.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"é¢è¯•è¦ç‚¹","image":[""],"datePublished":"2025-07-27T00:00:00.000Z","dateModified":"2025-07-30T07:46:18.000Z","author":[{"@type":"Person","name":"Ruochen Chen"}]}</script><link rel="icon" href="/mac.ico"><title>é¢è¯•è¦ç‚¹ | Ruochen Chen</title><meta name="description" content="é¢è¯•è¦ç‚¹ JavaåŸºç¡€ 1. equals() å’Œ == çš„åŒºåˆ«ï¼Ÿå¦‚ä½•æ­£ç¡®é‡å†™ equals() å’Œ hashCode() æ–¹æ³•ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦åŒæ—¶é‡å†™ï¼Ÿ == å’Œ equals() çš„åŒºåˆ« == æ“ä½œç¬¦ï¼šå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹æ¯”è¾ƒå€¼ï¼Œå¯¹äºå¼•ç”¨ç±»å‹æ¯”è¾ƒå†…å­˜åœ°å€ equals() æ–¹æ³•ï¼šObjectç±»é»˜è®¤å®ç°æ˜¯æ¯”è¾ƒå¼•ç”¨ï¼ŒStringç­‰ç±»é‡å†™åæ¯”è¾ƒå†…å®¹ æ­£ç¡®é‡å†™çš„äº”...">
    <link rel="stylesheet" href="/assets/css/styles.563fed46.css">
    <link rel="preload" href="/assets/js/runtime~app.534f024b.js" as="script"><link rel="preload" href="/assets/css/styles.563fed46.css" as="style"><link rel="preload" href="/assets/js/6312.2d95f1ad.js" as="script"><link rel="preload" href="/assets/js/app.d934ba98.js" as="script">
    <link rel="prefetch" href="/assets/js/zh_posts_declarative_haskell.html.f219f509.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_java8_å‡½æ•°å¼ç¼–ç¨‹.html.6406d92a.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_Netty01-nio.html.6aaca557.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_Netty04-ä¼˜åŒ–ä¸æºç .html.8edea904.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_Netty03-è¿›é˜¶.html.6b130a66.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_æ•°ç»„.html.f410d20e.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_Netty02-intro.html.48ff395e.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_åŠ¨æ€è§„åˆ’.html.338458cc.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_nginx_1.html.be9ccc3a.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_äºŒå‰æ ‘.html.f39707ea.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_declarative_prolog.html.d10c8ca1.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_é“¾è¡¨.html.fdbcb853.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_COMP90024.html.c07eee32.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_å›¾.html.ae7133bf.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_hive_Hive-SQLè¯­æ³•å¤§å…¨.html.4ea325b1.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_14.html.91687ee1.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_declarative_haskellé€Ÿè®°.html.0de6f0c8.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_æ ˆå’Œé˜Ÿåˆ—.html.48986a9e.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_COMP90049.html.4b1c6d22.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_é¢è¯•è¦ç‚¹.html.5e8ed91a.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_COMP90050.html.4b5d3bee.js" as="script"><link rel="prefetch" href="/assets/js/posts_note_Coin-exchange-project-note.html.9c9c631c.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_å›æº¯.html.3a9cd825.js" as="script"><link rel="prefetch" href="/assets/js/posts_tailwind_summary.html.7c9f97e6.js" as="script"><link rel="prefetch" href="/assets/js/2664.0c0e265f.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_å…¶ä»–é—®é¢˜.html.a019e4d7.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_æ•°æ®ç»“æ„.html.1143a147.js" as="script"><link rel="prefetch" href="/assets/js/posts_typescript_1.html.adb4c039.js" as="script"><link rel="prefetch" href="/assets/js/posts_typescript_2.html.70e869a7.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_å…¶ä»–.html.3faf5ae8.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_è´ªå¿ƒ.html.0a8549f7.js" as="script"><link rel="prefetch" href="/assets/js/posts_aws-saa_1.html.12f65834.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_ml.html.930a6c4a.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_æ•°æ®åº“.html.b80c36f1.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_è®¡ç®—æœºç½‘ç»œ.html.4feba167.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_COMP90048.html.8968005c.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_è®¡ç®—æœºç»„æˆåŸç†.html.1c8444d9.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_æ“ä½œç³»ç»Ÿ.html.7a2e9a3b.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_1.html.42f88b26.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_declarative_prologé€Ÿè®°.html.06d2d57f.js" as="script"><link rel="prefetch" href="/assets/js/8300.ef6ef338.js" as="script"><link rel="prefetch" href="/assets/js/posts_mybatis_2.html.5926ba81.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_7.html.d2987d20.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_4.html.d05f7970.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_5.html.74809557.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_8.html.48797aee.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_2.html.5da88c74.js" as="script"><link rel="prefetch" href="/assets/js/posts_aws-saa_3.html.3976b1b1.js" as="script"><link rel="prefetch" href="/assets/js/posts_nginx_1.html.9d684d75.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_SWEN90016.html.240e6126.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_åŒæŒ‡é’ˆ.html.7af7f076.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_å“ˆå¸Œ.html.756f5c70.js" as="script"><link rel="prefetch" href="/assets/js/posts_spark_Spark-Core.html.d371024a.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_11.html.acf3feb6.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_14.html.6ae00502.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_8.html.35609b90.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_4.html.76f297f5.js" as="script"><link rel="prefetch" href="/assets/js/posts_spark_Spark-Sql.html.1a76e157.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_21.html.5d38e92e.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_ä¿¡æ¯æ–°æŠ€æœ¯.html.016ea36f.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_11.html.6ac0e485.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_5.html.d6b5776e.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_6.html.9f42e615.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_10.html.7cfe6b37.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_1.html.275b2472.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_6.html.b0bf65af.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_4.html.bb865133.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_å•è°ƒæ ˆ.html.97d2a1c2.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_15.html.6ad131ac.js" as="script"><link rel="prefetch" href="/assets/js/posts_aws-saa_2.html.19b4fc69.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_6.html.0ce6907d.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_3.html.07708648.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_12.html.33aac800.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_14.html.4487a39f.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_13.html.1600cb03.js" as="script"><link rel="prefetch" href="/assets/js/posts_ai_javaai.html.ddef5ab6.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_5.html.c674a286.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_6.html.c703f5fb.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_2.html.2012a517.js" as="script"><link rel="prefetch" href="/assets/js/posts_typescript_3.html.67716c58.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_2.html.3cb286a6.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_16.html.47a98467.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_2.html.2faaae84.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_7.html.b7a17cf5.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_3.html.e6de0801.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_12.html.78a79e16.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_17.html.48e4e11f.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_ä½è¿ç®—.html.89a49729.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_13.html.1af16bb4.js" as="script"><link rel="prefetch" href="/assets/js/intro.html.94b9bc8e.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_9.html.c802974b.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_15.html.c14ce54d.js" as="script"><link rel="prefetch" href="/assets/js/posts_ai_create_mcp.html.7bbd9d99.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_18.html.6db3b8d0.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_1.html.52e2c809.js" as="script"><link rel="prefetch" href="/assets/js/posts_ai_mcp.html.97488bfa.js" as="script"><link rel="prefetch" href="/assets/js/posts_mybatis_1.html.0715b7ed.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_1.html.b4be9a5c.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_7.html.391ad3ae.js" as="script"><link rel="prefetch" href="/assets/js/posts_istio_1.html.0402dff2.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_4.html.babb3186.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_15.html.1a066aec.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_10.html.a809572e.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_1.html.3f7ea202.js" as="script"><link rel="prefetch" href="/assets/js/zh_intro.html.4f0fc279.js" as="script"><link rel="prefetch" href="/assets/js/posts_spark_Spark-Intro.html.ccd5e5dd.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_5.html.e4df8be3.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_19.html.f4de2c0a.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_7.html.be9d15e1.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_3.html.1db9eef8.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_7.html.95a6d006.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_8.html.bf7de1dc.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_å­—ç¬¦ä¸².html.7bb4b0c9.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_index.html.964e7b71.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_3.html.b6b4d014.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_Hive.html.0678d205.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_7.html.97e8c4ab.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_9.html.daf44b98.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_HDFS.html.bc68b1b5.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_index.html.969cd922.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_2.html.03f4e466.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_8.html.266a2255.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_4.html.f53cce1e.js" as="script"><link rel="prefetch" href="/assets/js/posts_jd_note.html.d14373ad.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_5.html.4cdca3c2.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_3.html.47cad464.js" as="script"><link rel="prefetch" href="/assets/js/posts_docker_1.html.fb8facad.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_11.html.ce50e313.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_microsvc_1.html.2fe97c3c.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_index.html.8bdb826b.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_summary.html.dcef505d.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_6.html.b6472eba.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_6.html.02cce475.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_æ•°å­¦.html.dfdf15d8.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_3.html.e8a57164.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_6.html.0c46208c.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_7.html.34e04d11.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_8.html.ae4c64a3.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_4.html.a8ec1263.js" as="script"><link rel="prefetch" href="/assets/js/posts_elasticsearch_query-dsl.html.c10df9f4.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_cloudflare.html.8d90577a.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_20.html.490f1029.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_1.html.0cac3363.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_5.html.a42942da.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_2.html.1499c365.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_10.html.156d0fc8.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_16.html.94f2539e.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_3.html.2d055dbe.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_tools.html.4cf9b015.js" as="script"><link rel="prefetch" href="/assets/js/posts_elasticsearch_1.html.55fea42c.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_2.html.4fddb7fe.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_index.html.9f6e664a.js" as="script"><link rel="prefetch" href="/assets/js/posts_dubbo_1.html.1f23a627.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_4.html.1c4ee376.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_9.html.132d4ce9.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_index.html.3644a432.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_index.html.b114f681.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_9.html.a3039a5a.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_index.html.6e477592.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_1.html.ea5597b0.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_8.html.bc2310ff.js" as="script"><link rel="prefetch" href="/assets/js/posts_elasticsearch_2.html.965ea244.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_genesis.html.b92085d2.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_5.html.4cfebd9b.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_index.html.77a0d6fd.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_MapReduce.html.66b74478.js" as="script"><link rel="prefetch" href="/assets/js/posts_genesis.html.f2dcbd5d.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_12.html.6f85b8a6.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_sealos.html.2f8ff09a.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_index.html.30eae38c.js" as="script"><link rel="prefetch" href="/assets/js/posts_dubbo_2.html.4153924b.js" as="script"><link rel="prefetch" href="/assets/js/posts_clichÃ©_13.html.9f0ab2c4.js" as="script"><link rel="prefetch" href="/assets/js/posts_aws-saa_index.html.91a04274.js" as="script"><link rel="prefetch" href="/assets/js/posts_typescript_index.html.3113541a.js" as="script"><link rel="prefetch" href="/assets/js/posts_elasticsearch_index.html.4152a6b9.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_index.html.c927a97d.js" as="script"><link rel="prefetch" href="/assets/js/index.html.8b8ff801.js" as="script"><link rel="prefetch" href="/assets/js/posts_dubbo_index.html.6c52fb32.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_Yarn.html.94f37571.js" as="script"><link rel="prefetch" href="/assets/js/posts_nginx_index.html.75cc2b5d.js" as="script"><link rel="prefetch" href="/assets/js/posts_ai_index.html.6d4a62d9.js" as="script"><link rel="prefetch" href="/assets/js/posts_mybatis_index.html.f1a73719.js" as="script"><link rel="prefetch" href="/assets/js/posts_spark_index.html.434a7834.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_microsvc_index.html.7ac9796f.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_9.html.e9ae3067.js" as="script"><link rel="prefetch" href="/assets/js/posts_nginx_2.html.61b94ab9.js" as="script"><link rel="prefetch" href="/assets/js/zh_index.html.b526dd8b.js" as="script"><link rel="prefetch" href="/assets/js/posts_tailwind_index.html.a3b1860b.js" as="script"><link rel="prefetch" href="/assets/js/posts_docker_index.html.915fb03b.js" as="script"><link rel="prefetch" href="/assets/js/posts_istio_index.html.d4b67811.js" as="script"><link rel="prefetch" href="/assets/js/posts_note_index.html.79ea061a.js" as="script"><link rel="prefetch" href="/assets/js/category_learning-records_index.html.f32ee64d.js" as="script"><link rel="prefetch" href="/assets/js/tag_nginx_index.html.0fa6f2ea.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_declarative-programming_index.html.6ae8ae47.js" as="script"><link rel="prefetch" href="/assets/js/category_index.html.50e2e1bc.js" as="script"><link rel="prefetch" href="/assets/js/timeline_index.html.a204d771.js" as="script"><link rel="prefetch" href="/assets/js/article_index.html.ffcd7938.js" as="script"><link rel="prefetch" href="/assets/js/zh_category_å­¦ä¹ ç¬”è®°_index.html.12546e3e.js" as="script"><link rel="prefetch" href="/assets/js/category_internship-journal_index.html.4b3fa613.js" as="script"><link rel="prefetch" href="/assets/js/zh_category_learning-records_index.html.af6fedad.js" as="script"><link rel="prefetch" href="/assets/js/tag_index.html.dbf647b4.js" as="script"><link rel="prefetch" href="/assets/js/star_index.html.7f8a9df9.js" as="script"><link rel="prefetch" href="/assets/js/tag_programmer-clichÃ©_index.html.120cca1a.js" as="script"><link rel="prefetch" href="/assets/js/tag_algorithm-practices_index.html.d975dd18.js" as="script"><link rel="prefetch" href="/assets/js/tag_china-merchant-bank_index.html.de8b373f.js" as="script"><link rel="prefetch" href="/assets/js/tag_technical-interview_index.html.acf61e6f.js" as="script"><link rel="prefetch" href="/assets/js/posts_index.html.c7f3157a.js" as="script"><link rel="prefetch" href="/assets/js/zh_category_å¼€å§‹_index.html.29cb4412.js" as="script"><link rel="prefetch" href="/assets/js/tag_tailwind-css_index.html.7b3e36e9.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_æ—…ç¨‹_index.html.151709c9.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_ç®€å†_index.html.96ae735a.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_algorithm_index.html.5a457b02.js" as="script"><link rel="prefetch" href="/assets/js/category_genesis_index.html.66947f9e.js" as="script"><link rel="prefetch" href="/assets/js/tag_javascript_index.html.266dcd48.js" as="script"><link rel="prefetch" href="/assets/js/tag_kubernetes_index.html.2b919c53.js" as="script"><link rel="prefetch" href="/assets/js/tag_typescript_index.html.ab5e1572.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_review_index.html.9bc60916.js" as="script"><link rel="prefetch" href="/assets/js/tag_leetcode_index.html.6b98bbdb.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_java8_index.html.5b1186ee.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_netty_index.html.3ede65fb.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_nginx_index.html.c21f0432.js" as="script"><link rel="prefetch" href="/assets/js/tag_aws-saa_index.html.01a20249.js" as="script"><link rel="prefetch" href="/assets/js/tag_mybatis_index.html.bdbe6d2a.js" as="script"><link rel="prefetch" href="/assets/js/tag_unimelb_index.html.d4bafe83.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_hive_index.html.fab4d732.js" as="script"><link rel="prefetch" href="/assets/js/tag_docker_index.html.b7d4cbf8.js" as="script"><link rel="prefetch" href="/assets/js/tag_hadoop_index.html.39a6a55f.js" as="script"><link rel="prefetch" href="/assets/js/tag_nextjs_index.html.581d2c34.js" as="script"><link rel="prefetch" href="/assets/js/tag_resume_index.html.c4e4c327.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_nio_index.html.0a4acee3.js" as="script"><link rel="prefetch" href="/assets/js/tag_dubbo_index.html.90f9e5c2.js" as="script"><link rel="prefetch" href="/assets/js/tag_index_index.html.ee3192d7.js" as="script"><link rel="prefetch" href="/assets/js/tag_istio_index.html.cb329abb.js" as="script"><link rel="prefetch" href="/assets/js/tag_notes_index.html.075779e3.js" as="script"><link rel="prefetch" href="/assets/js/tag_react_index.html.49ec34fb.js" as="script"><link rel="prefetch" href="/assets/js/tag_spark_index.html.287e8a9c.js" as="script"><link rel="prefetch" href="/assets/js/404.html.15229e01.js" as="script"><link rel="prefetch" href="/assets/js/zh_timeline_index.html.3a7839f4.js" as="script"><link rel="prefetch" href="/assets/js/tag_ai_index.html.3120c8b4.js" as="script"><link rel="prefetch" href="/assets/js/tag_es_index.html.8f0f4273.js" as="script"><link rel="prefetch" href="/assets/js/tag_jd_index.html.6c64e177.js" as="script"><link rel="prefetch" href="/assets/js/zh_category_index.html.e65aefca.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_declarative_index.html.6759320d.js" as="script"><link rel="prefetch" href="/assets/js/zh_article_index.html.2c545722.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_index.html.6a5580f0.js" as="script"><link rel="prefetch" href="/assets/js/zh_star_index.html.698b9149.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_index.html.6b5498be.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_java8_index.html.245580da.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_index.html.9e91bcfd.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_nginx_index.html.6deedd0e.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_index.html.d664c5ec.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_hive_index.html.e3d7d626.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_index.html.46dc1fe4.js" as="script"><link rel="prefetch" href="/assets/js/posts_jd_index.html.7a8d7890.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/zh/" aria-label="å¸¦æˆ‘å›å®¶"><img class="vp-nav-logo" src="/bubu.jpg" alt><!----><span class="vp-site-name hide-in-pad">Ruochen Chen</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/zh/" aria-label="ä¸»é¡µ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="ç¬”è®°"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>ç¬”è®°<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Hive</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/hive/Hive-SQL%E8%AF%AD%E6%B3%95%E5%A4%A7%E5%85%A8.html" aria-label="Hiveè¯­æ³•å¤§å…¨"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Hiveè¯­æ³•å¤§å…¨<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Java8ç‰¹æ€§</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/java8/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html" aria-label="å‡½æ•°å¼ç¼–ç¨‹"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->å‡½æ•°å¼ç¼–ç¨‹<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Netty</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/netty/Netty01-nio.html" aria-label="Nioä»‹ç»"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Nioä»‹ç»<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/netty/Netty02-intro.html" aria-label="Nettyå…¥é—¨"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Nettyå…¥é—¨<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/netty/Netty03-%E8%BF%9B%E9%98%B6.html" aria-label="Nettyè¿›é˜¶"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Nettyè¿›é˜¶<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/netty/Netty04-%E4%BC%98%E5%8C%96%E4%B8%8E%E6%BA%90%E7%A0%81.html" aria-label="Nettyä¼˜åŒ–"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Nettyä¼˜åŒ–<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">NGINX</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/nginx/1.html" aria-label="NGINX é«˜çº§"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->NGINX é«˜çº§<!----></a></li></ul></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><div class="vp-nav-item"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="é€‰æ‹©è¯­è¨€"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" name="i18n" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/" aria-label="English"><!---->English<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/zh/posts/review/%E9%9D%A2%E8%AF%95%E8%A6%81%E7%82%B9.html" aria-label="ç®€ä½“ä¸­æ–‡"><!---->ç®€ä½“ä¸­æ–‡<!----></a></li></ul></button></div></div><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/Crc011220/Crc011220.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢æ–‡æ¡£"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢æ–‡æ¡£</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/zh/" aria-label="ä¸»é¡µ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->ä¸»é¡µ<!----></a></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header active"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">ç¬”è®°</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Algo</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Declarative</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Hive</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Java8</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Netty</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Nginx</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Review</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E4%BF%A1%E6%81%AF%E6%96%B0%E6%8A%80%E6%9C%AF.html" aria-label="ä¿¡æ¯æ–°æŠ€æœ¯"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->ä¿¡æ¯æ–°æŠ€æœ¯<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E5%85%B6%E4%BB%96%E9%97%AE%E9%A2%98.html" aria-label="å…¶ä»–é—®é¢˜"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->å…¶ä»–é—®é¢˜<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html" aria-label="æ“ä½œç³»ç»Ÿ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->æ“ä½œç³»ç»Ÿ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E6%95%B0%E5%AD%A6.html" aria-label="æ•°å­¦"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->æ•°å­¦<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E6%95%B0%E6%8D%AE%E5%BA%93.html" aria-label="æ•°æ®åº“"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->æ•°æ®åº“<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" aria-label="æ•°æ®ç»“æ„"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->æ•°æ®ç»“æ„<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.html" aria-label="è®¡ç®—æœºç»„æˆåŸç†"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->è®¡ç®—æœºç»„æˆåŸç†<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html" aria-label="è®¡ç®—æœºç½‘ç»œ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->è®¡ç®—æœºç½‘ç»œ<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/zh/posts/review/%E9%9D%A2%E8%AF%95%E8%A6%81%E7%82%B9.html" aria-label="é¢è¯•è¦ç‚¹"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->é¢è¯•è¦ç‚¹<!----></a></li></ul></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/genesis.html" aria-label="å¼€å§‹"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->å¼€å§‹<!----></a></li></ul></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/intro.html" aria-label="å…³äºæˆ‘"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-circle-info" style=""></span><!--]-->å…³äºæˆ‘<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>é¢è¯•è¦ç‚¹</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Ruochen Chen</span></span><span property="author" content="Ruochen Chen"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2025å¹´7æœˆ27æ—¥</span><meta property="datePublished" content="2025-07-27T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 67 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT67M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color5 clickable" role="navigation">Learning Records</span><!--]--><meta property="articleSection" content="Learning Records"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color0 clickable" role="navigation">Review</span><!--]--><meta property="keywords" content="Review"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#javaåŸºç¡€">JavaåŸºç¡€</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-equals-å’Œ-çš„åŒºåˆ«-å¦‚ä½•æ­£ç¡®é‡å†™-equals-å’Œ-hashcode-æ–¹æ³•-ä¸ºä»€ä¹ˆéœ€è¦åŒæ—¶é‡å†™">1. equals() å’Œ == çš„åŒºåˆ«ï¼Ÿå¦‚ä½•æ­£ç¡®é‡å†™ equals() å’Œ hashCode() æ–¹æ³•ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦åŒæ—¶é‡å†™ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«-ä½•æ—¶ç”¨æ¥å£-ä½•æ—¶ç”¨æŠ½è±¡ç±»">2. æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼Ÿä½•æ—¶ç”¨æ¥å£ï¼Ÿä½•æ—¶ç”¨æŠ½è±¡ç±»ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-string-vs-stringbuffer-vs-stringbuilder">3. String vs StringBuffer vs StringBuilder</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±åŸç†åŠæ½œåœ¨é—®é¢˜">4. è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±åŸç†åŠæ½œåœ¨é—®é¢˜</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-bioã€nioã€aioçš„åŒºåˆ«">5. BIOã€NIOã€AIOçš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-selectã€pollã€epollçš„åŒºåˆ«">6. Selectã€Pollã€Epollçš„åŒºåˆ«</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#é›†åˆ">é›†åˆ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-hashmap-çš„å®ç°åŸç†-jdk-1-7å’Œ1-8çš„åŒºåˆ«-hash-æ–¹æ³•çš„ä½œç”¨-å¦‚ä½•å¤„ç†å“ˆå¸Œå†²çª">1. HashMap çš„å®ç°åŸç†ï¼ŸJDK 1.7å’Œ1.8çš„åŒºåˆ«ï¼Ÿhash()æ–¹æ³•çš„ä½œç”¨ï¼Ÿå¦‚ä½•å¤„ç†å“ˆå¸Œå†²çªï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-concurrenthashmap-å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨">2. ConcurrentHashMap å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-arraylist-å’Œ-linkedlist-çš„åº•å±‚å®ç°ã€æ—¶é—´å¤æ‚åº¦">3. ArrayList å’Œ LinkedList çš„åº•å±‚å®ç°ã€æ—¶é—´å¤æ‚åº¦ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-iterator-å’Œ-listiterator-çš„åŒºåˆ«-fail-fast-å’Œ-fail-safe-æœºåˆ¶">4. Iterator å’Œ ListIterator çš„åŒºåˆ«ï¼Ÿfail-fast å’Œ fail-safe æœºåˆ¶ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-å¦‚ä½•ä¿è¯é›†åˆçš„çº¿ç¨‹å®‰å…¨">5. å¦‚ä½•ä¿è¯é›†åˆçš„çº¿ç¨‹å®‰å…¨ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-comparable-å’Œ-comparator-æ¥å£çš„åŒºåˆ«">6. Comparable å’Œ Comparator æ¥å£çš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å¤šçº¿ç¨‹">å¤šçº¿ç¨‹</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«-åˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹å¼-å“ªç§æ›´æ¨è">1. è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«ï¼Ÿåˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹å¼ï¼Ÿå“ªç§æ›´æ¨èï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-sleep-wait-yield-join-æ–¹æ³•çš„åŒºåˆ«">2. sleep(), wait(), yield(), join() æ–¹æ³•çš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯ä»€ä¹ˆ-å¼€é”€åœ¨å“ªé‡Œ">3. ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯ä»€ä¹ˆï¼Ÿå¼€é”€åœ¨å“ªé‡Œï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨-å¦‚ä½•ç†è§£åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§">4. ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿå¦‚ä½•ç†è§£åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-synchronized-å…³é”®å­—çš„åŸç†-ä½¿ç”¨æ–¹å¼-é”å‡çº§è¿‡ç¨‹">5. synchronized å…³é”®å­—çš„åŸç†ï¼Ÿä½¿ç”¨æ–¹å¼ï¼Ÿé”å‡çº§è¿‡ç¨‹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-volatile-å…³é”®å­—çš„è¯­ä¹‰-åŸç†-èƒ½ä¿è¯åŸå­æ€§å—-é€‚ç”¨åœºæ™¯">6. volatile å…³é”®å­—çš„è¯­ä¹‰ï¼ŸåŸç†ï¼Ÿèƒ½ä¿è¯åŸå­æ€§å—ï¼Ÿé€‚ç”¨åœºæ™¯ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-synchronized-å’Œ-volatile-çš„åŒºåˆ«">7. synchronized å’Œ volatile çš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-cas-æ“ä½œçš„åŸç†-atomicç±»å®ç°-abaé—®é¢˜åŠè§£å†³æ–¹æ¡ˆ">8. CAS æ“ä½œçš„åŸç†ï¼ŸAtomicç±»å®ç°ï¼ŸABAé—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-threadlocal-çš„åŸç†-ä½¿ç”¨åœºæ™¯-å†…å­˜æ³„æ¼é—®é¢˜åŠå¦‚ä½•é¿å…">9. ThreadLocal çš„åŸç†ï¼Ÿä½¿ç”¨åœºæ™¯ï¼Ÿå†…å­˜æ³„æ¼é—®é¢˜åŠå¦‚ä½•é¿å…ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ•°æ®åº“">æ•°æ®åº“</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-sqlåŸºç¡€è¯­æ³•-ddl-dml-dql-dcl-å¸¸ç”¨å‡½æ•°">1. SQLåŸºç¡€è¯­æ³•ï¼ˆDDL, DML, DQL, DCLï¼‰ï¼Ÿå¸¸ç”¨å‡½æ•°ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-mysqlæ ¸å¿ƒåŒºåˆ«-äº‹åŠ¡ã€é”ã€å¤–é”®ã€ç´¢å¼•ç»“æ„">2. MySQLæ ¸å¿ƒåŒºåˆ«ï¼ˆäº‹åŠ¡ã€é”ã€å¤–é”®ã€ç´¢å¼•ç»“æ„ï¼‰ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-ç´¢å¼•-ä»€ä¹ˆæ˜¯ç´¢å¼•-ä¸ºä»€ä¹ˆèƒ½æé«˜æŸ¥è¯¢æ•ˆç‡-ç´¢å¼•çš„ä¼˜ç¼ºç‚¹">3. ç´¢å¼•ï¼šä»€ä¹ˆæ˜¯ç´¢å¼•ï¼Ÿä¸ºä»€ä¹ˆèƒ½æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Ÿç´¢å¼•çš„ä¼˜ç¼ºç‚¹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-b-æ ‘ç´¢å¼•ç»“æ„-ä¸ºä»€ä¹ˆmysqlä½¿ç”¨b-æ ‘è€Œä¸æ˜¯bæ ‘æˆ–å“ˆå¸Œè¡¨">4. B+æ ‘ç´¢å¼•ç»“æ„ï¼Ÿä¸ºä»€ä¹ˆMySQLä½¿ç”¨B+æ ‘è€Œä¸æ˜¯Bæ ‘æˆ–å“ˆå¸Œè¡¨ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•çš„åŒºåˆ«-innodbçš„ä¸»é”®ç´¢å¼•ç»“æ„">5. èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•çš„åŒºåˆ«ï¼ŸInnoDBçš„ä¸»é”®ç´¢å¼•ç»“æ„ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-ç´¢å¼•ç±»å‹åˆ†ç±»">6. ç´¢å¼•ç±»å‹åˆ†ç±»ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-ç´¢å¼•å¤±æ•ˆçš„å¸¸è§åœºæ™¯">7. ç´¢å¼•å¤±æ•ˆçš„å¸¸è§åœºæ™¯ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-explainå‘½ä»¤çš„ä½œç”¨-å…³é”®å­—æ®µçš„å«ä¹‰">8. EXPLAINå‘½ä»¤çš„ä½œç”¨ï¼Ÿå…³é”®å­—æ®µçš„å«ä¹‰ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-é”-innodbçš„è¡Œé”ã€é—´éš™é”ã€ä¸´é”®é”-mvccçš„åŸç†-å¦‚ä½•è§£å†³å¹»è¯»">9. é”ï¼šInnoDBçš„è¡Œé”ã€é—´éš™é”ã€ä¸´é”®é”ï¼ŸMVCCçš„åŸç†ï¼Ÿå¦‚ä½•è§£å†³å¹»è¯»ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_10-äº‹åŠ¡éš”ç¦»çº§åˆ«-mysqlé»˜è®¤çº§åˆ«-ä¸åŒçº§åˆ«è§£å†³çš„é—®é¢˜">10. äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼ŸMySQLé»˜è®¤çº§åˆ«ï¼Ÿä¸åŒçº§åˆ«è§£å†³çš„é—®é¢˜ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_11-å¦‚ä½•ä¼˜åŒ–æ…¢æŸ¥è¯¢">11. å¦‚ä½•ä¼˜åŒ–æ…¢æŸ¥è¯¢ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#redis">Redis</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-redisæ˜¯ä»€ä¹ˆ-å¸¸ç”¨æ•°æ®ç±»å‹åŠå…¶åº•å±‚å®ç°å’Œå…¸å‹åº”ç”¨åœºæ™¯">1. Redisæ˜¯ä»€ä¹ˆï¼Ÿå¸¸ç”¨æ•°æ®ç±»å‹åŠå…¶åº•å±‚å®ç°å’Œå…¸å‹åº”ç”¨åœºæ™¯ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-redisä¸ºä»€ä¹ˆå¿«">2. Redisä¸ºä»€ä¹ˆå¿«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-redisçš„æŒä¹…åŒ–æœºåˆ¶-ä¼˜ç¼ºç‚¹-å¦‚ä½•é€‰æ‹©">3. Redisçš„æŒä¹…åŒ–æœºåˆ¶ï¼Ÿä¼˜ç¼ºç‚¹ï¼Ÿå¦‚ä½•é€‰æ‹©ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-redisçš„è¿‡æœŸé”®åˆ é™¤ç­–ç•¥">4. Redisçš„è¿‡æœŸé”®åˆ é™¤ç­–ç•¥ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-å†…å­˜æ·˜æ±°ç­–ç•¥">5. å†…å­˜æ·˜æ±°ç­–ç•¥ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-å¦‚ä½•ä¿è¯redisçš„é«˜å¯ç”¨-redis-clusterçš„æ§½åˆ†é…åŸç†">6. å¦‚ä½•ä¿è¯Redisçš„é«˜å¯ç”¨ï¼ŸRedis Clusterçš„æ§½åˆ†é…åŸç†ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©çš„æ¦‚å¿µã€åŸå› åŠè§£å†³æ–¹æ¡ˆ">7. ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©çš„æ¦‚å¿µã€åŸå› åŠè§£å†³æ–¹æ¡ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-å¦‚ä½•è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼é”-watch-dogæœºåˆ¶">8. å¦‚ä½•è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼é”ï¼ŸWatch Dogæœºåˆ¶ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-rediså“¨å…µçš„åŸç†-å¦‚ä½•å®ç°æ•…éšœè½¬ç§»">9. Rediså“¨å…µçš„åŸç†ï¼Ÿå¦‚ä½•å®ç°æ•…éšœè½¬ç§»ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#åˆ†å¸ƒå¼">åˆ†å¸ƒå¼</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-capç†è®º-baseç†è®º">1. CAPç†è®ºï¼ŸBASEç†è®ºï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆ">2. åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-åˆ†å¸ƒå¼é”çš„å®ç°">3. åˆ†å¸ƒå¼é”çš„å®ç°ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-åˆ†å¸ƒå¼idç”Ÿæˆæ–¹æ¡ˆ">4. åˆ†å¸ƒå¼IDç”Ÿæˆæ–¹æ¡ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-è´Ÿè½½å‡è¡¡ç®—æ³•">5. è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å¾®æœåŠ¡">å¾®æœåŠ¡</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-å¾®æœåŠ¡çš„ä¼˜åŠ¿å’ŒæŒ‘æˆ˜">1. å¾®æœåŠ¡çš„ä¼˜åŠ¿å’ŒæŒ‘æˆ˜ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-æœåŠ¡æ³¨å†Œä¸å‘ç°-åŸç†-å¸¸ç”¨ç»„ä»¶-æ¯”è¾ƒ">2. æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼šåŸç†ï¼Ÿå¸¸ç”¨ç»„ä»¶ï¼Ÿæ¯”è¾ƒï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-æœåŠ¡è°ƒç”¨-restful-api-å’Œ-rpc-dubbo-grpc-æ¯”è¾ƒ">3. æœåŠ¡è°ƒç”¨ï¼šRESTful API å’Œ RPC (Dubbo, gRPC)ï¼Ÿæ¯”è¾ƒï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-æœåŠ¡ç½‘å…³-api-gateway-ä½œç”¨-å¸¸ç”¨ç»„ä»¶">4. æœåŠ¡ç½‘å…³ (API Gateway)ï¼šä½œç”¨ï¼Ÿå¸¸ç”¨ç»„ä»¶ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-é…ç½®ä¸­å¿ƒ-ä½œç”¨-å¸¸ç”¨ç»„ä»¶">5. é…ç½®ä¸­å¿ƒï¼šä½œç”¨ï¼Ÿå¸¸ç”¨ç»„ä»¶ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-æœåŠ¡å®¹é”™-ç†”æ–­ã€é™çº§ã€é™æµ-ä»¤ç‰Œæ¡¶ã€æ¼æ¡¶-sentinelå’Œhystrix">6. æœåŠ¡å®¹é”™ï¼šç†”æ–­ã€é™çº§ã€é™æµ (ä»¤ç‰Œæ¡¶ã€æ¼æ¡¶)ï¼ŒSentinelå’ŒHystrixï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-é“¾è·¯è¿½è¸ª-ç›®çš„-åŸç†-å¸¸ç”¨ç»„ä»¶-zipkin-skywalking">7. é“¾è·¯è¿½è¸ªï¼šç›®çš„ï¼ŸåŸç†ï¼Ÿå¸¸ç”¨ç»„ä»¶ (Zipkin, SkyWalking)ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ¶ˆæ¯é˜Ÿåˆ—">æ¶ˆæ¯é˜Ÿåˆ—</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-æ¶ˆæ¯é˜Ÿåˆ—çš„ä½œç”¨-è§£è€¦ã€å¼‚æ­¥ã€å‰Šå³°å¡«è°·">1. æ¶ˆæ¯é˜Ÿåˆ—çš„ä½œç”¨ï¼Ÿï¼ˆè§£è€¦ã€å¼‚æ­¥ã€å‰Šå³°å¡«è°·ï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-æ¶ˆæ¯æ¨¡å‹-ç‚¹å¯¹ç‚¹queueå’Œå‘å¸ƒ-è®¢é˜…topic">2. æ¶ˆæ¯æ¨¡å‹ï¼Ÿï¼ˆç‚¹å¯¹ç‚¹Queueå’Œå‘å¸ƒ/è®¢é˜…Topicï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±">3. å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸è¢«é‡å¤æ¶ˆè´¹-å¹‚ç­‰æ€§">4. å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸è¢«é‡å¤æ¶ˆè´¹ï¼ˆå¹‚ç­‰æ€§ï¼‰ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§">5. å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-å¸¸ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¯”è¾ƒ-kafkaã€rabbitmqã€rocketmq">6. å¸¸ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¯”è¾ƒï¼Ÿï¼ˆKafkaã€RabbitMQã€RocketMQï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸»æµæ¡†æ¶ã€ç³»ç»Ÿè®¾è®¡ã€ç¼–ç èƒ½åŠ›">ä¸»æµæ¡†æ¶ã€ç³»ç»Ÿè®¾è®¡ã€ç¼–ç èƒ½åŠ›</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-springæ–¹å‘-ioc-æ§åˆ¶åè½¬-di-ä¾èµ–æ³¨å…¥-aop-é¢å‘åˆ‡é¢ç¼–ç¨‹">1. Springæ–¹å‘ - (IoC - æ§åˆ¶åè½¬ / DI - ä¾èµ–æ³¨å…¥, AOP - é¢å‘åˆ‡é¢ç¼–ç¨‹)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-aop-é¢å‘åˆ‡é¢ç¼–ç¨‹">2. AOP (é¢å‘åˆ‡é¢ç¼–ç¨‹)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-springäº‹åŠ¡ç®¡ç†">3. Springäº‹åŠ¡ç®¡ç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-spring-mvcçš„å·¥ä½œåŸç†-æ ¸å¿ƒç»„ä»¶-å¤„ç†è¯·æ±‚çš„æµç¨‹">4. Spring MVCçš„å·¥ä½œåŸç†ï¼Ÿæ ¸å¿ƒç»„ä»¶ï¼Ÿå¤„ç†è¯·æ±‚çš„æµç¨‹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-1-ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«">5.1 ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-2-resultmap-å’Œ-resulttype-çš„åŒºåˆ«">5.2 ResultMap å’Œ ResultType çš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-3-å»¶è¿ŸåŠ è½½-æ‡’åŠ è½½-çš„åŸç†å’Œé…ç½®">5.3 å»¶è¿ŸåŠ è½½ï¼ˆæ‡’åŠ è½½ï¼‰çš„åŸç†å’Œé…ç½®ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-4-å¦‚ä½•å®ç°åˆ†é¡µ">5.4 å¦‚ä½•å®ç°åˆ†é¡µï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-è®¾è®¡ä¸€ä¸ªç§’æ€ç³»ç»Ÿ">6. è®¾è®¡ä¸€ä¸ªç§’æ€ç³»ç»Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-å„ç±»ä¸»æµç®—æ³•">7. å„ç±»ä¸»æµç®—æ³•</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><h1 id="é¢è¯•è¦ç‚¹" tabindex="-1"><a class="header-anchor" href="#é¢è¯•è¦ç‚¹"><span>é¢è¯•è¦ç‚¹</span></a></h1><h2 id="javaåŸºç¡€" tabindex="-1"><a class="header-anchor" href="#javaåŸºç¡€"><span>JavaåŸºç¡€</span></a></h2><h3 id="_1-equals-å’Œ-çš„åŒºåˆ«-å¦‚ä½•æ­£ç¡®é‡å†™-equals-å’Œ-hashcode-æ–¹æ³•-ä¸ºä»€ä¹ˆéœ€è¦åŒæ—¶é‡å†™" tabindex="-1"><a class="header-anchor" href="#_1-equals-å’Œ-çš„åŒºåˆ«-å¦‚ä½•æ­£ç¡®é‡å†™-equals-å’Œ-hashcode-æ–¹æ³•-ä¸ºä»€ä¹ˆéœ€è¦åŒæ—¶é‡å†™"><span>1. equals() å’Œ == çš„åŒºåˆ«ï¼Ÿå¦‚ä½•æ­£ç¡®é‡å†™ equals() å’Œ hashCode() æ–¹æ³•ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦åŒæ—¶é‡å†™ï¼Ÿ</span></a></h3><h4 id="å’Œ-equals-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#å’Œ-equals-çš„åŒºåˆ«"><span>== å’Œ equals() çš„åŒºåˆ«</span></a></h4><ul><li><strong>== æ“ä½œç¬¦</strong>ï¼šå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹æ¯”è¾ƒå€¼ï¼Œå¯¹äºå¼•ç”¨ç±»å‹æ¯”è¾ƒå†…å­˜åœ°å€</li><li><strong>equals() æ–¹æ³•</strong>ï¼šObjectç±»é»˜è®¤å®ç°æ˜¯æ¯”è¾ƒå¼•ç”¨ï¼ŒStringç­‰ç±»é‡å†™åæ¯”è¾ƒå†…å®¹</li></ul><h4 id="æ­£ç¡®é‡å†™çš„äº”ä¸ªåŸåˆ™" tabindex="-1"><a class="header-anchor" href="#æ­£ç¡®é‡å†™çš„äº”ä¸ªåŸåˆ™"><span>æ­£ç¡®é‡å†™çš„äº”ä¸ªåŸåˆ™</span></a></h4><ol><li><strong>è‡ªåæ€§</strong>ï¼šx.equals(x) å¿…é¡»è¿”å› true</li><li><strong>å¯¹ç§°æ€§</strong>ï¼šx.equals(y) å’Œ y.equals(x) ç»“æœç›¸åŒ</li><li><strong>ä¼ é€’æ€§</strong>ï¼šå¦‚æœ x.equals(y) ä¸” y.equals(z)ï¼Œåˆ™ x.equals(z)</li><li><strong>ä¸€è‡´æ€§</strong>ï¼šå¤šæ¬¡è°ƒç”¨ç»“æœä¸€è‡´</li><li><strong>éç©ºæ€§</strong>ï¼šx.equals(null) è¿”å› false</li></ol><h4 id="ä¸ºä»€ä¹ˆè¦åŒæ—¶é‡å†™" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¦åŒæ—¶é‡å†™"><span>ä¸ºä»€ä¹ˆè¦åŒæ—¶é‡å†™ï¼Ÿ</span></a></h4><p>å› ä¸ºHashMap/HashSetçš„å·¥ä½œæœºåˆ¶ï¼šå…ˆç”¨hashCode()ç¡®å®šå­˜å‚¨ä½ç½®ï¼Œå†ç”¨equals()å¤„ç†å“ˆå¸Œå†²çªã€‚å¦‚æœä¸åŒæ—¶é‡å†™ä¼šå¯¼è‡´ç›¸ç­‰å¯¹è±¡æ— æ³•åœ¨HashMapä¸­æ­£ç¡®æŸ¥æ‰¾ã€‚Javaçº¦å®šï¼šå¦‚æœä¸¤ä¸ªå¯¹è±¡equals()è¿”å›trueï¼Œå®ƒä»¬çš„hashCode()å¿…é¡»ç›¸åŒã€‚</p><ul><li>equals æ–¹æ³•åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯ç›¸ç­‰çš„ï¼Œé‚£è¿™ä¸¤ä¸ªå¯¹è±¡çš„ hashCode å€¼ä¹Ÿè¦ç›¸ç­‰ã€‚</li><li>ä¸¤ä¸ªå¯¹è±¡æœ‰ç›¸åŒçš„ hashCode å€¼ï¼Œä»–ä»¬ä¹Ÿä¸ä¸€å®šæ˜¯ç›¸ç­‰çš„ï¼ˆå“ˆå¸Œç¢°æ’ï¼‰ã€‚</li></ul><table><thead><tr><th>é—®é¢˜</th><th>ç»“è®º</th></tr></thead><tbody><tr><td><code>equals()</code> æ¯”è¾ƒä»€ä¹ˆï¼Ÿ</td><td>å€¼æ˜¯å¦ç›¸ç­‰</td></tr><tr><td><code>hashCode()</code> ç”¨æ¥å¹²å˜›ï¼Ÿ</td><td>å¿«é€ŸæŸ¥æ‰¾æ¡¶</td></tr><tr><td>ä¸ºä»€ä¹ˆè¦åŒæ—¶é‡å†™ï¼Ÿ</td><td>ä¿è¯é›†åˆç±»æ­£å¸¸å·¥ä½œï¼Œé¿å…é€»è¾‘é”™è¯¯</td></tr><tr><td>ä¸é‡å†™ä¼šæ€æ ·ï¼Ÿ</td><td>æ•°æ®é‡å¤ã€æŸ¥æ‰¾å¤±è´¥ã€é€»è¾‘å¼‚å¸¸</td></tr></tbody></table><h3 id="_2-æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«-ä½•æ—¶ç”¨æ¥å£-ä½•æ—¶ç”¨æŠ½è±¡ç±»" tabindex="-1"><a class="header-anchor" href="#_2-æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«-ä½•æ—¶ç”¨æ¥å£-ä½•æ—¶ç”¨æŠ½è±¡ç±»"><span>2. æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼Ÿä½•æ—¶ç”¨æ¥å£ï¼Ÿä½•æ—¶ç”¨æŠ½è±¡ç±»ï¼Ÿ</span></a></h3><h4 id="ä¸»è¦åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#ä¸»è¦åŒºåˆ«"><span>ä¸»è¦åŒºåˆ«</span></a></h4><ul><li><strong>ç»§æ‰¿å…³ç³»</strong>ï¼šæ¥å£æ”¯æŒå¤šå®ç°ï¼ŒæŠ½è±¡ç±»åªèƒ½å•ç»§æ‰¿</li><li><strong>æ–¹æ³•</strong>ï¼šæ¥å£Java8å‰åªæœ‰æŠ½è±¡æ–¹æ³•ï¼ŒæŠ½è±¡ç±»å¯ä»¥æœ‰å…·ä½“å®ç°</li><li><strong>æˆå‘˜å˜é‡</strong>ï¼šæ¥å£åªèƒ½æœ‰å¸¸é‡ï¼ŒæŠ½è±¡ç±»å¯ä»¥æœ‰å„ç§æˆå‘˜å˜é‡</li><li><strong>æ„é€ æ–¹æ³•</strong>ï¼šæ¥å£ä¸èƒ½æœ‰ï¼ŒæŠ½è±¡ç±»å¯ä»¥æœ‰</li></ul><h4 id="ä½¿ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯"><span>ä½¿ç”¨åœºæ™¯</span></a></h4><ul><li><strong>æ¥å£</strong>ï¼šå®šä¹‰å¥‘çº¦è§„èŒƒã€å®ç°å¤šé‡&quot;ç»§æ‰¿&quot;ã€å¼ºè°ƒ&quot;èƒ½åšä»€ä¹ˆ&quot;ï¼ˆcan-doå…³ç³»ï¼‰</li><li><strong>æŠ½è±¡ç±»</strong>ï¼šä»£ç å¤ç”¨ã€æä¾›éƒ¨åˆ†å®ç°ã€å¼ºè°ƒ&quot;æ˜¯ä»€ä¹ˆ&quot;ï¼ˆis-aå…³ç³»ï¼‰ã€éœ€è¦æœ‰çŠ¶æ€</li></ul><table><thead><tr><th>ç‰¹æ€§</th><th>æ¥å£</th><th>æŠ½è±¡ç±»</th></tr></thead><tbody><tr><td>ç»§æ‰¿å…³ç³»</td><td>å¯å®ç°å¤šä¸ª</td><td>åªèƒ½ç»§æ‰¿ä¸€ä¸ª</td></tr><tr><td>æ–¹æ³•å®ç°</td><td>æŠ½è±¡æ–¹æ³•+é»˜è®¤æ–¹æ³•ï¼ˆJava8+ï¼‰</td><td>æŠ½è±¡æ–¹æ³•+å…·ä½“æ–¹æ³•</td></tr><tr><td>æˆå‘˜å˜é‡</td><td>åªèƒ½æœ‰å¸¸é‡</td><td>å¯ä»¥æœ‰å„ç§ç±»å‹å˜é‡</td></tr><tr><td>æ„é€ æ–¹æ³•</td><td>ä¸èƒ½æœ‰</td><td>å¯ä»¥æœ‰</td></tr><tr><td>å…³ç³»ç±»å‹</td><td>can-doï¼ˆèƒ½åšä»€ä¹ˆï¼‰</td><td>is-aï¼ˆæ˜¯ä»€ä¹ˆï¼‰</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>å®šä¹‰è§„èŒƒã€å¤šé‡ç»§æ‰¿</td><td>ä»£ç å¤ç”¨ã€éƒ¨åˆ†å®ç°ã€æœ‰çŠ¶æ€</td></tr></tbody></table><h3 id="_3-string-vs-stringbuffer-vs-stringbuilder" tabindex="-1"><a class="header-anchor" href="#_3-string-vs-stringbuffer-vs-stringbuilder"><span>3. String vs StringBuffer vs StringBuilder</span></a></h3><h4 id="ç‰¹æ€§å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#ç‰¹æ€§å¯¹æ¯”"><span>ç‰¹æ€§å¯¹æ¯”</span></a></h4><ul><li><strong>String</strong>ï¼šä¸å¯å˜ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œé¢‘ç¹æ“ä½œæ€§èƒ½å·®ï¼Œä¼šåˆ›å»ºå¤§é‡ä¸´æ—¶å¯¹è±¡</li><li><strong>StringBuffer</strong>ï¼šå¯å˜ï¼Œçº¿ç¨‹å®‰å…¨ï¼ˆsynchronizedï¼‰ï¼Œé€‚åˆå¤šçº¿ç¨‹ç¯å¢ƒ</li><li><strong>StringBuilder</strong>ï¼šå¯å˜ï¼Œçº¿ç¨‹ä¸å®‰å…¨ï¼Œå•çº¿ç¨‹ç¯å¢ƒæ€§èƒ½æœ€ä½³</li></ul><h4 id="é€‰æ‹©åŸåˆ™" tabindex="-1"><a class="header-anchor" href="#é€‰æ‹©åŸåˆ™"><span>é€‰æ‹©åŸåˆ™</span></a></h4><ul><li><strong>String</strong>ï¼šå­—ç¬¦ä¸²å¾ˆå°‘æ”¹å˜çš„æƒ…å†µ</li><li><strong>StringBuffer</strong>ï¼šå¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å­—ç¬¦ä¸²é¢‘ç¹æ“ä½œ</li><li><strong>StringBuilder</strong>ï¼šå•çº¿ç¨‹ç¯å¢ƒä¸‹çš„å­—ç¬¦ä¸²é¢‘ç¹æ“ä½œ</li></ul><table><thead><tr><th>ç‰¹æ€§</th><th>String</th><th>StringBuffer</th><th>StringBuilder</th></tr></thead><tbody><tr><td>å¯å˜æ€§</td><td>ä¸å¯å˜</td><td>å¯å˜</td><td>å¯å˜</td></tr><tr><td>çº¿ç¨‹å®‰å…¨</td><td>å®‰å…¨ï¼ˆä¸å¯å˜ï¼‰</td><td>å®‰å…¨ï¼ˆåŒæ­¥ï¼‰</td><td>ä¸å®‰å…¨</td></tr><tr><td>æ€§èƒ½</td><td>é¢‘ç¹æ“ä½œå·®</td><td>ä¸­ç­‰</td><td>æœ€ä½³</td></tr><tr><td>å†…å­˜ä½¿ç”¨</td><td>åˆ›å»ºæ–°å¯¹è±¡</td><td>å†…éƒ¨ç¼“å†²åŒº</td><td>å†…éƒ¨ç¼“å†²åŒº</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å°‘é‡æ“ä½œ</td><td>å¤šçº¿ç¨‹å­—ç¬¦ä¸²æ“ä½œ</td><td>å•çº¿ç¨‹å­—ç¬¦ä¸²æ“ä½œ</td></tr></tbody></table><h3 id="_4-è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±åŸç†åŠæ½œåœ¨é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_4-è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±åŸç†åŠæ½œåœ¨é—®é¢˜"><span>4. è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±åŸç†åŠæ½œåœ¨é—®é¢˜</span></a></h3><h4 id="åŸºæœ¬æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ¦‚å¿µ"><span>åŸºæœ¬æ¦‚å¿µ</span></a></h4><ul><li><strong>è‡ªåŠ¨è£…ç®±</strong>ï¼šåŸºæœ¬ç±»å‹è‡ªåŠ¨è½¬æ¢ä¸ºåŒ…è£…ç±»å‹ï¼ˆå¦‚intâ†’Integerï¼‰</li><li><strong>è‡ªåŠ¨æ‹†ç®±</strong>ï¼šåŒ…è£…ç±»å‹è‡ªåŠ¨è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹</li><li><strong>å®ç°åŸç†</strong>ï¼šç¼–è¯‘å™¨è‡ªåŠ¨æ’å…¥valueOf()å’ŒxxxValue()æ–¹æ³•è°ƒç”¨</li></ul><h4 id="å››å¤§æ½œåœ¨é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#å››å¤§æ½œåœ¨é—®é¢˜"><span>å››å¤§æ½œåœ¨é—®é¢˜</span></a></h4><ol><li><strong>ç¼“å­˜èŒƒå›´é—®é¢˜</strong>ï¼š-128åˆ°127èŒƒå›´å†…çš„Integerå¯¹è±¡ä¼šè¢«ç¼“å­˜å¤ç”¨ï¼Œè¶…å‡ºèŒƒå›´ä¼šåˆ›å»ºæ–°å¯¹è±¡</li><li><strong>æ€§èƒ½é—®é¢˜</strong>ï¼šé¢‘ç¹è£…ç®±æ‹†ç®±ä¼šå½±å“æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨å¾ªç¯ä¸­</li><li><strong>NullPointerException</strong>ï¼šnullçš„åŒ…è£…ç±»å‹æ‹†ç®±æ—¶ä¼šæŠ›NPE</li><li><strong>ä¸‰ç›®è¿ç®—ç¬¦é™·é˜±</strong>ï¼šç±»å‹ä¸ä¸€è‡´æ—¶ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ‹†ç®±ï¼Œå¯èƒ½å¯¼è‡´NPE</li></ol><h4 id="æœ€ä½³å®è·µ" tabindex="-1"><a class="header-anchor" href="#æœ€ä½³å®è·µ"><span>æœ€ä½³å®è·µ</span></a></h4><p>å°½é‡ä½¿ç”¨åŸºæœ¬ç±»å‹ã€æ¯”è¾ƒåŒ…è£…ç±»å‹ç”¨equals()ã€é¿å…å¾ªç¯ä¸­é¢‘ç¹è£…ç®±æ‹†ç®±ã€æ³¨æ„ç¼“å­˜èŒƒå›´ã€å°å¿ƒnullå€¼æ‹†ç®±</p><table><thead><tr><th>é—®é¢˜ç±»å‹</th><th>å…·ä½“è¡¨ç°</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>ç¼“å­˜èŒƒå›´é—®é¢˜</td><td>-128~127å¤–ç”¨==æ¯”è¾ƒç»“æœä¸ºfalse</td><td>ç”¨equals()æ¯”è¾ƒ</td></tr><tr><td>æ€§èƒ½é—®é¢˜</td><td>å¾ªç¯ä¸­é¢‘ç¹è£…ç®±æ‹†ç®±</td><td>ä½¿ç”¨åŸºæœ¬ç±»å‹</td></tr><tr><td>NPEé—®é¢˜</td><td>nullåŒ…è£…ç±»å‹æ‹†ç®±æ—¶æŠ›å¼‚å¸¸</td><td>åˆ¤ç©ºæˆ–ä½¿ç”¨åŸºæœ¬ç±»å‹</td></tr><tr><td>ä¸‰ç›®è¿ç®—ç¬¦é™·é˜±</td><td>ç±»å‹ä¸ä¸€è‡´å¯¼è‡´è‡ªåŠ¨æ‹†ç®±NPE</td><td>ä¿è¯ä¸¤è¾¹ç±»å‹ä¸€è‡´</td></tr><tr><td>æœ€ä½³å®è·µ</td><td>ä»€ä¹ˆæ—¶å€™ç”¨åŒ…è£…ç±»å‹ï¼Ÿ</td><td>éœ€è¦nullå€¼æˆ–æ³›å‹æ—¶æ‰ç”¨</td></tr></tbody></table><h3 id="_5-bioã€nioã€aioçš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_5-bioã€nioã€aioçš„åŒºåˆ«"><span>5. BIOã€NIOã€AIOçš„åŒºåˆ«ï¼Ÿ</span></a></h3><h4 id="i-oæ¨¡å‹æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#i-oæ¨¡å‹æ ¸å¿ƒæ¦‚å¿µ"><span>I/Oæ¨¡å‹æ ¸å¿ƒæ¦‚å¿µ</span></a></h4><p><strong>BIOã€NIOã€AIOä¸‰ç§I/Oæ¨¡å‹å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>BIOï¼ˆåŒæ­¥é˜»å¡ï¼‰</th><th>NIOï¼ˆåŒæ­¥éé˜»å¡ï¼‰</th><th>AIOï¼ˆå¼‚æ­¥éé˜»å¡ï¼‰</th></tr></thead><tbody><tr><td>å…¨ç§°</td><td>Blocking I/O</td><td>Non-blocking I/O</td><td>Asynchronous I/O</td></tr><tr><td>é˜»å¡æ€§</td><td>é˜»å¡</td><td>éé˜»å¡</td><td>å¼‚æ­¥</td></tr><tr><td>åŒæ­¥æ€§</td><td>åŒæ­¥</td><td>åŒæ­¥</td><td>å¼‚æ­¥</td></tr><tr><td>çº¿ç¨‹æ¨¡å‹</td><td>ä¸€çº¿ç¨‹ä¸€è¿æ¥</td><td>ä¸€çº¿ç¨‹å¤„ç†å¤šè¿æ¥</td><td>ä¸€çº¿ç¨‹å¤„ç†å¤šè¿æ¥</td></tr><tr><td>APIå¤æ‚åº¦</td><td>ç®€å•</td><td>å¤æ‚</td><td>å¤æ‚</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>è¿æ¥æ•°å°‘ã€å¹¶å‘åº¦ä½</td><td>è¿æ¥æ•°å¤šã€å¹¶å‘åº¦é«˜</td><td>è¿æ¥æ•°å¤šã€å¹¶å‘åº¦é«˜</td></tr></tbody></table><h4 id="å·¥ä½œåŸç†å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#å·¥ä½œåŸç†å¯¹æ¯”"><span>å·¥ä½œåŸç†å¯¹æ¯”</span></a></h4><table><thead><tr><th>I/Oæ¨¡å‹</th><th>å·¥ä½œåŸç†</th><th>çº¿ç¨‹åˆ©ç”¨ç‡</th><th>å†…å­˜æ¶ˆè€—</th><th>CPUåˆ©ç”¨ç‡</th></tr></thead><tbody><tr><td>BIO</td><td>æ¯ä¸ªè¿æ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹é˜»å¡ç­‰å¾…I/Oå®Œæˆ</td><td>ä½</td><td>é«˜</td><td>ä½</td></tr><tr><td>NIO</td><td>ä¸€ä¸ªçº¿ç¨‹é€šè¿‡Selectorè½®è¯¢å¤šä¸ªChannel</td><td>é«˜</td><td>ä¸­</td><td>é«˜</td></tr><tr><td>AIO</td><td>æ“ä½œç³»ç»Ÿå®ŒæˆI/Oåé€šçŸ¥åº”ç”¨ç¨‹åº</td><td>é«˜</td><td>ä½</td><td>ä¸­</td></tr></tbody></table><h4 id="æ€§èƒ½ç‰¹æ€§å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#æ€§èƒ½ç‰¹æ€§å¯¹æ¯”"><span>æ€§èƒ½ç‰¹æ€§å¯¹æ¯”</span></a></h4><table><thead><tr><th>æ€§èƒ½æŒ‡æ ‡</th><th>BIO</th><th>NIO</th><th>AIO</th></tr></thead><tbody><tr><td>ååé‡</td><td>ä½ï¼ˆå—çº¿ç¨‹æ•°é™åˆ¶ï¼‰</td><td>é«˜</td><td>é«˜</td></tr><tr><td>å»¶è¿Ÿ</td><td>ä¸­ç­‰</td><td>ä½</td><td>æœ€ä½</td></tr><tr><td>å†…å­˜å ç”¨</td><td>é«˜ï¼ˆå¤§é‡çº¿ç¨‹æ ˆï¼‰</td><td>ä¸­ç­‰</td><td>ä½</td></tr><tr><td>CPUæ¶ˆè€—</td><td>ä½ï¼ˆå¤§é‡é˜»å¡ç­‰å¾…ï¼‰</td><td>ä¸­ç­‰</td><td>ä½</td></tr><tr><td>å¯æ‰©å±•æ€§</td><td>å·®</td><td>å¥½</td><td>æœ€å¥½</td></tr></tbody></table><h4 id="ç¼–ç¨‹æ¨¡å‹å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#ç¼–ç¨‹æ¨¡å‹å¯¹æ¯”"><span>ç¼–ç¨‹æ¨¡å‹å¯¹æ¯”</span></a></h4><table><thead><tr><th>æ¨¡å‹</th><th>ç¼–ç¨‹æ¨¡å‹</th><th>äº‹ä»¶å¤„ç†</th><th>é”™è¯¯å¤„ç†</th><th>å­¦ä¹ æˆæœ¬</th></tr></thead><tbody><tr><td>BIO</td><td>é¡ºåºç¼–ç¨‹ï¼Œç¬¦åˆäººç±»æ€ç»´</td><td>åŒæ­¥å¤„ç†</td><td>try-catch</td><td>ä½</td></tr><tr><td>NIO</td><td>äº‹ä»¶é©±åŠ¨ï¼Œéœ€è¦çŠ¶æ€æœºç®¡ç†</td><td>äº‹ä»¶å¾ªç¯</td><td>å¤æ‚</td><td>é«˜</td></tr><tr><td>AIO</td><td>å›è°ƒé©±åŠ¨ï¼Œå¼‚æ­¥ç¼–ç¨‹</td><td>å›è°ƒå‡½æ•°</td><td>å›è°ƒåœ°ç‹±</td><td>é«˜</td></tr></tbody></table><h4 id="å®é™…åº”ç”¨åœºæ™¯é€‰æ‹©" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨åœºæ™¯é€‰æ‹©"><span>å®é™…åº”ç”¨åœºæ™¯é€‰æ‹©</span></a></h4><table><thead><tr><th>åº”ç”¨åœºæ™¯</th><th>æ¨èæ¨¡å‹</th><th>é€‰æ‹©ç†ç”±</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>WebæœåŠ¡å™¨</td><td>NIO</td><td>å¤§é‡è¿æ¥ï¼Œè¯·æ±‚å¤„ç†æ—¶é—´çŸ­</td><td>éœ€è¦å¤„ç†ç²˜åŒ…æ‹†åŒ…é—®é¢˜</td></tr><tr><td>æ–‡ä»¶æœåŠ¡å™¨</td><td>BIO</td><td>æ–‡ä»¶I/Oå¤šä¸ºé¡ºåºæ“ä½œï¼Œç¼–ç¨‹ç®€å•</td><td>æ§åˆ¶å¹¶å‘è¿æ¥æ•°</td></tr><tr><td>å³æ—¶é€šè®¯</td><td>NIO</td><td>é•¿è¿æ¥ï¼Œéœ€è¦é«˜å¹¶å‘</td><td>å¿ƒè·³æ£€æµ‹ï¼Œè¿æ¥ç®¡ç†</td></tr><tr><td>æ¸¸æˆæœåŠ¡å™¨</td><td>AIO</td><td>å®æ—¶æ€§è¦æ±‚é«˜ï¼Œæ€§èƒ½æ•æ„Ÿ</td><td>å›è°ƒå¤„ç†å¤æ‚</td></tr><tr><td>æ•°æ®åº“è¿æ¥æ± </td><td>BIO</td><td>è¿æ¥æ•°å¯æ§ï¼Œæ“ä½œå¤šä¸ºçŸ­è¿æ¥</td><td>è¿æ¥å¤ç”¨</td></tr><tr><td>å¤§æ•°æ®ä¼ è¾“</td><td>AIO</td><td>å¤§æ–‡ä»¶ä¼ è¾“ï¼Œå¼‚æ­¥å¤„ç†æ•ˆç‡é«˜</td><td>éœ€è¦å¤„ç†ä¼ è¾“ä¸­æ–­</td></tr></tbody></table><h4 id="æŠ€æœ¯é€‰å‹å†³ç­–" tabindex="-1"><a class="header-anchor" href="#æŠ€æœ¯é€‰å‹å†³ç­–"><span>æŠ€æœ¯é€‰å‹å†³ç­–</span></a></h4><table><thead><tr><th>è€ƒè™‘å› ç´ </th><th>æƒé‡</th><th>BIOè¯„åˆ†</th><th>NIOè¯„åˆ†</th><th>AIOè¯„åˆ†</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å¼€å‘éš¾åº¦ï¼ˆ20%ï¼‰</td><td>20%</td><td>9</td><td>6</td><td>5</td><td>BIOæœ€ç®€å•</td></tr><tr><td>æ€§èƒ½è¡¨ç°ï¼ˆ30%ï¼‰</td><td>30%</td><td>4</td><td>8</td><td>9</td><td>AIOæ€§èƒ½æœ€å¥½</td></tr><tr><td>å¹¶å‘èƒ½åŠ›ï¼ˆ25%ï¼‰</td><td>25%</td><td>3</td><td>8</td><td>9</td><td>NIO/AIOå¹¶å‘èƒ½åŠ›å¼º</td></tr><tr><td>ç¨³å®šæ€§ï¼ˆ15%ï¼‰</td><td>15%</td><td>9</td><td>7</td><td>6</td><td>BIOæœ€ç¨³å®š</td></tr><tr><td>ç”Ÿæ€æˆç†Ÿåº¦ï¼ˆ10%ï¼‰</td><td>10%</td><td>10</td><td>8</td><td>5</td><td>BIOç”Ÿæ€æœ€æˆç†Ÿ</td></tr><tr><td><strong>åŠ æƒæ€»åˆ†</strong></td><td></td><td><strong>5.9</strong></td><td><strong>7.3</strong></td><td><strong>7.4</strong></td><td>AIOç»¼åˆè¯„åˆ†ç•¥é«˜</td></tr></tbody></table><h3 id="_6-selectã€pollã€epollçš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_6-selectã€pollã€epollçš„åŒºåˆ«"><span>6. Selectã€Pollã€Epollçš„åŒºåˆ«</span></a></h3><p><strong>I/Oå¤šè·¯å¤ç”¨æœºåˆ¶å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>Select</th><th>Poll</th><th>Epoll</th></tr></thead><tbody><tr><td>æ“ä½œç³»ç»Ÿæ”¯æŒ</td><td>å‡ ä¹æ‰€æœ‰Unix/Linux</td><td>Unix/Linux</td><td>ä»…Linux</td></tr><tr><td>æ–‡ä»¶æè¿°ç¬¦é™åˆ¶</td><td>æœ‰é™åˆ¶ï¼ˆé€šå¸¸1024ï¼‰</td><td>æ— ç¡¬æ€§é™åˆ¶</td><td>æ— é™åˆ¶</td></tr><tr><td>æ•°æ®ç»“æ„</td><td>bitmapä½å›¾</td><td>é“¾è¡¨</td><td>çº¢é»‘æ ‘+åŒé“¾è¡¨</td></tr><tr><td>æ—¶é—´å¤æ‚åº¦</td><td>O(n)</td><td>O(n)</td><td>O(1)</td></tr><tr><td>å†…å­˜æ‹·è´</td><td>æ¯æ¬¡è°ƒç”¨éƒ½è¦æ‹·è´</td><td>æ¯æ¬¡è°ƒç”¨éƒ½è¦æ‹·è´</td><td>ä½¿ç”¨mmapå‡å°‘æ‹·è´</td></tr><tr><td>å·¥ä½œæ¨¡å¼</td><td>æ°´å¹³è§¦å‘</td><td>æ°´å¹³è§¦å‘</td><td>æ°´å¹³è§¦å‘+è¾¹ç¼˜è§¦å‘</td></tr></tbody></table><p><strong>å·¥ä½œåŸç†å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>æœºåˆ¶</th><th>å·¥ä½œæµç¨‹</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>Select</td><td>è½®è¯¢æ‰€æœ‰fdï¼Œè¿”å›å°±ç»ªçš„fdé›†åˆ</td><td>è·¨å¹³å°å…¼å®¹æ€§å¥½</td><td>æ€§èƒ½å·®ã€fdæ•°é‡é™åˆ¶</td></tr><tr><td>Poll</td><td>ä¸selectç±»ä¼¼ï¼Œä½†ä½¿ç”¨é“¾è¡¨å­˜å‚¨fd</td><td>æ²¡æœ‰fdæ•°é‡é™åˆ¶</td><td>æ€§èƒ½ä»ç„¶è¾ƒå·®</td></tr><tr><td>Epoll</td><td>åŸºäºäº‹ä»¶é€šçŸ¥ï¼Œåªè¿”å›æ´»è·ƒçš„fd</td><td>é«˜æ€§èƒ½ã€æ”¯æŒå¤§é‡è¿æ¥</td><td>ä»…æ”¯æŒLinux</td></tr></tbody></table><p><strong>é€‚ç”¨åœºæ™¯é€‰æ‹©ï¼š</strong></p><table><thead><tr><th>åº”ç”¨åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>é€‰æ‹©ç†ç”±</th></tr></thead><tbody><tr><td>è·¨å¹³å°å¼€å‘</td><td>Select</td><td>å…¼å®¹æ€§æœ€å¥½</td></tr><tr><td>ä¸­ç­‰å¹¶å‘é‡</td><td>Poll</td><td>æ— fdé™åˆ¶ï¼Œå®ç°ç®€å•</td></tr><tr><td>é«˜å¹¶å‘æœåŠ¡å™¨</td><td>Epoll</td><td>æ€§èƒ½æœ€ä¼˜ï¼Œæ”¯æŒå¤§é‡è¿æ¥</td></tr><tr><td>å®æ—¶æ€§è¦æ±‚é«˜</td><td>Epoll+ET</td><td>è¾¹ç¼˜è§¦å‘å‡å°‘ç³»ç»Ÿè°ƒç”¨</td></tr><tr><td>ä¼ ç»Ÿç½‘ç»œç¼–ç¨‹</td><td>Select/Poll</td><td>ç¼–ç¨‹æ¨¡å‹ç®€å•ï¼Œæ˜“äºç†è§£</td></tr></tbody></table><p><strong>æœ€ä½³å®è·µå»ºè®®ï¼š</strong></p><table><thead><tr><th>å®è·µå»ºè®®</th><th>å…·ä½“åšæ³•</th><th>é¢„æœŸæ•ˆæœ</th></tr></thead><tbody><tr><td>æ ¹æ®å¹³å°é€‰æ‹©æŠ€æœ¯</td><td>Linuxä¼˜é€‰Epollï¼Œå…¶ä»–å¹³å°ç”¨Poll</td><td>æœ€å¤§åŒ–æ€§èƒ½æ”¶ç›Š</td></tr><tr><td>åˆç†è®¾ç½®äº‹ä»¶æ¨¡å¼</td><td>é«˜æ€§èƒ½åœºæ™¯ä½¿ç”¨ETæ¨¡å¼</td><td>å‡å°‘ç³»ç»Ÿè°ƒç”¨å¼€é”€</td></tr><tr><td>æ³¨æ„å†…å­˜ç®¡ç†</td><td>Epolléœ€è¦åˆç†ç®¡ç†äº‹ä»¶ç»“æ„ä½“</td><td>é¿å…å†…å­˜æ³„æ¼</td></tr><tr><td>é”™è¯¯å¤„ç†è¦å®Œå–„</td><td>ç‰¹åˆ«æ˜¯EAGAINã€EINTRç­‰é”™è¯¯</td><td>æé«˜ç¨‹åºå¥å£®æ€§</td></tr><tr><td>ç»“åˆçº¿ç¨‹æ± ä½¿ç”¨</td><td>I/Oå¤šè·¯å¤ç”¨+å·¥ä½œçº¿ç¨‹æ± </td><td>å¹³è¡¡å¹¶å‘èƒ½åŠ›å’Œèµ„æºæ¶ˆè€—</td></tr></tbody></table><h2 id="é›†åˆ" tabindex="-1"><a class="header-anchor" href="#é›†åˆ"><span>é›†åˆ</span></a></h2><h3 id="_1-hashmap-çš„å®ç°åŸç†-jdk-1-7å’Œ1-8çš„åŒºåˆ«-hash-æ–¹æ³•çš„ä½œç”¨-å¦‚ä½•å¤„ç†å“ˆå¸Œå†²çª" tabindex="-1"><a class="header-anchor" href="#_1-hashmap-çš„å®ç°åŸç†-jdk-1-7å’Œ1-8çš„åŒºåˆ«-hash-æ–¹æ³•çš„ä½œç”¨-å¦‚ä½•å¤„ç†å“ˆå¸Œå†²çª"><span>1. HashMap çš„å®ç°åŸç†ï¼ŸJDK 1.7å’Œ1.8çš„åŒºåˆ«ï¼Ÿhash()æ–¹æ³•çš„ä½œç”¨ï¼Ÿå¦‚ä½•å¤„ç†å“ˆå¸Œå†²çªï¼Ÿ</span></a></h3><h4 id="å®ç°åŸç†" tabindex="-1"><a class="header-anchor" href="#å®ç°åŸç†"><span>å®ç°åŸç†</span></a></h4><p>HashMapåŸºäºæ•°ç»„+é“¾è¡¨/çº¢é»‘æ ‘çš„æ•°æ®ç»“æ„ï¼Œé€šè¿‡hashç®—æ³•å°†keyæ˜ å°„åˆ°æ•°ç»„ç´¢å¼•ä½ç½®ã€‚</p><h4 id="jdk-1-7-vs-1-8-ä¸»è¦åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#jdk-1-7-vs-1-8-ä¸»è¦åŒºåˆ«"><span>JDK 1.7 vs 1.8 ä¸»è¦åŒºåˆ«</span></a></h4><ul><li><strong>æ•°æ®ç»“æ„</strong>ï¼š1.7æ˜¯æ•°ç»„+é“¾è¡¨ï¼Œ1.8æ˜¯æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘</li><li><strong>æ’å…¥æ–¹å¼</strong>ï¼š1.7å¤´æ’æ³•ï¼ˆå¹¶å‘ç¯å¢ƒå¯èƒ½æ­»å¾ªç¯ï¼‰ï¼Œ1.8å°¾æ’æ³•</li><li><strong>æ‰©å®¹æ—¶æœº</strong>ï¼š1.7å…ˆæ‰©å®¹å†æ’å…¥ï¼Œ1.8å…ˆæ’å…¥å†æ‰©å®¹</li><li><strong>hashç®—æ³•</strong>ï¼š1.8ä¼˜åŒ–äº†hashç®—æ³•ï¼Œå‡å°‘ç¢°æ’</li></ul><h4 id="hash-æ–¹æ³•ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#hash-æ–¹æ³•ä½œç”¨"><span>hash()æ–¹æ³•ä½œç”¨</span></a></h4><p>å°†keyçš„hashCodeè¿›è¡ŒäºŒæ¬¡hashï¼Œè®©hashå€¼æ›´å‡åŒ€åˆ†å¸ƒï¼Œå‡å°‘å“ˆå¸Œå†²çªã€‚</p><h4 id="å“ˆå¸Œå†²çªå¤„ç†" tabindex="-1"><a class="header-anchor" href="#å“ˆå¸Œå†²çªå¤„ç†"><span>å“ˆå¸Œå†²çªå¤„ç†</span></a></h4><ol><li><strong>é“¾è¡¨æ³•</strong>ï¼šç›¸åŒhashå€¼çš„å…ƒç´ ç”¨é“¾è¡¨è¿æ¥</li><li><strong>çº¢é»‘æ ‘ä¼˜åŒ–</strong>ï¼šå½“é“¾è¡¨é•¿åº¦â‰¥8ä¸”æ•°ç»„é•¿åº¦â‰¥64æ—¶ï¼Œé“¾è¡¨è½¬çº¢é»‘æ ‘ã€‚å½“çº¢é»‘æ ‘èŠ‚ç‚¹æ•°å°äº6æ—¶ï¼Œè½¬å›é“¾è¡¨</li><li><strong>æ‰©å®¹æœºåˆ¶</strong>ï¼šè´Ÿè½½å› å­è¶…è¿‡0.75æ—¶ï¼Œæ•°ç»„å®¹é‡ç¿»å€</li></ol><table><thead><tr><th>ç‰ˆæœ¬å¯¹æ¯”</th><th>JDK 1.7</th><th>JDK 1.8</th></tr></thead><tbody><tr><td>æ•°æ®ç»“æ„</td><td>æ•°ç»„+é“¾è¡¨</td><td>æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘</td></tr><tr><td>æ’å…¥æ–¹å¼</td><td>å¤´æ’æ³•</td><td>å°¾æ’æ³•</td></tr><tr><td>é“¾è¡¨è½¬æ ‘</td><td>æ— </td><td>é“¾è¡¨é•¿åº¦â‰¥8ä¸”æ•°ç»„é•¿åº¦â‰¥64æ—¶</td></tr><tr><td>æ‰©å®¹æ—¶æœº</td><td>å…ˆæ‰©å®¹å†æ’å…¥</td><td>å…ˆæ’å…¥å†æ‰©å®¹</td></tr><tr><td>å¹¶å‘é—®é¢˜</td><td>å¯èƒ½æ­»å¾ªç¯</td><td>é¿å…äº†æ­»å¾ªç¯</td></tr></tbody></table><h3 id="_2-concurrenthashmap-å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨" tabindex="-1"><a class="header-anchor" href="#_2-concurrenthashmap-å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨"><span>2. ConcurrentHashMap å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨ï¼Ÿ</span></a></h3><h4 id="jdk-1-7-åˆ†æ®µé”æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#jdk-1-7-åˆ†æ®µé”æœºåˆ¶"><span>JDK 1.7ï¼šåˆ†æ®µé”æœºåˆ¶</span></a></h4><ul><li><strong>Segmentæ•°ç»„</strong>ï¼šå°†HashMapåˆ†æˆå¤šä¸ªæ®µï¼Œæ¯ä¸ªæ®µæœ‰ç‹¬ç«‹çš„é”</li><li><strong>é”ç²’åº¦</strong>ï¼šåªé”éœ€è¦æ“ä½œçš„æ®µï¼Œå…¶ä»–æ®µå¯å¹¶å‘è®¿é—®</li><li><strong>å¹¶å‘åº¦</strong>ï¼šé»˜è®¤16ä¸ªæ®µï¼Œæœ€å¤šæ”¯æŒ16ä¸ªçº¿ç¨‹åŒæ—¶å†™å…¥</li></ul><h4 id="jdk-1-8-cas-synchronized" tabindex="-1"><a class="header-anchor" href="#jdk-1-8-cas-synchronized"><span>JDK 1.8ï¼šCAS + synchronized</span></a></h4><ul><li><strong>å–æ¶ˆSegment</strong>ï¼šç›´æ¥åœ¨NodeèŠ‚ç‚¹ä¸ŠåŠ é”</li><li><strong>CASæ“ä½œ</strong>ï¼šæ•°ç»„å…ƒç´ ä¸ºç©ºæ—¶ç”¨CASæ’å…¥</li><li><strong>synchronized</strong>ï¼šå‘ç”Ÿå†²çªæ—¶é”ä½é“¾è¡¨/çº¢é»‘æ ‘çš„å¤´èŠ‚ç‚¹</li><li><strong>æ›´ç»†ç²’åº¦</strong>ï¼šé”çš„æ˜¯å…·ä½“çš„hashæ¡¶ï¼Œå¹¶å‘æ€§èƒ½æ›´å¥½</li></ul><table><thead><tr><th>ç‰ˆæœ¬</th><th>JDK 1.7</th><th>JDK 1.8</th></tr></thead><tbody><tr><td>é”æœºåˆ¶</td><td>åˆ†æ®µé”ï¼ˆSegmentï¼‰</td><td>CAS + synchronized</td></tr><tr><td>é”ç²’åº¦</td><td>æ®µçº§åˆ«</td><td>èŠ‚ç‚¹çº§åˆ«</td></tr><tr><td>å¹¶å‘åº¦</td><td>æœ€å¤š16ä¸ªå†™çº¿ç¨‹</td><td>ç†è®ºä¸Šæ— é™åˆ¶</td></tr><tr><td>å†…å­˜å ç”¨</td><td>Segmenté¢å¤–å¼€é”€</td><td>æ›´å°‘çš„å†…å­˜å¼€é”€</td></tr><tr><td>æ€§èƒ½</td><td>è¯»å†™åˆ†ç¦»ï¼Œæ€§èƒ½è¾ƒå¥½</td><td>è¯»å†™æ€§èƒ½éƒ½æ›´ä¼˜</td></tr></tbody></table><h3 id="_3-arraylist-å’Œ-linkedlist-çš„åº•å±‚å®ç°ã€æ—¶é—´å¤æ‚åº¦" tabindex="-1"><a class="header-anchor" href="#_3-arraylist-å’Œ-linkedlist-çš„åº•å±‚å®ç°ã€æ—¶é—´å¤æ‚åº¦"><span>3. ArrayList å’Œ LinkedList çš„åº•å±‚å®ç°ã€æ—¶é—´å¤æ‚åº¦ï¼Ÿ</span></a></h3><h4 id="åº•å±‚å®ç°" tabindex="-1"><a class="header-anchor" href="#åº•å±‚å®ç°"><span>åº•å±‚å®ç°</span></a></h4><ul><li><strong>ArrayList</strong>ï¼šåŠ¨æ€æ•°ç»„ï¼Œè¿ç»­å†…å­˜ç©ºé—´å­˜å‚¨</li><li><strong>LinkedList</strong>ï¼šåŒå‘é“¾è¡¨ï¼ŒèŠ‚ç‚¹åŒ…å«dataã€prevã€nextæŒ‡é’ˆ</li></ul><h4 id="æ—¶é—´å¤æ‚åº¦å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#æ—¶é—´å¤æ‚åº¦å¯¹æ¯”"><span>æ—¶é—´å¤æ‚åº¦å¯¹æ¯”</span></a></h4><table><thead><tr><th>æ“ä½œ</th><th>ArrayList</th><th>LinkedList</th></tr></thead><tbody><tr><td>éšæœºè®¿é—®</td><td>O(1)</td><td>O(n)</td></tr><tr><td>å¤´éƒ¨æ’å…¥</td><td>O(n)</td><td>O(1)</td></tr><tr><td>å°¾éƒ¨æ’å…¥</td><td>O(1)</td><td>O(1)</td></tr><tr><td>ä¸­é—´æ’å…¥</td><td>O(n)</td><td>O(1)*</td></tr><tr><td>å¤´éƒ¨åˆ é™¤</td><td>O(n)</td><td>O(1)</td></tr><tr><td>å°¾éƒ¨åˆ é™¤</td><td>O(1)</td><td>O(1)</td></tr><tr><td>ä¸­é—´åˆ é™¤</td><td>O(n)</td><td>O(1)*</td></tr></tbody></table><p>*æ³¨ï¼šLinkedListä¸­é—´æ’å…¥/åˆ é™¤çš„O(1)æ˜¯æŒ‡å·²çŸ¥èŠ‚ç‚¹ä½ç½®çš„æƒ…å†µï¼ŒæŸ¥æ‰¾èŠ‚ç‚¹ä»éœ€O(n)</p><h4 id="ä½¿ç”¨åœºæ™¯-1" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-1"><span>ä½¿ç”¨åœºæ™¯</span></a></h4><ul><li><strong>ArrayList</strong>ï¼šé¢‘ç¹éšæœºè®¿é—®ã€å°‘é‡æ’å…¥åˆ é™¤</li><li><strong>LinkedList</strong>ï¼šé¢‘ç¹æ’å…¥åˆ é™¤ã€é¡ºåºè®¿é—®</li></ul><h3 id="_4-iterator-å’Œ-listiterator-çš„åŒºåˆ«-fail-fast-å’Œ-fail-safe-æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_4-iterator-å’Œ-listiterator-çš„åŒºåˆ«-fail-fast-å’Œ-fail-safe-æœºåˆ¶"><span>4. Iterator å’Œ ListIterator çš„åŒºåˆ«ï¼Ÿfail-fast å’Œ fail-safe æœºåˆ¶ï¼Ÿ</span></a></h3><h4 id="iterator-vs-listiterator" tabindex="-1"><a class="header-anchor" href="#iterator-vs-listiterator"><span>Iterator vs ListIterator</span></a></h4><table><thead><tr><th>ç‰¹æ€§</th><th>Iterator</th><th>ListIterator</th></tr></thead><tbody><tr><td>é€‚ç”¨èŒƒå›´</td><td>æ‰€æœ‰Collection</td><td>åªé€‚ç”¨äºList</td></tr><tr><td>éå†æ–¹å‘</td><td>å•å‘ï¼ˆå‘å‰ï¼‰</td><td>åŒå‘ï¼ˆå‰è¿›+åé€€ï¼‰</td></tr><tr><td>æ“ä½œèƒ½åŠ›</td><td>åªèƒ½åˆ é™¤</td><td>å¢åˆ æ”¹æŸ¥éƒ½æ”¯æŒ</td></tr><tr><td>ç´¢å¼•è®¿é—®</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒè·å–å½“å‰ç´¢å¼•</td></tr><tr><td>èµ·å§‹ä½ç½®</td><td>åªèƒ½ä»å¤´å¼€å§‹</td><td>å¯ä»¥ä»ä»»æ„ä½ç½®å¼€å§‹</td></tr></tbody></table><h4 id="fail-fast-vs-fail-safe" tabindex="-1"><a class="header-anchor" href="#fail-fast-vs-fail-safe"><span>fail-fast vs fail-safe</span></a></h4><p><strong>fail-fastï¼ˆå¿«é€Ÿå¤±è´¥ï¼‰ï¼š</strong></p><ul><li><strong>æœºåˆ¶</strong>ï¼šæ£€æµ‹åˆ°å¹¶å‘ä¿®æ”¹ç«‹å³æŠ›ConcurrentModificationException</li><li><strong>å®ç°</strong>ï¼šé€šè¿‡modCountè®¡æ•°å™¨æ£€æµ‹ç»“æ„æ€§ä¿®æ”¹</li><li><strong>ä»£è¡¨</strong>ï¼šArrayListã€HashMapçš„è¿­ä»£å™¨</li></ul><p><strong>fail-safeï¼ˆå®‰å…¨å¤±è´¥ï¼‰ï¼š</strong></p><ul><li><strong>æœºåˆ¶</strong>ï¼šåœ¨å‰¯æœ¬ä¸Šè¿­ä»£ï¼Œä¸ä¼šæŠ›å¼‚å¸¸ä½†å¯èƒ½è¯»åˆ°è¿‡æœŸæ•°æ®</li><li><strong>å®ç°</strong>ï¼šå¤åˆ¶ä¸€ä»½æ•°æ®è¿›è¡Œè¿­ä»£</li><li><strong>ä»£è¡¨</strong>ï¼šCopyOnWriteArrayListã€ConcurrentHashMap</li></ul><table><thead><tr><th>æœºåˆ¶</th><th>fail-fast</th><th>fail-safe</th></tr></thead><tbody><tr><td>å¼‚å¸¸å¤„ç†</td><td>ç«‹å³æŠ›å¼‚å¸¸</td><td>ä¸æŠ›å¼‚å¸¸</td></tr><tr><td>æ•°æ®ä¸€è‡´æ€§</td><td>å¼ºä¸€è‡´æ€§</td><td>å¯èƒ½è¯»åˆ°è¿‡æœŸæ•°æ®</td></tr><tr><td>æ€§èƒ½å¼€é”€</td><td>ä½</td><td>é«˜ï¼ˆéœ€è¦å¤åˆ¶ï¼‰</td></tr><tr><td>å†…å­˜ä½¿ç”¨</td><td>å°‘</td><td>å¤šï¼ˆé¢å¤–å‰¯æœ¬ï¼‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å•çº¿ç¨‹ç¯å¢ƒ</td><td>å¤šçº¿ç¨‹ç¯å¢ƒ</td></tr></tbody></table><h3 id="_5-å¦‚ä½•ä¿è¯é›†åˆçš„çº¿ç¨‹å®‰å…¨" tabindex="-1"><a class="header-anchor" href="#_5-å¦‚ä½•ä¿è¯é›†åˆçš„çº¿ç¨‹å®‰å…¨"><span>5. å¦‚ä½•ä¿è¯é›†åˆçš„çº¿ç¨‹å®‰å…¨ï¼Ÿ</span></a></h3><h4 id="äº”ç§è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#äº”ç§è§£å†³æ–¹æ¡ˆ"><span>äº”ç§è§£å†³æ–¹æ¡ˆ</span></a></h4><p><strong>1. Collections.synchronizedXXX()</strong></p><ul><li><strong>åŸç†</strong>ï¼šä¸ºæ¯ä¸ªæ–¹æ³•åŠ synchronizedå…³é”®å­—</li><li><strong>ç¼ºç‚¹</strong>ï¼šæ€§èƒ½è¾ƒå·®ï¼Œå¤åˆæ“ä½œä»ä¸å®‰å…¨</li></ul><p><strong>2. Vectorã€Hashtable</strong></p><ul><li><strong>åŸç†</strong>ï¼šæ–¹æ³•çº§åˆ«çš„synchronized</li><li><strong>ç¼ºç‚¹</strong>ï¼šè¿‡æ—¶çš„é‡é‡çº§åŒæ­¥ï¼Œæ€§èƒ½å·®</li></ul><p><strong>3. CopyOnWriteArrayList</strong></p><ul><li><strong>åŸç†</strong>ï¼šå†™æ—¶å¤åˆ¶ï¼Œè¯»å†™åˆ†ç¦»</li><li><strong>é€‚ç”¨</strong>ï¼šè¯»å¤šå†™å°‘çš„åœºæ™¯</li></ul><p><strong>4. ConcurrentHashMap</strong></p><ul><li><strong>åŸç†</strong>ï¼šåˆ†æ®µé”/CAS+synchronized</li><li><strong>ä¼˜ç‚¹</strong>ï¼šé«˜å¹¶å‘æ€§èƒ½å¥½</li></ul><p><strong>5. å¤–éƒ¨åŠ é”</strong></p><ul><li><strong>åŸç†</strong>ï¼šä½¿ç”¨å¤–éƒ¨é”æ§åˆ¶è®¿é—®</li><li><strong>çµæ´»æ€§</strong>ï¼šå¯æ§åˆ¶é”çš„ç²’åº¦</li></ul><table><thead><tr><th>æ–¹æ¡ˆ</th><th>æ€§èƒ½</th><th>é€‚ç”¨åœºæ™¯</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>Collections.synchronized</td><td>å·®</td><td>ç®€å•åœºæ™¯</td><td>å¤åˆæ“ä½œä¸å®‰å…¨</td></tr><tr><td>Vector/Hashtable</td><td>å·®</td><td>é—ç•™ä»£ç </td><td>é‡é‡çº§åŒæ­¥</td></tr><tr><td>CopyOnWriteArrayList</td><td>è¯»å¿«</td><td>è¯»å¤šå†™å°‘</td><td>å†™æ“ä½œå¼€é”€å¤§</td></tr><tr><td>ConcurrentHashMap</td><td>ä¼˜</td><td>é«˜å¹¶å‘Mapæ“ä½œ</td><td>åªé€‚ç”¨äºMap</td></tr><tr><td>å¤–éƒ¨åŠ é”</td><td>ä¸­</td><td>å¤æ‚ä¸šåŠ¡é€»è¾‘</td><td>éœ€è¦å°å¿ƒæ­»é”</td></tr></tbody></table><h3 id="_6-comparable-å’Œ-comparator-æ¥å£çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_6-comparable-å’Œ-comparator-æ¥å£çš„åŒºåˆ«"><span>6. Comparable å’Œ Comparator æ¥å£çš„åŒºåˆ«ï¼Ÿ</span></a></h3><h4 id="æ ¸å¿ƒåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#æ ¸å¿ƒåŒºåˆ«"><span>æ ¸å¿ƒåŒºåˆ«</span></a></h4><ul><li><strong>Comparable</strong>ï¼šå†…éƒ¨æ¯”è¾ƒå™¨ï¼Œå¯¹è±¡è‡ªå·±å®šä¹‰æ’åºè§„åˆ™</li><li><strong>Comparator</strong>ï¼šå¤–éƒ¨æ¯”è¾ƒå™¨ï¼Œç¬¬ä¸‰æ–¹å®šä¹‰æ’åºè§„åˆ™</li></ul><h4 id="è¯¦ç»†å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#è¯¦ç»†å¯¹æ¯”"><span>è¯¦ç»†å¯¹æ¯”</span></a></h4><p><strong>Comparableæ¥å£ï¼š</strong></p><ul><li><strong>æ–¹æ³•</strong>ï¼šcompareTo(T o)</li><li><strong>å®ç°ä½ç½®</strong>ï¼šåœ¨è¢«æ¯”è¾ƒçš„ç±»å†…éƒ¨å®ç°</li><li><strong>æ’åºè§„åˆ™</strong>ï¼šå›ºå®šçš„ï¼Œç±»çš„è‡ªç„¶æ’åº</li><li><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼šCollections.sort(list)</li></ul><p><strong>Comparatoræ¥å£ï¼š</strong></p><ul><li><strong>æ–¹æ³•</strong>ï¼šcompare(T o1, T o2)</li><li><strong>å®ç°ä½ç½®</strong>ï¼šå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å®ç°</li><li><strong>æ’åºè§„åˆ™</strong>ï¼šçµæ´»çš„ï¼Œå¯ä»¥æœ‰å¤šç§æ’åºæ–¹å¼</li><li><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼šCollections.sort(list, comparator)</li></ul><table><thead><tr><th>ç‰¹æ€§</th><th>Comparable</th><th>Comparator</th></tr></thead><tbody><tr><td>ä½ç½®</td><td>ç±»å†…éƒ¨å®ç°</td><td>å¤–éƒ¨å®ç°</td></tr><tr><td>æ–¹æ³•</td><td>compareTo()</td><td>compare()</td></tr><tr><td>æ’åºè§„åˆ™</td><td>å•ä¸€å›ºå®š</td><td>å¤šæ ·åŒ–çµæ´»</td></tr><tr><td>ä¿®æ”¹æˆæœ¬</td><td>éœ€è¦ä¿®æ”¹åŸç±»</td><td>ä¸éœ€è¦ä¿®æ”¹åŸç±»</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>ç±»æœ‰æ˜ç¡®çš„è‡ªç„¶æ’åº</td><td>éœ€è¦å¤šç§æ’åºæ–¹å¼æˆ–æ— æ³•ä¿®æ”¹åŸç±»</td></tr><tr><td>å®ç°æ•°é‡</td><td>ä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ç§</td><td>å¯ä»¥æœ‰å¤šä¸ªä¸åŒçš„å®ç°</td></tr></tbody></table><h2 id="å¤šçº¿ç¨‹" tabindex="-1"><a class="header-anchor" href="#å¤šçº¿ç¨‹"><span>å¤šçº¿ç¨‹</span></a></h2><h3 id="_1-è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«-åˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹å¼-å“ªç§æ›´æ¨è" tabindex="-1"><a class="header-anchor" href="#_1-è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«-åˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹å¼-å“ªç§æ›´æ¨è"><span>1. è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«ï¼Ÿåˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹å¼ï¼Ÿå“ªç§æ›´æ¨èï¼Ÿ</span></a></h3><p><strong>è¿›ç¨‹ vs çº¿ç¨‹ï¼š</strong></p><ul><li><strong>è¿›ç¨‹</strong>ï¼šæ“ä½œç³»ç»Ÿèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œæ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´</li><li><strong>çº¿ç¨‹</strong>ï¼šCPUè°ƒåº¦çš„åŸºæœ¬å•ä½ï¼ŒåŒä¸€è¿›ç¨‹å†…çš„çº¿ç¨‹å…±äº«å†…å­˜ç©ºé—´</li></ul><table><thead><tr><th>ç‰¹æ€§</th><th>è¿›ç¨‹</th><th>çº¿ç¨‹</th></tr></thead><tbody><tr><td>èµ„æºå ç”¨</td><td>ç‹¬ç«‹å†…å­˜ç©ºé—´</td><td>å…±äº«è¿›ç¨‹å†…å­˜ç©ºé—´</td></tr><tr><td>åˆ›å»ºå¼€é”€</td><td>å¤§</td><td>å°</td></tr><tr><td>é€šä¿¡æ–¹å¼</td><td>IPCï¼ˆç®¡é“ã€æ¶ˆæ¯é˜Ÿåˆ—ï¼‰</td><td>å…±äº«å†…å­˜ã€åŒæ­¥æœºåˆ¶</td></tr><tr><td>å´©æºƒå½±å“</td><td>ä¸å½±å“å…¶ä»–è¿›ç¨‹</td><td>å¯èƒ½å½±å“æ•´ä¸ªè¿›ç¨‹</td></tr><tr><td>åˆ‡æ¢å¼€é”€</td><td>å¤§</td><td>å°</td></tr></tbody></table><p><strong>åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ï¼š</strong></p><table><thead><tr><th>æ–¹å¼</th><th>ç‰¹ç‚¹</th><th>æ¨èåº¦</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ç»§æ‰¿Threadç±»</td><td>ç®€å•ï¼Œä½†Javaå•ç»§æ‰¿é™åˆ¶</td><td>â­â­</td><td>ç®€å•åœºæ™¯ï¼Œä¸æ¨è</td></tr><tr><td>å®ç°Runnableæ¥å£</td><td>å¯å¤šç»§æ‰¿ï¼Œæ¨è</td><td>â­â­â­</td><td>ä¸€èˆ¬å¼‚æ­¥ä»»åŠ¡</td></tr><tr><td>å®ç°Callable+FutureTask</td><td>æœ‰è¿”å›å€¼ï¼Œå¯æŠ›å¼‚å¸¸</td><td>â­â­â­</td><td>éœ€è¦è¿”å›ç»“æœçš„ä»»åŠ¡</td></tr><tr><td>çº¿ç¨‹æ± </td><td>å¤ç”¨çº¿ç¨‹ï¼Œæ€§èƒ½å¥½ï¼Œèµ„æºå¯æ§</td><td>â­â­â­â­â­</td><td>ç”Ÿäº§ç¯å¢ƒï¼Œé«˜å¹¶å‘åœºæ™¯</td></tr></tbody></table><p><strong>æœ€æ¨è</strong>ï¼šçº¿ç¨‹æ± æ–¹å¼ï¼Œå› ä¸ºå¯ä»¥é¿å…é¢‘ç¹åˆ›å»ºé”€æ¯çº¿ç¨‹çš„å¼€é”€ï¼Œæ›´å¥½åœ°æ§åˆ¶å¹¶å‘æ•°é‡ã€‚</p><h3 id="_2-sleep-wait-yield-join-æ–¹æ³•çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_2-sleep-wait-yield-join-æ–¹æ³•çš„åŒºåˆ«"><span>2. sleep(), wait(), yield(), join() æ–¹æ³•çš„åŒºåˆ«ï¼Ÿ</span></a></h3><table><thead><tr><th>æ–¹æ³•</th><th>æ‰€å±ç±»</th><th>é”çŠ¶æ€</th><th>ä½¿ç”¨åœºæ™¯</th><th>å”¤é†’æ–¹å¼</th></tr></thead><tbody><tr><td>sleep()</td><td>Thread</td><td>ä¸é‡Šæ”¾é”</td><td>æš‚åœæŒ‡å®šæ—¶é—´</td><td>æ—¶é—´åˆ°è‡ªåŠ¨å”¤é†’</td></tr><tr><td>wait()</td><td>Object</td><td>é‡Šæ”¾é”</td><td>ç­‰å¾…æ¡ä»¶æ»¡è¶³</td><td>notify/notifyAll</td></tr><tr><td>yield()</td><td>Thread</td><td>ä¸é‡Šæ”¾é”</td><td>è®©å‡ºCPUç»™åŒä¼˜å…ˆçº§çº¿ç¨‹</td><td>ç«‹å³é‡æ–°å‚ä¸è°ƒåº¦</td></tr><tr><td>join()</td><td>Thread</td><td>ä¸é‡Šæ”¾é”</td><td>ç­‰å¾…çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</td><td>ç›®æ ‡çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</td></tr></tbody></table><p><strong>æ ¸å¿ƒåŒºåˆ«ï¼š</strong></p><ul><li><strong>sleep()å’Œwait()çš„æœ€å¤§åŒºåˆ«</strong>ï¼šsleepä¸é‡Šæ”¾é”ï¼Œwaité‡Šæ”¾é”</li><li><strong>yield()ä½œç”¨</strong>ï¼šæš‚åœå½“å‰çº¿ç¨‹ï¼Œè®©åŒä¼˜å…ˆçº§çº¿ç¨‹æœ‰æœºä¼šæ‰§è¡Œï¼Œä½†å®é™…æ˜¯å¦è®©å‡º CPU è¦çœ‹è°ƒåº¦å™¨ã€‚</li><li><strong>join()ç”¨é€”</strong>ï¼šä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åå†ç»§ç»­</li></ul><h3 id="_3-ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯ä»€ä¹ˆ-å¼€é”€åœ¨å“ªé‡Œ" tabindex="-1"><a class="header-anchor" href="#_3-ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯ä»€ä¹ˆ-å¼€é”€åœ¨å“ªé‡Œ"><span>3. ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯ä»€ä¹ˆï¼Ÿå¼€é”€åœ¨å“ªé‡Œï¼Ÿ</span></a></h3><p><strong>ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>ï¼šCPUä»ä¸€ä¸ªçº¿ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œéœ€è¦ä¿å­˜å½“å‰çº¿ç¨‹çŠ¶æ€å¹¶åŠ è½½æ–°çº¿ç¨‹çŠ¶æ€çš„è¿‡ç¨‹ã€‚</p><p><strong>å¼€é”€æ„æˆï¼š</strong></p><ol><li><strong>ä¿å­˜ç°åœº</strong>ï¼šå¯„å­˜å™¨ã€ç¨‹åºè®¡æ•°å™¨ã€æ ˆæŒ‡é’ˆç­‰</li><li><strong>åŠ è½½æ–°ç°åœº</strong>ï¼šæ–°çº¿ç¨‹çš„æ‰§è¡Œç¯å¢ƒ</li><li><strong>å†…å­˜ç¼“å­˜å¤±æ•ˆ</strong>ï¼šCPUç¼“å­˜å¯èƒ½å¤±æ•ˆï¼Œéœ€è¦é‡æ–°åŠ è½½</li><li><strong>å†…æ ¸æ€åˆ‡æ¢</strong>ï¼šç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„åˆ‡æ¢å¼€é”€</li></ol><table><thead><tr><th>å¼€é”€ç±»å‹</th><th>å…·ä½“å†…å®¹</th><th>å½±å“ç¨‹åº¦</th></tr></thead><tbody><tr><td>å¯„å­˜å™¨ä¿å­˜</td><td>CPUå¯„å­˜å™¨çŠ¶æ€ä¿å­˜/æ¢å¤</td><td>ä¸­ç­‰</td></tr><tr><td>å†…å­˜è®¿é—®</td><td>æ ˆã€å †å†…å­˜è®¿é—®æ¨¡å¼å˜åŒ–</td><td>é«˜</td></tr><tr><td>ç¼“å­˜å¤±æ•ˆ</td><td>CPUç¼“å­˜ã€TLBå¤±æ•ˆ</td><td>é«˜</td></tr><tr><td>ç³»ç»Ÿè°ƒç”¨</td><td>ç”¨æˆ·æ€/å†…æ ¸æ€åˆ‡æ¢</td><td>ä¸­ç­‰</td></tr></tbody></table><h3 id="_4-ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨-å¦‚ä½•ç†è§£åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§" tabindex="-1"><a class="header-anchor" href="#_4-ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨-å¦‚ä½•ç†è§£åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§"><span>4. ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿå¦‚ä½•ç†è§£åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§ï¼Ÿ</span></a></h3><p><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œä¸ä¼šäº§ç”Ÿæ•°æ®ä¸ä¸€è‡´æˆ–å…¶ä»–éé¢„æœŸçš„ç»“æœã€‚</p><p><strong>å¹¶å‘ç¼–ç¨‹ä¸‰å¤§ç‰¹æ€§ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>å®šä¹‰</th><th>é—®é¢˜è¡¨ç°</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>åŸå­æ€§</td><td>æ“ä½œä¸å¯è¢«ä¸­æ–­ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸè¦ä¹ˆå…¨éƒ¨å¤±è´¥</td><td>æ•°æ®ä¸ä¸€è‡´</td><td>synchronizedã€CAS</td></tr><tr><td>å¯è§æ€§</td><td>ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹å…±äº«å˜é‡ï¼Œå…¶ä»–çº¿ç¨‹èƒ½ç«‹å³çœ‹åˆ°</td><td>è¯»å–åˆ°è¿‡æœŸæ•°æ®</td><td>volatileã€synchronized</td></tr><tr><td>æœ‰åºæ€§</td><td>ç¨‹åºæ‰§è¡Œé¡ºåºä¸ä»£ç é¡ºåºä¸€è‡´</td><td>æŒ‡ä»¤é‡æ’åºå¯¼è‡´é€»è¾‘é”™è¯¯</td><td>volatileã€synchronized</td></tr></tbody></table><h3 id="_5-synchronized-å…³é”®å­—çš„åŸç†-ä½¿ç”¨æ–¹å¼-é”å‡çº§è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_5-synchronized-å…³é”®å­—çš„åŸç†-ä½¿ç”¨æ–¹å¼-é”å‡çº§è¿‡ç¨‹"><span>5. synchronized å…³é”®å­—çš„åŸç†ï¼Ÿä½¿ç”¨æ–¹å¼ï¼Ÿé”å‡çº§è¿‡ç¨‹ï¼Ÿ</span></a></h3><p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p><ul><li><strong>ä¿®é¥°å®ä¾‹æ–¹æ³•</strong>ï¼šé”çš„æ˜¯å½“å‰å®ä¾‹å¯¹è±¡</li><li><strong>ä¿®é¥°é™æ€æ–¹æ³•</strong>ï¼šé”çš„æ˜¯Classå¯¹è±¡</li><li><strong>ä¿®é¥°ä»£ç å—</strong>ï¼šé”çš„æ˜¯æŒ‡å®šå¯¹è±¡</li></ul><p><strong>é”å‡çº§è¿‡ç¨‹ï¼ˆJDK1.6+ï¼‰ï¼š</strong></p><table><thead><tr><th>é”çŠ¶æ€</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th><th>æ€§èƒ½</th></tr></thead><tbody><tr><td>æ— é”</td><td>æ²¡æœ‰é”ç«äº‰</td><td>å•çº¿ç¨‹è®¿é—®</td><td>æœ€é«˜</td></tr><tr><td>åå‘é”</td><td>åå‘ç¬¬ä¸€ä¸ªè·å¾—é”çš„çº¿ç¨‹</td><td>åŸºæœ¬æ²¡æœ‰ç«äº‰</td><td>é«˜</td></tr><tr><td>è½»é‡çº§é”</td><td>CASè‡ªæ—‹è·å–é”</td><td>ç«äº‰ä¸æ¿€çƒˆï¼ŒæŒé”æ—¶é—´çŸ­</td><td>ä¸­ç­‰</td></tr><tr><td>é‡é‡çº§é”</td><td>æ“ä½œç³»ç»Ÿäº’æ–¥é”</td><td>ç«äº‰æ¿€çƒˆï¼ŒæŒé”æ—¶é—´é•¿</td><td>ä½</td></tr></tbody></table><p><strong>å‡çº§è·¯å¾„</strong>ï¼šæ— é” â†’ åå‘é” â†’ è½»é‡çº§é” â†’ é‡é‡çº§é”ï¼ˆä¸å¯é€†ï¼‰</p><h3 id="_6-volatile-å…³é”®å­—çš„è¯­ä¹‰-åŸç†-èƒ½ä¿è¯åŸå­æ€§å—-é€‚ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#_6-volatile-å…³é”®å­—çš„è¯­ä¹‰-åŸç†-èƒ½ä¿è¯åŸå­æ€§å—-é€‚ç”¨åœºæ™¯"><span>6. volatile å…³é”®å­—çš„è¯­ä¹‰ï¼ŸåŸç†ï¼Ÿèƒ½ä¿è¯åŸå­æ€§å—ï¼Ÿé€‚ç”¨åœºæ™¯ï¼Ÿ</span></a></h3><p><strong>volatileçš„ä¸¤å¤§è¯­ä¹‰ï¼š</strong></p><ol><li><strong>ä¿è¯å¯è§æ€§</strong>ï¼šä¿®æ”¹ç«‹å³åˆ·æ–°åˆ°ä¸»å†…å­˜ï¼Œè¯»å–ç›´æ¥ä»ä¸»å†…å­˜è¯»</li><li><strong>ä¿è¯æœ‰åºæ€§</strong>ï¼šç¦æ­¢æŒ‡ä»¤é‡æ’åº</li></ol><p><strong>å®ç°åŸç†ï¼š</strong></p><ul><li><strong>å†…å­˜å±éšœ</strong>ï¼šç¼–è¯‘å™¨åœ¨volatileå˜é‡å‰åæ’å…¥å†…å­˜å±éšœæŒ‡ä»¤</li><li><strong>ç¼“å­˜ä¸€è‡´æ€§åè®®</strong>ï¼šMESIåè®®ç¡®ä¿ç¼“å­˜ä¸€è‡´æ€§</li></ul><p><strong>ä¸èƒ½ä¿è¯åŸå­æ€§</strong>ï¼švolatileä¸èƒ½ä¿è¯å¤åˆæ“ä½œçš„åŸå­æ€§ï¼Œå¦‚ i++ æ“ä½œã€‚</p><table><thead><tr><th>ç‰¹æ€§</th><th>volatile</th><th>synchronized</th></tr></thead><tbody><tr><td>åŸå­æ€§</td><td>âŒ</td><td>âœ…</td></tr><tr><td>å¯è§æ€§</td><td>âœ…</td><td>âœ…</td></tr><tr><td>æœ‰åºæ€§</td><td>âœ…</td><td>âœ…</td></tr><tr><td>é˜»å¡æ€§</td><td>ä¸é˜»å¡</td><td>å¯èƒ½é˜»å¡</td></tr><tr><td>æ€§èƒ½</td><td>é«˜</td><td>ç›¸å¯¹è¾ƒä½</td></tr></tbody></table><p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>çŠ¶æ€æ ‡è®°ï¼ˆå¦‚åœæ­¢æ ‡å¿—ï¼‰</li><li>åŒé‡æ£€æŸ¥é”å®šæ¨¡å¼</li><li>å•ä¾‹æ¨¡å¼ä¸­çš„å®ä¾‹å˜é‡</li></ul><h3 id="_7-synchronized-å’Œ-volatile-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_7-synchronized-å’Œ-volatile-çš„åŒºåˆ«"><span>7. synchronized å’Œ volatile çš„åŒºåˆ«ï¼Ÿ</span></a></h3><table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>synchronized</th><th>volatile</th></tr></thead><tbody><tr><td>ä½œç”¨å¯¹è±¡</td><td>æ–¹æ³•ã€ä»£ç å—</td><td>å˜é‡</td></tr><tr><td>åŸå­æ€§</td><td>ä¿è¯</td><td>ä¸ä¿è¯</td></tr><tr><td>å¯è§æ€§</td><td>ä¿è¯</td><td>ä¿è¯</td></tr><tr><td>æœ‰åºæ€§</td><td>ä¿è¯</td><td>ä¿è¯</td></tr><tr><td>é˜»å¡ç‰¹æ€§</td><td>å¯èƒ½é˜»å¡</td><td>ä¸é˜»å¡</td></tr><tr><td>é”æœºåˆ¶</td><td>äº’æ–¥é”</td><td>æ— é”</td></tr><tr><td>æ€§èƒ½å¼€é”€</td><td>è¾ƒé«˜</td><td>è¾ƒä½</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å¤åˆæ“ä½œã€ä¸´ç•ŒåŒº</td><td>çŠ¶æ€æ ‡è®°ã€ç®€å•èµ‹å€¼</td></tr></tbody></table><h3 id="_8-cas-æ“ä½œçš„åŸç†-atomicç±»å®ç°-abaé—®é¢˜åŠè§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_8-cas-æ“ä½œçš„åŸç†-atomicç±»å®ç°-abaé—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"><span>8. CAS æ“ä½œçš„åŸç†ï¼ŸAtomicç±»å®ç°ï¼ŸABAé—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼Ÿ</span></a></h3><p><strong>CASï¼ˆCompare-And-Swapï¼‰åŸç†ï¼š</strong> æ¯”è¾ƒå†…å­˜ä½ç½®çš„å€¼ä¸æœŸæœ›å€¼ï¼Œå¦‚æœç›¸åŒåˆ™æ›´æ–°ä¸ºæ–°å€¼ï¼Œæ•´ä¸ªæ“ä½œæ˜¯åŸå­çš„ã€‚</p><p><strong>ä¸‰ä¸ªæ“ä½œæ•°ï¼š</strong></p><ul><li><strong>å†…å­˜ä½ç½®V</strong>ï¼šè¦æ›´æ–°çš„å˜é‡</li><li><strong>é¢„æœŸå€¼A</strong>ï¼šæœŸæœ›çš„å½“å‰å€¼</li><li><strong>æ–°å€¼B</strong>ï¼šè¦è®¾ç½®çš„æ–°å€¼</li></ul><p><strong>Atomicç±»å®ç°ï¼š</strong> åŸºäºCAS + volatileï¼Œé€šè¿‡æ— é”ç®—æ³•å®ç°çº¿ç¨‹å®‰å…¨ã€‚</p><p><strong>ABAé—®é¢˜ï¼š</strong> å€¼ä»Aå˜æˆBå†å˜å›Aï¼ŒCASæ£€æµ‹ä¸åˆ°ä¸­é—´çš„å˜åŒ–è¿‡ç¨‹ã€‚</p><table><thead><tr><th>é—®é¢˜</th><th>è¡¨ç°</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>ABAé—®é¢˜</td><td>å€¼å˜åŒ–ååˆå˜å›åŸå€¼ï¼ŒCASè¯¯åˆ¤ä¸ºæœªå˜åŒ–</td><td>AtomicStampedReference</td></tr><tr><td>æ€§èƒ½é—®é¢˜</td><td>é«˜ç«äº‰æ—¶è‡ªæ—‹æ¶ˆè€—CPU</td><td>ç»“åˆsynchronized</td></tr><tr><td>åªèƒ½ä¿è¯å•å˜é‡</td><td>å¤šä¸ªå˜é‡çš„åŸå­æ€§æ— æ³•ä¿è¯</td><td>AtomicReferenceåŒ…è£…å¯¹è±¡</td></tr></tbody></table><h3 id="_9-threadlocal-çš„åŸç†-ä½¿ç”¨åœºæ™¯-å†…å­˜æ³„æ¼é—®é¢˜åŠå¦‚ä½•é¿å…" tabindex="-1"><a class="header-anchor" href="#_9-threadlocal-çš„åŸç†-ä½¿ç”¨åœºæ™¯-å†…å­˜æ³„æ¼é—®é¢˜åŠå¦‚ä½•é¿å…"><span>9. ThreadLocal çš„åŸç†ï¼Ÿä½¿ç”¨åœºæ™¯ï¼Ÿå†…å­˜æ³„æ¼é—®é¢˜åŠå¦‚ä½•é¿å…ï¼Ÿ</span></a></h3><p><strong>åŸç†ï¼š</strong> æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªThreadLocalMapï¼Œä»¥ThreadLocalä¸ºkeyå­˜å‚¨çº¿ç¨‹ç§æœ‰æ•°æ®ã€‚</p><p><strong>æ•°æ®ç»“æ„ï¼š</strong> Thread â†’ ThreadLocalMap â†’ Entry(ThreadLocal, Value)</p><p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p><ul><li><strong>æ•°æ®åº“è¿æ¥ç®¡ç†</strong>ï¼šæ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹çš„è¿æ¥</li><li><strong>ç”¨æˆ·ä¼šè¯ä¿¡æ¯</strong>ï¼šWebè¯·æ±‚ä¸­çš„ç”¨æˆ·ä¿¡æ¯</li><li><strong>æ•°æ®æ ¼å¼åŒ–</strong>ï¼šSimpleDateFormatç­‰éçº¿ç¨‹å®‰å…¨ç±»</li></ul><p><strong>å†…å­˜æ³„æ¼é—®é¢˜ï¼š</strong></p><table><thead><tr><th>é—®é¢˜åŸå› </th><th>åæœ</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>ThreadLocalè¢«å›æ”¶</td><td>keyä¸ºnull</td><td>æ‰‹åŠ¨è°ƒç”¨remove()</td></tr><tr><td>çº¿ç¨‹é•¿æœŸå­˜æ´»</td><td>valueæ— æ³•å›æ”¶</td><td>ä½¿ç”¨å®Œæ¯•ç«‹å³remove()</td></tr><tr><td>å¼ºå¼•ç”¨é“¾</td><td>æ•´ä¸ªå¯¹è±¡æ— æ³•å›æ”¶</td><td>é¿å…åœ¨çº¿ç¨‹æ± ä¸­ä½¿ç”¨é™æ€ThreadLocal</td></tr></tbody></table><p><strong>æœ€ä½³å®è·µï¼š</strong></p><ol><li>ä½¿ç”¨å®Œæ¯•åç«‹å³è°ƒç”¨ <code>remove()</code></li><li>ä½¿ç”¨ <code>try-finally</code> ç¡®ä¿æ¸…ç†</li><li>é¿å…åœ¨çº¿ç¨‹æ± ä¸­ä½¿ç”¨é™æ€ThreadLocal</li></ol><h2 id="æ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#æ•°æ®åº“"><span>æ•°æ®åº“</span></a></h2><h3 id="_1-sqlåŸºç¡€è¯­æ³•-ddl-dml-dql-dcl-å¸¸ç”¨å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#_1-sqlåŸºç¡€è¯­æ³•-ddl-dml-dql-dcl-å¸¸ç”¨å‡½æ•°"><span>1. SQLåŸºç¡€è¯­æ³•ï¼ˆDDL, DML, DQL, DCLï¼‰ï¼Ÿå¸¸ç”¨å‡½æ•°ï¼Ÿ</span></a></h3><p><strong>SQLè¯­è¨€åˆ†ç±»ï¼š</strong></p><table><thead><tr><th>ç±»å‹</th><th>å…¨ç§°</th><th>ä½œç”¨</th><th>å¸¸ç”¨è¯­å¥</th></tr></thead><tbody><tr><td>DDL</td><td>Data Definition Language</td><td>æ•°æ®å®šä¹‰è¯­è¨€</td><td>CREATEã€ALTERã€DROP</td></tr><tr><td>DML</td><td>Data Manipulation Language</td><td>æ•°æ®æ“ä½œè¯­è¨€</td><td>INSERTã€UPDATEã€DELETE</td></tr><tr><td>DQL</td><td>Data Query Language</td><td>æ•°æ®æŸ¥è¯¢è¯­è¨€</td><td>SELECT</td></tr><tr><td>DCL</td><td>Data Control Language</td><td>æ•°æ®æ§åˆ¶è¯­è¨€</td><td>GRANTã€REVOKEã€COMMITã€ROLLBACK</td></tr></tbody></table><p><strong>å¸¸ç”¨å‡½æ•°åˆ†ç±»ï¼š</strong></p><table><thead><tr><th>å‡½æ•°ç±»å‹</th><th>å¸¸ç”¨å‡½æ•°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>èšåˆå‡½æ•°</td><td>COUNTã€SUMã€AVGã€MAXã€MIN</td><td>ç»Ÿè®¡è®¡ç®—</td></tr><tr><td>å­—ç¬¦ä¸²å‡½æ•°</td><td>CONCATã€SUBSTRINGã€LENGTHã€UPPERã€LOWER</td><td>å­—ç¬¦ä¸²å¤„ç†</td></tr><tr><td>æ—¥æœŸå‡½æ•°</td><td>NOWã€CURDATEã€DATE_FORMATã€DATEDIFF</td><td>æ—¥æœŸæ—¶é—´å¤„ç†</td></tr><tr><td>æ•°å­¦å‡½æ•°</td><td>ROUNDã€CEILã€FLOORã€ABSã€MOD</td><td>æ•°å€¼è®¡ç®—</td></tr><tr><td>æ¡ä»¶å‡½æ•°</td><td>IFã€CASE WHENã€IFNULLã€NULLIF</td><td>æ¡ä»¶åˆ¤æ–­</td></tr></tbody></table><h3 id="_2-mysqlæ ¸å¿ƒåŒºåˆ«-äº‹åŠ¡ã€é”ã€å¤–é”®ã€ç´¢å¼•ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_2-mysqlæ ¸å¿ƒåŒºåˆ«-äº‹åŠ¡ã€é”ã€å¤–é”®ã€ç´¢å¼•ç»“æ„"><span>2. MySQLæ ¸å¿ƒåŒºåˆ«ï¼ˆäº‹åŠ¡ã€é”ã€å¤–é”®ã€ç´¢å¼•ç»“æ„ï¼‰ï¼Ÿ</span></a></h3><p><strong>å­˜å‚¨å¼•æ“å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>InnoDB</th><th>MyISAM</th><th>Memory</th></tr></thead><tbody><tr><td>äº‹åŠ¡æ”¯æŒ</td><td>âœ…æ”¯æŒACID</td><td>âŒä¸æ”¯æŒ</td><td>âŒä¸æ”¯æŒ</td></tr><tr><td>é”çº§åˆ«</td><td>è¡Œçº§é”</td><td>è¡¨çº§é”</td><td>è¡¨çº§é”</td></tr><tr><td>å¤–é”®æ”¯æŒ</td><td>âœ…æ”¯æŒ</td><td>âŒä¸æ”¯æŒ</td><td>âŒä¸æ”¯æŒ</td></tr><tr><td>ç´¢å¼•ç»“æ„</td><td>B+æ ‘èšé›†ç´¢å¼•</td><td>B+æ ‘éèšé›†ç´¢å¼•</td><td>Hashç´¢å¼•</td></tr><tr><td>å´©æºƒæ¢å¤</td><td>âœ…æ”¯æŒ</td><td>âŒä¸æ”¯æŒ</td><td>âŒä¸æ”¯æŒ</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>äº‹åŠ¡å¤„ç†ã€é«˜å¹¶å‘å†™å…¥</td><td>åªè¯»ã€æ•°æ®ä»“åº“</td><td>ä¸´æ—¶è¡¨ã€ç¼“å­˜</td></tr></tbody></table><h3 id="_3-ç´¢å¼•-ä»€ä¹ˆæ˜¯ç´¢å¼•-ä¸ºä»€ä¹ˆèƒ½æé«˜æŸ¥è¯¢æ•ˆç‡-ç´¢å¼•çš„ä¼˜ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#_3-ç´¢å¼•-ä»€ä¹ˆæ˜¯ç´¢å¼•-ä¸ºä»€ä¹ˆèƒ½æé«˜æŸ¥è¯¢æ•ˆç‡-ç´¢å¼•çš„ä¼˜ç¼ºç‚¹"><span>3. ç´¢å¼•ï¼šä»€ä¹ˆæ˜¯ç´¢å¼•ï¼Ÿä¸ºä»€ä¹ˆèƒ½æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Ÿç´¢å¼•çš„ä¼˜ç¼ºç‚¹ï¼Ÿ</span></a></h3><p><strong>ç´¢å¼•å®šä¹‰ï¼š</strong> ç´¢å¼•æ˜¯æ•°æ®åº“è¡¨ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—çš„å€¼æ’åºçš„æ•°æ®ç»“æ„ï¼Œç±»ä¼¼ä¹¦çš„ç›®å½•ï¼Œç”¨äºå¿«é€Ÿå®šä½æ•°æ®ã€‚</p><p><strong>æé«˜æ•ˆç‡åŸç†ï¼š</strong></p><ul><li><strong>å‡å°‘æ‰«æè¡Œæ•°</strong>ï¼šä»å…¨è¡¨æ‰«æå˜ä¸ºç´¢å¼•æŸ¥æ‰¾</li><li><strong>æœ‰åºå­˜å‚¨</strong>ï¼šB+æ ‘ç»“æ„ä¿è¯æ•°æ®æœ‰åºï¼Œæ”¯æŒèŒƒå›´æŸ¥è¯¢</li><li><strong>å‡å°‘I/Oæ“ä½œ</strong>ï¼šç´¢å¼•é€šå¸¸æ¯”æ•°æ®å°ï¼Œèƒ½ç¼“å­˜åœ¨å†…å­˜ä¸­</li></ul><p><strong>ç´¢å¼•ä¼˜ç¼ºç‚¹ï¼š</strong></p><table><thead><tr><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>å¤§å¹…æé«˜æŸ¥è¯¢é€Ÿåº¦</td><td>å ç”¨é¢å¤–å­˜å‚¨ç©ºé—´</td></tr><tr><td>åŠ é€Ÿè¡¨è¿æ¥</td><td>é™ä½å†™æ“ä½œæ€§èƒ½ï¼ˆå¢åˆ æ”¹ï¼‰</td></tr><tr><td>å‡å°‘åˆ†ç»„å’Œæ’åºæ—¶é—´</td><td>ç»´æŠ¤ç´¢å¼•éœ€è¦é¢å¤–å¼€é”€</td></tr><tr><td>å”¯ä¸€ç´¢å¼•ä¿è¯æ•°æ®å”¯ä¸€æ€§</td><td>è¿‡å¤šç´¢å¼•å½±å“ä¼˜åŒ–å™¨é€‰æ‹©</td></tr></tbody></table><h3 id="_4-b-æ ‘ç´¢å¼•ç»“æ„-ä¸ºä»€ä¹ˆmysqlä½¿ç”¨b-æ ‘è€Œä¸æ˜¯bæ ‘æˆ–å“ˆå¸Œè¡¨" tabindex="-1"><a class="header-anchor" href="#_4-b-æ ‘ç´¢å¼•ç»“æ„-ä¸ºä»€ä¹ˆmysqlä½¿ç”¨b-æ ‘è€Œä¸æ˜¯bæ ‘æˆ–å“ˆå¸Œè¡¨"><span>4. B+æ ‘ç´¢å¼•ç»“æ„ï¼Ÿä¸ºä»€ä¹ˆMySQLä½¿ç”¨B+æ ‘è€Œä¸æ˜¯Bæ ‘æˆ–å“ˆå¸Œè¡¨ï¼Ÿ</span></a></h3><p><strong>B+æ ‘ç‰¹ç‚¹ï¼š</strong></p><ul><li><strong>æ‰€æœ‰æ•°æ®åœ¨å¶å­èŠ‚ç‚¹</strong>ï¼šéå¶å­èŠ‚ç‚¹åªå­˜å‚¨é”®å€¼</li><li><strong>å¶å­èŠ‚ç‚¹è¿æ¥</strong>ï¼šå¶å­èŠ‚ç‚¹é€šè¿‡æŒ‡é’ˆè¿æ¥ï¼Œæ”¯æŒèŒƒå›´æŸ¥è¯¢</li><li><strong>æ›´é«˜çš„æ‰‡å‡ºæ¯”</strong>ï¼šéå¶å­èŠ‚ç‚¹å¯å­˜å‚¨æ›´å¤šé”®å€¼</li></ul><p><strong>é€‰æ‹©B+æ ‘çš„åŸå› ï¼š</strong></p><table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>B+æ ‘</th><th>Bæ ‘</th><th>å“ˆå¸Œè¡¨</th></tr></thead><tbody><tr><td>èŒƒå›´æŸ¥è¯¢</td><td>âœ…ä¼˜ç§€</td><td>âŒè¾ƒå·®</td><td>âŒä¸æ”¯æŒ</td></tr><tr><td>é¡ºåºè®¿é—®</td><td>âœ…ä¼˜ç§€</td><td>âŒä¸€èˆ¬</td><td>âŒä¸æ”¯æŒ</td></tr><tr><td>ç£ç›˜I/O</td><td>âœ…å°‘</td><td>âŒå¤š</td><td>âœ…å°‘</td></tr><tr><td>å†…å­˜åˆ©ç”¨ç‡</td><td>âœ…é«˜</td><td>âŒä½</td><td>âœ…é«˜</td></tr><tr><td>ç­‰å€¼æŸ¥è¯¢</td><td>âœ…å¿«</td><td>âœ…å¿«</td><td>âœ…æœ€å¿«</td></tr><tr><td>æ•°æ®æœ‰åºæ€§</td><td>âœ…æœ‰åº</td><td>âœ…æœ‰åº</td><td>âŒæ— åº</td></tr></tbody></table><h3 id="_5-èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•çš„åŒºåˆ«-innodbçš„ä¸»é”®ç´¢å¼•ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_5-èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•çš„åŒºåˆ«-innodbçš„ä¸»é”®ç´¢å¼•ç»“æ„"><span>5. èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•çš„åŒºåˆ«ï¼ŸInnoDBçš„ä¸»é”®ç´¢å¼•ç»“æ„ï¼Ÿ</span></a></h3><p><strong>èšé›†ç´¢å¼• vs éèšé›†ç´¢å¼•ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>èšé›†ç´¢å¼•ï¼ˆä¸»é”®ç´¢å¼•ï¼‰</th><th>éèšé›†ç´¢å¼•ï¼ˆè¾…åŠ©ç´¢å¼•ï¼‰</th></tr></thead><tbody><tr><td>æ•°æ®å­˜å‚¨</td><td>å¶å­èŠ‚ç‚¹å­˜å‚¨å®Œæ•´è¡Œæ•°æ®</td><td>å¶å­èŠ‚ç‚¹å­˜å‚¨ä¸»é”®å€¼</td></tr><tr><td>æ•°æ®æ’åº</td><td>æ•°æ®æŒ‰ç´¢å¼•é”®ç‰©ç†æ’åº</td><td>æ•°æ®æ’åºä¸ç´¢å¼•æ— å…³</td></tr><tr><td>æŸ¥è¯¢æ€§èƒ½</td><td>ä¸€æ¬¡æŸ¥è¯¢è·å–æ‰€æœ‰æ•°æ®</td><td>å¯èƒ½éœ€è¦å›è¡¨æŸ¥è¯¢</td></tr><tr><td>æ¯è¡¨æ•°é‡</td><td>æœ€å¤šä¸€ä¸ª</td><td>å¯ä»¥æœ‰å¤šä¸ª</td></tr><tr><td>å­˜å‚¨å¼€é”€</td><td>æ— é¢å¤–å¼€é”€</td><td>éœ€è¦é¢å¤–å­˜å‚¨ç©ºé—´</td></tr></tbody></table><p><strong>InnoDBä¸»é”®ç´¢å¼•ç»“æ„ï¼š</strong></p><ul><li><strong>ä¸»é”®ç´¢å¼•</strong>ï¼šèšé›†ç´¢å¼•ï¼Œå¶å­èŠ‚ç‚¹å­˜å‚¨å®Œæ•´è¡Œæ•°æ®</li><li><strong>è¾…åŠ©ç´¢å¼•</strong>ï¼šéèšé›†ç´¢å¼•ï¼Œå¶å­èŠ‚ç‚¹å­˜å‚¨ä¸»é”®å€¼</li><li><strong>å›è¡¨æŸ¥è¯¢</strong>ï¼šé€šè¿‡è¾…åŠ©ç´¢å¼•æŸ¥è¯¢æ—¶ï¼Œéœ€è¦æ ¹æ®ä¸»é”®å€¼å†æŸ¥ä¸»é”®ç´¢å¼•</li></ul><h3 id="_6-ç´¢å¼•ç±»å‹åˆ†ç±»" tabindex="-1"><a class="header-anchor" href="#_6-ç´¢å¼•ç±»å‹åˆ†ç±»"><span>6. ç´¢å¼•ç±»å‹åˆ†ç±»ï¼Ÿ</span></a></h3><p><strong>æŒ‰åŠŸèƒ½åˆ†ç±»ï¼š</strong></p><table><thead><tr><th>ç´¢å¼•ç±»å‹</th><th>ç‰¹ç‚¹</th><th>ä½¿ç”¨åœºæ™¯</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>ä¸»é”®ç´¢å¼•</td><td>å”¯ä¸€+éç©ºï¼Œè‡ªåŠ¨åˆ›å»ºèšé›†ç´¢å¼•</td><td>ä¸»é”®å­—æ®µ</td><td>PRIMARY KEY</td></tr><tr><td>å”¯ä¸€ç´¢å¼•</td><td>å€¼å”¯ä¸€ï¼Œå…è®¸ä¸€ä¸ªNULL</td><td>èº«ä»½è¯å·ã€é‚®ç®±</td><td>UNIQUE</td></tr><tr><td>æ™®é€šç´¢å¼•</td><td>æ— å”¯ä¸€æ€§é™åˆ¶ï¼Œæé«˜æŸ¥è¯¢é€Ÿåº¦</td><td>æŸ¥è¯¢é¢‘ç¹çš„å­—æ®µ</td><td>INDEX</td></tr><tr><td>ç»„åˆç´¢å¼•</td><td>å¤šåˆ—è”åˆç´¢å¼•ï¼Œéµå¾ªæœ€å·¦å‰ç¼€åŸåˆ™</td><td>å¤šæ¡ä»¶æŸ¥è¯¢</td><td>(name, age, city)</td></tr><tr><td>å…¨æ–‡ç´¢å¼•</td><td>æ–‡æœ¬å…³é”®è¯æœç´¢</td><td>æ–‡ç« å†…å®¹æœç´¢</td><td>FULLTEXT</td></tr></tbody></table><h3 id="_7-ç´¢å¼•å¤±æ•ˆçš„å¸¸è§åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#_7-ç´¢å¼•å¤±æ•ˆçš„å¸¸è§åœºæ™¯"><span>7. ç´¢å¼•å¤±æ•ˆçš„å¸¸è§åœºæ™¯ï¼Ÿ</span></a></h3><p><strong>ç´¢å¼•å¤±æ•ˆæƒ…å†µï¼š</strong></p><table><thead><tr><th>å¤±æ•ˆåœºæ™¯</th><th>ç¤ºä¾‹</th><th>åŸå› </th></tr></thead><tbody><tr><td>å‡½æ•°æ“ä½œ</td><td>WHERE YEAR(date) = 2023</td><td>å¯¹ç´¢å¼•åˆ—ä½¿ç”¨å‡½æ•°</td></tr><tr><td>éšå¼ç±»å‹è½¬æ¢</td><td>WHERE age = &#39;18&#39;</td><td>æ•°æ®ç±»å‹ä¸åŒ¹é…</td></tr><tr><td>LIKEä»¥%å¼€å¤´</td><td>WHERE name LIKE &#39;%å¼ &#39;</td><td>æ— æ³•åˆ©ç”¨ç´¢å¼•çš„æœ‰åºæ€§</td></tr><tr><td>ORæ¡ä»¶</td><td>WHERE a = 1 OR b = 2</td><td>å…¶ä¸­ä¸€ä¸ªæ¡ä»¶æ²¡æœ‰ç´¢å¼•</td></tr><tr><td>ç»„åˆç´¢å¼•ä¸æ»¡è¶³æœ€å·¦å‰ç¼€</td><td>INDEX(a,b,c) WHERE b = 1</td><td>è¿åæœ€å·¦å‰ç¼€åŸåˆ™</td></tr><tr><td>ä¸ç­‰äºæ“ä½œ</td><td>WHERE age != 18</td><td>èŒƒå›´å¤ªå¤§ï¼Œä¼˜åŒ–å™¨é€‰æ‹©å…¨è¡¨æ‰«æ</td></tr><tr><td>IS NULLåˆ¤æ–­</td><td>WHERE name IS NULL</td><td>NULLå€¼ä¸å­˜å‚¨åœ¨ç´¢å¼•ä¸­</td></tr></tbody></table><h3 id="_8-explainå‘½ä»¤çš„ä½œç”¨-å…³é”®å­—æ®µçš„å«ä¹‰" tabindex="-1"><a class="header-anchor" href="#_8-explainå‘½ä»¤çš„ä½œç”¨-å…³é”®å­—æ®µçš„å«ä¹‰"><span>8. EXPLAINå‘½ä»¤çš„ä½œç”¨ï¼Ÿå…³é”®å­—æ®µçš„å«ä¹‰ï¼Ÿ</span></a></h3><p><strong>EXPLAINä½œç”¨ï¼š</strong> åˆ†æSQLè¯­å¥æ‰§è¡Œè®¡åˆ’ï¼Œå¸®åŠ©ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ã€‚</p><p><strong>å…³é”®å­—æ®µå«ä¹‰ï¼š</strong></p><table><thead><tr><th>å­—æ®µ</th><th>å«ä¹‰</th><th>é‡è¦å€¼</th></tr></thead><tbody><tr><td>type</td><td>è®¿é—®ç±»å‹</td><td>system &gt; const &gt; eq_ref &gt; ref &gt; range &gt; index &gt; ALL</td></tr><tr><td>key</td><td>å®é™…ä½¿ç”¨çš„ç´¢å¼•</td><td>NULLè¡¨ç¤ºæœªä½¿ç”¨ç´¢å¼•</td></tr><tr><td>rows</td><td>é¢„ä¼°æ‰«æè¡Œæ•°</td><td>æ•°å€¼è¶Šå°è¶Šå¥½</td></tr><tr><td>Extra</td><td>é¢å¤–ä¿¡æ¯</td><td>Using index &gt; Using where &gt; Using filesort</td></tr></tbody></table><p><strong>typeå­—æ®µè¯¦è§£ï¼š</strong></p><table><thead><tr><th>typeå€¼</th><th>æ€§èƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>system</td><td>æœ€ä¼˜</td><td>è¡¨åªæœ‰ä¸€è¡Œ</td></tr><tr><td>const</td><td>ä¼˜</td><td>ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•ç­‰å€¼æŸ¥è¯¢</td></tr><tr><td>eq_ref</td><td>ä¼˜</td><td>ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•å…³è”</td></tr><tr><td>ref</td><td>è‰¯</td><td>éå”¯ä¸€ç´¢å¼•ç­‰å€¼æŸ¥è¯¢</td></tr><tr><td>range</td><td>ä¸­</td><td>èŒƒå›´æŸ¥è¯¢</td></tr><tr><td>index</td><td>å·®</td><td>ç´¢å¼•å…¨æ‰«æ</td></tr><tr><td>ALL</td><td>æœ€å·®</td><td>å…¨è¡¨æ‰«æ</td></tr></tbody></table><h3 id="_9-é”-innodbçš„è¡Œé”ã€é—´éš™é”ã€ä¸´é”®é”-mvccçš„åŸç†-å¦‚ä½•è§£å†³å¹»è¯»" tabindex="-1"><a class="header-anchor" href="#_9-é”-innodbçš„è¡Œé”ã€é—´éš™é”ã€ä¸´é”®é”-mvccçš„åŸç†-å¦‚ä½•è§£å†³å¹»è¯»"><span>9. é”ï¼šInnoDBçš„è¡Œé”ã€é—´éš™é”ã€ä¸´é”®é”ï¼ŸMVCCçš„åŸç†ï¼Ÿå¦‚ä½•è§£å†³å¹»è¯»ï¼Ÿ</span></a></h3><p><strong>InnoDBé”ç±»å‹ï¼š</strong></p><table><thead><tr><th>é”ç±»å‹</th><th>é”èŒƒå›´</th><th>ä½œç”¨</th><th>ç¤ºä¾‹åœºæ™¯</th></tr></thead><tbody><tr><td>è¡Œé”</td><td>é”å®šå…·ä½“çš„è¡Œ</td><td>é˜²æ­¢å¹¶å‘ä¿®æ”¹åŒä¸€è¡Œæ•°æ®</td><td>UPDATEå…·ä½“è®°å½•</td></tr><tr><td>é—´éš™é”</td><td>é”å®šç´¢å¼•è®°å½•ä¹‹é—´çš„é—´éš™</td><td>é˜²æ­¢åœ¨é—´éš™ä¸­æ’å…¥æ–°è®°å½•</td><td>é˜²æ­¢å¹»è¯»</td></tr><tr><td>ä¸´é”®é”</td><td>è¡Œé”+é—´éš™é”çš„ç»„åˆ</td><td>æ—¢é”è®°å½•åˆé”é—´éš™</td><td>èŒƒå›´æŸ¥è¯¢æ—¶ä½¿ç”¨</td></tr><tr><td>æ„å‘é”</td><td>è¡¨çº§é”ï¼Œè¡¨ç¤ºäº‹åŠ¡çš„åŠ é”æ„å›¾</td><td>æé«˜è¡¨é”æ£€æµ‹æ•ˆç‡</td><td>åŠ è¡Œé”æ—¶è‡ªåŠ¨åŠ æ„å‘é”</td></tr></tbody></table><p><strong>MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰åŸç†ï¼š</strong></p><ul><li><strong>ç‰ˆæœ¬é“¾</strong>ï¼šæ¯è¡Œè®°å½•ç»´æŠ¤å¤šä¸ªç‰ˆæœ¬</li><li><strong>ReadView</strong>ï¼šäº‹åŠ¡å¼€å§‹æ—¶åˆ›å»ºçš„ä¸€è‡´æ€§è§†å›¾</li><li><strong>undo log</strong>ï¼šå­˜å‚¨å†å²ç‰ˆæœ¬æ•°æ®</li><li><strong>å®ç°éš”ç¦»</strong>ï¼šä¸åŒäº‹åŠ¡çœ‹åˆ°ä¸åŒç‰ˆæœ¬çš„æ•°æ®</li></ul><p><strong>è§£å†³å¹»è¯»ï¼š</strong></p><ul><li><strong>å¿«ç…§è¯»</strong>ï¼šé€šè¿‡MVCCï¼Œè¯»å–äº‹åŠ¡å¼€å§‹æ—¶çš„æ•°æ®å¿«ç…§ <ul><li>å¿«ç…§è¯»ï¼šé»˜è®¤çš„ SELECT æŸ¥è¯¢ï¼Œåœ¨äº‹åŠ¡é‡Œè¯»çš„æ˜¯äº‹åŠ¡å¼€å§‹æ—¶çš„å¿«ç…§ï¼Œä¸ä¼šåŠ é”ï¼Œä¹Ÿä¸ä¼šè¢«å…¶ä»–äº‹åŠ¡å½±å“ã€‚</li></ul></li><li><strong>å½“å‰è¯»</strong>ï¼šé€šè¿‡ä¸´é”®é”ï¼Œé”å®šæŸ¥è¯¢èŒƒå›´é˜²æ­¢æ’å…¥æ–°æ•°æ® <ul><li>å½“å‰è¯»ï¼šä¼šåŠ é”é˜²æ­¢åˆ«çš„äº‹åŠ¡æ’å…¥/æ›´æ–°ä½ æ­£åœ¨çœ‹çš„èŒƒå›´ï¼Œç”¨æ¥ä¿è¯ä¸€è‡´æ€§æˆ–åšæ›´æ–°ã€‚</li></ul></li></ul><h3 id="_10-äº‹åŠ¡éš”ç¦»çº§åˆ«-mysqlé»˜è®¤çº§åˆ«-ä¸åŒçº§åˆ«è§£å†³çš„é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_10-äº‹åŠ¡éš”ç¦»çº§åˆ«-mysqlé»˜è®¤çº§åˆ«-ä¸åŒçº§åˆ«è§£å†³çš„é—®é¢˜"><span>10. äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼ŸMySQLé»˜è®¤çº§åˆ«ï¼Ÿä¸åŒçº§åˆ«è§£å†³çš„é—®é¢˜ï¼Ÿ</span></a></h3><p><strong>å››å¤§éš”ç¦»çº§åˆ«ï¼š</strong></p><table><thead><tr><th>éš”ç¦»çº§åˆ«</th><th>è„è¯»</th><th>ä¸å¯é‡å¤è¯»</th><th>å¹»è¯»</th><th>å®ç°æ–¹å¼</th><th>æ€§èƒ½</th></tr></thead><tbody><tr><td>è¯»æœªæäº¤ï¼ˆREAD UNCOMMITTEDï¼‰</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>æ— é”</td><td>æœ€é«˜</td></tr><tr><td>è¯»å·²æäº¤ï¼ˆREAD COMMITTEDï¼‰</td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>è¡Œé”+MVCC</td><td>é«˜</td></tr><tr><td>å¯é‡å¤è¯»ï¼ˆREPEATABLE READï¼‰</td><td>âœ…</td><td>âœ…</td><td>éƒ¨åˆ†è§£å†³</td><td>ä¸´é”®é”+MVCC</td><td>ä¸­</td></tr><tr><td>ä¸²è¡ŒåŒ–ï¼ˆSERIALIZABLEï¼‰</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>è¡¨é”</td><td>ä½</td></tr></tbody></table><p>**MySQLé»˜è®¤éš”ç¦»çº§åˆ«ï¼š**å¯é‡å¤è¯»ï¼ˆREPEATABLE READï¼‰</p><p><strong>é—®é¢˜è¯´æ˜ï¼š</strong></p><ul><li><strong>è„è¯»</strong>ï¼šè¯»åˆ°å…¶ä»–äº‹åŠ¡æœªæäº¤çš„æ•°æ®</li><li><strong>ä¸å¯é‡å¤è¯»</strong>ï¼šåŒä¸€äº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ç»“æœä¸åŒ</li><li><strong>å¹»è¯»</strong>ï¼šåŒä¸€äº‹åŠ¡ä¸­å¤šæ¬¡æŸ¥è¯¢è®°å½•æ•°é‡ä¸åŒ</li></ul><h3 id="_11-å¦‚ä½•ä¼˜åŒ–æ…¢æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#_11-å¦‚ä½•ä¼˜åŒ–æ…¢æŸ¥è¯¢"><span>11. å¦‚ä½•ä¼˜åŒ–æ…¢æŸ¥è¯¢ï¼Ÿ</span></a></h3><p><strong>ä¼˜åŒ–ç­–ç•¥ï¼š</strong></p><table><thead><tr><th>ä¼˜åŒ–æ–¹å‘</th><th>å…·ä½“æ–¹æ³•</th><th>æ•ˆæœè¯„ä¼°</th></tr></thead><tbody><tr><td>ç´¢å¼•ä¼˜åŒ–</td><td>æ·»åŠ åˆé€‚ç´¢å¼•ã€ä¼˜åŒ–ç´¢å¼•ä½¿ç”¨</td><td>â­â­â­â­â­</td></tr><tr><td>SQLè¯­å¥ä¼˜åŒ–</td><td>é¿å…SELECT *ã€å‡å°‘å­æŸ¥è¯¢</td><td>â­â­â­â­</td></tr><tr><td>åˆ†åº“åˆ†è¡¨</td><td>æ°´å¹³/å‚ç›´åˆ†å‰²å‡å°‘å•è¡¨æ•°æ®é‡</td><td>â­â­â­â­â­</td></tr><tr><td>è¯»å†™åˆ†ç¦»</td><td>ä¸»åº“å†™ã€ä»åº“è¯»ï¼Œå‡å°‘ä¸»åº“å‹åŠ›</td><td>â­â­â­â­</td></tr></tbody></table><p><strong>å…·ä½“ä¼˜åŒ–æ‰‹æ®µï¼š</strong></p><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æ·»åŠ ç´¢å¼•</td><td>ä¸ºWHEREã€ORDER BYå­—æ®µæ·»åŠ ç´¢å¼•</td><td>æŸ¥è¯¢é¢‘ç¹çš„å­—æ®µ</td></tr><tr><td>ä¼˜åŒ–JOIN</td><td>ä½¿ç”¨å°è¡¨é©±åŠ¨å¤§è¡¨</td><td>å¤šè¡¨å…³è”æŸ¥è¯¢</td></tr><tr><td>é¿å…å‡½æ•°è®¡ç®—</td><td>ä¸åœ¨WHEREæ¡ä»¶ä¸­ä½¿ç”¨å‡½æ•°</td><td>æ‰€æœ‰æŸ¥è¯¢</td></tr><tr><td>åˆ†é¡µä¼˜åŒ–</td><td>ä½¿ç”¨ç´¢å¼•+åç§»é‡ä»£æ›¿LIMITå¤§åç§»</td><td>æ·±åº¦åˆ†é¡µæŸ¥è¯¢</td></tr><tr><td>å‚ç›´åˆ†è¡¨</td><td>å°†å¤§å­—æ®µæ‹†åˆ†åˆ°ç‹¬ç«‹è¡¨</td><td>è¡¨å­—æ®µè¿‡å¤š</td></tr><tr><td>æ°´å¹³åˆ†è¡¨</td><td>æŒ‰è§„åˆ™å°†æ•°æ®åˆ†æ•£åˆ°å¤šä¸ªè¡¨</td><td>å•è¡¨æ•°æ®é‡è¿‡å¤§</td></tr><tr><td>ä½¿ç”¨ç¼“å­˜</td><td>Redisç¼“å­˜çƒ­ç‚¹æ•°æ®</td><td>è¯»å¤šå†™å°‘åœºæ™¯</td></tr><tr><td>è¿æ¥æ± ä¼˜åŒ–</td><td>åˆç†è®¾ç½®è¿æ¥æ± å‚æ•°</td><td>é«˜å¹¶å‘åœºæ™¯</td></tr></tbody></table><h2 id="redis" tabindex="-1"><a class="header-anchor" href="#redis"><span>Redis</span></a></h2><h3 id="_1-redisæ˜¯ä»€ä¹ˆ-å¸¸ç”¨æ•°æ®ç±»å‹åŠå…¶åº•å±‚å®ç°å’Œå…¸å‹åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#_1-redisæ˜¯ä»€ä¹ˆ-å¸¸ç”¨æ•°æ®ç±»å‹åŠå…¶åº•å±‚å®ç°å’Œå…¸å‹åº”ç”¨åœºæ™¯"><span>1. Redisæ˜¯ä»€ä¹ˆï¼Ÿå¸¸ç”¨æ•°æ®ç±»å‹åŠå…¶åº•å±‚å®ç°å’Œå…¸å‹åº”ç”¨åœºæ™¯ï¼Ÿ</span></a></h3><p><strong>Rediså®šä¹‰ï¼š</strong> Redisæ˜¯ä¸€ä¸ªå¼€æºçš„å†…å­˜æ•°æ®ç»“æ„å­˜å‚¨ç³»ç»Ÿï¼Œå¯ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä»£ç†ã€‚</p><p><strong>å¸¸ç”¨æ•°æ®ç±»å‹ï¼š</strong></p><table><thead><tr><th>æ•°æ®ç±»å‹</th><th>åº•å±‚å®ç°</th><th>å…¸å‹åº”ç”¨åœºæ™¯</th><th>å¸¸ç”¨å‘½ä»¤</th></tr></thead><tbody><tr><td>String</td><td>SDSï¼ˆç®€å•åŠ¨æ€å­—ç¬¦ä¸²ï¼‰</td><td>ç¼“å­˜ã€è®¡æ•°å™¨ã€åˆ†å¸ƒå¼é”</td><td>SETã€GETã€INCR</td></tr><tr><td>Hash</td><td>å‹ç¼©åˆ—è¡¨/å“ˆå¸Œè¡¨</td><td>ç”¨æˆ·ä¿¡æ¯ã€å•†å“ä¿¡æ¯</td><td>HSETã€HGETã€HMGET</td></tr><tr><td>List</td><td>å‹ç¼©åˆ—è¡¨/åŒå‘é“¾è¡¨</td><td>æ¶ˆæ¯é˜Ÿåˆ—ã€æœ€æ–°æ¶ˆæ¯åˆ—è¡¨</td><td>LPUSHã€RPOPã€LRANGE</td></tr><tr><td>Set</td><td>æ•´æ•°é›†åˆ/å“ˆå¸Œè¡¨</td><td>æ ‡ç­¾ã€å¥½å‹å…³ç³»ã€å”¯ä¸€æ€§ç»Ÿè®¡</td><td>SADDã€SMEMBERSã€SINTER</td></tr><tr><td>Sorted Set</td><td>å‹ç¼©åˆ—è¡¨/è·³è·ƒè¡¨</td><td>æ’è¡Œæ¦œã€å»¶æ—¶é˜Ÿåˆ—</td><td>ZADDã€ZRANGEã€ZRANK</td></tr><tr><td>HyperLogLog</td><td>åŸºæ•°ä¼°ç®—ç®—æ³•</td><td>UVç»Ÿè®¡ã€ç‹¬ç«‹è®¿å®¢ç»Ÿè®¡</td><td>PFADDã€PFCOUNT</td></tr><tr><td>Bitmap</td><td>ä½æ•°ç»„</td><td>ç”¨æˆ·ç­¾åˆ°ã€åœ¨çº¿çŠ¶æ€</td><td>SETBITã€GETBITã€BITCOUNT</td></tr><tr><td>Geospatial</td><td>Sorted Set + GeoHash</td><td>åœ°ç†ä½ç½®ã€é™„è¿‘çš„äºº</td><td>GEOADDã€GEORADIUS</td></tr><tr><td>Stream</td><td>Radix Tree + Listpack</td><td>æ¶ˆæ¯æµã€æ—¥å¿—æ”¶é›†</td><td>XADDã€XREADã€XGROUP</td></tr></tbody></table><h3 id="_2-redisä¸ºä»€ä¹ˆå¿«" tabindex="-1"><a class="header-anchor" href="#_2-redisä¸ºä»€ä¹ˆå¿«"><span>2. Redisä¸ºä»€ä¹ˆå¿«ï¼Ÿ</span></a></h3><p><strong>æ€§èƒ½ä¼˜åŠ¿åˆ†æï¼š</strong></p><table><thead><tr><th>ä¼˜åŠ¿</th><th>å…·ä½“è¡¨ç°</th><th>æ€§èƒ½å½±å“</th></tr></thead><tbody><tr><td>å†…å­˜å­˜å‚¨</td><td>æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œé¿å…ç£ç›˜I/O</td><td>â­â­â­â­â­</td></tr><tr><td>å•çº¿ç¨‹æ¨¡å‹</td><td>é¿å…çº¿ç¨‹åˆ‡æ¢å’Œé”ç«äº‰å¼€é”€</td><td>â­â­â­â­</td></tr><tr><td>I/Oå¤šè·¯å¤ç”¨</td><td>epollæœºåˆ¶å¤„ç†å¹¶å‘è¿æ¥</td><td>â­â­â­â­</td></tr><tr><td>é«˜æ•ˆæ•°æ®ç»“æ„</td><td>é’ˆå¯¹ä¸åŒåœºæ™¯ä¼˜åŒ–çš„æ•°æ®ç»“æ„</td><td>â­â­â­</td></tr><tr><td>ç®€å•åè®®</td><td>RESPåè®®ç®€å•ï¼Œè§£æå¼€é”€å°</td><td>â­â­â­</td></tr></tbody></table><p><strong>æ ¸å¿ƒåŸå› ï¼š</strong></p><ul><li><strong>çº¯å†…å­˜æ“ä½œ</strong>ï¼šé¿å…ç£ç›˜I/Oï¼Œé€Ÿåº¦å¿«10000å€</li><li><strong>å•çº¿ç¨‹é¿å…ç«äº‰</strong>ï¼šæ— é”è®¾è®¡ï¼Œå‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢</li><li><strong>éé˜»å¡I/O</strong>ï¼šé«˜æ•ˆå¤„ç†å¤§é‡å¹¶å‘è¿æ¥</li></ul><h3 id="_3-redisçš„æŒä¹…åŒ–æœºåˆ¶-ä¼˜ç¼ºç‚¹-å¦‚ä½•é€‰æ‹©" tabindex="-1"><a class="header-anchor" href="#_3-redisçš„æŒä¹…åŒ–æœºåˆ¶-ä¼˜ç¼ºç‚¹-å¦‚ä½•é€‰æ‹©"><span>3. Redisçš„æŒä¹…åŒ–æœºåˆ¶ï¼Ÿä¼˜ç¼ºç‚¹ï¼Ÿå¦‚ä½•é€‰æ‹©ï¼Ÿ</span></a></h3><p><strong>ä¸¤ç§æŒä¹…åŒ–æ–¹å¼ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>RDBå¿«ç…§</th><th>AOFæ—¥å¿—</th></tr></thead><tbody><tr><td>æŒä¹…åŒ–æ–¹å¼</td><td>å®šæœŸç”Ÿæˆæ•°æ®å¿«ç…§</td><td>è®°å½•æ¯ä¸ªå†™æ“ä½œå‘½ä»¤</td></tr><tr><td>æ–‡ä»¶å¤§å°</td><td>ç´§å‡‘ï¼Œæ–‡ä»¶å°</td><td>è¾ƒå¤§ï¼ŒåŒ…å«æ‰€æœ‰æ“ä½œ</td></tr><tr><td>æ¢å¤é€Ÿåº¦</td><td>å¿«</td><td>æ…¢</td></tr><tr><td>æ•°æ®å®Œæ•´æ€§</td><td>å¯èƒ½ä¸¢å¤±æœ€åä¸€æ¬¡å¿«ç…§åçš„æ•°æ®</td><td>æ ¹æ®åŒæ­¥ç­–ç•¥ï¼Œä¸¢å¤±è¾ƒå°‘</td></tr><tr><td>æ€§èƒ½å½±å“</td><td>forkå­è¿›ç¨‹æ—¶æœ‰çŸ­æš‚é˜»å¡</td><td>æŒç»­å†™å…¥ï¼Œå½±å“ç›¸å¯¹è¾ƒå°</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å¯¹æ•°æ®ä¸¢å¤±ä¸æ•æ„Ÿçš„åœºæ™¯</td><td>å¯¹æ•°æ®å®Œæ•´æ€§è¦æ±‚é«˜çš„åœºæ™¯</td></tr></tbody></table><p><strong>é€‰æ‹©ç­–ç•¥ï¼š</strong></p><table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>åŸå› </th></tr></thead><tbody><tr><td>ç¼“å­˜åœºæ™¯</td><td>ä»…RDB</td><td>æ•°æ®å¯é‡æ–°è®¡ç®—ï¼Œæ€§èƒ½ä¼˜å…ˆ</td></tr><tr><td>é‡è¦æ•°æ®å­˜å‚¨</td><td>RDB + AOF</td><td>åŒé‡ä¿éšœï¼Œç¡®ä¿æ•°æ®å®‰å…¨</td></tr><tr><td>é«˜å†™å…¥é‡åœºæ™¯</td><td>ä»…RDB</td><td>é¿å…AOFå†™å…¥å½±å“æ€§èƒ½</td></tr><tr><td>æ•°æ®å®Œæ•´æ€§è¦æ±‚æé«˜çš„åœºæ™¯</td><td>AOF</td><td>æœ€å¤§ç¨‹åº¦ä¿è¯æ•°æ®ä¸ä¸¢å¤±</td></tr></tbody></table><h3 id="_4-redisçš„è¿‡æœŸé”®åˆ é™¤ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_4-redisçš„è¿‡æœŸé”®åˆ é™¤ç­–ç•¥"><span>4. Redisçš„è¿‡æœŸé”®åˆ é™¤ç­–ç•¥ï¼Ÿ</span></a></h3><p><strong>ä¸‰ç§åˆ é™¤ç­–ç•¥ï¼š</strong></p><table><thead><tr><th>ç­–ç•¥</th><th>è§¦å‘æ—¶æœº</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>CPUæ¶ˆè€—</th><th>å†…å­˜æ¶ˆè€—</th></tr></thead><tbody><tr><td>å®šæ—¶åˆ é™¤</td><td>è®¾ç½®å®šæ—¶å™¨</td><td>å†…å­˜å‹å¥½</td><td>CPUæ¶ˆè€—å¤§</td><td>é«˜</td><td>ä½</td></tr><tr><td>æƒ°æ€§åˆ é™¤</td><td>è®¿é—®æ—¶æ£€æŸ¥</td><td>CPUå‹å¥½</td><td>å†…å­˜ä¸å‹å¥½</td><td>ä½</td><td>é«˜</td></tr><tr><td>å®šæœŸåˆ é™¤</td><td>å®šæœŸéšæœºæŠ½æŸ¥</td><td>å¹³è¡¡CPUå’Œå†…å­˜</td><td>å¯èƒ½æœ‰æ¼ç½‘ä¹‹é±¼</td><td>ä¸­</td><td>ä¸­</td></tr></tbody></table><p><strong>Rediså®é™…ç­–ç•¥ï¼š</strong> æƒ°æ€§åˆ é™¤ + å®šæœŸåˆ é™¤çš„ç»„åˆæ–¹å¼</p><h3 id="_5-å†…å­˜æ·˜æ±°ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_5-å†…å­˜æ·˜æ±°ç­–ç•¥"><span>5. å†…å­˜æ·˜æ±°ç­–ç•¥ï¼Ÿ</span></a></h3><p><strong>8ç§æ·˜æ±°ç­–ç•¥ï¼š</strong></p><table><thead><tr><th>ç­–ç•¥</th><th>ä½œç”¨èŒƒå›´</th><th>æ·˜æ±°ç®—æ³•</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>noeviction</td><td>æ— </td><td>ä¸æ·˜æ±°</td><td>å†…å­˜è¶³å¤Ÿï¼Œä¸å¸Œæœ›æ•°æ®ä¸¢å¤±</td></tr><tr><td>allkeys-lru</td><td>æ‰€æœ‰key</td><td>LRUæœ€è¿‘æœ€å°‘ä½¿ç”¨</td><td>é€šç”¨ç¼“å­˜ï¼Œè®¿é—®æœ‰çƒ­ç‚¹</td></tr><tr><td>volatile-lru</td><td>æœ‰è¿‡æœŸæ—¶é—´çš„key</td><td>LRU</td><td>åªæ·˜æ±°ä¸´æ—¶æ•°æ®</td></tr><tr><td>allkeys-random</td><td>æ‰€æœ‰key</td><td>éšæœº</td><td>è®¿é—®æ¨¡å¼å‡åŒ€</td></tr><tr><td>volatile-random</td><td>æœ‰è¿‡æœŸæ—¶é—´çš„key</td><td>éšæœº</td><td>ä¸´æ—¶æ•°æ®è®¿é—®å‡åŒ€</td></tr><tr><td>volatile-ttl</td><td>æœ‰è¿‡æœŸæ—¶é—´çš„key</td><td>TTLæœ€çŸ­ä¼˜å…ˆ</td><td>å¸Œæœ›å¿«åˆ°æœŸçš„æ•°æ®å…ˆåˆ é™¤</td></tr><tr><td>allkeys-lfu</td><td>æ‰€æœ‰key</td><td>LFUæœ€å°‘ä½¿ç”¨é¢‘ç‡</td><td>è®¿é—®é¢‘ç‡å·®å¼‚æ˜æ˜¾</td></tr><tr><td>volatile-lfu</td><td>æœ‰è¿‡æœŸæ—¶é—´çš„key</td><td>LFU</td><td>ä¸´æ—¶æ•°æ®è®¿é—®é¢‘ç‡å·®å¼‚æ˜æ˜¾</td></tr></tbody></table><p><strong>æ¨èé€‰æ‹©ï¼š</strong></p><ul><li><strong>é€šç”¨åœºæ™¯</strong>ï¼šallkeys-lruï¼ˆæœ€å¸¸ç”¨ï¼‰</li><li><strong>åªç¼“å­˜åœºæ™¯</strong>ï¼švolatile-lru</li><li><strong>æ··åˆæ•°æ®</strong>ï¼švolatile-ttl</li></ul><h3 id="_6-å¦‚ä½•ä¿è¯redisçš„é«˜å¯ç”¨-redis-clusterçš„æ§½åˆ†é…åŸç†" tabindex="-1"><a class="header-anchor" href="#_6-å¦‚ä½•ä¿è¯redisçš„é«˜å¯ç”¨-redis-clusterçš„æ§½åˆ†é…åŸç†"><span>6. å¦‚ä½•ä¿è¯Redisçš„é«˜å¯ç”¨ï¼ŸRedis Clusterçš„æ§½åˆ†é…åŸç†ï¼Ÿ</span></a></h3><p><strong>é«˜å¯ç”¨æ–¹æ¡ˆï¼š</strong></p><table><thead><tr><th>æ–¹æ¡ˆ</th><th>ç‰¹ç‚¹</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ä¸»ä»å¤åˆ¶</td><td>ä¸€ä¸»å¤šä»ï¼Œè¯»å†™åˆ†ç¦»</td><td>ç®€å•ï¼Œè¯»æ€§èƒ½å¥½</td><td>ä¸»èŠ‚ç‚¹å•ç‚¹æ•…éšœ</td><td>è¯»å¤šå†™å°‘</td></tr><tr><td>å“¨å…µæ¨¡å¼</td><td>è‡ªåŠ¨æ•…éšœè½¬ç§»</td><td>é«˜å¯ç”¨ï¼Œè‡ªåŠ¨åˆ‡æ¢</td><td>é…ç½®å¤æ‚</td><td>ä¸­å°å‹åº”ç”¨</td></tr><tr><td>Redis Cluster</td><td>åˆ†å¸ƒå¼ï¼Œæ— ä¸­å¿ƒèŠ‚ç‚¹</td><td>é«˜å¯ç”¨+é«˜æ€§èƒ½</td><td>è¿ç»´å¤æ‚</td><td>å¤§å‹åˆ†å¸ƒå¼åº”ç”¨</td></tr></tbody></table><p><strong>Redis Clusteræ§½åˆ†é…ï¼š</strong></p><ul><li><strong>æ€»æ§½æ•°</strong>ï¼š16384ä¸ªæ§½ï¼ˆ0-16383ï¼‰</li><li><strong>åˆ†é…åŸç†</strong>ï¼šCRC16(key) % 16384</li><li><strong>æ§½åˆ†å¸ƒ</strong>ï¼šå¹³å‡åˆ†é…åˆ°å„ä¸ªä¸»èŠ‚ç‚¹</li><li><strong>æ•°æ®åˆ†ç‰‡</strong>ï¼šæ ¹æ®keyè®¡ç®—æ§½ä½ï¼Œæ‰¾åˆ°å¯¹åº”èŠ‚ç‚¹</li></ul><table><thead><tr><th>é›†ç¾¤è§„æ¨¡</th><th>èŠ‚ç‚¹é…ç½®</th><th>æ§½åˆ†é…ç¤ºä¾‹</th></tr></thead><tbody><tr><td>3ä¸»3ä»</td><td>æ¯ä¸»1ä»</td><td>0-5460, 5461-10922, 10923-16383</td></tr><tr><td>6ä¸»6ä»</td><td>æ¯ä¸»1ä»</td><td>æ¯ä¸ªä¸»èŠ‚ç‚¹çº¦2730ä¸ªæ§½</td></tr><tr><td>9ä¸»9ä»</td><td>æ¯ä¸»1ä»</td><td>æ¯ä¸ªä¸»èŠ‚ç‚¹çº¦1820ä¸ªæ§½</td></tr></tbody></table><h3 id="_7-ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©çš„æ¦‚å¿µã€åŸå› åŠè§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_7-ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©çš„æ¦‚å¿µã€åŸå› åŠè§£å†³æ–¹æ¡ˆ"><span>7. ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©çš„æ¦‚å¿µã€åŸå› åŠè§£å†³æ–¹æ¡ˆï¼Ÿ</span></a></h3><p><strong>ä¸‰å¤§ç¼“å­˜é—®é¢˜å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>é—®é¢˜ç±»å‹</th><th>å®šä¹‰</th><th>åŸå› åˆ†æ</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>ç¼“å­˜ç©¿é€</td><td>æŸ¥è¯¢ä¸å­˜åœ¨çš„æ•°æ®ï¼Œç¼“å­˜å’Œæ•°æ®åº“éƒ½æ²¡æœ‰</td><td>æ¶æ„æ”»å‡»ã€ä¸šåŠ¡é€»è¾‘é”™è¯¯</td><td>å¸ƒéš†è¿‡æ»¤å™¨ã€ç©ºå€¼ç¼“å­˜ã€å‚æ•°æ ¡éªŒ</td></tr><tr><td>ç¼“å­˜å‡»ç©¿</td><td>çƒ­ç‚¹æ•°æ®è¿‡æœŸï¼Œå¤§é‡è¯·æ±‚åŒæ—¶è®¿é—®æ•°æ®åº“</td><td>çƒ­ç‚¹keyè¿‡æœŸ</td><td>äº’æ–¥é”ã€çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸã€æå‰æ›´æ–°</td></tr><tr><td>ç¼“å­˜é›ªå´©</td><td>å¤§é‡ç¼“å­˜åŒæ—¶è¿‡æœŸï¼Œæ•°æ®åº“å‹åŠ›å‰§å¢</td><td>ç¼“å­˜é›†ä¸­è¿‡æœŸã€Rediså®•æœº</td><td>è¿‡æœŸæ—¶é—´éšæœºåŒ–ã€ç†”æ–­é™çº§ã€å¤šçº§ç¼“å­˜ã€é›†ç¾¤éƒ¨ç½²</td></tr></tbody></table><p><strong>è¯¦ç»†è§£å†³æ–¹æ¡ˆï¼š</strong></p><table><thead><tr><th>è§£å†³æ–¹æ¡ˆ</th><th>å®ç°æ–¹å¼</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>å¸ƒéš†è¿‡æ»¤å™¨</td><td>ä½æ•°ç»„+å¤šä¸ªhashå‡½æ•°</td><td>å†…å­˜å ç”¨å°ï¼ŒæŸ¥è¯¢å¿«</td><td>å­˜åœ¨è¯¯åˆ¤ï¼Œä¸æ”¯æŒåˆ é™¤</td></tr><tr><td>ç©ºå€¼ç¼“å­˜</td><td>å¯¹ç©ºç»“æœè®¾ç½®è¾ƒçŸ­è¿‡æœŸæ—¶é—´</td><td>ç®€å•æœ‰æ•ˆ</td><td>å ç”¨å†…å­˜</td></tr><tr><td>äº’æ–¥é”</td><td>åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŸ¥è¯¢æ•°æ®åº“</td><td>é¿å…é‡å¤æŸ¥è¯¢</td><td>å¯èƒ½é€ æˆé˜»å¡</td></tr><tr><td>ç†”æ–­é™çº§</td><td>å¤±è´¥ç‡è¶…è¿‡é˜ˆå€¼æ—¶åœæ­¢è®¿é—®</td><td>ä¿æŠ¤ç³»ç»Ÿ</td><td>å¯èƒ½å½±å“ç”¨æˆ·ä½“éªŒ</td></tr></tbody></table><h3 id="_8-å¦‚ä½•è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼é”-watch-dogæœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_8-å¦‚ä½•è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼é”-watch-dogæœºåˆ¶"><span>8. å¦‚ä½•è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼é”ï¼ŸWatch Dogæœºåˆ¶ï¼Ÿ</span></a></h3><p><strong>åˆ†å¸ƒå¼é”å®ç°è¦ç‚¹ï¼š</strong></p><table><thead><tr><th>è¦æ±‚</th><th>Rediså®ç°æ–¹å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>äº’æ–¥æ€§</td><td>SET key value NX EX</td><td>NXç¡®ä¿åŸå­æ€§è®¾ç½®</td></tr><tr><td>é˜²æ­»é”</td><td>è®¾ç½®è¿‡æœŸæ—¶é—´</td><td>é¿å…æŒé”è¿›ç¨‹å´©æºƒå¯¼è‡´æ­»é”</td></tr><tr><td>é˜²è¯¯åˆ </td><td>åˆ é™¤æ—¶æ ¡éªŒvalue</td><td>ç¡®ä¿åªèƒ½åˆ é™¤è‡ªå·±çš„é”</td></tr><tr><td>å¯é‡å…¥</td><td>è®°å½•çº¿ç¨‹IDå’Œé‡å…¥æ¬¡æ•°</td><td>æ”¯æŒåŒä¸€çº¿ç¨‹å¤šæ¬¡è·å–é”</td></tr><tr><td>é˜»å¡ç­‰å¾…</td><td>å¾ªç¯å°è¯•è·å–é”</td><td>è·å–å¤±è´¥æ—¶ç­‰å¾…é‡è¯•</td></tr></tbody></table><p><strong>Watch Dogæœºåˆ¶ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>å®ç°åŸç†</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>è‡ªåŠ¨ç»­æœŸ</td><td>å®šæ—¶ä»»åŠ¡å»¶é•¿é”è¿‡æœŸæ—¶é—´</td><td>é˜²æ­¢ä¸šåŠ¡æ‰§è¡Œæ—¶é—´è¶…è¿‡é”è¿‡æœŸæ—¶é—´</td></tr><tr><td>ç»­æœŸæ¡ä»¶</td><td>é”ä»è¢«å½“å‰çº¿ç¨‹æŒæœ‰</td><td>é¿å…ç»™å…¶ä»–çº¿ç¨‹çš„é”ç»­æœŸ</td></tr><tr><td>ç»­æœŸæ—¶é—´</td><td>é€šå¸¸ä¸ºé”è¿‡æœŸæ—¶é—´çš„1/3</td><td>ä¿è¯åœ¨é”è¿‡æœŸå‰å®Œæˆç»­æœŸ</td></tr><tr><td>åœæ­¢æ¡ä»¶</td><td>é”è¢«é‡Šæ”¾æˆ–çº¿ç¨‹ç»“æŸ</td><td>é¿å…æ— é™ç»­æœŸ</td></tr></tbody></table><p><strong>å®Œæ•´åˆ†å¸ƒå¼é”æ–¹æ¡ˆï¼š</strong></p><div class="language-lua line-numbers-mode" data-highlighter="shiki" data-ext="lua" data-title="lua" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- åŠ é”Luaè„šæœ¬</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> redis</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">call</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;set&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">KEYS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">], </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ARGV</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">], </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;nx&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ex&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ARGV</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- è§£é”Luaè„šæœ¬  </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> redis</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">call</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;get&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">KEYS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]) == </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ARGV</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> redis</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">call</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;del&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">KEYS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">end</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>å®ç°æ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å•RedisèŠ‚ç‚¹</td><td>ç®€å•ï¼Œæ€§èƒ½å¥½</td><td>å•ç‚¹æ•…éšœ</td><td>å¯¹å¯ç”¨æ€§è¦æ±‚ä¸é«˜</td></tr><tr><td>Redisé›†ç¾¤</td><td>é«˜å¯ç”¨</td><td>è„‘è£‚æ—¶å¯èƒ½å‡ºç°å¤šä¸ªé”</td><td>ä¸€èˆ¬ä¸šåŠ¡åœºæ™¯</td></tr><tr><td>Redlockç®—æ³•</td><td>æ›´é«˜çš„å®‰å…¨æ€§</td><td>å¤æ‚ï¼Œæ€§èƒ½è¾ƒå·®</td><td>å¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚æé«˜</td></tr><tr><td>ZooKeeper</td><td>å¼ºä¸€è‡´æ€§ï¼Œè‡ªåŠ¨ç»­æœŸ</td><td>æ€§èƒ½è¾ƒå·®ï¼Œä¾èµ–ZKé›†ç¾¤</td><td>å¼ºä¸€è‡´æ€§è¦æ±‚</td></tr></tbody></table><h3 id="_9-rediså“¨å…µçš„åŸç†-å¦‚ä½•å®ç°æ•…éšœè½¬ç§»" tabindex="-1"><a class="header-anchor" href="#_9-rediså“¨å…µçš„åŸç†-å¦‚ä½•å®ç°æ•…éšœè½¬ç§»"><span>9. Rediså“¨å…µçš„åŸç†ï¼Ÿå¦‚ä½•å®ç°æ•…éšœè½¬ç§»ï¼Ÿ</span></a></h3><p><strong>Rediså“¨å…µå®šä¹‰ï¼š</strong> Redis Sentinelæ˜¯Rediså®˜æ–¹æä¾›çš„é«˜å¯ç”¨è§£å†³æ–¹æ¡ˆï¼Œç”¨äºç›‘æ§Redisä¸»ä»å¤åˆ¶é›†ç¾¤ï¼Œå¹¶åœ¨ä¸»èŠ‚ç‚¹æ•…éšœæ—¶è‡ªåŠ¨è¿›è¡Œæ•…éšœè½¬ç§»ã€‚</p><p><strong>æ ¸å¿ƒåŠŸèƒ½ï¼š</strong></p><table><thead><tr><th>åŠŸèƒ½</th><th>æè¿°</th><th>ä½œç”¨</th><th>å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td>ç›‘æ§</td><td>æŒç»­ç›‘æ§ä¸»ä»èŠ‚ç‚¹çš„å¥åº·çŠ¶æ€</td><td>åŠæ—¶å‘ç°èŠ‚ç‚¹æ•…éšœ</td><td>å®šæœŸå‘é€PINGå‘½ä»¤</td></tr><tr><td>é€šçŸ¥</td><td>å½“èŠ‚ç‚¹çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥ç®¡ç†å‘˜</td><td>æä¾›æ•…éšœå‘Šè­¦</td><td>å‘å¸ƒè®¢é˜…æœºåˆ¶</td></tr><tr><td>è‡ªåŠ¨æ•…éšœè½¬ç§»</td><td>ä¸»èŠ‚ç‚¹æ•…éšœæ—¶è‡ªåŠ¨é€‰ä¸¾æ–°çš„ä¸»èŠ‚ç‚¹</td><td>ä¿è¯æœåŠ¡æŒç»­å¯ç”¨</td><td>é€‰ä¸¾ç®—æ³•+é…ç½®æ›´æ–°</td></tr><tr><td>é…ç½®æä¾›</td><td>ä¸ºå®¢æˆ·ç«¯æä¾›å½“å‰ä¸»èŠ‚ç‚¹ä¿¡æ¯</td><td>å®¢æˆ·ç«¯è‡ªåŠ¨è¿æ¥åˆ°æ­£ç¡®çš„ä¸»èŠ‚ç‚¹</td><td>æœåŠ¡å‘ç°æœºåˆ¶</td></tr></tbody></table><p><strong>å“¨å…µå·¥ä½œåŸç†ï¼š</strong></p><table><thead><tr><th>é˜¶æ®µ</th><th>å·¥ä½œå†…å®¹</th><th>åˆ¤æ–­æ¡ä»¶</th><th>å¤„ç†æ–¹å¼</th></tr></thead><tbody><tr><td>ä¸»è§‚ä¸‹çº¿</td><td>å•ä¸ªå“¨å…µè®¤ä¸ºä¸»èŠ‚ç‚¹ä¸å¯ç”¨</td><td>è¶…è¿‡down-after-millisecondsæ—¶é—´æœªå“åº”</td><td>æ ‡è®°ä¸ºSDOWN</td></tr><tr><td>å®¢è§‚ä¸‹çº¿</td><td>å¤šä¸ªå“¨å…µç¡®è®¤ä¸»èŠ‚ç‚¹ä¸å¯ç”¨</td><td>è¾¾åˆ°quorumæ•°é‡çš„å“¨å…µç¡®è®¤ä¸»è§‚ä¸‹çº¿</td><td>æ ‡è®°ä¸ºODOWNå¹¶å¼€å§‹æ•…éšœè½¬ç§»</td></tr><tr><td>é¢†å¯¼è€…é€‰ä¸¾</td><td>é€‰å‡ºè´Ÿè´£æ•…éšœè½¬ç§»çš„å“¨å…µ</td><td>Raftç®—æ³•é€‰ä¸¾</td><td>è·å¾—majorityç¥¨æ•°çš„å“¨å…µæˆä¸ºé¢†å¯¼è€…</td></tr><tr><td>æ•…éšœè½¬ç§»</td><td>å°†ä»èŠ‚ç‚¹æå‡ä¸ºæ–°çš„ä¸»èŠ‚ç‚¹</td><td>é¢†å¯¼è€…å“¨å…µæ‰§è¡Œè½¬ç§»æµç¨‹</td><td>æ›´æ–°é…ç½®å¹¶é€šçŸ¥æ‰€æœ‰èŠ‚ç‚¹</td></tr></tbody></table><p><strong>æ•…éšœè½¬ç§»è¯¦ç»†æµç¨‹ï¼š</strong></p><table><thead><tr><th>æ­¥éª¤</th><th>æ“ä½œ</th><th>ç›®çš„</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>1</td><td>ä»ä»èŠ‚ç‚¹ä¸­é€‰æ‹©æ–°çš„ä¸»èŠ‚ç‚¹</td><td>é€‰å‡ºæœ€é€‚åˆçš„èŠ‚ç‚¹</td><td>è€ƒè™‘ä¼˜å…ˆçº§ã€å¤åˆ¶åç§»é‡ã€è¿è¡ŒID</td></tr><tr><td>2</td><td>å‘é€‰ä¸­çš„ä»èŠ‚ç‚¹å‘é€SLAVEOF NO ONE</td><td>å°†ä»èŠ‚ç‚¹æå‡ä¸ºä¸»èŠ‚ç‚¹</td><td>ç¡®ä¿å‘½ä»¤æ‰§è¡ŒæˆåŠŸ</td></tr><tr><td>3</td><td>å‘å…¶ä»–ä»èŠ‚ç‚¹å‘é€SLAVEOFå‘½ä»¤</td><td>è®©å…¶ä»–ä»èŠ‚ç‚¹è·Ÿéšæ–°ä¸»èŠ‚ç‚¹</td><td>æ›´æ–°ä¸»ä»å…³ç³»</td></tr><tr><td>4</td><td>æ›´æ–°å“¨å…µé…ç½®æ–‡ä»¶</td><td>è®°å½•æ–°çš„ä¸»èŠ‚ç‚¹ä¿¡æ¯</td><td>æŒä¹…åŒ–é…ç½®å˜æ›´</td></tr><tr><td>5</td><td>å‘å®¢æˆ·ç«¯å‘å¸ƒæ–°ä¸»èŠ‚ç‚¹ä¿¡æ¯</td><td>é€šçŸ¥å®¢æˆ·ç«¯è¿æ¥æ–°ä¸»èŠ‚ç‚¹</td><td>é€šè¿‡å‘å¸ƒè®¢é˜…æœºåˆ¶</td></tr></tbody></table><p><strong>ä»èŠ‚ç‚¹é€‰æ‹©ç­–ç•¥ï¼š</strong></p><table><thead><tr><th>ä¼˜å…ˆçº§</th><th>é€‰æ‹©æ¡ä»¶</th><th>æƒé‡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç¬¬ä¸€ä¼˜å…ˆçº§</td><td>slave-priorityæœ€é«˜</td><td>æœ€é«˜</td><td>æ‰‹åŠ¨è®¾ç½®çš„ä¼˜å…ˆçº§</td></tr><tr><td>ç¬¬äºŒä¼˜å…ˆçº§</td><td>å¤åˆ¶åç§»é‡æœ€å¤§</td><td>é«˜</td><td>æ•°æ®æœ€æ–°çš„ä»èŠ‚ç‚¹</td></tr><tr><td>ç¬¬ä¸‰ä¼˜å…ˆçº§</td><td>è¿è¡ŒIDæœ€å°</td><td>ä¸­</td><td>å¯åŠ¨æ—¶é—´æœ€æ—©çš„ä»èŠ‚ç‚¹</td></tr><tr><td>æ’é™¤æ¡ä»¶</td><td>ä¸»è§‚ä¸‹çº¿ã€æ–­çº¿æ—¶é—´è¿‡é•¿ã€INFO_REPLå“åº”å¼‚å¸¸</td><td>æ— </td><td>ä¸å¥åº·çš„èŠ‚ç‚¹ä¸å‚ä¸é€‰ä¸¾</td></tr></tbody></table><p><strong>å“¨å…µé…ç½®ç¤ºä¾‹ï¼š</strong></p><table><thead><tr><th>é…ç½®é¡¹</th><th>ç¤ºä¾‹å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>sentinel monitor</td><td>mymaster 127.0.0.1 6379 2</td><td>ç›‘æ§ä¸»èŠ‚ç‚¹ï¼Œquorumä¸º2</td></tr><tr><td>sentinel down-after-milliseconds</td><td>mymaster 30000</td><td>30ç§’æ— å“åº”åˆ¤å®šä¸ºä¸»è§‚ä¸‹çº¿</td></tr><tr><td>sentinel parallel-syncs</td><td>mymaster 1</td><td>æ•…éšœè½¬ç§»æ—¶åŒæ—¶åŒæ­¥çš„ä»èŠ‚ç‚¹æ•°é‡</td></tr><tr><td>sentinel failover-timeout</td><td>mymaster 180000</td><td>æ•…éšœè½¬ç§»è¶…æ—¶æ—¶é—´</td></tr><tr><td>sentinel auth-pass</td><td>mymaster mypassword</td><td>è¿æ¥å¯†ç </td></tr></tbody></table><p><strong>ä¼˜ç¼ºç‚¹å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>è‡ªåŠ¨æ•…éšœè½¬ç§»</td><td>é…ç½®ç›¸å¯¹å¤æ‚</td><td>ä¸­å°å‹åº”ç”¨</td></tr><tr><td>é«˜å¯ç”¨æ€§</td><td>è„‘è£‚é—®é¢˜</td><td>å¯¹å¯ç”¨æ€§è¦æ±‚é«˜çš„ç³»ç»Ÿ</td></tr><tr><td>æ”¯æŒå¤šä¸ªä»èŠ‚ç‚¹</td><td>æ•°æ®å¯èƒ½çŸ­æš‚ä¸ä¸€è‡´</td><td>è¯»å¤šå†™å°‘çš„ä¸šåŠ¡</td></tr><tr><td>å®¢æˆ·ç«¯é€æ˜</td><td>éœ€è¦è‡³å°‘3ä¸ªå“¨å…µèŠ‚ç‚¹</td><td>å•æœºæˆ¿éƒ¨ç½²</td></tr><tr><td>æˆç†Ÿç¨³å®š</td><td>ä¸æ”¯æŒæ•°æ®åˆ†ç‰‡</td><td>æ•°æ®é‡ä¸æ˜¯ç‰¹åˆ«å¤§çš„åœºæ™¯</td></tr></tbody></table><p><strong>ä¸å…¶ä»–æ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>Rediså“¨å…µ</th><th>Redis Cluster</th><th>ä¸»ä»å¤åˆ¶</th></tr></thead><tbody><tr><td>é«˜å¯ç”¨æ€§</td><td>è‡ªåŠ¨æ•…éšœè½¬ç§»</td><td>è‡ªåŠ¨æ•…éšœè½¬ç§»</td><td>æ‰‹åŠ¨æ•…éšœè½¬ç§»</td></tr><tr><td>æ•°æ®åˆ†ç‰‡</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>é…ç½®å¤æ‚åº¦</td><td>ä¸­ç­‰</td><td>é«˜</td><td>ä½</td></tr><tr><td>å®¢æˆ·ç«¯æ”¯æŒ</td><td>éœ€è¦æ”¯æŒå“¨å…µåè®®</td><td>éœ€è¦æ”¯æŒé›†ç¾¤åè®®</td><td>æ ‡å‡†Redisåè®®</td></tr><tr><td>é€‚ç”¨è§„æ¨¡</td><td>ä¸­å°å‹</td><td>å¤§å‹</td><td>å°å‹</td></tr><tr><td>æ•°æ®ä¸€è‡´æ€§</td><td>æœ€ç»ˆä¸€è‡´æ€§</td><td>æœ€ç»ˆä¸€è‡´æ€§</td><td>æœ€ç»ˆä¸€è‡´æ€§</td></tr></tbody></table><p><strong>æœ€ä½³å®è·µï¼š</strong></p><table><thead><tr><th>å®è·µå»ºè®®</th><th>å…·ä½“åšæ³•</th><th>åŸå› </th></tr></thead><tbody><tr><td>å¥‡æ•°ä¸ªå“¨å…µèŠ‚ç‚¹</td><td>éƒ¨ç½²3ä¸ªæˆ–5ä¸ªå“¨å…µ</td><td>é¿å…è„‘è£‚ï¼Œç¡®ä¿èƒ½é€‰å‡ºé¢†å¯¼è€…</td></tr><tr><td>åˆ†å¸ƒå¼éƒ¨ç½²</td><td>å“¨å…µéƒ¨ç½²åœ¨ä¸åŒçš„ç‰©ç†æœºå™¨ä¸Š</td><td>æé«˜å®¹ç¾èƒ½åŠ›</td></tr><tr><td>åˆç†è®¾ç½®quorum</td><td>ä¸€èˆ¬è®¾ç½®ä¸ºå“¨å…µæ•°é‡çš„ä¸€åŠ+1</td><td>å¹³è¡¡è¯¯åˆ¤å’Œå¯ç”¨æ€§</td></tr><tr><td>ç›‘æ§å“¨å…µçŠ¶æ€</td><td>ç›‘æ§å“¨å…µè¿›ç¨‹å’Œæ—¥å¿—</td><td>ç¡®ä¿å“¨å…µæœ¬èº«çš„å¯ç”¨æ€§</td></tr><tr><td>å®¢æˆ·ç«¯è¿æ¥æ± é…ç½®</td><td>é…ç½®å“¨å…µåœ°å€è€Œéç›´æ¥è¿æ¥Redis</td><td>å®ç°è‡ªåŠ¨æ•…éšœè½¬ç§»</td></tr></tbody></table><h2 id="åˆ†å¸ƒå¼" tabindex="-1"><a class="header-anchor" href="#åˆ†å¸ƒå¼"><span>åˆ†å¸ƒå¼</span></a></h2><h3 id="_1-capç†è®º-baseç†è®º" tabindex="-1"><a class="header-anchor" href="#_1-capç†è®º-baseç†è®º"><span>1. CAPç†è®ºï¼ŸBASEç†è®ºï¼Ÿ</span></a></h3><p><strong>CAPç†è®ºï¼ˆå¸ƒé²å°”å®šç†ï¼‰ï¼š</strong> åˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯èƒ½åŒæ—¶æ»¡è¶³ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰ã€åˆ†åŒºå®¹é”™æ€§ï¼ˆPartition toleranceï¼‰ä¸‰ä¸ªç‰¹æ€§ã€‚</p><table><thead><tr><th>ç‰¹æ€§</th><th>å®šä¹‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ä¸€è‡´æ€§ï¼ˆCï¼‰</td><td>æ‰€æœ‰èŠ‚ç‚¹åŒæ—¶çœ‹åˆ°ç›¸åŒçš„æ•°æ®</td><td>æ•°æ®åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¿æŒåŒæ­¥</td></tr><tr><td>å¯ç”¨æ€§ï¼ˆAï¼‰</td><td>ç³»ç»ŸæŒç»­å¯ç”¨ï¼Œå¿«é€Ÿå“åº”</td><td>ç³»ç»Ÿä¸ä¼šå› ä¸ºéƒ¨åˆ†èŠ‚ç‚¹æ•…éšœè€Œåœæ­¢æœåŠ¡</td></tr><tr><td>åˆ†åŒºå®¹é”™æ€§ï¼ˆPï¼‰</td><td>ç³»ç»Ÿåœ¨ç½‘ç»œåˆ†åŒºæ•…éšœæ—¶ä»èƒ½ç»§ç»­è¿è¡Œ</td><td>ç½‘ç»œæ•…éšœä¸ä¼šå¯¼è‡´æ•´ä¸ªç³»ç»Ÿä¸å¯ç”¨</td></tr></tbody></table><p><strong>CAPç»„åˆé€‰æ‹©ï¼š</strong></p><table><thead><tr><th>ç»„åˆ</th><th>ç‰¹ç‚¹</th><th>å…¸å‹åº”ç”¨</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>CA</td><td>ä¸€è‡´æ€§+å¯ç”¨æ€§</td><td>ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“</td><td>å•æœºæˆ–å±€åŸŸç½‘ç¯å¢ƒ</td></tr><tr><td>CP</td><td>ä¸€è‡´æ€§+åˆ†åŒºå®¹é”™æ€§</td><td>MongoDBã€Redis</td><td>æ•°æ®ä¸€è‡´æ€§è¦æ±‚é«˜</td></tr><tr><td>AP</td><td>å¯ç”¨æ€§+åˆ†åŒºå®¹é”™æ€§</td><td>DNSã€CDN</td><td>é«˜å¯ç”¨æ€§è¦æ±‚ï¼Œå…è®¸æ•°æ®å»¶è¿Ÿ</td></tr></tbody></table><p><strong>BASEç†è®ºï¼š</strong> ä½œä¸ºCAPç†è®ºçš„å»¶ä¼¸ï¼Œæä¾›äº†ä¸€ç§åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®ç°é«˜å¯ç”¨çš„æ–¹å¼ã€‚</p><table><thead><tr><th>ç‰¹æ€§</th><th>å…¨ç§°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>åŸºæœ¬å¯ç”¨ï¼ˆBAï¼‰</td><td>Basically Available</td><td>ç³»ç»ŸåŸºæœ¬å¯ç”¨ï¼Œå…è®¸æŸå¤±éƒ¨åˆ†åŠŸèƒ½</td></tr><tr><td>è½¯çŠ¶æ€ï¼ˆSï¼‰</td><td>Soft State</td><td>å…è®¸ç³»ç»Ÿä¸­æ•°æ®å­˜åœ¨ä¸­é—´çŠ¶æ€</td></tr><tr><td>æœ€ç»ˆä¸€è‡´æ€§ï¼ˆEï¼‰</td><td>Eventually Consistent</td><td>ç³»ç»Ÿä¸­æ•°æ®æœ€ç»ˆè¾¾åˆ°ä¸€è‡´çŠ¶æ€</td></tr></tbody></table><h3 id="_2-åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_2-åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆ"><span>2. åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆï¼Ÿ</span></a></h3><p><strong>åˆ†å¸ƒå¼äº‹åŠ¡æŒ‘æˆ˜ï¼š</strong> è·¨å¤šä¸ªæœåŠ¡æˆ–æ•°æ®åº“çš„äº‹åŠ¡æ“ä½œï¼Œéœ€è¦ä¿è¯ACIDç‰¹æ€§ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>æ–¹æ¡ˆ</th><th>å®ç°åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>2PC</td><td>ä¸¤é˜¶æ®µæäº¤</td><td>å¼ºä¸€è‡´æ€§</td><td>é˜»å¡ã€å•ç‚¹æ•…éšœ</td><td>å¼ºä¸€è‡´æ€§è¦æ±‚</td></tr><tr><td>3PC</td><td>ä¸‰é˜¶æ®µæäº¤</td><td>å‡å°‘é˜»å¡æ—¶é—´</td><td>å¤æ‚åº¦é«˜ã€ç½‘ç»œåˆ†åŒºé—®é¢˜</td><td>å¯¹2PCçš„æ”¹è¿›</td></tr><tr><td>TCC</td><td>Try-Confirm-Cancel</td><td>ä¸šåŠ¡æ— ä¾µå…¥</td><td>å®ç°å¤æ‚ã€è¡¥å¿é€»è¾‘</td><td>ä¸šåŠ¡é€»è¾‘ç›¸å¯¹ç®€å•</td></tr><tr><td>Saga</td><td>é•¿äº‹åŠ¡æ‹†åˆ†+è¡¥å¿</td><td>é«˜æ€§èƒ½ã€æœ€ç»ˆä¸€è‡´æ€§</td><td>è¡¥å¿é€»è¾‘å¤æ‚</td><td>é•¿æµç¨‹ä¸šåŠ¡</td></tr><tr><td>æ¶ˆæ¯äº‹åŠ¡</td><td>æ¶ˆæ¯é˜Ÿåˆ—ä¿è¯æœ€ç»ˆä¸€è‡´æ€§</td><td>å¼‚æ­¥é«˜æ€§èƒ½</td><td>æœ€ç»ˆä¸€è‡´æ€§ã€æ¶ˆæ¯é‡å¤</td><td>å¼‚æ­¥å¤„ç†åœºæ™¯</td></tr><tr><td>æœ€å¤§åŠªåŠ›é€šçŸ¥</td><td>å®šæœŸé‡è¯•+äººå·¥ä»‹å…¥</td><td>ç®€å•æ˜“å®ç°</td><td>å¯èƒ½ä¸ä¸€è‡´</td><td>å¯¹ä¸€è‡´æ€§è¦æ±‚ä¸ä¸¥æ ¼</td></tr></tbody></table><p><strong>è¯¦ç»†æ–¹æ¡ˆåˆ†æï¼š</strong></p><table><thead><tr><th>æ–¹æ¡ˆç‰¹ç‚¹</th><th>2PC</th><th>TCC</th><th>Saga</th></tr></thead><tbody><tr><td>ä¸€è‡´æ€§</td><td>å¼ºä¸€è‡´æ€§</td><td>æœ€ç»ˆä¸€è‡´æ€§</td><td>æœ€ç»ˆä¸€è‡´æ€§</td></tr><tr><td>æ€§èƒ½</td><td>è¾ƒå·®</td><td>å¥½</td><td>å¥½</td></tr><tr><td>å¤æ‚åº¦</td><td>ç®€å•</td><td>ä¸­ç­‰</td><td>å¤æ‚</td></tr><tr><td>ä¸šåŠ¡ä¾µå…¥æ€§</td><td>æ— </td><td>ä¸­ç­‰</td><td>é«˜</td></tr><tr><td>æ•…éšœæ¢å¤</td><td>å›°éš¾</td><td>ç›¸å¯¹å®¹æ˜“</td><td>å®¹æ˜“</td></tr></tbody></table><h3 id="_3-åˆ†å¸ƒå¼é”çš„å®ç°" tabindex="-1"><a class="header-anchor" href="#_3-åˆ†å¸ƒå¼é”çš„å®ç°"><span>3. åˆ†å¸ƒå¼é”çš„å®ç°ï¼Ÿ</span></a></h3><p><strong>å®ç°æ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>å®ç°æ–¹æ¡ˆ</th><th>åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æ•°æ®åº“é”</td><td>åŸºäºæ•°æ®åº“å”¯ä¸€ç´¢å¼•</td><td>ç®€å•æ˜“ç†è§£</td><td>æ€§èƒ½å·®ã€å•ç‚¹æ•…éšœ</td><td>ç®€å•åœºæ™¯</td></tr><tr><td>Redisåˆ†å¸ƒå¼é”</td><td>SET NX EXå‘½ä»¤</td><td>æ€§èƒ½å¥½ã€æ”¯æŒè¿‡æœŸ</td><td>å¯èƒ½å‡ºç°é”ä¸¢å¤±</td><td>ä¸€èˆ¬ä¸šåŠ¡åœºæ™¯</td></tr><tr><td>ZooKeeperä¸´æ—¶èŠ‚ç‚¹</td><td>ä¸´æ—¶æœ‰åºèŠ‚ç‚¹</td><td>å¼ºä¸€è‡´æ€§ã€è‡ªåŠ¨é‡Šæ”¾</td><td>æ€§èƒ½ç›¸å¯¹è¾ƒå·®</td><td>å¼ºä¸€è‡´æ€§è¦æ±‚</td></tr><tr><td>Etcd</td><td>åŸºäºRaftç®—æ³•çš„åˆ†å¸ƒå¼é”</td><td>å¼ºä¸€è‡´æ€§ã€é«˜å¯ç”¨</td><td>ä¾èµ–é¢å¤–ç»„ä»¶</td><td>å¾®æœåŠ¡æ¶æ„</td></tr></tbody></table><p><strong>å„æ–¹æ¡ˆè¯¦ç»†å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Redis</th><th>ZooKeeper</th><th>æ•°æ®åº“</th><th>Etcd</th></tr></thead><tbody><tr><td>æ€§èƒ½</td><td>é«˜</td><td>ä¸­</td><td>ä½</td><td>ä¸­</td></tr><tr><td>å¯é æ€§</td><td>ä¸­</td><td>é«˜</td><td>ä¸­</td><td>é«˜</td></tr><tr><td>å¤æ‚åº¦</td><td>ä½</td><td>ä¸­</td><td>ä½</td><td>ä¸­</td></tr><tr><td>è¿ç»´æˆæœ¬</td><td>ä½</td><td>ä¸­</td><td>ä½</td><td>ä¸­</td></tr><tr><td>ç¤¾åŒºæ”¯æŒ</td><td>å¥½</td><td>å¥½</td><td>å¥½</td><td>å¥½</td></tr></tbody></table><h3 id="_4-åˆ†å¸ƒå¼idç”Ÿæˆæ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_4-åˆ†å¸ƒå¼idç”Ÿæˆæ–¹æ¡ˆ"><span>4. åˆ†å¸ƒå¼IDç”Ÿæˆæ–¹æ¡ˆï¼Ÿ</span></a></h3><p><strong>IDç”Ÿæˆæ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>æ–¹æ¡ˆ</th><th>å®ç°åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>UUID</td><td>éšæœºç”Ÿæˆ128ä½æ ‡è¯†ç¬¦</td><td>ç®€å•ã€æœ¬åœ°ç”Ÿæˆ</td><td>æ— åºã€å ç”¨ç©ºé—´å¤§</td><td>å¯¹é¡ºåºæ— è¦æ±‚çš„åœºæ™¯</td></tr><tr><td>æ•°æ®åº“è‡ªå¢ID</td><td>æ•°æ®åº“AUTO_INCREMENT</td><td>ç®€å•ã€æœ‰åº</td><td>æ€§èƒ½ç“¶é¢ˆã€å•ç‚¹æ•…éšœ</td><td>å•æœºåº”ç”¨</td></tr><tr><td>å·æ®µæ¨¡å¼</td><td>æ‰¹é‡è·å–IDæ®µ</td><td>é«˜æ€§èƒ½ã€å‡å°‘æ•°æ®åº“è®¿é—®</td><td>æµªè´¹IDã€é‡å¯ä¸¢å¤±</td><td>é«˜å¹¶å‘åœºæ™¯</td></tr><tr><td>é›ªèŠ±ç®—æ³•</td><td>æ—¶é—´æˆ³+æœºå™¨ID+åºåˆ—å·</td><td>æœ‰åºã€é«˜æ€§èƒ½ã€åˆ†å¸ƒå¼</td><td>æ—¶é’Ÿå›æ‹¨é—®é¢˜</td><td>åˆ†å¸ƒå¼é«˜å¹¶å‘</td></tr><tr><td>ç¾å›¢Leaf</td><td>å·æ®µæ¨¡å¼+é›ªèŠ±ç®—æ³•ä¼˜åŒ–</td><td>é«˜å¯ç”¨ã€æ€§èƒ½å¥½</td><td>å¤æ‚åº¦è¾ƒé«˜</td><td>å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿ</td></tr><tr><td>ç™¾åº¦UidGenerator</td><td>é›ªèŠ±ç®—æ³•ä¼˜åŒ–</td><td>è§£å†³æ—¶é’Ÿå›æ‹¨ã€é«˜æ€§èƒ½</td><td>ä¾èµ–æœºå™¨æ—¶é—´</td><td>å¯¹é¡ºåºæ€§è¦æ±‚é«˜çš„åœºæ™¯</td></tr></tbody></table><p><strong>é›ªèŠ±ç®—æ³•è¯¦è§£ï¼š</strong></p><table><thead><tr><th>ç»„æˆéƒ¨åˆ†</th><th>ä½æ•°</th><th>è¯´æ˜</th><th>å–å€¼èŒƒå›´</th></tr></thead><tbody><tr><td>ç¬¦å·ä½</td><td>1ä½</td><td>å›ºå®šä¸º0</td><td>0</td></tr><tr><td>æ—¶é—´æˆ³</td><td>41ä½</td><td>ç›¸å¯¹äºæŸä¸ªèµ·å§‹æ—¶é—´çš„æ¯«ç§’æ•°</td><td>69å¹´</td></tr><tr><td>æœºå™¨ID</td><td>10ä½</td><td>æ•°æ®ä¸­å¿ƒID(5ä½)+æœºå™¨ID(5ä½)</td><td>1024å°æœºå™¨</td></tr><tr><td>åºåˆ—å·</td><td>12ä½</td><td>æ¯«ç§’å†…çš„åºåˆ—å·</td><td>4096ä¸ªåºåˆ—å·</td></tr></tbody></table><p><strong>é›ªèŠ±ç®—æ³•æ—¶é’Ÿå›æ‹¨é—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼š</strong></p><p><strong>é—®é¢˜äº§ç”ŸåŸå› ï¼š</strong></p><ul><li>ç³»ç»Ÿæ—¶é’Ÿè¢«äººä¸ºè°ƒæ•´ï¼ˆå‘åè°ƒæ•´ï¼‰</li><li>NTPæ—¶é—´åŒæ­¥å¯¼è‡´æ—¶é’Ÿå›é€€</li><li>è™šæ‹Ÿæœºæ—¶é’Ÿæ¼‚ç§»</li><li>é—°ç§’è°ƒæ•´</li></ul><p><strong>è§£å†³æ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>è§£å†³æ–¹æ¡ˆ</th><th>å®ç°åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æŠ›å‡ºå¼‚å¸¸</td><td>æ£€æµ‹åˆ°å›æ‹¨ç«‹å³æŠ›å¼‚å¸¸</td><td>ç®€å•ï¼Œä¿è¯IDä¸é‡å¤</td><td>æœåŠ¡ä¸å¯ç”¨</td><td>å¯¹ä¸€è‡´æ€§è¦æ±‚æé«˜</td></tr><tr><td>ç­‰å¾…æ—¶é’Ÿè¿½ä¸Š</td><td>é˜»å¡ç­‰å¾…ç›´åˆ°æ—¶é’Ÿè¶…è¿‡ä¸Šæ¬¡æ—¶é—´æˆ³</td><td>IDç»å¯¹ä¸é‡å¤</td><td>å¯èƒ½é•¿æ—¶é—´é˜»å¡</td><td>å›æ‹¨æ—¶é—´è¾ƒçŸ­</td></tr><tr><td>ä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ</td><td>å›æ‹¨æ—¶åˆ‡æ¢åˆ°å…¶ä»–IDç”Ÿæˆæ–¹å¼</td><td>æœåŠ¡æŒç»­å¯ç”¨</td><td>éœ€è¦ç»´æŠ¤å¤šå¥—æ–¹æ¡ˆ</td><td>é«˜å¯ç”¨è¦æ±‚</td></tr><tr><td>å®¹å¿å°å¹…å›æ‹¨</td><td>å…è®¸å°èŒƒå›´ï¼ˆå¦‚5ç§’å†…ï¼‰å›æ‹¨</td><td>æ€§èƒ½å¥½ï¼Œå¯ç”¨æ€§é«˜</td><td>å¯èƒ½äº§ç”Ÿé‡å¤ID</td><td>ä¸€èˆ¬ä¸šåŠ¡åœºæ™¯</td></tr><tr><td>æœºå™¨ä½æ‰©å±•</td><td>å¢åŠ æœºå™¨ä½ï¼Œå‡å°‘æ—¶é—´æˆ³ä½æ•°</td><td>å‡å°‘æ—¶é’Ÿä¾èµ–</td><td>IDé•¿åº¦å¯èƒ½å¢åŠ </td><td>é›†ç¾¤è§„æ¨¡å¤§</td></tr></tbody></table><p><strong>è¯¦ç»†å®ç°æ–¹æ¡ˆï¼š</strong></p><table><thead><tr><th>æ–¹æ¡ˆç±»å‹</th><th>å…·ä½“å®ç°</th><th>ä»£ç é€»è¾‘</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>å¼‚å¸¸å¤„ç†</td><td>æ£€æµ‹å½“å‰æ—¶é—´ &lt; ä¸Šæ¬¡æ—¶é—´ï¼ŒæŠ›TimeBackException</td><td>if(current &lt; lastTime) throw</td><td>éœ€è¦ä¸Šå±‚è°ƒç”¨å¤„ç†å¼‚å¸¸</td></tr><tr><td>è‡ªæ—‹ç­‰å¾…</td><td>whileå¾ªç¯ç­‰å¾…æ—¶é’Ÿè¿½ä¸Š</td><td>while(current &lt;= lastTime)</td><td>å¯èƒ½é•¿æ—¶é—´å ç”¨CPU</td></tr><tr><td>åºåˆ—å·é¢„ç•™</td><td>é¢„ç•™éƒ¨åˆ†åºåˆ—å·ç»™å›æ‹¨æ—¶ä½¿ç”¨</td><td>æ­£å¸¸æ—¶ä½¿ç”¨0-2047ï¼Œå›æ‹¨æ—¶ä½¿ç”¨2048-4095</td><td>éœ€è¦åˆç†åˆ†é…åºåˆ—å·ç©ºé—´</td></tr><tr><td>æ—¶é—´æˆ³ç¼“å­˜</td><td>ç¼“å­˜æœ€è¿‘çš„æ—¶é—´æˆ³ï¼Œå›æ‹¨æ—¶ä½¿ç”¨ç¼“å­˜å€¼</td><td>ç»´æŠ¤æ—¶é—´æˆ³é˜Ÿåˆ—</td><td>éœ€è¦è€ƒè™‘ç¼“å­˜å¤§å°å’Œè¿‡æœŸç­–ç•¥</td></tr></tbody></table><p><strong>æ–¹æ¡ˆé€‰æ‹©å»ºè®®ï¼š</strong></p><table><thead><tr><th>åœºæ™¯éœ€æ±‚</th><th>æ¨èæ–¹æ¡ˆ</th><th>åŸå› </th></tr></thead><tbody><tr><td>å¯¹æ€§èƒ½è¦æ±‚ä¸é«˜</td><td>UUID</td><td>å®ç°ç®€å•</td></tr><tr><td>éœ€è¦æœ‰åºID</td><td>é›ªèŠ±ç®—æ³•</td><td>è¶‹åŠ¿é€’å¢ã€æ€§èƒ½å¥½</td></tr><tr><td>è¶…é«˜å¹¶å‘</td><td>å·æ®µæ¨¡å¼</td><td>æ‰¹é‡è·å–ã€å‡å°‘ç«äº‰</td></tr><tr><td>å¯¹å¯ç”¨æ€§è¦æ±‚æé«˜</td><td>ç¾å›¢Leaf/ç™¾åº¦UidGenerator</td><td>åŒbufferã€è§£å†³æ—¶é’Ÿå›æ‹¨é—®é¢˜</td></tr></tbody></table><h3 id="_5-è´Ÿè½½å‡è¡¡ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_5-è´Ÿè½½å‡è¡¡ç®—æ³•"><span>5. è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Ÿ</span></a></h3><p><strong>è´Ÿè½½å‡è¡¡ç®—æ³•å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç®—æ³•</th><th>å®ç°åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>è½®è¯¢</td><td>ä¾æ¬¡åˆ†é…è¯·æ±‚åˆ°æ¯ä¸ªæœåŠ¡å™¨</td><td>ç®€å•ã€åˆ†å¸ƒå‡åŒ€</td><td>ä¸è€ƒè™‘æœåŠ¡å™¨æ€§èƒ½å·®å¼‚</td><td>æœåŠ¡å™¨æ€§èƒ½ç›¸è¿‘</td></tr><tr><td>åŠ æƒè½®è¯¢</td><td>æ ¹æ®æƒé‡åˆ†é…è¯·æ±‚</td><td>è€ƒè™‘æœåŠ¡å™¨æ€§èƒ½å·®å¼‚</td><td>é™æ€æƒé‡ã€ä¸èƒ½åŠ¨æ€è°ƒæ•´</td><td>æœåŠ¡å™¨æ€§èƒ½å·®å¼‚å·²çŸ¥</td></tr><tr><td>æœ€å°‘è¿æ¥</td><td>åˆ†é…åˆ°è¿æ¥æ•°æœ€å°‘çš„æœåŠ¡å™¨</td><td>è€ƒè™‘æœåŠ¡å™¨å½“å‰è´Ÿè½½</td><td>éœ€è¦ç»´æŠ¤è¿æ¥æ•°ç»Ÿè®¡</td><td>é•¿è¿æ¥åœºæ™¯</td></tr><tr><td>åŠ æƒæœ€å°‘è¿æ¥</td><td>ç»“åˆæƒé‡å’Œè¿æ¥æ•°</td><td>ç»¼åˆè€ƒè™‘æ€§èƒ½å’Œè´Ÿè½½</td><td>è®¡ç®—å¤æ‚åº¦é«˜</td><td>å¤æ‚è´Ÿè½½åœºæ™¯</td></tr><tr><td>éšæœº</td><td>éšæœºé€‰æ‹©æœåŠ¡å™¨</td><td>å®ç°ç®€å•</td><td>å¯èƒ½åˆ†å¸ƒä¸å‡åŒ€</td><td>æœåŠ¡å™¨æ•°é‡å¤š</td></tr><tr><td>åŠ æƒéšæœº</td><td>æ ¹æ®æƒé‡éšæœºé€‰æ‹©</td><td>ç®€å•ã€è€ƒè™‘æ€§èƒ½å·®å¼‚</td><td>çŸ­æœŸå¯èƒ½ä¸å‡åŒ€</td><td>ä¸€èˆ¬ä¸šåŠ¡åœºæ™¯</td></tr><tr><td>IP Hash</td><td>æ ¹æ®å®¢æˆ·ç«¯IPå“ˆå¸Œé€‰æ‹©</td><td>ç›¸åŒIPè®¿é—®åŒä¸€æœåŠ¡å™¨</td><td>å¯èƒ½è´Ÿè½½ä¸å‡</td><td>éœ€è¦ä¼šè¯ä¿æŒ</td></tr><tr><td>æœ€çŸ­å“åº”æ—¶é—´</td><td>é€‰æ‹©å“åº”æ—¶é—´æœ€çŸ­çš„æœåŠ¡å™¨</td><td>è€ƒè™‘æœåŠ¡å™¨å®é™…æ€§èƒ½</td><td>éœ€è¦ç›‘æ§å“åº”æ—¶é—´</td><td>å¯¹å»¶è¿Ÿæ•æ„Ÿçš„åº”ç”¨</td></tr></tbody></table><p><strong>ç®—æ³•é€‚ç”¨åœºæ™¯è¯¦è§£ï¼š</strong></p><table><thead><tr><th>ä¸šåŠ¡ç‰¹ç‚¹</th><th>æ¨èç®—æ³•</th><th>åŸå› </th></tr></thead><tbody><tr><td>æ— çŠ¶æ€æœåŠ¡</td><td>è½®è¯¢/éšæœº</td><td>ç®€å•é«˜æ•ˆï¼Œåˆ†å¸ƒå‡åŒ€</td></tr><tr><td>æœ‰çŠ¶æ€æœåŠ¡</td><td>IP Hash</td><td>ä¿è¯åŒä¸€ç”¨æˆ·è®¿é—®åŒä¸€æœåŠ¡å™¨</td></tr><tr><td>æœåŠ¡å™¨æ€§èƒ½å·®å¼‚å¤§</td><td>åŠ æƒè½®è¯¢/åŠ æƒéšæœº</td><td>æ ¹æ®æ€§èƒ½åˆ†é…ä¸åŒæƒé‡</td></tr><tr><td>é•¿è¿æ¥åœºæ™¯</td><td>æœ€å°‘è¿æ¥</td><td>é¿å…è¿æ¥è¿‡åº¦é›†ä¸­</td></tr><tr><td>å¯¹å»¶è¿Ÿæ•æ„Ÿ</td><td>æœ€çŸ­å“åº”æ—¶é—´</td><td>é€‰æ‹©å“åº”æœ€å¿«çš„æœåŠ¡å™¨</td></tr><tr><td>é«˜å¹¶å‘åœºæ™¯</td><td>ä¸€è‡´æ€§å“ˆå¸Œ</td><td>é¿å…æœåŠ¡å™¨å˜åŒ–æ—¶å¤§é‡è¯·æ±‚é‡æ–°åˆ†é…</td></tr></tbody></table><ul><li>ä¸€è‡´æ€§å“ˆå¸Œï¼šä¸€è‡´æ€§å“ˆå¸Œæ˜¯ä¸€ç§åˆ†å¸ƒå¼å“ˆå¸Œç®—æ³•ï¼Œä¸»è¦ç”¨äºå°†æ•°æ®å‡åŒ€ä¸”ç¨³å®šåœ°åˆ†å¸ƒåˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œå‡å°‘èŠ‚ç‚¹å˜åŠ¨æ—¶æ•°æ®é‡æ–°åˆ†é…çš„å¼€é”€ã€‚å°†æ‰€æœ‰çš„èŠ‚ç‚¹å’Œæ•°æ®éƒ½æ˜ å°„åˆ°ä¸€ä¸ªè™šæ‹Ÿçš„å“ˆå¸Œç¯ï¼ˆ0 åˆ° 2Â³Â²-1 çš„èŒƒå›´ï¼‰ä¸Šã€‚æ•°æ®æ ¹æ®å“ˆå¸Œå€¼é¡ºæ—¶é’ˆæ‰¾åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¹¶å­˜å‚¨åœ¨è¯¥èŠ‚ç‚¹ä¸Šã€‚å½“æ–°å¢æˆ–ç§»é™¤èŠ‚ç‚¹æ—¶ï¼Œä»…éœ€é‡æ–°åˆ†é…è¯¥èŠ‚ç‚¹é¡ºæ—¶é’ˆé‚»å±…èŒƒå›´å†…çš„æ•°æ®ï¼Œé¿å…äº†æ•°æ®å¤§è§„æ¨¡è¿ç§»ï¼Œæé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§å’Œç¨³å®šæ€§ã€‚</li></ul><p><strong>å®ç°å±‚çº§å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>å®ç°å±‚çº§</th><th>ç‰¹ç‚¹</th><th>ä»£è¡¨äº§å“</th><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th></tr></thead><tbody><tr><td>4å±‚è´Ÿè½½å‡è¡¡</td><td>åŸºäºIPå’Œç«¯å£è¿›è¡Œè´Ÿè½½å‡è¡¡</td><td>LVSã€F5</td><td>æ€§èƒ½é«˜ã€é€æ˜</td><td>åŠŸèƒ½ç›¸å¯¹ç®€å•</td></tr><tr><td>7å±‚è´Ÿè½½å‡è¡¡</td><td>åŸºäºåº”ç”¨å±‚å†…å®¹è¿›è¡Œè´Ÿè½½å‡è¡¡</td><td>Nginxã€HAProxy</td><td>åŠŸèƒ½ä¸°å¯Œã€çµæ´»</td><td>æ€§èƒ½ç›¸å¯¹è¾ƒä½</td></tr><tr><td>DNSè´Ÿè½½å‡è¡¡</td><td>é€šè¿‡DNSè§£æå®ç°è´Ÿè½½å‡è¡¡</td><td>äº‘è§£æ</td><td>ç®€å•ã€åˆ†å¸ƒå¼</td><td>ç²¾åº¦ä¸é«˜ã€ç¼“å­˜é—®é¢˜</td></tr></tbody></table><h2 id="å¾®æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#å¾®æœåŠ¡"><span>å¾®æœåŠ¡</span></a></h2><h3 id="_1-å¾®æœåŠ¡çš„ä¼˜åŠ¿å’ŒæŒ‘æˆ˜" tabindex="-1"><a class="header-anchor" href="#_1-å¾®æœåŠ¡çš„ä¼˜åŠ¿å’ŒæŒ‘æˆ˜"><span>1. å¾®æœåŠ¡çš„ä¼˜åŠ¿å’ŒæŒ‘æˆ˜ï¼Ÿ</span></a></h3><p><strong>å¾®æœåŠ¡å®šä¹‰ï¼š</strong> å°†å•ä¸€åº”ç”¨ç¨‹åºæ‹†åˆ†ä¸ºä¸€ç»„å°å‹æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡è¿è¡Œåœ¨ç‹¬ç«‹è¿›ç¨‹ä¸­ï¼Œé€šè¿‡è½»é‡çº§é€šä¿¡æœºåˆ¶åä½œã€‚</p><p><strong>ä¼˜åŠ¿ vs æŒ‘æˆ˜å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç»´åº¦</th><th>ä¼˜åŠ¿</th><th>æŒ‘æˆ˜</th></tr></thead><tbody><tr><td>å¼€å‘ç»´æŠ¤</td><td>ä»£ç åº“å°ã€å›¢é˜Ÿç‹¬ç«‹å¼€å‘ã€æŠ€æœ¯æ ˆçµæ´»</td><td>æœåŠ¡é—´åè°ƒå¤æ‚ã€ç‰ˆæœ¬ç®¡ç†å›°éš¾</td></tr><tr><td>éƒ¨ç½²è¿ç»´</td><td>ç‹¬ç«‹éƒ¨ç½²ã€æ•…éšœéš”ç¦»ã€å¼¹æ€§ä¼¸ç¼©</td><td>è¿ç»´å¤æ‚åº¦é«˜ã€ç›‘æ§å›°éš¾</td></tr><tr><td>æ€§èƒ½æ‰©å±•</td><td>æŒ‰éœ€æ‰©å±•ã€èµ„æºåˆ©ç”¨ç‡é«˜</td><td>ç½‘ç»œå»¶è¿Ÿã€åˆ†å¸ƒå¼äº‹åŠ¡å¤æ‚</td></tr><tr><td>å›¢é˜Ÿåä½œ</td><td>å›¢é˜Ÿè‡ªæ²»ã€å¹¶è¡Œå¼€å‘</td><td>æœåŠ¡è¾¹ç•Œåˆ’åˆ†éš¾ã€å›¢é˜Ÿæ²Ÿé€šæˆæœ¬é«˜</td></tr><tr><td>ç³»ç»Ÿç¨³å®šæ€§</td><td>å•ç‚¹æ•…éšœå½±å“èŒƒå›´å°</td><td>æœåŠ¡é—´ä¾èµ–å¤æ‚ã€è°ƒè¯•å›°éš¾</td></tr></tbody></table><p><strong>é€‚ç”¨åœºæ™¯åˆ¤æ–­ï¼š</strong></p><table><thead><tr><th>é¡¹ç›®ç‰¹å¾</th><th>å•ä½“æ¶æ„</th><th>å¾®æœåŠ¡æ¶æ„</th><th>æ¨èç†ç”±</th></tr></thead><tbody><tr><td>å›¢é˜Ÿè§„æ¨¡</td><td>&lt; 10äºº</td><td>&gt; 10äºº</td><td>å¾®æœåŠ¡éœ€è¦è¶³å¤Ÿçš„å›¢é˜Ÿæ”¯æ’‘</td></tr><tr><td>ä¸šåŠ¡å¤æ‚åº¦</td><td>ç®€å•</td><td>å¤æ‚</td><td>å¤æ‚ä¸šåŠ¡é€‚åˆæ‹†åˆ†ç‹¬ç«‹ç»´æŠ¤</td></tr><tr><td>æŠ€æœ¯æ ˆè¦æ±‚</td><td>ç»Ÿä¸€</td><td>å¤šæ ·åŒ–</td><td>å¾®æœåŠ¡æ”¯æŒä¸åŒæŠ€æœ¯æ ˆ</td></tr><tr><td>éƒ¨ç½²é¢‘ç‡</td><td>ä½</td><td>é«˜</td><td>å¾®æœåŠ¡æ”¯æŒç‹¬ç«‹å¿«é€Ÿéƒ¨ç½²</td></tr><tr><td>æ‰©å±•æ€§è¦æ±‚</td><td>ä¸€èˆ¬</td><td>é«˜</td><td>å¾®æœåŠ¡æ”¯æŒæŒ‰éœ€ç²¾ç¡®æ‰©å±•</td></tr></tbody></table><h3 id="_2-æœåŠ¡æ³¨å†Œä¸å‘ç°-åŸç†-å¸¸ç”¨ç»„ä»¶-æ¯”è¾ƒ" tabindex="-1"><a class="header-anchor" href="#_2-æœåŠ¡æ³¨å†Œä¸å‘ç°-åŸç†-å¸¸ç”¨ç»„ä»¶-æ¯”è¾ƒ"><span>2. æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼šåŸç†ï¼Ÿå¸¸ç”¨ç»„ä»¶ï¼Ÿæ¯”è¾ƒï¼Ÿ</span></a></h3><p><strong>æœåŠ¡å‘ç°åŸç†ï¼š</strong> è§£å†³å¾®æœåŠ¡ç¯å¢ƒä¸‹æœåŠ¡å®ä¾‹åŠ¨æ€å˜åŒ–æ—¶çš„ç›¸äº’å‘ç°å’Œè°ƒç”¨é—®é¢˜ã€‚</p><p><strong>å®ç°æ¨¡å¼å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>æ¨¡å¼</th><th>åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å®¢æˆ·ç«¯å‘ç°</td><td>å®¢æˆ·ç«¯æŸ¥è¯¢æ³¨å†Œä¸­å¿ƒè·å–æœåŠ¡å®ä¾‹åˆ—è¡¨</td><td>æ€§èƒ½å¥½ã€è´Ÿè½½å‡è¡¡çµæ´»</td><td>å®¢æˆ·ç«¯é€»è¾‘å¤æ‚ã€è¯­è¨€ç»‘å®š</td><td>æ€§èƒ½è¦æ±‚é«˜</td></tr><tr><td>æœåŠ¡ç«¯å‘ç°</td><td>é€šè¿‡è´Ÿè½½å‡è¡¡å™¨ä»£ç†è®¿é—®æœåŠ¡</td><td>å®¢æˆ·ç«¯ç®€å•ã€è¯­è¨€æ— å…³</td><td>è´Ÿè½½å‡è¡¡å™¨æˆä¸ºç“¶é¢ˆ</td><td>å¤šè¯­è¨€ç¯å¢ƒ</td></tr><tr><td>æœåŠ¡ç½‘æ ¼</td><td>åŸºç¡€è®¾æ–½å±‚å¤„ç†æœåŠ¡é€šä¿¡</td><td>ä¸šåŠ¡æ— æ„ŸçŸ¥ã€åŠŸèƒ½ä¸°å¯Œ</td><td>æ¶æ„å¤æ‚ã€æ€§èƒ½å¼€é”€</td><td>å¤§è§„æ¨¡å¾®æœåŠ¡</td></tr></tbody></table><p><strong>ä¸»æµç»„ä»¶å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç»„ä»¶</th><th>ç±»å‹</th><th>ä¸€è‡´æ€§ç®—æ³•</th><th>å¤šæ•°æ®ä¸­å¿ƒ</th><th>å¥åº·æ£€æŸ¥</th><th>è´Ÿè½½å‡è¡¡</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Eureka</td><td>AP</td><td>æ— </td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>å®¢æˆ·ç«¯</td><td>Spring Cloud</td></tr><tr><td>Consul</td><td>CP</td><td>Raft</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>å¤šè¯­è¨€ç¯å¢ƒ</td></tr><tr><td>Zookeeper</td><td>CP</td><td>ZAB</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>Dubboç”Ÿæ€</td></tr><tr><td>Nacos</td><td>AP/CP</td><td>Raft</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>é˜¿é‡Œäº‘ç”Ÿæ€</td></tr><tr><td>Etcd</td><td>CP</td><td>Raft</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>Kubernetes</td></tr></tbody></table><h3 id="_3-æœåŠ¡è°ƒç”¨-restful-api-å’Œ-rpc-dubbo-grpc-æ¯”è¾ƒ" tabindex="-1"><a class="header-anchor" href="#_3-æœåŠ¡è°ƒç”¨-restful-api-å’Œ-rpc-dubbo-grpc-æ¯”è¾ƒ"><span>3. æœåŠ¡è°ƒç”¨ï¼šRESTful API å’Œ RPC (Dubbo, gRPC)ï¼Ÿæ¯”è¾ƒï¼Ÿ</span></a></h3><p><strong>è°ƒç”¨æ–¹å¼å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>RESTful API</th><th>RPC (Dubbo)</th><th>RPC (gRPC)</th></tr></thead><tbody><tr><td>åè®®</td><td>HTTP/HTTPS</td><td>TCP/HTTP</td><td>HTTP/2</td></tr><tr><td>åºåˆ—åŒ–</td><td>JSON/XML</td><td>Hessian/Kryo</td><td>Protocol Buffers</td></tr><tr><td>æ€§èƒ½</td><td>ä¸­ç­‰</td><td>é«˜</td><td>é«˜</td></tr><tr><td>è·¨è¯­è¨€æ”¯æŒ</td><td>ä¼˜ç§€</td><td>Javaç”Ÿæ€</td><td>ä¼˜ç§€</td></tr><tr><td>å­¦ä¹ æˆæœ¬</td><td>ä½</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td></tr><tr><td>ç”Ÿæ€å®Œæ•´æ€§</td><td>ä¸°å¯Œ</td><td>Javaç”Ÿæ€ä¸°å¯Œ</td><td>å¿«é€Ÿå‘å±•ä¸­</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>WebæœåŠ¡ã€å¯¹å¤–API</td><td>Javaå¾®æœåŠ¡</td><td>å¤šè¯­è¨€å¾®æœåŠ¡</td></tr></tbody></table><p><strong>æŠ€æœ¯é€‰å‹å»ºè®®ï¼š</strong></p><table><thead><tr><th>åœºæ™¯éœ€æ±‚</th><th>æ¨èæ–¹æ¡ˆ</th><th>åŸå› </th></tr></thead><tbody><tr><td>å¯¹å¤–å¼€æ”¾API</td><td>RESTful API</td><td>æ ‡å‡†åŒ–ã€æ˜“äºé›†æˆ</td></tr><tr><td>å†…éƒ¨æœåŠ¡é«˜æ€§èƒ½è°ƒç”¨</td><td>Dubbo/gRPC</td><td>æ€§èƒ½å¥½ã€åŠŸèƒ½ä¸°å¯Œ</td></tr><tr><td>å¤šè¯­è¨€å›¢é˜Ÿ</td><td>gRPC</td><td>è·¨è¯­è¨€æ”¯æŒå¥½</td></tr><tr><td>Spring Booté¡¹ç›®</td><td>RESTful API</td><td>ç”Ÿæ€é›†æˆåº¦é«˜</td></tr><tr><td>å¤§æ•°æ®é‡ä¼ è¾“</td><td>gRPC</td><td>äºŒè¿›åˆ¶åºåˆ—åŒ–ã€HTTP/2åè®®</td></tr><tr><td>å¿«é€ŸåŸå‹å¼€å‘</td><td>RESTful API</td><td>å¼€å‘ç®€å•ã€è°ƒè¯•æ–¹ä¾¿</td></tr></tbody></table><h3 id="_4-æœåŠ¡ç½‘å…³-api-gateway-ä½œç”¨-å¸¸ç”¨ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#_4-æœåŠ¡ç½‘å…³-api-gateway-ä½œç”¨-å¸¸ç”¨ç»„ä»¶"><span>4. æœåŠ¡ç½‘å…³ (API Gateway)ï¼šä½œç”¨ï¼Ÿå¸¸ç”¨ç»„ä»¶ï¼Ÿ</span></a></h3><p><strong>APIç½‘å…³ä½œç”¨ï¼š</strong> ä½œä¸ºæ‰€æœ‰å®¢æˆ·ç«¯è¯·æ±‚çš„ç»Ÿä¸€å…¥å£ï¼Œæä¾›è·¯ç”±ã€è®¤è¯ã€é™æµã€ç›‘æ§ç­‰åŠŸèƒ½ã€‚</p><p><strong>æ ¸å¿ƒåŠŸèƒ½å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>åŠŸèƒ½ç±»åˆ«</th><th>å…·ä½“åŠŸèƒ½</th><th>ä»·å€¼</th><th>å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td>è¯·æ±‚è·¯ç”±</td><td>åŠ¨æ€è·¯ç”±ã€è´Ÿè½½å‡è¡¡</td><td>è¯·æ±‚åˆ†å‘åˆ°æ­£ç¡®æœåŠ¡</td><td>è§„åˆ™é…ç½®ã€æœåŠ¡å‘ç°</td></tr><tr><td>å®‰å…¨è®¤è¯</td><td>èº«ä»½éªŒè¯ã€æƒé™æ§åˆ¶</td><td>ç»Ÿä¸€å®‰å…¨ç­–ç•¥</td><td>JWTã€OAuth2</td></tr><tr><td>æµé‡æ§åˆ¶</td><td>é™æµã€ç†”æ–­ã€é™çº§</td><td>ä¿æŠ¤åç«¯æœåŠ¡</td><td>ä»¤ç‰Œæ¡¶ã€ç†”æ–­å™¨</td></tr><tr><td>åè®®è½¬æ¢</td><td>HTTP/WebSocketç­‰</td><td>åè®®ç»Ÿä¸€</td><td>åè®®é€‚é…å™¨</td></tr><tr><td>ç›‘æ§è¿ç»´</td><td>æ—¥å¿—ã€ç›‘æ§ã€é“¾è·¯è¿½è¸ª</td><td>å¯è§‚æµ‹æ€§</td><td>APMé›†æˆ</td></tr></tbody></table><p><strong>ä¸»æµç½‘å…³å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç½‘å…³</th><th>ç±»å‹</th><th>æ€§èƒ½</th><th>åŠŸèƒ½ä¸°å¯Œåº¦</th><th>ç”Ÿæ€é›†æˆ</th><th>å­¦ä¹ æˆæœ¬</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Spring Cloud Gateway</td><td>å“åº”å¼</td><td>é«˜</td><td>ä¸°å¯Œ</td><td>Spring</td><td>ä¸­ç­‰</td><td>Spring Cloudé¡¹ç›®</td></tr><tr><td>Zuul</td><td>é˜»å¡å¼</td><td>ä¸­</td><td>åŸºç¡€</td><td>Spring</td><td>ä½</td><td>ç®€å•åœºæ™¯</td></tr><tr><td>Kong</td><td>é«˜æ€§èƒ½</td><td>å¾ˆé«˜</td><td>æä¸°å¯Œ</td><td>å¼€æ”¾</td><td>é«˜</td><td>ä¼ä¸šçº§åº”ç”¨</td></tr><tr><td>Nginx Plus</td><td>åå‘ä»£ç†</td><td>æé«˜</td><td>ä¸°å¯Œ</td><td>å¹¿æ³›</td><td>ä¸­ç­‰</td><td>é«˜å¹¶å‘åœºæ™¯</td></tr><tr><td>Envoy</td><td>ä»£ç†</td><td>é«˜</td><td>ä¸°å¯Œ</td><td>äº‘åŸç”Ÿ</td><td>é«˜</td><td>æœåŠ¡ç½‘æ ¼</td></tr></tbody></table><h3 id="_5-é…ç½®ä¸­å¿ƒ-ä½œç”¨-å¸¸ç”¨ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#_5-é…ç½®ä¸­å¿ƒ-ä½œç”¨-å¸¸ç”¨ç»„ä»¶"><span>5. é…ç½®ä¸­å¿ƒï¼šä½œç”¨ï¼Ÿå¸¸ç”¨ç»„ä»¶ï¼Ÿ</span></a></h3><p><strong>é…ç½®ä¸­å¿ƒä»·å€¼ï¼š</strong> é›†ä¸­ç®¡ç†å¾®æœåŠ¡é…ç½®ï¼Œæ”¯æŒåŠ¨æ€æ›´æ–°ï¼Œé¿å…é‡å¯æœåŠ¡ã€‚</p><p><strong>æ ¸å¿ƒèƒ½åŠ›å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>èƒ½åŠ›</th><th>ä¼ ç»Ÿé…ç½®æ–‡ä»¶</th><th>é…ç½®ä¸­å¿ƒ</th><th>æå‡æ•ˆæœ</th></tr></thead><tbody><tr><td>é…ç½®ç®¡ç†</td><td>æ•£è½åœ¨å„ä¸ªæœåŠ¡</td><td>é›†ä¸­ç»Ÿä¸€ç®¡ç†</td><td>ç®¡ç†æ•ˆç‡æå‡90%</td></tr><tr><td>åŠ¨æ€æ›´æ–°</td><td>éœ€è¦é‡å¯æœåŠ¡</td><td>å®æ—¶æ¨é€æ›´æ–°</td><td>å˜æ›´é€Ÿåº¦æå‡10å€</td></tr><tr><td>ç¯å¢ƒéš”ç¦»</td><td>æ‰‹åŠ¨ç»´æŠ¤å¤šå¥—é…ç½®</td><td>è‡ªåŠ¨ç¯å¢ƒåŒºåˆ†</td><td>é”™è¯¯ç‡é™ä½80%</td></tr><tr><td>æƒé™æ§åˆ¶</td><td>æ— æƒé™æ§åˆ¶</td><td>ç»†ç²’åº¦æƒé™ç®¡ç†</td><td>å®‰å…¨æ€§å¤§å¹…æå‡</td></tr><tr><td>ç‰ˆæœ¬ç®¡ç†</td><td>æ‰‹åŠ¨å¤‡ä»½</td><td>è‡ªåŠ¨ç‰ˆæœ¬æ§åˆ¶å’Œå›æ»š</td><td>å¯é æ€§æå‡</td></tr></tbody></table><p><strong>ä¸»æµé…ç½®ä¸­å¿ƒå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç»„ä»¶</th><th>æ•°æ®å­˜å‚¨</th><th>åŠ¨æ€æ¨é€</th><th>å¤šç¯å¢ƒ</th><th>æƒé™æ§åˆ¶</th><th>å¯è§†åŒ–ç•Œé¢</th><th>ç”Ÿæ€é›†æˆ</th></tr></thead><tbody><tr><td>Spring Cloud Config</td><td>Git/SVN</td><td>éœ€ç»“åˆBus</td><td>æ”¯æŒ</td><td>åŸºç¡€</td><td>åŸºç¡€</td><td>Springç”Ÿæ€</td></tr><tr><td>Apollo</td><td>MySQL</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>å®Œå–„</td><td>ä¼˜ç§€</td><td>å¤šè¯­è¨€</td></tr><tr><td>Nacos</td><td>å†…ç½®æ•°æ®åº“</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¼˜ç§€</td><td>é˜¿é‡Œäº‘ç”Ÿæ€</td></tr><tr><td>Consul</td><td>KVå­˜å‚¨</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>åŸºç¡€</td><td>HashiCorpç”Ÿæ€</td></tr></tbody></table><h3 id="_6-æœåŠ¡å®¹é”™-ç†”æ–­ã€é™çº§ã€é™æµ-ä»¤ç‰Œæ¡¶ã€æ¼æ¡¶-sentinelå’Œhystrix" tabindex="-1"><a class="header-anchor" href="#_6-æœåŠ¡å®¹é”™-ç†”æ–­ã€é™çº§ã€é™æµ-ä»¤ç‰Œæ¡¶ã€æ¼æ¡¶-sentinelå’Œhystrix"><span>6. æœåŠ¡å®¹é”™ï¼šç†”æ–­ã€é™çº§ã€é™æµ (ä»¤ç‰Œæ¡¶ã€æ¼æ¡¶)ï¼ŒSentinelå’ŒHystrixï¼Ÿ</span></a></h3><p><strong>å®¹é”™æœºåˆ¶å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>æœºåˆ¶</th><th>ç›®çš„</th><th>è§¦å‘æ¡ä»¶</th><th>æ¢å¤æœºåˆ¶</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ç†”æ–­</td><td>é¿å…è¿é”æ•…éšœ</td><td>é”™è¯¯ç‡/å“åº”æ—¶é—´è¶…é˜ˆå€¼</td><td>åŠå¼€çŠ¶æ€æ¢æµ‹</td><td>ä¾èµ–æœåŠ¡ä¸ç¨³å®š</td></tr><tr><td>é™çº§</td><td>ä¿è¯æ ¸å¿ƒåŠŸèƒ½å¯ç”¨</td><td>ç³»ç»Ÿè´Ÿè½½è¿‡é«˜</td><td>æ‰‹åŠ¨æˆ–è‡ªåŠ¨æ¢å¤</td><td>éæ ¸å¿ƒåŠŸèƒ½å¯ç‰ºç‰²</td></tr><tr><td>é™æµ</td><td>ä¿æŠ¤ç³»ç»Ÿä¸è¢«å‹å®</td><td>è¯·æ±‚é‡è¶…è¿‡ç³»ç»Ÿå¤„ç†èƒ½åŠ›</td><td>æ‹’ç»æˆ–æ’é˜Ÿç­‰å¾…</td><td>é«˜å¹¶å‘åœºæ™¯</td></tr></tbody></table><p><strong>é™æµç®—æ³•å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç®—æ³•</th><th>åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ä»¤ç‰Œæ¡¶</td><td>å›ºå®šé€Ÿç‡äº§ç”Ÿä»¤ç‰Œï¼Œè¯·æ±‚æ¶ˆè€—ä»¤ç‰Œ</td><td>å…è®¸çªå‘æµé‡</td><td>å®ç°ç›¸å¯¹å¤æ‚</td><td>å…è®¸çªå‘çš„ä¸šåŠ¡åœºæ™¯</td></tr><tr><td>æ¼æ¡¶</td><td>è¯·æ±‚ä»¥å›ºå®šé€Ÿç‡å¤„ç†</td><td>æµé‡å¹³æ»‘</td><td>ä¸èƒ½å¤„ç†çªå‘æµé‡</td><td>éœ€è¦å¹³æ»‘å¤„ç†çš„åœºæ™¯</td></tr><tr><td>å›ºå®šçª—å£</td><td>å›ºå®šæ—¶é—´çª—å£å†…é™åˆ¶è¯·æ±‚æ•°é‡</td><td>å®ç°ç®€å•</td><td>ä¸´ç•Œé—®é¢˜</td><td>ç®€å•é™æµåœºæ™¯</td></tr><tr><td>æ»‘åŠ¨çª—å£</td><td>åŠ¨æ€æ—¶é—´çª—å£ç»Ÿè®¡</td><td>æ›´ç²¾ç¡®çš„é™æµ</td><td>å†…å­˜å ç”¨å¤§</td><td>ç²¾ç¡®é™æµéœ€æ±‚</td></tr></tbody></table><p><strong>Sentinel vs Hystrixï¼š</strong></p><table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Sentinel</th><th>Hystrix</th></tr></thead><tbody><tr><td>å¼€å‘çŠ¶æ€</td><td>æ´»è·ƒå¼€å‘</td><td>åœæ­¢ç»´æŠ¤</td></tr><tr><td>æ€§èƒ½</td><td>æ›´ä¼˜</td><td>è¾ƒå¥½</td></tr><tr><td>åŠŸèƒ½ä¸°å¯Œåº¦</td><td>å…¨é¢ï¼ˆç†”æ–­+é™æµ+é™çº§+ç³»ç»Ÿä¿æŠ¤ï¼‰</td><td>ä¸»è¦ä¸“æ³¨ç†”æ–­é™çº§</td></tr><tr><td>æ§åˆ¶å°</td><td>åŠŸèƒ½å¼ºå¤§çš„å®æ—¶ç›‘æ§</td><td>åŸºç¡€ç›‘æ§</td></tr><tr><td>è§„åˆ™é…ç½®</td><td>æ”¯æŒå¤šç§æ•°æ®æºåŠ¨æ€é…ç½®</td><td>ä¸»è¦åŸºäºæ³¨è§£å’Œé…ç½®æ–‡ä»¶</td></tr><tr><td>ç”Ÿæ€é›†æˆ</td><td>Spring Cloud Alibaba</td><td>Spring Cloud Netflix</td></tr><tr><td>å­¦ä¹ æˆæœ¬</td><td>ä¸­ç­‰</td><td>è¾ƒä½</td></tr></tbody></table><h3 id="_7-é“¾è·¯è¿½è¸ª-ç›®çš„-åŸç†-å¸¸ç”¨ç»„ä»¶-zipkin-skywalking" tabindex="-1"><a class="header-anchor" href="#_7-é“¾è·¯è¿½è¸ª-ç›®çš„-åŸç†-å¸¸ç”¨ç»„ä»¶-zipkin-skywalking"><span>7. é“¾è·¯è¿½è¸ªï¼šç›®çš„ï¼ŸåŸç†ï¼Ÿå¸¸ç”¨ç»„ä»¶ (Zipkin, SkyWalking)ï¼Ÿ</span></a></h3><p><strong>é“¾è·¯è¿½è¸ªç›®çš„ï¼š</strong> åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è¿½è¸ªè¯·æ±‚çš„å®Œæ•´è°ƒç”¨é“¾è·¯ï¼Œå¿«é€Ÿå®šä½æ€§èƒ½ç“¶é¢ˆå’Œæ•…éšœæ ¹å› ã€‚</p><p><strong>æ ¸å¿ƒæ¦‚å¿µï¼š</strong></p><table><thead><tr><th>æ¦‚å¿µ</th><th>å®šä¹‰</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>Trace</td><td>ä¸€æ¬¡å®Œæ•´çš„è¯·æ±‚è°ƒç”¨é“¾è·¯</td><td>ä»£è¡¨ä¸€æ¬¡ä¸šåŠ¡è¯·æ±‚çš„å…¨é“¾è·¯</td></tr><tr><td>Span</td><td>é“¾è·¯ä¸­çš„ä¸€ä¸ªæ“ä½œå•å…ƒ</td><td>ä»£è¡¨ä¸€æ¬¡æœåŠ¡è°ƒç”¨æˆ–æ“ä½œ</td></tr><tr><td>SpanId</td><td>Spançš„å”¯ä¸€æ ‡è¯†</td><td>æ ‡è¯†å…·ä½“çš„æ“ä½œå•å…ƒ</td></tr><tr><td>TraceId</td><td>Traceçš„å”¯ä¸€æ ‡è¯†</td><td>ä¸²è”æ•´ä¸ªè°ƒç”¨é“¾è·¯</td></tr><tr><td>é‡‡æ ·ç‡</td><td>é‡‡é›†é“¾è·¯æ•°æ®çš„æ¯”ä¾‹</td><td>å¹³è¡¡æ€§èƒ½å’Œå¯è§‚æµ‹æ€§</td></tr></tbody></table><p><strong>å®ç°åŸç†ï¼š</strong></p><ol><li><strong>åŸ‹ç‚¹æ”¶é›†</strong>ï¼šåœ¨åº”ç”¨ä¸­æ’å…¥è¿½è¸ªä»£ç æ”¶é›†è°ƒç”¨ä¿¡æ¯</li><li><strong>ä¼ é€’TraceId</strong>ï¼šé€šè¿‡HTTPå¤´æˆ–RPCä¸Šä¸‹æ–‡ä¼ é€’è¿½è¸ªæ ‡è¯†</li><li><strong>æ•°æ®ä¸ŠæŠ¥</strong>ï¼šå¼‚æ­¥ä¸ŠæŠ¥é“¾è·¯æ•°æ®åˆ°è¿½è¸ªç³»ç»Ÿ</li><li><strong>å­˜å‚¨åˆ†æ</strong>ï¼šå­˜å‚¨å¹¶åˆ†æé“¾è·¯æ•°æ®ï¼Œæä¾›æŸ¥è¯¢ç•Œé¢</li></ol><p><strong>ä¸»æµç»„ä»¶å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç»„ä»¶</th><th>å¼€å‘è€…</th><th>è¯­è¨€æ”¯æŒ</th><th>å­˜å‚¨æ”¯æŒ</th><th>æ€§èƒ½å¼€é”€</th><th>ç•Œé¢å‹å¥½åº¦</th><th>ç”Ÿæ€é›†æˆ</th></tr></thead><tbody><tr><td>Zipkin</td><td>Twitter</td><td>å¤šè¯­è¨€</td><td>å¤šç§å­˜å‚¨åç«¯</td><td>ä½</td><td>ä¸€èˆ¬</td><td>å¹¿æ³›</td></tr><tr><td>SkyWalking</td><td>Apache</td><td>Javaä¸ºä¸»</td><td>ES/H2/MySQL</td><td>ä½</td><td>ä¼˜ç§€</td><td>Javaç”Ÿæ€</td></tr><tr><td>Jaeger</td><td>Uber</td><td>å¤šè¯­è¨€</td><td>å¤šç§å­˜å‚¨åç«¯</td><td>ä½</td><td>è‰¯å¥½</td><td>äº‘åŸç”Ÿ</td></tr><tr><td>Pinpoint</td><td>Naver</td><td>Java</td><td>HBase</td><td>ä¸­ç­‰</td><td>ä¼˜ç§€</td><td>Javaä¸“ç”¨</td></tr></tbody></table><p><strong>æŠ€æœ¯é€‰å‹å»ºè®®ï¼š</strong></p><table><thead><tr><th>åœºæ™¯éœ€æ±‚</th><th>æ¨èæ–¹æ¡ˆ</th><th>é€‰æ‹©ç†ç”±</th></tr></thead><tbody><tr><td>Javaå¾®æœåŠ¡</td><td>SkyWalking</td><td>æ— ä¾µå…¥ã€åŠŸèƒ½å…¨é¢ã€ç•Œé¢å‹å¥½</td></tr><tr><td>å¤šè¯­è¨€ç¯å¢ƒ</td><td>Zipkin/Jaeger</td><td>è¯­è¨€æ”¯æŒå¹¿æ³›</td></tr><tr><td>äº‘åŸç”Ÿæ¶æ„</td><td>Jaeger</td><td>CNCFé¡¹ç›®ï¼ŒK8sé›†æˆå¥½</td></tr><tr><td>æ€§èƒ½æ•æ„Ÿåº”ç”¨</td><td>è‡ªç ”æˆ–è½»é‡çº§æ–¹æ¡ˆ</td><td>å‡å°‘æ€§èƒ½å¼€é”€</td></tr><tr><td>å¤§æ•°æ®é‡åœºæ™¯</td><td>SkyWalking</td><td>æ”¯æŒé‡‡æ ·å’Œèšåˆåˆ†æ</td></tr><tr><td>å¿«é€Ÿä¸Šæ‰‹</td><td>Zipkin</td><td>ç®€å•æ˜“ç”¨ï¼Œç¤¾åŒºèµ„æºä¸°å¯Œ</td></tr></tbody></table><h2 id="æ¶ˆæ¯é˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#æ¶ˆæ¯é˜Ÿåˆ—"><span>æ¶ˆæ¯é˜Ÿåˆ—</span></a></h2><h3 id="_1-æ¶ˆæ¯é˜Ÿåˆ—çš„ä½œç”¨-è§£è€¦ã€å¼‚æ­¥ã€å‰Šå³°å¡«è°·" tabindex="-1"><a class="header-anchor" href="#_1-æ¶ˆæ¯é˜Ÿåˆ—çš„ä½œç”¨-è§£è€¦ã€å¼‚æ­¥ã€å‰Šå³°å¡«è°·"><span>1. æ¶ˆæ¯é˜Ÿåˆ—çš„ä½œç”¨ï¼Ÿï¼ˆè§£è€¦ã€å¼‚æ­¥ã€å‰Šå³°å¡«è°·ï¼‰</span></a></h3><p><strong>æ¶ˆæ¯é˜Ÿåˆ—å®šä¹‰ï¼š</strong> åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç”¨äºæœåŠ¡é—´é€šä¿¡çš„ä¸­é—´ä»¶ï¼Œå®ç°æ¶ˆæ¯çš„å¼‚æ­¥ä¼ é€’å’Œå¤„ç†ã€‚</p><p><strong>ä¸‰å¤§æ ¸å¿ƒä½œç”¨ï¼š</strong></p><table><thead><tr><th>ä½œç”¨</th><th>å®šä¹‰</th><th>è§£å†³é—®é¢˜</th><th>åº”ç”¨åœºæ™¯</th><th>æ•ˆæœè¯„ä¼°</th></tr></thead><tbody><tr><td>è§£è€¦</td><td>æ¶ˆæ¯å‘é€è€…å’Œæ¥æ”¶è€…ä¸ç›´æ¥ä¾èµ–</td><td>ç³»ç»Ÿé—´å¼ºè€¦åˆ</td><td>è®¢å•ç³»ç»Ÿé€šçŸ¥åº“å­˜ã€æ”¯ä»˜ã€ç‰©æµç³»ç»Ÿ</td><td>è€¦åˆåº¦é™ä½80%</td></tr><tr><td>å¼‚æ­¥</td><td>å‘é€æ¶ˆæ¯åç«‹å³è¿”å›ï¼Œä¸ç­‰å¾…å¤„ç†ç»“æœ</td><td>åŒæ­¥è°ƒç”¨å“åº”æ—¶é—´é•¿</td><td>ç”¨æˆ·æ³¨å†Œåå‘é€é‚®ä»¶ã€çŸ­ä¿¡</td><td>å“åº”æ—¶é—´å‡å°‘70%</td></tr><tr><td>å‰Šå³°å¡«è°·</td><td>ç¼“å†²é«˜å¹¶å‘è¯·æ±‚ï¼Œå¹³æ»‘å¤„ç†</td><td>ç¬æ—¶é«˜å¹¶å‘å†²å‡»</td><td>ç§’æ€æ´»åŠ¨ã€åŒ11ä¿ƒé”€</td><td>ç³»ç»Ÿç¨³å®šæ€§æå‡</td></tr></tbody></table><p><strong>ä½¿ç”¨å‰åå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>åœºæ™¯</th><th>ä¸ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—</th><th>ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—</th><th>æ”¹å–„æ•ˆæœ</th></tr></thead><tbody><tr><td>è®¢å•å¤„ç†</td><td>åŒæ­¥è°ƒç”¨åº“å­˜ã€æ”¯ä»˜ã€ç‰©æµï¼Œå“åº”æ—¶é—´3ç§’</td><td>å¼‚æ­¥é€šçŸ¥ï¼Œå“åº”æ—¶é—´500ms</td><td>å“åº”é€Ÿåº¦æå‡6å€</td></tr><tr><td>ç³»ç»Ÿæ•…éšœ</td><td>ä¸€ä¸ªæœåŠ¡æ•…éšœå¯¼è‡´æ•´ä¸ªé“¾è·¯å¤±è´¥</td><td>æœåŠ¡æ•…éšœä¸å½±å“æ¶ˆæ¯å‘é€ï¼Œå…·å¤‡å®¹é”™èƒ½åŠ›</td><td>å¯ç”¨æ€§ä»95%æå‡åˆ°99.9%</td></tr><tr><td>ä¿ƒé”€æ´»åŠ¨</td><td>ç¬æ—¶æµé‡å†²å®ç³»ç»Ÿ</td><td>æ¶ˆæ¯é˜Ÿåˆ—ç¼“å†²ï¼Œå¹³ç¨³å¤„ç†</td><td>ç³»ç»Ÿé›¶å®•æœº</td></tr></tbody></table><h3 id="_2-æ¶ˆæ¯æ¨¡å‹-ç‚¹å¯¹ç‚¹queueå’Œå‘å¸ƒ-è®¢é˜…topic" tabindex="-1"><a class="header-anchor" href="#_2-æ¶ˆæ¯æ¨¡å‹-ç‚¹å¯¹ç‚¹queueå’Œå‘å¸ƒ-è®¢é˜…topic"><span>2. æ¶ˆæ¯æ¨¡å‹ï¼Ÿï¼ˆç‚¹å¯¹ç‚¹Queueå’Œå‘å¸ƒ/è®¢é˜…Topicï¼‰</span></a></h3><p><strong>ä¸¤ç§æ¶ˆæ¯æ¨¡å‹å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>ç‚¹å¯¹ç‚¹æ¨¡å‹ï¼ˆQueueï¼‰</th><th>å‘å¸ƒ/è®¢é˜…æ¨¡å‹ï¼ˆTopicï¼‰</th></tr></thead><tbody><tr><td>æ¶ˆæ¯æ¶ˆè´¹</td><td>ä¸€æ¡æ¶ˆæ¯åªèƒ½è¢«ä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹</td><td>ä¸€æ¡æ¶ˆæ¯å¯ä»¥è¢«å¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹</td></tr><tr><td>æ¶ˆè´¹è€…å…³ç³»</td><td>ç«äº‰å…³ç³»</td><td>ç‹¬ç«‹å…³ç³»</td></tr><tr><td>æ¶ˆæ¯æŒä¹…åŒ–</td><td>æ¶ˆè´¹åä»é˜Ÿåˆ—åˆ é™¤</td><td>æ ¹æ®é…ç½®å†³å®šæ˜¯å¦åˆ é™¤</td></tr><tr><td>æ‰©å±•æ€§</td><td>é€šè¿‡å¢åŠ æ¶ˆè´¹è€…å®ç°è´Ÿè½½å‡è¡¡</td><td>é€šè¿‡å¢åŠ è®¢é˜…è€…å®ç°å¹¿æ’­</td></tr><tr><td>åº”ç”¨åœºæ™¯</td><td>ä»»åŠ¡åˆ†å‘ã€è´Ÿè½½å‡è¡¡</td><td>äº‹ä»¶é€šçŸ¥ã€æ•°æ®åŒæ­¥</td></tr><tr><td>å…¸å‹ä¾‹å­</td><td>è®¢å•å¤„ç†é˜Ÿåˆ—</td><td>ç”¨æˆ·æ³¨å†Œäº‹ä»¶å¹¿æ’­</td></tr></tbody></table><p><strong>ä½¿ç”¨åœºæ™¯é€‰æ‹©ï¼š</strong></p><table><thead><tr><th>ä¸šåŠ¡éœ€æ±‚</th><th>æ¨èæ¨¡å‹</th><th>åŸå› </th><th>å…¸å‹åº”ç”¨</th></tr></thead><tbody><tr><td>ä»»åŠ¡å¤„ç†</td><td>Queue</td><td>ç¡®ä¿æ¯ä¸ªä»»åŠ¡åªè¢«å¤„ç†ä¸€æ¬¡</td><td>é‚®ä»¶å‘é€ã€æ–‡ä»¶å¤„ç†</td></tr><tr><td>äº‹ä»¶å¹¿æ’­</td><td>Topic</td><td>å¤šä¸ªç³»ç»Ÿéœ€è¦å“åº”åŒä¸€äº‹ä»¶</td><td>ç”¨æˆ·æ³¨å†Œã€è®¢å•çŠ¶æ€å˜æ›´</td></tr><tr><td>è´Ÿè½½å‡è¡¡</td><td>Queue</td><td>å¤šä¸ªæ¶ˆè´¹è€…ç«äº‰å¤„ç†æ¶ˆæ¯</td><td>å¹¶å‘è®¢å•å¤„ç†</td></tr><tr><td>æ•°æ®åŒæ­¥</td><td>Topic</td><td>å¤šä¸ªä¸‹æ¸¸ç³»ç»Ÿéœ€è¦åŒæ­¥æ•°æ®</td><td>æ•°æ®ä»“åº“åŒæ­¥ã€ç¼“å­˜æ›´æ–°</td></tr><tr><td>æ—¥å¿—æ”¶é›†</td><td>Topic</td><td>å¤šä¸ªç›‘æ§ç³»ç»Ÿéœ€è¦æ”¶é›†æ—¥å¿—</td><td>ELKæ—¥å¿—åˆ†æ</td></tr></tbody></table><h3 id="_3-å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±" tabindex="-1"><a class="header-anchor" href="#_3-å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±"><span>3. å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ï¼Ÿ</span></a></h3><p><strong>æ¶ˆæ¯ä¸¢å¤±çš„ä¸‰ä¸ªé˜¶æ®µï¼š</strong></p><table><thead><tr><th>é˜¶æ®µ</th><th>ä¸¢å¤±åœºæ™¯</th><th>è§£å†³æ–¹æ¡ˆ</th><th>å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td>ç”Ÿäº§è€…é˜¶æ®µ</td><td>ç½‘ç»œæ•…éšœã€Brokerå®•æœº</td><td>ç”Ÿäº§è€…ç¡®è®¤æœºåˆ¶</td><td>åŒæ­¥å‘é€ã€å¼‚æ­¥å›è°ƒç¡®è®¤</td></tr><tr><td>Brokeré˜¶æ®µ</td><td>æ¶ˆæ¯æœªæŒä¹…åŒ–åˆ°ç£ç›˜</td><td>æ¶ˆæ¯æŒä¹…åŒ–</td><td>åŒæ­¥åˆ·ç›˜ã€ä¸»ä»å¤åˆ¶</td></tr><tr><td>æ¶ˆè´¹è€…é˜¶æ®µ</td><td>æ¶ˆè´¹è€…å®•æœºã€å¤„ç†å¤±è´¥</td><td>æ‰‹åŠ¨ACK</td><td>æ¶ˆè´¹æˆåŠŸåå†ç¡®è®¤</td></tr></tbody></table><p><strong>è¯¦ç»†ä¿éšœæœºåˆ¶ï¼š</strong></p><table><thead><tr><th>ä¿éšœæœºåˆ¶</th><th>å®ç°åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ç”Ÿäº§è€…ç¡®è®¤</td><td>Producerç­‰å¾…Brokerç¡®è®¤</td><td>ç¡®ä¿æ¶ˆæ¯åˆ°è¾¾Broker</td><td>æ€§èƒ½ç•¥æœ‰ä¸‹é™</td><td>é‡è¦ä¸šåŠ¡æ¶ˆæ¯</td></tr><tr><td>åŒæ­¥åˆ·ç›˜</td><td>æ¶ˆæ¯å†™å…¥ç£ç›˜åè¿”å›ç¡®è®¤</td><td>æ•°æ®å®‰å…¨æ€§é«˜</td><td>æ€§èƒ½å½±å“å¤§</td><td>é‡‘èçº§åˆ«å¯é æ€§</td></tr><tr><td>å¼‚æ­¥åˆ·ç›˜</td><td>æ¶ˆæ¯å…ˆå†™å…¥å†…å­˜ï¼Œå¼‚æ­¥å†™å…¥ç£ç›˜</td><td>æ€§èƒ½å¥½</td><td>æç«¯æƒ…å†µå¯èƒ½ä¸¢å¤±æ¶ˆæ¯</td><td>ä¸€èˆ¬ä¸šåŠ¡åœºæ™¯</td></tr><tr><td>ä¸»ä»å¤åˆ¶</td><td>ä¸»èŠ‚ç‚¹åŒæ­¥æ¶ˆæ¯åˆ°ä»èŠ‚ç‚¹</td><td>é«˜å¯ç”¨</td><td>ç½‘ç»œå¼€é”€</td><td>é«˜å¯ç”¨è¦æ±‚</td></tr><tr><td>æ‰‹åŠ¨ACK</td><td>æ¶ˆè´¹è€…å¤„ç†å®Œä¸šåŠ¡é€»è¾‘åæ‰‹åŠ¨ç¡®è®¤</td><td>ç¡®ä¿æ¶ˆæ¯è¢«æ­£ç¡®å¤„ç†</td><td>éœ€è¦å¤„ç†é‡å¤æ¶ˆæ¯</td><td>æ‰€æœ‰é‡è¦ä¸šåŠ¡</td></tr></tbody></table><ul><li>åˆ·ç›˜ï¼šæŠŠå†…å­˜ä¸­çš„æ•°æ®å†™å…¥ç£ç›˜æ–‡ä»¶ï¼Œç¡®ä¿æ•°æ®çœŸæ­£æŒä¹…åŒ–åˆ°ç¡¬ç›˜ã€‚</li></ul><h3 id="_4-å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸è¢«é‡å¤æ¶ˆè´¹-å¹‚ç­‰æ€§" tabindex="-1"><a class="header-anchor" href="#_4-å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸è¢«é‡å¤æ¶ˆè´¹-å¹‚ç­‰æ€§"><span>4. å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸è¢«é‡å¤æ¶ˆè´¹ï¼ˆå¹‚ç­‰æ€§ï¼‰ï¼Ÿ</span></a></h3><p><strong>é‡å¤æ¶ˆè´¹äº§ç”ŸåŸå› ï¼š</strong></p><ul><li>ç½‘ç»œæŠ–åŠ¨å¯¼è‡´ACKä¸¢å¤±</li><li>æ¶ˆè´¹è€…é‡å¯å¯¼è‡´æ¶ˆæ¯é‡æ–°æŠ•é€’</li><li>Brokeræ•…éšœæ¢å¤åé‡æ–°å‘é€æ¶ˆæ¯</li></ul><p><strong>å¹‚ç­‰æ€§ä¿éšœæ–¹æ¡ˆï¼š</strong></p><table><thead><tr><th>æ–¹æ¡ˆ</th><th>å®ç°åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å”¯ä¸€IDå»é‡</td><td>æ¯æ¡æ¶ˆæ¯æºå¸¦å”¯ä¸€æ ‡è¯†</td><td>ç®€å•æœ‰æ•ˆ</td><td>éœ€è¦å­˜å‚¨å·²å¤„ç†ID</td><td>é€šç”¨åœºæ™¯</td></tr><tr><td>æ•°æ®åº“å”¯ä¸€çº¦æŸ</td><td>åˆ©ç”¨æ•°æ®åº“å”¯ä¸€ç´¢å¼•</td><td>å®ç°ç®€å•</td><td>ä¾èµ–æ•°æ®åº“</td><td>æ•°æ®åº“æ“ä½œä¸ºä¸»çš„ä¸šåŠ¡</td></tr><tr><td>Rediså»é‡</td><td>ä½¿ç”¨Rediså­˜å‚¨æ¶ˆæ¯ID</td><td>æ€§èƒ½å¥½</td><td>éœ€è¦é¢å¤–çš„Rediså®ä¾‹</td><td>é«˜æ€§èƒ½è¦æ±‚</td></tr><tr><td>çŠ¶æ€æœºæ§åˆ¶</td><td>é€šè¿‡ä¸šåŠ¡çŠ¶æ€åˆ¤æ–­æ˜¯å¦å·²å¤„ç†</td><td>ä¸šåŠ¡è¯­ä¹‰æ˜ç¡®</td><td>ä¸šåŠ¡é€»è¾‘å¤æ‚</td><td>æœ‰æ˜ç¡®çŠ¶æ€çš„ä¸šåŠ¡æµç¨‹</td></tr><tr><td>ä¸šåŠ¡é€»è¾‘å¹‚ç­‰</td><td>è®¾è®¡å¤©ç„¶å¹‚ç­‰çš„ä¸šåŠ¡é€»è¾‘</td><td>æ— é¢å¤–å¼€é”€</td><td>å¹¶éæ‰€æœ‰ä¸šåŠ¡éƒ½èƒ½å®ç°</td><td>æŸ¥è¯¢ç±»æ“ä½œ</td></tr></tbody></table><p><strong>å®ç°ç¤ºä¾‹å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ä¸šåŠ¡åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>å®ç°æ–¹å¼</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>è´¦æˆ·æ‰£æ¬¾</td><td>æ•°æ®åº“å”¯ä¸€çº¦æŸ</td><td>è®¢å•å·ä½œä¸ºå”¯ä¸€çº¦æŸ</td><td>é¿å…é‡å¤æ‰£æ¬¾</td></tr><tr><td>å‘é€é‚®ä»¶</td><td>Rediså»é‡</td><td>æ¶ˆæ¯IDä½œä¸ºRedis key</td><td>è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´</td></tr><tr><td>æ•°æ®åŒæ­¥</td><td>çŠ¶æ€æœºæ§åˆ¶</td><td>æ£€æŸ¥ç›®æ ‡æ•°æ®æ˜¯å¦å·²å­˜åœ¨</td><td>å¤„ç†å¹¶å‘æ›´æ–°é—®é¢˜</td></tr><tr><td>ç§¯åˆ†å¢åŠ </td><td>ä¸šåŠ¡é€»è¾‘å¹‚ç­‰</td><td>ä½¿ç”¨CASæ“ä½œæ›´æ–°ç§¯åˆ†</td><td>å¤„ç†ABAé—®é¢˜</td></tr></tbody></table><h3 id="_5-å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§" tabindex="-1"><a class="header-anchor" href="#_5-å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§"><span>5. å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§ï¼Ÿ</span></a></h3><p><strong>é¡ºåºæ€§éœ€æ±‚åˆ†æï¼š</strong></p><table><thead><tr><th>é¡ºåºæ€§ç±»å‹</th><th>å®šä¹‰</th><th>å®ç°éš¾åº¦</th><th>æ€§èƒ½å½±å“</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å…¨å±€æœ‰åº</td><td>æ‰€æœ‰æ¶ˆæ¯ä¸¥æ ¼æŒ‰æ—¶é—´é¡ºåºå¤„ç†</td><td>é«˜</td><td>å¤§</td><td>é‡‘èäº¤æ˜“ã€è´¦åŠ¡æµæ°´</td></tr><tr><td>åˆ†åŒºæœ‰åº</td><td>åŒä¸€åˆ†åŒºå†…æ¶ˆæ¯æœ‰åº</td><td>ä¸­</td><td>å°</td><td>åŒä¸€ç”¨æˆ·çš„æ“ä½œåºåˆ—</td></tr><tr><td>å±€éƒ¨æœ‰åº</td><td>ç‰¹å®šä¸šåŠ¡åœºæ™¯ä¸‹çš„æ¶ˆæ¯æœ‰åº</td><td>ä½</td><td>æ— </td><td>å•ä¸ªè®¢å•çš„çŠ¶æ€å˜æ›´æµç¨‹</td></tr></tbody></table><p><strong>å®ç°æ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>æ–¹æ¡ˆ</th><th>å®ç°æ–¹å¼</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>æ€§èƒ½å½±å“</th></tr></thead><tbody><tr><td>å•é˜Ÿåˆ—å•æ¶ˆè´¹è€…</td><td>åªä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—å’Œä¸€ä¸ªæ¶ˆè´¹è€…</td><td>ä¸¥æ ¼æœ‰åº</td><td>æ€§èƒ½ç“¶é¢ˆã€æ— æ³•æ‰©å±•</td><td>æ€§èƒ½æœ€å·®</td></tr><tr><td>åˆ†åŒºæœ‰åº</td><td>ç›¸åŒKeyçš„æ¶ˆæ¯å‘é€åˆ°åŒä¸€åˆ†åŒº</td><td>å¹³è¡¡æ€§èƒ½ä¸é¡ºåº</td><td>åˆ†åŒºå†…æœ‰åºã€å…¨å±€æ— åº</td><td>æ€§èƒ½è¾ƒå¥½</td></tr><tr><td>æ¶ˆæ¯é˜Ÿåˆ—é¡ºåº</td><td>ä¸šåŠ¡å±‚é¢ä¿è¯åŒç±»æ¶ˆæ¯çš„é¡ºåºå¤„ç†</td><td>ä¸šåŠ¡çµæ´»æ€§é«˜</td><td>å®ç°å¤æ‚</td><td>æ€§èƒ½å½±å“å°</td></tr><tr><td>æ—¶é—´æˆ³æ’åº</td><td>æ¶ˆè´¹è€…æ ¹æ®æ—¶é—´æˆ³é‡æ–°æ’åº</td><td>å…¨å±€æœ‰åº</td><td>å»¶è¿Ÿé«˜ã€å†…å­˜å ç”¨å¤§</td><td>å»¶è¿Ÿå¢åŠ </td></tr></tbody></table><p><strong>æŠ€æœ¯é€‰å‹å»ºè®®ï¼š</strong></p><table><thead><tr><th>ä¸šåŠ¡åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>ç†ç”±</th><th>å®ç°è¦ç‚¹</th></tr></thead><tbody><tr><td>è‚¡ç¥¨äº¤æ˜“</td><td>å•é˜Ÿåˆ—å•æ¶ˆè´¹è€…</td><td>ä¸¥æ ¼æ—¶åºè¦æ±‚</td><td>å¯ä»¥ç‰ºç‰²æ€§èƒ½ä¿è¯æ­£ç¡®æ€§</td></tr><tr><td>ç”¨æˆ·æ“ä½œæ—¥å¿—</td><td>åˆ†åŒºæœ‰åº</td><td>åŒä¸€ç”¨æˆ·æ“ä½œéœ€è¦æœ‰åº</td><td>ä»¥ç”¨æˆ·IDä½œä¸ºåˆ†åŒºKey</td></tr><tr><td>è®¢å•çŠ¶æ€æµè½¬</td><td>æ¶ˆæ¯é˜Ÿåˆ—é¡ºåº</td><td>åªéœ€è¦åŒä¸€è®¢å•å†…æœ‰åº</td><td>ä»¥è®¢å•IDä½œä¸ºåˆ†ç»„</td></tr><tr><td>ç³»ç»Ÿæ—¥å¿—æ”¶é›†</td><td>æ— éœ€ä¸¥æ ¼é¡ºåº</td><td>æ—¥å¿—åˆ†æä¸ä¸¥æ ¼ä¾èµ–é¡ºåº</td><td>ä¼˜å…ˆè€ƒè™‘æ€§èƒ½å’Œååé‡</td></tr></tbody></table><h3 id="_6-å¸¸ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¯”è¾ƒ-kafkaã€rabbitmqã€rocketmq" tabindex="-1"><a class="header-anchor" href="#_6-å¸¸ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¯”è¾ƒ-kafkaã€rabbitmqã€rocketmq"><span>6. å¸¸ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¯”è¾ƒï¼Ÿï¼ˆKafkaã€RabbitMQã€RocketMQï¼‰</span></a></h3><p><strong>æ ¸å¿ƒç‰¹æ€§å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>Kafka</th><th>RabbitMQ</th><th>RocketMQ</th></tr></thead><tbody><tr><td>å¼€å‘è¯­è¨€</td><td>Scala/Java</td><td>Erlang</td><td>Java</td></tr><tr><td>æ€§èƒ½</td><td>æé«˜ï¼ˆç™¾ä¸‡çº§/ç§’ï¼‰</td><td>é«˜ï¼ˆä¸‡çº§/ç§’ï¼‰</td><td>é«˜ï¼ˆåä¸‡çº§/ç§’ï¼‰</td></tr><tr><td>å¯é æ€§</td><td>é«˜</td><td>æé«˜</td><td>é«˜</td></tr><tr><td>åŠŸèƒ½ä¸°å¯Œåº¦</td><td>åŸºç¡€</td><td>ä¸°å¯Œ</td><td>ä¸°å¯Œ</td></tr><tr><td>è¿ç»´å¤æ‚åº¦</td><td>ä¸­ç­‰</td><td>ç®€å•</td><td>ä¸­ç­‰</td></tr><tr><td>ç¤¾åŒºæ´»è·ƒåº¦</td><td>æé«˜</td><td>é«˜</td><td>ä¸­ç­‰</td></tr><tr><td>ä¼ä¸šæ”¯æŒ</td><td>ApacheåŸºé‡‘ä¼š</td><td>VMware</td><td>é˜¿é‡Œå·´å·´</td></tr></tbody></table><p><strong>è¯¦ç»†åŠŸèƒ½å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>åŠŸèƒ½</th><th>Kafka</th><th>RabbitMQ</th><th>RocketMQ</th></tr></thead><tbody><tr><td>æ¶ˆæ¯é¡ºåºæ€§</td><td>åˆ†åŒºæœ‰åº</td><td>é˜Ÿåˆ—æœ‰åº</td><td>åˆ†åŒºæœ‰åº</td></tr><tr><td>æ¶ˆæ¯è·¯ç”±</td><td>ç®€å•</td><td>çµæ´»å¼ºå¤§</td><td>ä¸°å¯Œ</td></tr><tr><td>æ¶ˆæ¯è¿‡æ»¤</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>æ­»ä¿¡é˜Ÿåˆ—</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>å»¶æ—¶æ¶ˆæ¯</td><td>ä¸æ”¯æŒ</td><td>æ’ä»¶æ”¯æŒ</td><td>åŸç”Ÿæ”¯æŒ</td></tr><tr><td>äº‹åŠ¡æ¶ˆæ¯</td><td>0.11ç‰ˆæœ¬åæ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>æ¶ˆæ¯é‡è¯•</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>é›†ç¾¤éƒ¨ç½²</td><td>åŸç”Ÿæ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr></tbody></table><p><strong>é€‚ç”¨åœºæ™¯æ¨èï¼š</strong></p><table><thead><tr><th>ä½¿ç”¨åœºæ™¯</th><th>æ¨èMQ</th><th>é€‰æ‹©ç†ç”±</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>æ—¥å¿—æ”¶é›†ã€å¤§æ•°æ®å¤„ç†</td><td>Kafka</td><td>è¶…é«˜ååé‡ã€æ°´å¹³æ‰©å±•èƒ½åŠ›å¼º</td><td>åŠŸèƒ½ç›¸å¯¹ç®€å•ï¼Œéœ€è¦è‡ªå·±å®ç°ä¸€äº›ç‰¹æ€§</td></tr><tr><td>ä¼ä¸šçº§åº”ç”¨ã€å¤æ‚è·¯ç”±</td><td>RabbitMQ</td><td>åŠŸèƒ½ä¸°å¯Œã€å¯é æ€§é«˜ã€è¿ç»´ç®€å•</td><td>æ€§èƒ½ç›¸å¯¹è¾ƒä½</td></tr><tr><td>ç”µå•†ã€é‡‘èç­‰ä¸šåŠ¡ç³»ç»Ÿ</td><td>RocketMQ</td><td>åŠŸèƒ½å…¨é¢ã€æ€§èƒ½å¥½ã€ä¸“é—¨ä¸ºä¸šåŠ¡åœºæ™¯è®¾è®¡</td><td>ç¤¾åŒºç›¸å¯¹è¾ƒå°</td></tr><tr><td>å¾®æœåŠ¡é—´é€šä¿¡</td><td>RabbitMQ</td><td>æ¶ˆæ¯è·¯ç”±çµæ´»ã€æ”¯æŒå¤šç§åè®®</td><td>éœ€è¦è€ƒè™‘æ¶ˆæ¯ç§¯å‹é—®é¢˜</td></tr><tr><td>å®æ—¶æ•°æ®æµå¤„ç†</td><td>Kafka</td><td>ä½å»¶è¿Ÿã€é«˜ååã€ä¸å¤§æ•°æ®ç”Ÿæ€é›†æˆå¥½</td><td>ä¸é€‚åˆå¤æ‚çš„ä¸šåŠ¡é€»è¾‘å¤„ç†</td></tr><tr><td>è®¢å•å¤„ç†ã€æ”¯ä»˜ç³»ç»Ÿ</td><td>RocketMQ</td><td>äº‹åŠ¡æ¶ˆæ¯ã€é¡ºåºæ¶ˆæ¯ã€é«˜å¯é æ€§</td><td>è¿ç»´å¤æ‚åº¦ç›¸å¯¹è¾ƒé«˜</td></tr></tbody></table><p><strong>æŠ€æœ¯é€‰å‹å†³ç­–çŸ©é˜µï¼š</strong></p><table><thead><tr><th>æƒé‡å› å­</th><th>Kafka</th><th>RabbitMQ</th><th>RocketMQ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ€§èƒ½è¦æ±‚ï¼ˆ30%ï¼‰</td><td>10</td><td>7</td><td>8</td><td>Kafkaæ€§èƒ½æœ€å¼º</td></tr><tr><td>åŠŸèƒ½ä¸°å¯Œåº¦ï¼ˆ25%ï¼‰</td><td>6</td><td>9</td><td>9</td><td>RabbitMQåŠŸèƒ½æœ€å…¨</td></tr><tr><td>å¯é æ€§ï¼ˆ20%ï¼‰</td><td>8</td><td>10</td><td>9</td><td>RabbitMQå¯é æ€§æœ€ä½³</td></tr><tr><td>è¿ç»´éš¾åº¦ï¼ˆ15%ï¼‰</td><td>7</td><td>9</td><td>7</td><td>RabbitMQæœ€æ˜“è¿ç»´</td></tr><tr><td>ç¤¾åŒºæ”¯æŒï¼ˆ10%ï¼‰</td><td>10</td><td>8</td><td>6</td><td>Kafkaç¤¾åŒºæœ€æ´»è·ƒ</td></tr><tr><td><strong>æ€»åˆ†</strong></td><td><strong>8.1</strong></td><td><strong>8.6</strong></td><td><strong>8.0</strong></td><td>RabbitMQç»¼åˆè¯„åˆ†æœ€é«˜</td></tr></tbody></table><h2 id="ä¸»æµæ¡†æ¶ã€ç³»ç»Ÿè®¾è®¡ã€ç¼–ç èƒ½åŠ›" tabindex="-1"><a class="header-anchor" href="#ä¸»æµæ¡†æ¶ã€ç³»ç»Ÿè®¾è®¡ã€ç¼–ç èƒ½åŠ›"><span>ä¸»æµæ¡†æ¶ã€ç³»ç»Ÿè®¾è®¡ã€ç¼–ç èƒ½åŠ›</span></a></h2><h3 id="_1-springæ–¹å‘-ioc-æ§åˆ¶åè½¬-di-ä¾èµ–æ³¨å…¥-aop-é¢å‘åˆ‡é¢ç¼–ç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-springæ–¹å‘-ioc-æ§åˆ¶åè½¬-di-ä¾èµ–æ³¨å…¥-aop-é¢å‘åˆ‡é¢ç¼–ç¨‹"><span>1. Springæ–¹å‘ - (IoC - æ§åˆ¶åè½¬ / DI - ä¾èµ–æ³¨å…¥, AOP - é¢å‘åˆ‡é¢ç¼–ç¨‹)</span></a></h3><p><strong>IoCï¼ˆæ§åˆ¶åè½¬ï¼‰æ ¸å¿ƒæ¦‚å¿µï¼š</strong></p><table><thead><tr><th>æ¦‚å¿µ</th><th>å®šä¹‰</th><th>ä¼ ç»Ÿæ–¹å¼</th><th>IoCæ–¹å¼</th><th>ä¼˜åŠ¿</th></tr></thead><tbody><tr><td>æ§åˆ¶åè½¬</td><td>å¯¹è±¡åˆ›å»ºæ§åˆ¶æƒä»ç¨‹åºä»£ç è½¬ç§»åˆ°å¤–éƒ¨å®¹å™¨</td><td>ç¨‹åºä¸»åŠ¨åˆ›å»ºä¾èµ–å¯¹è±¡</td><td>å®¹å™¨åˆ›å»ºå¹¶æ³¨å…¥å¯¹è±¡</td><td>é™ä½è€¦åˆåº¦ã€æé«˜å¯æµ‹è¯•æ€§</td></tr><tr><td>ä¾èµ–æ³¨å…¥</td><td>å®¹å™¨è´Ÿè´£å°†ä¾èµ–çš„å¯¹è±¡æ³¨å…¥åˆ°éœ€è¦çš„åœ°æ–¹</td><td>new å…³é”®å­—åˆ›å»ºå¯¹è±¡</td><td>@Autowiredç­‰æ³¨è§£æ³¨å…¥</td><td>è‡ªåŠ¨è£…é…ã€é…ç½®çµæ´»</td></tr><tr><td>å®¹å™¨ç®¡ç†</td><td>Springå®¹å™¨è´Ÿè´£å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†</td><td>æ‰‹åŠ¨ç®¡ç†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ</td><td>å®¹å™¨è‡ªåŠ¨ç®¡ç†</td><td>å‡å°‘å†…å­˜æ³„æ¼ã€æé«˜æ€§èƒ½</td></tr></tbody></table><p><strong>DIä¾èµ–æ³¨å…¥æ–¹å¼å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>æ³¨å…¥æ–¹å¼</th><th>å®ç°æ–¹å¼</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æ„é€ å™¨æ³¨å…¥</td><td>é€šè¿‡æ„é€ å‡½æ•°å‚æ•°æ³¨å…¥</td><td>å¼ºåˆ¶ä¾èµ–ã€ä¸å¯å˜å¯¹è±¡</td><td>æ„é€ å‡½æ•°å‚æ•°å¯èƒ½è¿‡å¤š</td><td>å¿…éœ€ä¾èµ–</td></tr><tr><td>Setteræ³¨å…¥</td><td>é€šè¿‡setteræ–¹æ³•æ³¨å…¥</td><td>å¯é€‰ä¾èµ–ã€çµæ´»é…ç½®</td><td>å¯èƒ½å¿˜è®°æ³¨å…¥æŸäº›ä¾èµ–</td><td>å¯é€‰ä¾èµ–</td></tr><tr><td>å­—æ®µæ³¨å…¥</td><td>ç›´æ¥åœ¨å­—æ®µä¸Šä½¿ç”¨@Autowired</td><td>ä»£ç ç®€æ´</td><td>éš¾ä»¥æµ‹è¯•ã€è¿åå°è£…æ€§</td><td>å¿«é€Ÿå¼€å‘</td></tr></tbody></table><h3 id="_2-aop-é¢å‘åˆ‡é¢ç¼–ç¨‹" tabindex="-1"><a class="header-anchor" href="#_2-aop-é¢å‘åˆ‡é¢ç¼–ç¨‹"><span>2. AOP (é¢å‘åˆ‡é¢ç¼–ç¨‹)</span></a></h3><p><strong>AOPæ ¸å¿ƒæ¦‚å¿µï¼š</strong></p><table><thead><tr><th>æ¦‚å¿µ</th><th>å®šä¹‰</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>åˆ‡é¢(Aspect)</td><td>æ¨ªåˆ‡å…³æ³¨ç‚¹çš„æ¨¡å—åŒ–</td><td>å°è£…æ¨ªåˆ‡é€»è¾‘</td><td>æ—¥å¿—åˆ‡é¢ã€äº‹åŠ¡åˆ‡é¢</td></tr><tr><td>è¿æ¥ç‚¹(JoinPoint)</td><td>ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­èƒ½å¤Ÿæ’å…¥åˆ‡é¢çš„ç‚¹</td><td>å®šä¹‰åˆ‡å…¥ä½ç½®</td><td>æ–¹æ³•è°ƒç”¨ã€å¼‚å¸¸æŠ›å‡º</td></tr><tr><td>åˆ‡å…¥ç‚¹(Pointcut)</td><td>åŒ¹é…è¿æ¥ç‚¹çš„è¡¨è¾¾å¼</td><td>å®šä¹‰åœ¨å“ªäº›åœ°æ–¹åˆ‡å…¥</td><td>execution(* com.<em>.</em>(..))</td></tr><tr><td>é€šçŸ¥(Advice)</td><td>åœ¨åˆ‡å…¥ç‚¹æ‰§è¡Œçš„ä»£ç </td><td>å®šä¹‰åˆ‡å…¥ååšä»€ä¹ˆ</td><td>@Beforeã€@After</td></tr><tr><td>ç»‡å…¥(Weaving)</td><td>å°†åˆ‡é¢åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡çš„è¿‡ç¨‹</td><td>å®ç°AOPåŠŸèƒ½</td><td>ç¼–è¯‘æ—¶ã€ç±»åŠ è½½æ—¶ã€è¿è¡Œæ—¶</td></tr></tbody></table><p><strong>Spring AOPå®ç°æ–¹å¼ï¼š</strong></p><table><thead><tr><th>å®ç°æ–¹å¼</th><th>åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>JDKåŠ¨æ€ä»£ç†</td><td>åŸºäºæ¥å£çš„ä»£ç†</td><td>æ ‡å‡†JDKå®ç°</td><td>åªèƒ½ä»£ç†æ¥å£</td><td>æœ‰æ¥å£çš„ç±»</td></tr><tr><td>CGLIBä»£ç†</td><td>åŸºäºç»§æ‰¿çš„ä»£ç†</td><td>å¯ä»¥ä»£ç†æ™®é€šç±»</td><td>ä¸èƒ½ä»£ç†finalç±»å’Œæ–¹æ³•</td><td>æ²¡æœ‰æ¥å£çš„ç±»</td></tr></tbody></table><p><strong>å¸¸ç”¨é€šçŸ¥ç±»å‹ï¼š</strong></p><table><thead><tr><th>é€šçŸ¥ç±»å‹</th><th>æ‰§è¡Œæ—¶æœº</th><th>ä½¿ç”¨åœºæ™¯</th><th>ç¤ºä¾‹ä»£ç </th></tr></thead><tbody><tr><td>@Before</td><td>æ–¹æ³•æ‰§è¡Œå‰</td><td>å‚æ•°æ ¡éªŒã€æƒé™æ£€æŸ¥</td><td>è®°å½•æ–¹æ³•è°ƒç”¨å‚æ•°</td></tr><tr><td>@After</td><td>æ–¹æ³•æ‰§è¡Œå</td><td>èµ„æºæ¸…ç†ã€æ—¥å¿—è®°å½•</td><td>è®°å½•æ–¹æ³•æ‰§è¡Œæ—¶é—´</td></tr><tr><td>@AfterReturning</td><td>æ–¹æ³•æ­£å¸¸è¿”å›å</td><td>ç»“æœå¤„ç†ã€æˆåŠŸæ—¥å¿—</td><td>è®°å½•æ–¹æ³•è¿”å›å€¼</td></tr><tr><td>@AfterThrowing</td><td>æ–¹æ³•æŠ›å¼‚å¸¸å</td><td>å¼‚å¸¸å¤„ç†ã€é”™è¯¯æ—¥å¿—</td><td>è®°å½•å¼‚å¸¸ä¿¡æ¯</td></tr><tr><td>@Around</td><td>æ–¹æ³•æ‰§è¡Œå‰å</td><td>æ€§èƒ½ç›‘æ§ã€äº‹åŠ¡æ§åˆ¶</td><td>è®¡ç®—æ–¹æ³•æ‰§è¡Œæ—¶é—´</td></tr></tbody></table><h3 id="_3-springäº‹åŠ¡ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#_3-springäº‹åŠ¡ç®¡ç†"><span>3. Springäº‹åŠ¡ç®¡ç†</span></a></h3><p><strong>äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼š</strong></p><table><thead><tr><th>ä¼ æ’­è¡Œä¸º</th><th>è¡Œä¸ºæè¿°</th><th>ä½¿ç”¨åœºæ™¯</th><th>é£é™©æç¤º</th></tr></thead><tbody><tr><td>REQUIRED</td><td>æœ‰äº‹åŠ¡å°±åŠ å…¥ï¼Œæ²¡æœ‰å°±æ–°å»º</td><td>æœ€å¸¸ç”¨çš„ä¼ æ’­è¡Œä¸º</td><td>æ— </td></tr><tr><td>REQUIRES_NEW</td><td>æ€»æ˜¯æ–°å»ºäº‹åŠ¡</td><td>éœ€è¦ç‹¬ç«‹äº‹åŠ¡çš„æ“ä½œ</td><td>å¯èƒ½å¯¼è‡´æ­»é”</td></tr><tr><td>SUPPORTS</td><td>æœ‰äº‹åŠ¡å°±åŠ å…¥ï¼Œæ²¡æœ‰å°±éäº‹åŠ¡æ‰§è¡Œ</td><td>æŸ¥è¯¢æ“ä½œ</td><td>æ•°æ®ä¸€è‡´æ€§é—®é¢˜</td></tr><tr><td>NOT_SUPPORTED</td><td>æ€»æ˜¯éäº‹åŠ¡æ‰§è¡Œ</td><td>çº¯æŸ¥è¯¢æ“ä½œ</td><td>ä¸æ”¯æŒäº‹åŠ¡å›æ»š</td></tr><tr><td>MANDATORY</td><td>å¿…é¡»åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œ</td><td>å¼ºåˆ¶äº‹åŠ¡çš„ä¸šåŠ¡é€»è¾‘</td><td>æ²¡æœ‰äº‹åŠ¡ä¼šæŠ›å¼‚å¸¸</td></tr><tr><td>NEVER</td><td>ä¸èƒ½åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œ</td><td>ä¸èƒ½æœ‰äº‹åŠ¡çš„æ“ä½œ</td><td>æœ‰äº‹åŠ¡ä¼šæŠ›å¼‚å¸¸</td></tr><tr><td>NESTED</td><td>åµŒå¥—äº‹åŠ¡</td><td>éƒ¨åˆ†å›æ»šåœºæ™¯</td><td>ä¾èµ–æ•°æ®åº“æ”¯æŒ</td></tr></tbody></table><p><strong>äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š</strong></p><table><thead><tr><th>éš”ç¦»çº§åˆ«</th><th>Springå¸¸é‡</th><th>è§£å†³é—®é¢˜</th><th>æ€§èƒ½å½±å“</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>READ_UNCOMMITTED</td><td>ISOLATION_READ_UNCOMMITTED</td><td>æ— </td><td>æœ€é«˜</td><td>å¯¹ä¸€è‡´æ€§è¦æ±‚æä½</td></tr><tr><td>READ_COMMITTED</td><td>ISOLATION_READ_COMMITTED</td><td>è„è¯»</td><td>é«˜</td><td>ä¸€èˆ¬ä¸šåŠ¡åœºæ™¯</td></tr><tr><td>REPEATABLE_READ</td><td>ISOLATION_REPEATABLE_READ</td><td>è„è¯»ã€ä¸å¯é‡å¤è¯»</td><td>ä¸­</td><td>é»˜è®¤çº§åˆ«ï¼Œæ¨èä½¿ç”¨</td></tr><tr><td>SERIALIZABLE</td><td>ISOLATION_SERIALIZABLE</td><td>è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»</td><td>æœ€ä½</td><td>å¯¹ä¸€è‡´æ€§è¦æ±‚æé«˜</td></tr></tbody></table><h3 id="_4-spring-mvcçš„å·¥ä½œåŸç†-æ ¸å¿ƒç»„ä»¶-å¤„ç†è¯·æ±‚çš„æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_4-spring-mvcçš„å·¥ä½œåŸç†-æ ¸å¿ƒç»„ä»¶-å¤„ç†è¯·æ±‚çš„æµç¨‹"><span>4. Spring MVCçš„å·¥ä½œåŸç†ï¼Ÿæ ¸å¿ƒç»„ä»¶ï¼Ÿå¤„ç†è¯·æ±‚çš„æµç¨‹ï¼Ÿ</span></a></h3><p><strong>Spring MVCæ ¸å¿ƒç»„ä»¶ï¼š</strong></p><table><thead><tr><th>ç»„ä»¶</th><th>ä½œç”¨</th><th>æ ¸å¿ƒåŠŸèƒ½</th><th>é…ç½®æ–¹å¼</th></tr></thead><tbody><tr><td>DispatcherServlet</td><td>å‰ç«¯æ§åˆ¶å™¨ï¼Œç»Ÿä¸€è°ƒåº¦è¯·æ±‚</td><td>è¯·æ±‚åˆ†å‘ã€å¼‚å¸¸å¤„ç†ã€è§†å›¾æ¸²æŸ“</td><td>web.xmlæˆ–Javaé…ç½®</td></tr><tr><td>HandlerMapping</td><td>å¤„ç†å™¨æ˜ å°„å™¨ï¼Œæ‰¾åˆ°å¤„ç†è¯·æ±‚çš„Controller</td><td>URLæ˜ å°„ã€RESTfulè·¯ç”±</td><td>@RequestMapping</td></tr><tr><td>HandlerAdapter</td><td>å¤„ç†å™¨é€‚é…å™¨ï¼Œè°ƒç”¨å…·ä½“çš„å¤„ç†æ–¹æ³•</td><td>å‚æ•°è§£æã€è¿”å›å€¼å¤„ç†</td><td>è‡ªåŠ¨é…ç½®</td></tr><tr><td>ViewResolver</td><td>è§†å›¾è§£æå™¨ï¼Œè§£æé€»è¾‘è§†å›¾å</td><td>è§†å›¾è·¯å¾„è§£æã€æ¨¡æ¿å¼•æ“é›†æˆ</td><td>é…ç½®æ–‡ä»¶</td></tr></tbody></table><p><strong>è¯·æ±‚å¤„ç†æµç¨‹ï¼š</strong></p><table><thead><tr><th>æ­¥éª¤</th><th>ç»„ä»¶</th><th>å…·ä½“æ“ä½œ</th><th>æ•°æ®æµè½¬</th></tr></thead><tbody><tr><td>1</td><td>DispatcherServlet</td><td>æ¥æ”¶HTTPè¯·æ±‚</td><td>HttpServletRequest</td></tr><tr><td>2</td><td>HandlerMapping</td><td>æ ¹æ®URLæ‰¾åˆ°å¯¹åº”çš„Controllerå’Œæ–¹æ³•</td><td>HandlerExecutionChain</td></tr><tr><td>3</td><td>HandlerAdapter</td><td>è°ƒç”¨Controlleræ–¹æ³•ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘</td><td>ModelAndView</td></tr><tr><td>4</td><td>ViewResolver</td><td>è§£æé€»è¾‘è§†å›¾åï¼Œæ‰¾åˆ°å…·ä½“è§†å›¾æ¨¡æ¿</td><td>Viewå¯¹è±¡</td></tr><tr><td>5</td><td>View</td><td>æ¸²æŸ“è§†å›¾ï¼Œç”ŸæˆHTMLå“åº”</td><td>HttpServletResponse</td></tr></tbody></table><h3 id="_5-1-ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_5-1-ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«"><span>5.1 ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«ï¼Ÿ</span></a></h3><p><strong>ç¼“å­˜çº§åˆ«å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>ä¸€çº§ç¼“å­˜ï¼ˆSqlSessionçº§åˆ«ï¼‰</th><th>äºŒçº§ç¼“å­˜ï¼ˆMapperçº§åˆ«ï¼‰</th></tr></thead><tbody><tr><td>ä½œç”¨åŸŸ</td><td>å•ä¸ªSqlSession</td><td>åŒä¸€ä¸ªMapperçš„æ‰€æœ‰SqlSession</td></tr><tr><td>ç”Ÿå‘½å‘¨æœŸ</td><td>SqlSessionå…³é—­æ—¶å¤±æ•ˆ</td><td>åº”ç”¨ç¨‹åºå…³é—­æ—¶å¤±æ•ˆ</td></tr><tr><td>é»˜è®¤å¼€å¯</td><td>é»˜è®¤å¼€å¯</td><td>éœ€è¦æ‰‹åŠ¨å¼€å¯</td></tr><tr><td>å…±äº«æ€§</td><td>ä¸å…±äº«</td><td>å¤šä¸ªSqlSessionå…±äº«</td></tr><tr><td>æ¸…ç©ºæ—¶æœº</td><td>commit/rollback/close</td><td>æ‰‹åŠ¨æ¸…ç©ºæˆ–é…ç½®è‡ªåŠ¨æ¸…ç©º</td></tr><tr><td>å­˜å‚¨ä½ç½®</td><td>SqlSessionå†…å­˜</td><td>å¯é…ç½®å¤šç§å­˜å‚¨æ–¹å¼</td></tr></tbody></table><p><strong>ç¼“å­˜é…ç½®å’Œä½¿ç”¨ï¼š</strong></p><table><thead><tr><th>é…ç½®é¡¹ç›®</th><th>ä¸€çº§ç¼“å­˜</th><th>äºŒçº§ç¼“å­˜</th></tr></thead><tbody><tr><td>å¼€å¯æ–¹å¼</td><td>æ— éœ€é…ç½®ï¼Œé»˜è®¤å¼€å¯</td><td><code>@CacheNamespace</code>æˆ–<code>&lt;cache&gt;</code></td></tr><tr><td>å¤±æ•ˆç­–ç•¥</td><td>è‡ªåŠ¨å¤±æ•ˆ</td><td>LRUã€FIFOã€SOFTã€WEAK</td></tr><tr><td>åˆ·æ–°ç­–ç•¥</td><td>å¢åˆ æ”¹æ“ä½œè‡ªåŠ¨æ¸…ç©º</td><td>å¯é…ç½®flushInterval</td></tr><tr><td>åºåˆ—åŒ–è¦æ±‚</td><td>æ— </td><td>å®ä½“ç±»éœ€å®ç°Serializableæ¥å£</td></tr></tbody></table><h3 id="_5-2-resultmap-å’Œ-resulttype-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_5-2-resultmap-å’Œ-resulttype-çš„åŒºåˆ«"><span>5.2 ResultMap å’Œ ResultType çš„åŒºåˆ«ï¼Ÿ</span></a></h3><p><strong>ä½¿ç”¨åœºæ™¯å¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>ç‰¹æ€§</th><th>ResultType</th><th>ResultMap</th></tr></thead><tbody><tr><td>é€‚ç”¨åœºæ™¯</td><td>ç®€å•æ˜ å°„ã€å­—æ®µåä¸€è‡´</td><td>å¤æ‚æ˜ å°„ã€å­—æ®µåä¸ä¸€è‡´ã€å…³è”æŸ¥è¯¢</td></tr><tr><td>é…ç½®å¤æ‚åº¦</td><td>ç®€å•</td><td>å¤æ‚</td></tr><tr><td>æ˜ å°„æ–¹å¼</td><td>è‡ªåŠ¨æ˜ å°„</td><td>æ‰‹åŠ¨é…ç½®æ˜ å°„å…³ç³»</td></tr><tr><td>æ€§èƒ½</td><td>è¾ƒå¥½</td><td>ç•¥å·®ï¼ˆéœ€è¦è§£æé…ç½®ï¼‰</td></tr><tr><td>åŠŸèƒ½</td><td>åŸºç¡€åŠŸèƒ½</td><td>æ”¯æŒåµŒå¥—ã€å…³è”ã€ç»§æ‰¿ç­‰é«˜çº§åŠŸèƒ½</td></tr><tr><td>ç»´æŠ¤æˆæœ¬</td><td>ä½</td><td>é«˜</td></tr></tbody></table><p><strong>é€‰æ‹©å»ºè®®ï¼š</strong></p><table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>åŸå› </th></tr></thead><tbody><tr><td>ç®€å•POJOæ˜ å°„</td><td>ResultType</td><td>é…ç½®ç®€å•ï¼Œæ€§èƒ½å¥½</td></tr><tr><td>å­—æ®µåä¸å±æ€§åä¸ä¸€è‡´</td><td>ResultMap</td><td>éœ€è¦æ‰‹åŠ¨æ˜ å°„</td></tr><tr><td>ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šå…³è”æŸ¥è¯¢</td><td>ResultMap</td><td>æ”¯æŒåµŒå¥—æ˜ å°„</td></tr><tr><td>éœ€è¦ç±»å‹è½¬æ¢</td><td>ResultMap</td><td>æ”¯æŒTypeHandler</td></tr><tr><td>ç»§æ‰¿å…³ç³»æ˜ å°„</td><td>ResultMap</td><td>æ”¯æŒç»§æ‰¿å’Œå¤šæ€</td></tr></tbody></table><h3 id="_5-3-å»¶è¿ŸåŠ è½½-æ‡’åŠ è½½-çš„åŸç†å’Œé…ç½®" tabindex="-1"><a class="header-anchor" href="#_5-3-å»¶è¿ŸåŠ è½½-æ‡’åŠ è½½-çš„åŸç†å’Œé…ç½®"><span>5.3 å»¶è¿ŸåŠ è½½ï¼ˆæ‡’åŠ è½½ï¼‰çš„åŸç†å’Œé…ç½®ï¼Ÿ</span></a></h3><p><strong>å»¶è¿ŸåŠ è½½æœºåˆ¶ï¼š</strong></p><table><thead><tr><th>æ¦‚å¿µ</th><th>å®šä¹‰</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å»¶è¿ŸåŠ è½½</td><td>å…³è”å¯¹è±¡åœ¨çœŸæ­£ä½¿ç”¨æ—¶æ‰åŠ è½½</td><td>æé«˜æ€§èƒ½ã€å‡å°‘å†…å­˜å ç”¨</td><td>å¯èƒ½äº§ç”ŸN+1é—®é¢˜</td><td>å¤§å¯¹è±¡å…³è”</td></tr><tr><td>ç«‹å³åŠ è½½</td><td>æŸ¥è¯¢æ—¶ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰å…³è”å¯¹è±¡</td><td>å‡å°‘æ•°æ®åº“è®¿é—®æ¬¡æ•°</td><td>å¯èƒ½åŠ è½½ä¸éœ€è¦çš„æ•°æ®</td><td>å°å¯¹è±¡å…³è”</td></tr></tbody></table><p><strong>é…ç½®æ–¹å¼ï¼š</strong></p><table><thead><tr><th>é…ç½®çº§åˆ«</th><th>é…ç½®ä½ç½®</th><th>é…ç½®é¡¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å…¨å±€é…ç½®</td><td>mybatis-config.xml</td><td>lazyLoadingEnabled=true</td><td>å…¨å±€å¼€å¯å»¶è¿ŸåŠ è½½</td></tr><tr><td>å±€éƒ¨é…ç½®</td><td>ResultMap</td><td>fetchType=&quot;lazy/eager&quot;</td><td>é’ˆå¯¹ç‰¹å®šå…³è”é…ç½®</td></tr><tr><td>æ–¹æ³•çº§é…ç½®</td><td>@Selectç­‰æ³¨è§£</td><td>fetchTypeå±æ€§</td><td>æ³¨è§£æ–¹å¼é…ç½®</td></tr></tbody></table><h3 id="_5-4-å¦‚ä½•å®ç°åˆ†é¡µ" tabindex="-1"><a class="header-anchor" href="#_5-4-å¦‚ä½•å®ç°åˆ†é¡µ"><span>5.4 å¦‚ä½•å®ç°åˆ†é¡µï¼Ÿ</span></a></h3><p><strong>åˆ†é¡µå®ç°æ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p><table><thead><tr><th>æ–¹æ¡ˆ</th><th>å®ç°åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>RowBoundså†…å­˜åˆ†é¡µ</td><td>æŸ¥è¯¢æ‰€æœ‰æ•°æ®ååœ¨å†…å­˜ä¸­åˆ†é¡µ</td><td>å®ç°ç®€å•</td><td>æ€§èƒ½å·®ã€å†…å­˜å ç”¨å¤§</td><td>å°æ•°æ®é‡</td></tr><tr><td>PageHelperç‰©ç†åˆ†é¡µ</td><td>è‡ªåŠ¨æ”¹å†™SQLæ·»åŠ LIMIT</td><td>æ€§èƒ½å¥½ã€ä½¿ç”¨ç®€å•</td><td>ä¾èµ–æ’ä»¶</td><td>å¤§æ•°æ®é‡ã€ç”Ÿäº§ç¯å¢ƒ</td></tr><tr><td>æ‰‹å†™SQLåˆ†é¡µ</td><td>æ‰‹åŠ¨ç¼–å†™å¸¦LIMITçš„SQL</td><td>æ€§èƒ½æœ€å¥½ã€å¯æ§æ€§å¼º</td><td>å¼€å‘å¤æ‚ã€ç»´æŠ¤æˆæœ¬é«˜</td><td>å¤æ‚æŸ¥è¯¢åœºæ™¯</td></tr></tbody></table><p><strong>PageHelperä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p><table><thead><tr><th>ä½¿ç”¨æ–¹å¼</th><th>ä»£ç ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ–¹æ³•è°ƒç”¨</td><td><code>PageHelper.startPage(1, 10)</code></td><td>åœ¨æŸ¥è¯¢å‰è°ƒç”¨</td></tr><tr><td>æ³¨è§£æ–¹å¼</td><td><code>@Select + @Options</code></td><td>æ³¨è§£é…ç½®åˆ†é¡µå‚æ•°</td></tr><tr><td>å‚æ•°ä¼ é€’</td><td><code>PageInfo&lt;User&gt; pageInfo</code></td><td>å°è£…åˆ†é¡µç»“æœ</td></tr></tbody></table><h3 id="_6-è®¾è®¡ä¸€ä¸ªç§’æ€ç³»ç»Ÿ" tabindex="-1"><a class="header-anchor" href="#_6-è®¾è®¡ä¸€ä¸ªç§’æ€ç³»ç»Ÿ"><span>6. è®¾è®¡ä¸€ä¸ªç§’æ€ç³»ç»Ÿ</span></a></h3><p><strong>ç³»ç»Ÿæ¶æ„è®¾è®¡ï¼š</strong></p><table><thead><tr><th>å±‚æ¬¡</th><th>ç»„ä»¶</th><th>ä½œç”¨</th><th>æŠ€æœ¯é€‰å‹</th><th>å…³é”®æŒ‡æ ‡</th></tr></thead><tbody><tr><td>æ¥å…¥å±‚</td><td>CDN + è´Ÿè½½å‡è¡¡</td><td>é™æ€èµ„æºåŠ é€Ÿã€æµé‡åˆ†å‘</td><td>Nginxã€LVS</td><td>QPS: 10ä¸‡+</td></tr><tr><td>åº”ç”¨å±‚</td><td>å¾®æœåŠ¡é›†ç¾¤</td><td>ä¸šåŠ¡é€»è¾‘å¤„ç†</td><td>Spring Booté›†ç¾¤</td><td>å“åº”æ—¶é—´: &lt;100ms</td></tr><tr><td>ç¼“å­˜å±‚</td><td>Redisé›†ç¾¤</td><td>çƒ­ç‚¹æ•°æ®ç¼“å­˜</td><td>Redis Cluster</td><td>å‘½ä¸­ç‡: &gt;95%</td></tr><tr><td>æ•°æ®å±‚</td><td>MySQLä¸»ä»</td><td>æ•°æ®æŒä¹…åŒ–</td><td>MySQL 8.0</td><td>TPS: 1ä¸‡+</td></tr><tr><td>æ¶ˆæ¯å±‚</td><td>æ¶ˆæ¯é˜Ÿåˆ—</td><td>å¼‚æ­¥å¤„ç†ã€å‰Šå³°å¡«è°·</td><td>RocketMQ</td><td>ååé‡: 10ä¸‡æ¡/ç§’</td></tr></tbody></table><p><strong>æ ¸å¿ƒæŠ€æœ¯æ–¹æ¡ˆï¼š</strong></p><table><thead><tr><th>æŠ€æœ¯æŒ‘æˆ˜</th><th>è§£å†³æ–¹æ¡ˆ</th><th>å®ç°æ–¹å¼</th><th>æ•ˆæœè¯„ä¼°</th></tr></thead><tbody><tr><td>é«˜å¹¶å‘è¯»</td><td>å¤šçº§ç¼“å­˜ + CDN</td><td>Redis + æœ¬åœ°ç¼“å­˜ + CDNé™æ€åŒ–</td><td>å‡å°‘99%æ•°æ®åº“è®¿é—®</td></tr><tr><td>åº“å­˜æ‰£å‡</td><td>Redis Luaè„šæœ¬</td><td>åŸå­æ€§æ“ä½œï¼Œé¿å…è¶…å–</td><td>100%å‡†ç¡®æ€§</td></tr><tr><td>æµé‡å‰Šå³°</td><td>æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥å¤„ç†</td><td>ç§’æ€è¯·æ±‚å…ˆå…¥é˜Ÿï¼Œå¼‚æ­¥å¤„ç†è®¢å•</td><td>å‰Šå³°90%</td></tr><tr><td>é™æµä¿æŠ¤</td><td>ä»¤ç‰Œæ¡¶ + ç†”æ–­é™çº§</td><td>Sentinelé™æµï¼Œè¶…é™è¿”å›å‹å¥½æç¤º</td><td>ç³»ç»Ÿç¨³å®šæ€§99.9%</td></tr><tr><td>æ•°æ®ä¸€è‡´æ€§</td><td>åˆ†å¸ƒå¼äº‹åŠ¡</td><td>Seataåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œä¿è¯æœ€ç»ˆä¸€è‡´æ€§</td><td>æ•°æ®å‡†ç¡®æ€§100%</td></tr></tbody></table><p><strong>Redis Luaè„šæœ¬ç¤ºä¾‹ï¼š</strong></p><table><thead><tr><th>åŠŸèƒ½</th><th>è„šæœ¬é€»è¾‘</th><th>ä¼˜åŠ¿</th></tr></thead><tbody><tr><td>åº“å­˜æ‰£å‡</td><td>æ£€æŸ¥åº“å­˜ â†’ æ‰£å‡åº“å­˜ â†’ è®°å½•ç”¨æˆ·è´­ä¹°</td><td>åŸå­æ€§æ“ä½œï¼Œé¿å…è¶…å–</td></tr><tr><td>é˜²é‡å¤è´­ä¹°</td><td>æ£€æŸ¥ç”¨æˆ·è´­ä¹°è®°å½• â†’ æ‰§è¡Œè´­ä¹°é€»è¾‘</td><td>é¿å…é‡å¤ä¸‹å•</td></tr><tr><td>é™æµæ§åˆ¶</td><td>æ£€æŸ¥è¯·æ±‚é¢‘ç‡ â†’ æ›´æ–°è®¡æ•°å™¨</td><td>ç²¾ç¡®é™æµ</td></tr></tbody></table><h3 id="_7-å„ç±»ä¸»æµç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_7-å„ç±»ä¸»æµç®—æ³•"><span>7. å„ç±»ä¸»æµç®—æ³•</span></a></h3><p><strong>ç®—æ³•åˆ†ç±»å’Œé‡è¦æ€§ï¼š</strong></p><table><thead><tr><th>ç®—æ³•ç±»å‹</th><th>é‡è¦ç®—æ³•</th><th>é¢è¯•é¢‘ç‡</th><th>éš¾åº¦ç­‰çº§</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æ’åºç®—æ³•</td><td>å¿«æ’ã€å½’å¹¶ã€å †æ’åº</td><td>â­â­â­â­â­</td><td>ä¸­ç­‰</td><td>æ•°æ®æ’åºã€TopKé—®é¢˜</td></tr><tr><td>æŸ¥æ‰¾ç®—æ³•</td><td>äºŒåˆ†æŸ¥æ‰¾ã€å“ˆå¸ŒæŸ¥æ‰¾</td><td>â­â­â­â­â­</td><td>ç®€å•</td><td>æ•°æ®æ£€ç´¢ã€å»é‡</td></tr><tr><td>åŠ¨æ€è§„åˆ’</td><td>èƒŒåŒ…ã€æœ€é•¿å­åºåˆ—ã€è·¯å¾„é—®é¢˜</td><td>â­â­â­â­</td><td>å›°éš¾</td><td>ä¼˜åŒ–é—®é¢˜ã€è®¡æ•°é—®é¢˜</td></tr><tr><td>å›¾ç®—æ³•</td><td>DFSã€BFSã€æœ€çŸ­è·¯å¾„</td><td>â­â­â­</td><td>ä¸­ç­‰</td><td>ç¤¾äº¤ç½‘ç»œã€è·¯å¾„è§„åˆ’</td></tr><tr><td>æ ‘ç®—æ³•</td><td>äºŒå‰æ ‘éå†ã€å¹³è¡¡æ ‘ã€å­—å…¸æ ‘</td><td>â­â­â­â­</td><td>ä¸­ç­‰</td><td>æ•°æ®ç»“æ„ã€æœç´¢å¼•æ“</td></tr><tr><td>è´ªå¿ƒç®—æ³•</td><td>åŒºé—´è°ƒåº¦ã€æœ€å°ç”Ÿæˆæ ‘</td><td>â­â­â­</td><td>ä¸­ç­‰</td><td>èµ„æºåˆ†é…ã€ç½‘ç»œä¼˜åŒ–</td></tr></tbody></table><p><strong>é¢è¯•å¸¸è€ƒç®—æ³•é¢˜å‹ï¼š</strong></p><table><thead><tr><th>é¢˜å‹</th><th>å…¸å‹ä¾‹é¢˜</th><th>è§£é¢˜æ€è·¯</th><th>æ—¶é—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>æ•°ç»„åŒæŒ‡é’ˆ</td><td>ä¸¤æ•°ä¹‹å’Œã€ä¸‰æ•°ä¹‹å’Œ</td><td>æ’åº+åŒæŒ‡é’ˆç§»åŠ¨</td><td>O(n) - O(nÂ²)</td></tr><tr><td>é“¾è¡¨æ“ä½œ</td><td>åè½¬é“¾è¡¨ã€ç¯å½¢é“¾è¡¨æ£€æµ‹</td><td>å¿«æ…¢æŒ‡é’ˆã€é€’å½’</td><td>O(n)</td></tr><tr><td>äºŒå‰æ ‘é€’å½’</td><td>æœ€å¤§æ·±åº¦ã€è·¯å¾„å’Œ</td><td>é€’å½’åˆ†æ²»</td><td>O(n)</td></tr><tr><td>åŠ¨æ€è§„åˆ’</td><td>çˆ¬æ¥¼æ¢¯ã€æœ€å¤§å­æ•°ç»„å’Œ</td><td>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</td><td>O(n) - O(nÂ²)</td></tr><tr><td>å›æº¯ç®—æ³•</td><td>å…¨æ’åˆ—ã€Nçš‡åé—®é¢˜</td><td>é€’å½’+å›æº¯</td><td>O(n!)</td></tr><tr><td>æ»‘åŠ¨çª—å£</td><td>æœ€é•¿æ— é‡å¤å­ä¸²</td><td>çª—å£æ‰©å±•å’Œæ”¶ç¼©</td><td>O(n)</td></tr></tbody></table></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/Crc011220/Crc011220.github.io/edit/main/src/zh/posts/review/é¢è¯•è¦ç‚¹.md" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="vp-meta-info" data-allow-mismatch="text">2025/7/30 07:46:18</span></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: ruocchen1220@gmail.com">Ruochen Chen</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/zh/posts/review/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html" aria-label="è®¡ç®—æœºç½‘ç»œ"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>è®¡ç®—æœºç½‘ç»œ</div></a><!----></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">å­¦æµ·æ— æ¶¯</div><div class="vp-copyright">Copyright Â© 2025 Ruochen Chen </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script src="/assets/js/runtime~app.534f024b.js" defer></script><script src="/assets/js/6312.2d95f1ad.js" defer></script><script src="/assets/js/app.d934ba98.js" defer></script>
  </body>
</html>
