<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.59" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://crc011220.github.io/zh/posts/review/%E5%A4%8D%E4%B9%A0.html"><meta property="og:site_name" content="Ruochen Chen"><meta property="og:title" content="复习"><meta property="og:description" content="复习 京东项目 - 分布式调度引擎 1. 架构设计相关问题 Q1: 项目中碰到了哪些困难？架构层面和开发层面？ 架构层面 高可用架构设计困难 问题：如何保证系统的高可用性 挑战：需要设计无单点故障的架构 解决方案： 应用层：Spring Boot集群部署（3个实例），Nginx轮询分发请求到应用层 调度器：XXL-JOB调度中心（1个+热备），XXL-..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-08-13T07:49:24.000Z"><meta property="article:tag" content="Review"><meta property="article:published_time" content="2025-07-13T00:00:00.000Z"><meta property="article:modified_time" content="2025-08-13T07:49:24.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"复习","image":[""],"datePublished":"2025-07-13T00:00:00.000Z","dateModified":"2025-08-13T07:49:24.000Z","author":[{"@type":"Person","name":"Ruochen Chen"}]}</script><link rel="icon" href="/mac.ico"><title>复习 | Ruochen Chen</title><meta name="description" content="复习 京东项目 - 分布式调度引擎 1. 架构设计相关问题 Q1: 项目中碰到了哪些困难？架构层面和开发层面？ 架构层面 高可用架构设计困难 问题：如何保证系统的高可用性 挑战：需要设计无单点故障的架构 解决方案： 应用层：Spring Boot集群部署（3个实例），Nginx轮询分发请求到应用层 调度器：XXL-JOB调度中心（1个+热备），XXL-...">
    <link rel="stylesheet" href="/assets/css/styles.563fed46.css">
    <link rel="preload" href="/assets/js/runtime~app.89f26a52.js" as="script"><link rel="preload" href="/assets/css/styles.563fed46.css" as="style"><link rel="preload" href="/assets/js/6312.2d95f1ad.js" as="script"><link rel="preload" href="/assets/js/app.8feda83c.js" as="script">
    <link rel="prefetch" href="/assets/js/zh_posts_declarative_haskell.html.f219f509.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_java8_函数式编程.html.6406d92a.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_Netty01-nio.html.6aaca557.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_Netty04-优化与源码.html.8edea904.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_Netty03-进阶.html.6b130a66.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_数组.html.9ef6b4e9.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_动态规划.html.61abe486.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_Netty02-intro.html.48ff395e.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_nginx_1.html.be9ccc3a.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_二叉树.html.c9482b31.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_面试要点.html.65f6eee5.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_declarative_prolog.html.d10c8ca1.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_链表.html.d97cbc37.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_COMP90024.html.c07eee32.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_图.html.e75c5fd4.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_栈和队列.html.2a7e3777.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_hive_Hive-SQL语法大全.html.4ea325b1.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_其他问题.html.b2b35bb6.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_14.html.91687ee1.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_declarative_haskell速记.html.0de6f0c8.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_回溯.html.f2eaeec4.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_其他.html.f274621f.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_COMP90049.html.4b1c6d22.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_COMP90050.html.4b5d3bee.js" as="script"><link rel="prefetch" href="/assets/js/posts_note_Coin-exchange-project-note.html.9c9c631c.js" as="script"><link rel="prefetch" href="/assets/js/posts_tailwind_summary.html.7c9f97e6.js" as="script"><link rel="prefetch" href="/assets/js/2664.0c0e265f.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_数据结构.html.1143a147.js" as="script"><link rel="prefetch" href="/assets/js/posts_typescript_1.html.adb4c039.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_计算机网络.html.57bf0039.js" as="script"><link rel="prefetch" href="/assets/js/posts_typescript_2.html.70e869a7.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_贪心.html.8b0ae2af.js" as="script"><link rel="prefetch" href="/assets/js/posts_aws-saa_1.html.12f65834.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_ml.html.930a6c4a.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_数据库.html.bb6e239c.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_COMP90048.html.8968005c.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_计算机组成原理.html.f075ed19.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_操作系统.html.9a98732a.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_1.html.42f88b26.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_declarative_prolog速记.html.06d2d57f.js" as="script"><link rel="prefetch" href="/assets/js/8300.ef6ef338.js" as="script"><link rel="prefetch" href="/assets/js/posts_mybatis_2.html.5926ba81.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_双指针.html.dd171978.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_7.html.d2987d20.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_4.html.d05f7970.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_复习.html.ffa67e23.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_5.html.74809557.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_8.html.48797aee.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_2.html.5da88c74.js" as="script"><link rel="prefetch" href="/assets/js/posts_aws-saa_3.html.3976b1b1.js" as="script"><link rel="prefetch" href="/assets/js/posts_nginx_1.html.9d684d75.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_SWEN90016.html.240e6126.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_哈希.html.f3d63117.js" as="script"><link rel="prefetch" href="/assets/js/posts_spark_Spark-Core.html.d371024a.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_11.html.acf3feb6.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_14.html.6ae00502.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_8.html.35609b90.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_4.html.76f297f5.js" as="script"><link rel="prefetch" href="/assets/js/posts_spark_Spark-Sql.html.1a76e157.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_21.html.5d38e92e.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_信息新技术.html.016ea36f.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_11.html.6ac0e485.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_5.html.d6b5776e.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_6.html.9f42e615.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_10.html.7cfe6b37.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_1.html.275b2472.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_6.html.b0bf65af.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_4.html.bb865133.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_单调栈.html.97d2a1c2.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_15.html.6ad131ac.js" as="script"><link rel="prefetch" href="/assets/js/posts_aws-saa_2.html.19b4fc69.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_6.html.0ce6907d.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_3.html.07708648.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_12.html.33aac800.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_14.html.4487a39f.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_13.html.1600cb03.js" as="script"><link rel="prefetch" href="/assets/js/posts_ai_javaai.html.ddef5ab6.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_字符串.html.66e8af08.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_5.html.c674a286.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_6.html.c703f5fb.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_2.html.2012a517.js" as="script"><link rel="prefetch" href="/assets/js/posts_typescript_3.html.67716c58.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_2.html.3cb286a6.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_16.html.47a98467.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_2.html.2faaae84.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_7.html.b7a17cf5.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_3.html.e6de0801.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_12.html.78a79e16.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_17.html.48e4e11f.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_位运算.html.89a49729.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_13.html.1af16bb4.js" as="script"><link rel="prefetch" href="/assets/js/intro.html.94b9bc8e.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_9.html.c802974b.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_15.html.c14ce54d.js" as="script"><link rel="prefetch" href="/assets/js/posts_ai_create_mcp.html.7bbd9d99.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_18.html.6db3b8d0.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_1.html.52e2c809.js" as="script"><link rel="prefetch" href="/assets/js/posts_ai_mcp.html.97488bfa.js" as="script"><link rel="prefetch" href="/assets/js/posts_mybatis_1.html.0715b7ed.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_1.html.b4be9a5c.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_7.html.391ad3ae.js" as="script"><link rel="prefetch" href="/assets/js/posts_istio_1.html.0402dff2.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_4.html.babb3186.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_15.html.1a066aec.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_10.html.a809572e.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_1.html.3f7ea202.js" as="script"><link rel="prefetch" href="/assets/js/zh_intro.html.4f0fc279.js" as="script"><link rel="prefetch" href="/assets/js/posts_spark_Spark-Intro.html.ccd5e5dd.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_5.html.e4df8be3.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_19.html.f4de2c0a.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_7.html.be9d15e1.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_3.html.1db9eef8.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_7.html.95a6d006.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_8.html.bf7de1dc.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_index.html.964e7b71.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_3.html.b6b4d014.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_Hive.html.0678d205.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_数学.html.452843d9.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_7.html.97e8c4ab.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_9.html.daf44b98.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_HDFS.html.bc68b1b5.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_index.html.969cd922.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_2.html.03f4e466.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_8.html.266a2255.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_4.html.f53cce1e.js" as="script"><link rel="prefetch" href="/assets/js/posts_jd_note.html.d14373ad.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_5.html.4cdca3c2.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_3.html.47cad464.js" as="script"><link rel="prefetch" href="/assets/js/posts_docker_1.html.fb8facad.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_11.html.ce50e313.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_microsvc_1.html.2fe97c3c.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_index.html.8bdb826b.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_summary.html.dcef505d.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_6.html.b6472eba.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_6.html.02cce475.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_3.html.e8a57164.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_6.html.0c46208c.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_7.html.34e04d11.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_8.html.ae4c64a3.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_4.html.a8ec1263.js" as="script"><link rel="prefetch" href="/assets/js/posts_elasticsearch_query-dsl.html.c10df9f4.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_cloudflare.html.8d90577a.js" as="script"><link rel="prefetch" href="/assets/js/posts_algorithm_20.html.490f1029.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_1.html.0cac3363.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_5.html.a42942da.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_2.html.1499c365.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_10.html.156d0fc8.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_16.html.94f2539e.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_practices_3.html.2d055dbe.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_tools.html.4cf9b015.js" as="script"><link rel="prefetch" href="/assets/js/posts_elasticsearch_1.html.55fea42c.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_2.html.4fddb7fe.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_index.html.9f6e664a.js" as="script"><link rel="prefetch" href="/assets/js/posts_dubbo_1.html.1f23a627.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_concepts_4.html.1c4ee376.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_9.html.132d4ce9.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_index.html.3644a432.js" as="script"><link rel="prefetch" href="/assets/js/posts_nextjs_index.html.b114f681.js" as="script"><link rel="prefetch" href="/assets/js/posts_interview_9.html.a3039a5a.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_index.html.6e477592.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_1.html.ea5597b0.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_8.html.bc2310ff.js" as="script"><link rel="prefetch" href="/assets/js/posts_elasticsearch_2.html.965ea244.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_genesis.html.b92085d2.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_5.html.4cfebd9b.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_GEOM90007.html.daec0d9f.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_index.html.77a0d6fd.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_MapReduce.html.66b74478.js" as="script"><link rel="prefetch" href="/assets/js/posts_genesis.html.f2dcbd5d.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_12.html.6f85b8a6.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_sealos.html.2f8ff09a.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_index.html.30eae38c.js" as="script"><link rel="prefetch" href="/assets/js/posts_dubbo_2.html.4153924b.js" as="script"><link rel="prefetch" href="/assets/js/posts_cliché_13.html.9f0ab2c4.js" as="script"><link rel="prefetch" href="/assets/js/posts_aws-saa_index.html.91a04274.js" as="script"><link rel="prefetch" href="/assets/js/posts_typescript_index.html.3113541a.js" as="script"><link rel="prefetch" href="/assets/js/posts_elasticsearch_index.html.4152a6b9.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_index.html.c927a97d.js" as="script"><link rel="prefetch" href="/assets/js/index.html.8b8ff801.js" as="script"><link rel="prefetch" href="/assets/js/posts_dubbo_index.html.6c52fb32.js" as="script"><link rel="prefetch" href="/assets/js/posts_hadoop_Yarn.html.94f37571.js" as="script"><link rel="prefetch" href="/assets/js/posts_nginx_index.html.75cc2b5d.js" as="script"><link rel="prefetch" href="/assets/js/posts_ai_index.html.6d4a62d9.js" as="script"><link rel="prefetch" href="/assets/js/posts_mybatis_index.html.f1a73719.js" as="script"><link rel="prefetch" href="/assets/js/posts_spark_index.html.434a7834.js" as="script"><link rel="prefetch" href="/assets/js/posts_kubernetes_microsvc_index.html.7ac9796f.js" as="script"><link rel="prefetch" href="/assets/js/posts_cmb_9.html.e9ae3067.js" as="script"><link rel="prefetch" href="/assets/js/posts_nginx_2.html.61b94ab9.js" as="script"><link rel="prefetch" href="/assets/js/zh_index.html.b526dd8b.js" as="script"><link rel="prefetch" href="/assets/js/posts_tailwind_index.html.a3b1860b.js" as="script"><link rel="prefetch" href="/assets/js/posts_docker_index.html.915fb03b.js" as="script"><link rel="prefetch" href="/assets/js/posts_istio_index.html.d4b67811.js" as="script"><link rel="prefetch" href="/assets/js/posts_note_index.html.79ea061a.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_软件设计与开发.html.d87b372b.js" as="script"><link rel="prefetch" href="/assets/js/posts_unimelb_GEOM90008.html.d7040807.js" as="script"><link rel="prefetch" href="/assets/js/category_learning-records_index.html.f32ee64d.js" as="script"><link rel="prefetch" href="/assets/js/tag_nginx_index.html.0fa6f2ea.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_declarative-programming_index.html.6ae8ae47.js" as="script"><link rel="prefetch" href="/assets/js/category_index.html.50e2e1bc.js" as="script"><link rel="prefetch" href="/assets/js/timeline_index.html.a204d771.js" as="script"><link rel="prefetch" href="/assets/js/article_index.html.ffcd7938.js" as="script"><link rel="prefetch" href="/assets/js/zh_category_学习笔记_index.html.12546e3e.js" as="script"><link rel="prefetch" href="/assets/js/category_internship-journal_index.html.4b3fa613.js" as="script"><link rel="prefetch" href="/assets/js/zh_category_learning-records_index.html.af6fedad.js" as="script"><link rel="prefetch" href="/assets/js/tag_index.html.dbf647b4.js" as="script"><link rel="prefetch" href="/assets/js/star_index.html.7f8a9df9.js" as="script"><link rel="prefetch" href="/assets/js/tag_programmer-cliché_index.html.120cca1a.js" as="script"><link rel="prefetch" href="/assets/js/tag_algorithm-practices_index.html.d975dd18.js" as="script"><link rel="prefetch" href="/assets/js/tag_china-merchant-bank_index.html.de8b373f.js" as="script"><link rel="prefetch" href="/assets/js/tag_technical-interview_index.html.acf61e6f.js" as="script"><link rel="prefetch" href="/assets/js/posts_index.html.c7f3157a.js" as="script"><link rel="prefetch" href="/assets/js/zh_category_开始_index.html.29cb4412.js" as="script"><link rel="prefetch" href="/assets/js/tag_tailwind-css_index.html.7b3e36e9.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_旅程_index.html.151709c9.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_简历_index.html.96ae735a.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_algorithm_index.html.5a457b02.js" as="script"><link rel="prefetch" href="/assets/js/category_genesis_index.html.66947f9e.js" as="script"><link rel="prefetch" href="/assets/js/tag_javascript_index.html.266dcd48.js" as="script"><link rel="prefetch" href="/assets/js/tag_kubernetes_index.html.2b919c53.js" as="script"><link rel="prefetch" href="/assets/js/tag_typescript_index.html.ab5e1572.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_review_index.html.9bc60916.js" as="script"><link rel="prefetch" href="/assets/js/tag_leetcode_index.html.6b98bbdb.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_java8_index.html.5b1186ee.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_netty_index.html.3ede65fb.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_nginx_index.html.c21f0432.js" as="script"><link rel="prefetch" href="/assets/js/tag_aws-saa_index.html.01a20249.js" as="script"><link rel="prefetch" href="/assets/js/tag_mybatis_index.html.bdbe6d2a.js" as="script"><link rel="prefetch" href="/assets/js/tag_unimelb_index.html.d4bafe83.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_hive_index.html.fab4d732.js" as="script"><link rel="prefetch" href="/assets/js/tag_docker_index.html.b7d4cbf8.js" as="script"><link rel="prefetch" href="/assets/js/tag_hadoop_index.html.39a6a55f.js" as="script"><link rel="prefetch" href="/assets/js/tag_nextjs_index.html.581d2c34.js" as="script"><link rel="prefetch" href="/assets/js/tag_resume_index.html.c4e4c327.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_nio_index.html.0a4acee3.js" as="script"><link rel="prefetch" href="/assets/js/tag_dubbo_index.html.90f9e5c2.js" as="script"><link rel="prefetch" href="/assets/js/tag_index_index.html.ee3192d7.js" as="script"><link rel="prefetch" href="/assets/js/tag_istio_index.html.cb329abb.js" as="script"><link rel="prefetch" href="/assets/js/tag_notes_index.html.075779e3.js" as="script"><link rel="prefetch" href="/assets/js/tag_react_index.html.49ec34fb.js" as="script"><link rel="prefetch" href="/assets/js/tag_spark_index.html.287e8a9c.js" as="script"><link rel="prefetch" href="/assets/js/404.html.15229e01.js" as="script"><link rel="prefetch" href="/assets/js/zh_timeline_index.html.3a7839f4.js" as="script"><link rel="prefetch" href="/assets/js/tag_ai_index.html.3120c8b4.js" as="script"><link rel="prefetch" href="/assets/js/tag_es_index.html.8f0f4273.js" as="script"><link rel="prefetch" href="/assets/js/tag_jd_index.html.6c64e177.js" as="script"><link rel="prefetch" href="/assets/js/zh_category_index.html.e65aefca.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_declarative_index.html.6759320d.js" as="script"><link rel="prefetch" href="/assets/js/zh_article_index.html.2c545722.js" as="script"><link rel="prefetch" href="/assets/js/zh_tag_index.html.6a5580f0.js" as="script"><link rel="prefetch" href="/assets/js/zh_star_index.html.698b9149.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_review_index.html.6b5498be.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_java8_index.html.245580da.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_netty_index.html.9e91bcfd.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_nginx_index.html.6deedd0e.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_algo_index.html.d664c5ec.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_hive_index.html.e3d7d626.js" as="script"><link rel="prefetch" href="/assets/js/zh_posts_index.html.46dc1fe4.js" as="script"><link rel="prefetch" href="/assets/js/posts_jd_index.html.7a8d7890.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/zh/" aria-label="带我回家"><img class="vp-nav-logo" src="/bubu.jpg" alt><!----><span class="vp-site-name hide-in-pad">Ruochen Chen</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/zh/" aria-label="主页"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->主页<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="笔记"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>笔记<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Hive</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/hive/Hive-SQL%E8%AF%AD%E6%B3%95%E5%A4%A7%E5%85%A8.html" aria-label="Hive语法大全"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Hive语法大全<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Java8特性</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/java8/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html" aria-label="函数式编程"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->函数式编程<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Netty</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/netty/Netty01-nio.html" aria-label="Nio介绍"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Nio介绍<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/netty/Netty02-intro.html" aria-label="Netty入门"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Netty入门<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/netty/Netty03-%E8%BF%9B%E9%98%B6.html" aria-label="Netty进阶"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Netty进阶<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/netty/Netty04-%E4%BC%98%E5%8C%96%E4%B8%8E%E6%BA%90%E7%A0%81.html" aria-label="Netty优化"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Netty优化<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">NGINX</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/zh/posts/nginx/1.html" aria-label="NGINX 高级"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->NGINX 高级<!----></a></li></ul></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><div class="vp-nav-item"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="选择语言"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" name="i18n" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/" aria-label="English"><!---->English<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/zh/posts/review/%E5%A4%8D%E4%B9%A0.html" aria-label="简体中文"><!---->简体中文<!----></a></li></ul></button></div></div><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/Crc011220/Crc011220.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/zh/" aria-label="主页"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->主页<!----></a></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header active"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">笔记</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Algo</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Declarative</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Hive</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Java8</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Netty</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Nginx</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Review</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E4%BF%A1%E6%81%AF%E6%96%B0%E6%8A%80%E6%9C%AF.html" aria-label="信息新技术"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->信息新技术<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E5%85%B6%E4%BB%96%E9%97%AE%E9%A2%98.html" aria-label="其他问题"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->其他问题<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/zh/posts/review/%E5%A4%8D%E4%B9%A0.html" aria-label="复习"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->复习<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html" aria-label="操作系统"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->操作系统<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E6%95%B0%E5%AD%A6.html" aria-label="数学"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->数学<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E6%95%B0%E6%8D%AE%E5%BA%93.html" aria-label="数据库"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->数据库<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" aria-label="数据结构"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->数据结构<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.html" aria-label="计算机组成原理"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->计算机组成原理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html" aria-label="计算机网络"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->计算机网络<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%BC%80%E5%8F%91.html" aria-label="软件设计与开发"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->软件设计与开发<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/review/%E9%9D%A2%E8%AF%95%E8%A6%81%E7%82%B9.html" aria-label="面试要点"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->面试要点<!----></a></li></ul></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/genesis.html" aria-label="开始"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->开始<!----></a></li></ul></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/intro.html" aria-label="关于我"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-circle-info" style=""></span><!--]-->关于我<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>复习</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Ruochen Chen</span></span><span property="author" content="Ruochen Chen"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2025年7月13日</span><meta property="datePublished" content="2025-07-13T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 23 分钟</span><meta property="timeRequired" content="PT23M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color5 clickable" role="navigation">Learning Records</span><!--]--><meta property="articleSection" content="Learning Records"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color0 clickable" role="navigation">Review</span><!--]--><meta property="keywords" content="Review"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#京东项目-分布式调度引擎">京东项目 - 分布式调度引擎</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-架构设计相关问题">1. 架构设计相关问题</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#招行项目-excel处理框架">招行项目 - Excel处理框架</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-架构设计相关问题-1">1. 架构设计相关问题</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-具体业务逻辑是什么">2. 具体业务逻辑是什么？</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#招行项目-消息通知服务">招行项目 - 消息通知服务</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#项目背景">项目背景</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#❌-碰到的主要困难">❌ 碰到的主要困难</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#🛠️-解决方案-策略-工厂模式">🛠️ 解决方案：策略+工厂模式</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#具体实现优势">具体实现优势</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#大学项目-云平台数据分析">大学项目 - 云平台数据分析</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-es如何优化的">1. ES如何优化的</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#加密货币交易平台">加密货币交易平台</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-困难和解决">1. 困难和解决</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><h1 id="复习" tabindex="-1"><a class="header-anchor" href="#复习"><span>复习</span></a></h1><h2 id="京东项目-分布式调度引擎" tabindex="-1"><a class="header-anchor" href="#京东项目-分布式调度引擎"><span>京东项目 - 分布式调度引擎</span></a></h2><h3 id="_1-架构设计相关问题" tabindex="-1"><a class="header-anchor" href="#_1-架构设计相关问题"><span>1. 架构设计相关问题</span></a></h3><p><strong>Q1: 项目中碰到了哪些困难？架构层面和开发层面？</strong></p><h4 id="架构层面" tabindex="-1"><a class="header-anchor" href="#架构层面"><span>架构层面</span></a></h4><ol><li>高可用架构设计困难</li></ol><ul><li>问题：如何保证系统的高可用性</li><li>挑战：需要设计无单点故障的架构</li><li>解决方案： <ul><li>应用层：Spring Boot集群部署（3个实例），Nginx轮询分发请求到应用层</li><li>调度器：XXL-JOB调度中心（1个+热备），XXL-JOB执行器（3个）</li><li>数据库层：MySQL主从复制（1主2从），ProxySQL读写分离（1个，待优化）</li><li>缓存层：Redis哨兵模式（3哨兵+1主2从），Redis缓存热点数据</li><li>监控：集成Spring Boot Actuator（监控 CPU、JVM、MySQL、Redis状态）</li></ul></li></ul><ol start="2"><li>分布式一致性难题</li></ol><ul><li>问题：多节点环境下如何保证数据一致性</li><li>挑战：任务状态同步、分布式锁实现</li><li>解决方案：</li></ul><p>我们采用&quot;XXL-JOB + 分布式锁 + 补偿机制&quot;的组合方案来解决分布式一致性问题。XXL-JOB负责任务调度和去重，分布式锁保证并发安全，补偿机制处理跨服务数据不一致。三者各司其职、互补性强，实现了完整的分布式一致性保证。</p><h4 id="任务调度层面-xxl-job" tabindex="-1"><a class="header-anchor" href="#任务调度层面-xxl-job"><span>任务调度层面（XXL-JOB）</span></a></h4><p><strong>XXL-JOB的架构设计和职责划分</strong></p><ul><li>A. 项目系统负责： <ul><li>脚本管理 - 上传、存储、编辑脚本文件</li><li>任务管理 - 创建、配置、管理定时任务</li><li>用户管理 - 权限控制、用户认证</li><li>监控界面 - 执行状态、日志查看、统计分析</li></ul></li><li>B. XXL-JOB负责： <ul><li>定时调度 - 按Cron表达式触发任务执行</li><li>分布式执行 - 多实例负载均衡和故障转移</li><li>执行监控 - 任务执行状态跟踪</li><li>日志记录 - 详细的执行日志和错误信息</li></ul></li><li>XXL-JOB调度中心的热备不是自动集群，而是主备模式： <ul><li>主调度中心：正常工作，处理所有调度</li><li>备调度中心：待命状态，共享同一数据库</li><li>手动/半自动切换：主挂了，人工或脚本启用备用</li></ul></li></ul><p><strong>XXL-JOB调度中心已解决的分布式一致性问题</strong></p><ul><li>任务重复执行防护 <ul><li>通过数据库唯一约束防止同一任务被重复调度</li><li>执行器通过任务ID去重，避免重复执行</li></ul></li><li>任务状态一致性 <ul><li>调度中心统一管理任务状态（待执行、执行中、执行完成、执行失败）</li><li>执行器定期心跳上报，保持状态同步</li></ul></li><li>分布式锁机制 <ul><li>调度中心通过数据库行锁保证任务分配的原子性</li><li>避免多个调度中心同时分配同一任务</li></ul></li><li>任务执行结果一致性 <ul><li>执行器执行完成后统一回调调度中心</li><li>调度中心记录执行结果，保证数据一致性</li></ul></li></ul><p><strong>项目解决的分布式一致性问题</strong> XXL-JOB虽然能解决任务重复执行的问题，但在我们的分布式调度引擎中，还有很多跨服务的数据一致性问题它无法解决：</p><ol><li>脚本文件与任务配置的一致性</li><li>任务状态与XXL-JOB执行状态的一致性</li><li>用户权限变更与任务执行的一致性</li><li>系统配置与任务行为的一致性</li></ol><p>所以我们采用了&quot;<strong>XXL-JOB + 分布式锁 + 补偿机制</strong>&quot;的组合方案：XXL-JOB负责任务调度和去重，分布式锁保证并发安全，补偿机制处理跨服务数据不一致，这样就能实现完整的分布式一致性保证。</p><p><strong>saga：本地一致+补偿机制</strong> 补偿机制通过<strong>消息队列</strong>实现，主要处理部分成果、跨服务数据不一致的问题。</p><p>例子：补偿机制的具体处理流程是：</p><ol><li>脚本上传成功 ✅</li><li>任务配置创建成功 ✅</li><li>XXL-JOB注册失败 ❌</li></ol><p>补偿机制会从最后一步开始，倒序清理已成功的操作。</p><p>第一步：系统检测到XXL-JOB注册失败，立即发送补偿消息到消息队列</p><ul><li>消息类型：TASK_CREATION_FAILED</li><li>包含数据：脚本路径、任务ID、失败原因等</li></ul><p>第二步：补偿处理器消费消息，执行倒序清理</p><ul><li>清理XXL-JOB相关数据（如果有部分注册成功）</li><li>删除已创建的任务配置</li><li>清理已上传的脚本文件</li></ul><p>第三步：更新任务状态为&quot;创建失败&quot;，记录补偿日志</p><p>采用了Saga&quot;本地事务+补偿机制&quot;的组合方案：</p><ol><li><strong>本地事务</strong>：保证每个服务内部的数据一致性</li></ol><ul><li>脚本服务：文件上传的原子性</li><li>任务服务：任务配置的原子性</li><li>XXL-JOB服务：任务注册的原子性</li></ul><ol start="2"><li><strong>补偿机制</strong>：处理跨服务的不一致问题</li></ol><ul><li>当某个服务失败时，自动清理其他服务已成功的操作</li><li>通过消息队列异步处理，不影响主流程性能</li><li>实现最终一致性，而不是强一致性</li></ul><p>这样既保持了微服务的独立性，又解决了跨服务的一致性问题。</p><p><strong>分布式锁</strong> 保证高并发场景下的安全，锁粒度是：</p><ul><li>用户级别：按用户ID加锁，不同用户可以并发操作</li><li>资源级别：按资源ID加锁，不同资源可以并发操作</li><li>时间级别：设置合理的锁过期时间，防止死锁</li></ul><p>我们选择Redisson实现分布式锁，主要考虑它的专业性和可靠性：</p><ol><li>自动续期机制：Redisson支持锁的自动续期，避免业务执行时间过长导致锁过期</li><li>可重入锁支持：同一个线程可以多次获取同一个锁，避免死锁</li><li>公平锁实现：支持公平锁，保证锁的获取顺序</li><li>看门狗机制：自动监控锁的状态，异常情况下自动释放锁</li></ol><p>这样既保证了并发安全，又不会过度影响系统的并发性能。</p><h4 id="数据库层面-proxysql" tabindex="-1"><a class="header-anchor" href="#数据库层面-proxysql"><span>数据库层面（ProxySQL）</span></a></h4><ul><li>数据库主从切换时的数据同步 <ul><li>主从复制通过binlog机制（写入中继日志，然后从库重放）实现数据同步，ProxySQL在此基础上提供读写分离和故障切换。</li></ul></li><li>数据库读写分离 <ul><li>使用ProxySQL实现读写分离，根据请求类型（读/写）自动路由到主库或从库</li><li>第一步，定义服务器组。 我们创建了读写分离组，写组ID是10，读组ID是20，这样ProxySQL就知道哪些是主库哪些是从库。</li><li>第二步，配置服务器。 把主库IP加入写组10，从库IP加入读组20，每个服务器都要设置状态为ONLINE。</li><li>第三步，配置路由规则。 写操作（INSERT/UPDATE/DELETE）自动路由到写组，读操作（SELECT）自动路由到读组。</li></ul></li><li>数据库主库宕机后，如何自动切换（ProxySQL） <ul><li>自动检测 - 每200ms ping一次主库，检测连接状态</li><li>故障判断 - 连续失败达到阈值（如3次）后，自动标记主库为OFFLINE</li><li>智能路由 - 写请求自动路由到新的主库，读请求分散到所有可用从库</li><li>透明切换 - 应用层无需感知，连接ProxySQL即可，底层切换完全透明</li></ul></li><li>数据库主库宕机恢复后 <ul><li>ProxySQL持续ping宕机的主库</li><li>主库恢复后，ping成功</li><li>连续成功达到阈值后，标记主库为ONLINE</li><li>写操作：自动路由回主库（因为主库在写组且状态为ONLINE）</li><li>读操作：继续分散到所有可用节点（包括恢复的主库）</li><li>数据一致性：确保主库数据与从库同步后再恢复写路由，同步方法是通过MySQL主从复制机制，ProxySQL监控复制延迟，只有当从库延迟小于设定阈值时才恢复主库写操作。</li></ul></li><li>备用降级方案 <ul><li>如果ProxySQL宕机，会集群部署ProxySQL或使用AOP来切换到备用数据库，保证服务不中断（待优化，现在是单台ProxySQL）</li></ul></li></ul><p><strong>架构图：</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>应用1 ──┐</span></span>
<span class="line"><span>         ├──→ ProxySQL ──→ 主库MySQL</span></span>
<span class="line"><span>应用2 ──┘              └──→ 从库MySQL</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>具体连接方式：</strong></p><p><strong>1. 应用层配置：</strong></p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># application.yml</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spring</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  datasource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">jdbc:mysql://ProxySQL_IP:6033/数据库名</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">用户名</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    password</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">密码</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. ProxySQL配置：</strong></p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 配置后端MySQL服务器</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> mysql_servers </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;192.168.1.10&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3306</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ONLINE&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 主库</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> mysql_servers </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;192.168.1.11&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3306</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ONLINE&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 从库</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3. 工作流程：</strong></p><ul><li><strong>应用1和应用2</strong>：都连接ProxySQL的6033端口</li><li><strong>ProxySQL</strong>：根据SQL类型自动路由到主库或从库</li><li><strong>应用感知不到</strong>：底层是主库还是从库对应用完全透明</li></ul><p><strong>优势：</strong></p><ul><li><strong>统一入口</strong>：所有应用都连接ProxySQL</li><li><strong>自动路由</strong>：写操作自动走主库，读操作自动走从库</li><li><strong>故障切换</strong>：主库宕机时自动切换到从库</li></ul><h4 id="redis层面-redis哨兵" tabindex="-1"><a class="header-anchor" href="#redis层面-redis哨兵"><span>Redis层面（Redis哨兵）</span></a></h4><ul><li>Redis缓存了什么业务数据？ <ul><li>JWT Token管理、在线用户监控、用户权限数据缓存、仪表板统计数据缓存</li></ul></li></ul><p><strong>双写一致性</strong> 我们采用&quot;先更新数据库，再删除缓存&quot;的策略来保证双写一致性，具体实现是：</p><ol><li><strong>写操作流程</strong>：先更新数据库，成功后再删除Redis缓存</li><li><strong>读操作流程</strong>：先查Redis，没有则查数据库并回填缓存</li><li><strong>异常处理</strong>：如果删除缓存失败，通过消息队列异步重试</li><li><strong>最终一致性</strong>：通过延迟双删和重试机制保证最终一致性</li></ol><p>也可以采用的阿里的Canal组件实现数据同步：不需要更改业务代码，只需部署一个Canal服务。Canal服务把自己伪装成mysql的一个从节点。当mysql数据更新以后，Canal会读取binlog数据，然后再通过Canal的客户端获取到数据，并更新缓存即可。</p><h5 id="开发层面" tabindex="-1"><a class="header-anchor" href="#开发层面"><span>开发层面</span></a></h5><ol><li>XXL-JOB集成和配置困难</li></ol><ul><li>问题：XXL-JOB的配置比较复杂，需要深入理解其架构</li><li>挑战：调度中心和执行器的配置、网络通信、任务注册</li><li>解决方案： <ul><li>仔细阅读官方文档和源码</li><li>搭建测试环境进行调试</li><li>编写详细的配置文档</li></ul></li></ul><ol start="2"><li>Docker容器化部署问题</li></ol><ul><li>问题：Docker配置错误导致服务无法正常启动</li><li>挑战：容器网络配置、端口映射、数据卷挂载</li><li>解决方案： <ul><li>使用docker-compose简化部署</li><li>编写详细的部署脚本</li><li>添加健康检查和日志监控</li></ul></li></ul><ol start="3"><li>权限管理系统开发困难</li></ol><ul><li>问题：RBAC权限管理需要细粒度的权限控制</li><li>挑战：用户-角色-权限的复杂关系、动态权限验证</li><li>解决方案： <ul><li>设计清晰的权限模型</li><li>使用Spring Security实现权限控制</li><li>通过注解实现细粒度权限验证</li></ul></li></ul><ol start="4"><li>监控系统开发挑战</li></ol><ul><li>问题：需要实时监控任务执行状态和系统性能</li><li>挑战：数据采集、实时展示、告警机制</li><li>解决方案： <ul><li>使用WebSocket实现实时数据推送</li><li>实现自定义的告警规则</li></ul></li></ul><h2 id="招行项目-excel处理框架" tabindex="-1"><a class="header-anchor" href="#招行项目-excel处理框架"><span>招行项目 - Excel处理框架</span></a></h2><h3 id="_1-架构设计相关问题-1" tabindex="-1"><a class="header-anchor" href="#_1-架构设计相关问题-1"><span>1. 架构设计相关问题</span></a></h3><p><strong>Q1: Excel处理框架的整体架构是什么？</strong></p><h5 id="架构层面-1" tabindex="-1"><a class="header-anchor" href="#架构层面-1"><span>架构层面</span></a></h5><ol><li>大数据处理内存溢出问题</li></ol><ul><li>问题：处理10万级数据时出现OOM（Out of Memory）</li><li>挑战：Excel文件无法一次性加载到内存</li><li>解决方案： <ul><li>采用分片处理策略，每片处理1万行数据</li><li>使用流式读取，边读边处理</li><li>优化内存使用，及时释放无用对象</li></ul></li></ul><ol start="2"><li>系统架构如何做的？</li></ol><ul><li>单体架构部署，部署在招行内部API云市场中</li><li>使用Spring Boot框架开发</li><li>使用Redis缓存热点数据（如任务状态和进度信息，校验规则，业务配置数据，分片处理锁）</li><li>使用线程池控制并发数量</li><li>使用异步处理，立即返回任务ID</li></ul><ol start="3"><li>数据一致性保证：</li></ol><ul><li>问题：并发处理时数据一致性和完整性</li><li>挑战：多线程环境下的数据同步和事务管理</li><li>解决方案：使用分布式锁+数据库事务+结果验证</li></ul><h5 id="开发层面-1" tabindex="-1"><a class="header-anchor" href="#开发层面-1"><span>开发层面</span></a></h5><ol><li>Excel文件格式兼容性问题</li></ol><ul><li>问题：不同版本的Excel文件格式差异较大</li><li>挑战：.xls和.xlsx格式的兼容性、特殊字符处理</li><li>解决方案： <ul><li>使用Apache POI库处理多种格式：HSSFWorkbook和XSSFWorkbook来处理xls和xlsx格式</li><li>实现格式检测和自动转换</li><li>添加特殊字符过滤和编码处理</li><li>编写详细的格式验证规则</li></ul></li></ul><ol start="2"><li>异步处理状态跟踪困难</li></ol><ul><li>问题：如何准确跟踪异步任务的执行状态</li><li>挑战：任务进度实时更新、异常状态处理</li><li>解决方案： <ul><li>使用Redis存储任务状态和进度</li><li>实现定时任务更新进度信息</li><li>添加任务超时和重试机制</li><li>设计完善的异常处理流程</li></ul></li></ul><ol start="3"><li>缓存策略设计复杂</li></ol><ul><li>问题：如何设计高效的缓存策略</li><li>挑战：缓存更新、缓存失效、内存管理</li><li>解决方案： <ul><li>使用Redis Hash结构存储复杂数据</li><li>实现缓存预热和更新策略</li><li>设置合理的缓存过期时间</li><li>添加缓存监控和告警</li></ul></li></ul><h3 id="_2-具体业务逻辑是什么" tabindex="-1"><a class="header-anchor" href="#_2-具体业务逻辑是什么"><span>2. 具体业务逻辑是什么？</span></a></h3><h4 id="客户信息批量导入业务逻辑" tabindex="-1"><a class="header-anchor" href="#客户信息批量导入业务逻辑"><span>客户信息批量导入业务逻辑</span></a></h4><p><strong>面试回答：</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>这个项目主要处理招行各分行的客户信息（支持不同版本，比如基础信息，业务信息等不同表头）批量导入。客户经理上传Excel文件后，系统会智能识别表头结构（支持多级表头），然后按1万行一个分片进行异步处理。每个分片会进行业务规则校验（身份证号格式、手机号格式、业务合规性等），数据清洗转换（格式标准化、去重补全），最后批量入库，也可以根据需求转成像json这类的结构。整个过程支持断点续传，如果某条记录校验失败，会单独导出供客户经理修正。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="线程池异步分片的原因" tabindex="-1"><a class="header-anchor" href="#线程池异步分片的原因"><span>线程池异步分片的原因</span></a></h4><p><strong>面试回答：</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>使用线程池异步分片主要解决两个问题：</span></span>
<span class="line"><span></span></span>
<span class="line"><span>第一，内存溢出问题。招行的客户数据量很大，一个Excel文件可能有几十万行，如果一次性加载到内存会直接OOM。通过分片处理，每次只处理1万行数据，有效控制内存使用。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>第二，性能瓶颈问题。单线程处理大文件会很慢，用户等待时间长。使用线程池可以同时处理多个分片，比如10个线程并行处理，处理速度能提升5-10倍。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>第三，用户体验问题。异步处理让用户可以立即得到任务ID，然后通过进度条实时查看处理进度，而不是一直等待到处理完成。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="redis缓存的原因" tabindex="-1"><a class="header-anchor" href="#redis缓存的原因"><span>Redis缓存的原因</span></a></h4><p><strong>面试回答：</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Redis缓存主要解决三个问题：</span></span>
<span class="line"><span></span></span>
<span class="line"><span>第一，处理进度跟踪。每个分片的处理状态、进度百分比、错误信息都需要实时更新，Redis的Hash结构非常适合存储这种键值对数据，支持实时查询和更新。</span></span>
<span class="line"><span>Redis的hash大概长这样：Key → { field1: value1, field2: value2, field3: value3, ... }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Key: task_progress:{taskId} Value: { &quot;total_chunks&quot;: 10, &quot;completed_chunks&quot;: 3, &quot;current_chunk&quot;: 4, &quot;status&quot;: &quot;PROCESSING&quot;, &quot;start_time&quot;: 1699123456 }</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>第二，断点续传支持。如果系统重启或某个分片失败，可以从Redis中恢复处理状态，不需要重新开始整个任务，这对用户体验很重要。</span></span>
<span class="line"><span>  - 不是真正的&quot;断点&quot;： 而是通过记录处理位置实现&quot;从哪里继续&quot;</span></span>
<span class="line"><span>  - 定期保存： 不是每处理一行都保存，而是批量保存，平衡性能和可靠性</span></span>
<span class="line"><span>  - 状态完整性： 需要记录分片状态、处理进度、错误信息等完整信息 </span></span>
<span class="line"><span></span></span>
<span class="line"><span>第三，配置数据缓存。客户类型、风险等级、行业分类等配置信息变化不频繁，但查询频率很高。缓存到Redis可以减少数据库查询，提升其他接口的响应速度。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="redis选择hash结构的原因" tabindex="-1"><a class="header-anchor" href="#redis选择hash结构的原因"><span>Redis选择Hash结构的原因</span></a></h4><table><thead><tr><th>优势</th><th>具体表现</th><th>业务价值</th></tr></thead><tbody><tr><td><strong>天然适合键值对数据</strong></td><td>专门为存储对象设计，包含多个field-value对</td><td>完美匹配错误信息和状态数据结构</td></tr><tr><td><strong>原子性操作支持</strong></td><td>支持原子性的字段操作，多线程更新不冲突</td><td>保证数据一致性，避免并发问题</td></tr><tr><td><strong>部分更新效率高</strong></td><td>只需更新变化字段，无需重写整个对象</td><td>提升性能，避免不必要的序列化开销</td></tr><tr><td><strong>查询灵活</strong></td><td>支持单字段、多字段、全字段查询</td><td>满足不同查询需求，提升开发灵活性</td></tr><tr><td><strong>内存效率高</strong></td><td>比多个独立String key更节省内存</td><td>减少Redis内存开销，提升系统性能</td></tr><tr><td><strong>批量操作支持</strong></td><td>支持批量设置和获取多个字段</td><td>提升操作效率，减少网络往返</td></tr><tr><td><strong>适合分片处理场景</strong></td><td>天然适合管理多字段的结构化数据</td><td>完美契合分片处理的状态管理需求</td></tr></tbody></table><p><strong>核心价值：</strong> Hash结构在Redis中处理对象数据时，提供了原子性、高效性、灵活性和内存效率的完美平衡，是存储分片处理状态信息的最佳选择。</p><h4 id="技术架构的优势" tabindex="-1"><a class="header-anchor" href="#技术架构的优势"><span>技术架构的优势</span></a></h4><p><strong>面试回答：</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>这个架构的优势是：</span></span>
<span class="line"><span></span></span>
<span class="line"><span>可扩展性强：可以通过增加线程池大小来提升并发处理能力，通过增加Redis集群来提升缓存性能。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>容错性好：单个分片失败不影响其他分片，Redis的持久化机制保证数据不丢失。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>监控友好：可以实时监控每个分片的处理状态，快速定位性能瓶颈和错误原因。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>资源利用率高：线程池避免了频繁创建销毁线程的开销，Redis缓存实现了进度监控和断点续传。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>总结回答：</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>所以选择线程池异步分片+Redis缓存，是因为这个组合能够有效解决大数据量处理的内存问题、性能问题和用户体验问题，同时提供了良好的可扩展性和容错性。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="招行项目-消息通知服务" tabindex="-1"><a class="header-anchor" href="#招行项目-消息通知服务"><span>招行项目 - 消息通知服务</span></a></h2><h3 id="项目背景" tabindex="-1"><a class="header-anchor" href="#项目背景"><span>项目背景</span></a></h3><p><strong>面试官问：&quot;这个项目主要做什么？&quot;</strong></p><p><strong>你的回答：</strong></p><p>这是招行的统一消息通知服务，主要功能是封装邮件、短信、应用消息等不同类型的消息发送功能，为上游业务系统提供统一的消息发送接口。系统需要支持动态扩展，提升系统间消息统一性与可维护性。</p><p><strong>直接调用的问题</strong></p><ol><li>业务系统需要了解每个服务商的API细节</li><li>无法统一处理重试、监控、限流等通用逻辑</li><li>代码重复，维护成本高、</li></ol><p>除了封装，添加了哪些<strong>新功能</strong>？</p><ol><li>修改源代码，让用户可以自定义行内不同的机器人发送者</li><li>原来的接口没有重试功能，如果网络抖动导致发送失败，用户需要手动重试。</li></ol><p>我们封装后添加了智能重试：</p><ul><li>网络错误自动重试3次，每次间隔递增（1秒、2秒、4秒）</li><li>参数错误不重试（如手机号格式错误）</li><li>重试过程中实时更新状态，用户可以看到&quot;正在重试第2次&quot;</li><li>最终失败后，提供详细的失败原因和重试建议</li></ul><p>这样大大提升了发送成功率，用户体验也更好。</p><h3 id="❌-碰到的主要困难" tabindex="-1"><a class="header-anchor" href="#❌-碰到的主要困难"><span>❌ 碰到的主要困难</span></a></h3><p>主要碰到了两个核心困难：</p><ol><li><p><strong>消息类型扩展困难</strong>：初期硬编码了邮件、短信等发送逻辑，每次新增消息类型都需要修改核心代码，违反了开闭原则。</p></li><li><p><strong>接口不统一问题</strong>：API接口多，业务系统调用时需要了解具体的实现细节才能放入代码，增加了使用复杂度。</p></li></ol><p><strong>代码耦合度高</strong>：消息发送逻辑与业务逻辑混在一起，修改消息类型会影响业务代码。</p><p><strong>扩展性差</strong>：新增消息类型需要修改现有代码，容易引入bug，测试成本高。</p><p><strong>维护困难</strong>：不同消息类型的实现逻辑分散在各个地方，难以统一管理和优化。</p><p><strong>接口不一致</strong>：业务系统需要调用不同的接口，增加了集成难度。</p><h3 id="🛠️-解决方案-策略-工厂模式" tabindex="-1"><a class="header-anchor" href="#🛠️-解决方案-策略-工厂模式"><span>🛠️ 解决方案：策略+工厂模式</span></a></h3><p>我使用策略模式+工厂模式来解决这些问题：</p><p><strong>策略模式的应用：</strong></p><ul><li>定义统一的消息发送接口<code>MessageSender</code></li><li>为每种消息类型实现具体的策略类： <ul><li><code>EmailSender</code>：处理邮件发送</li><li><code>SmsSender</code>：处理短信发送</li><li><code>AppMessageSender</code>：处理应用内消息推送</li></ul></li></ul><p><strong>工厂模式的应用：</strong></p><ul><li>创建<code>MessageSenderFactory</code>工厂类</li><li>根据消息类型动态创建对应的发送器实例</li><li>支持运行时配置，无需重启服务</li></ul><p><strong>简单工厂模式的应用：</strong></p><ul><li>创建<code>MessageSenderFactory</code>工厂类</li><li>根据消息类型字符串（如&quot;email&quot;、&quot;sms&quot;、&quot;app&quot;）动态创建对应的发送器实例</li><li>但是 违反开闭原则：新增策略需要修改工厂代码 后续优化-》Spring容器管理 <ul><li>完全符合开闭原则：新增策略无需修改工厂代码</li><li>自动注入：Spring自动管理策略实例，无需手动管理</li><li>支持热更新：可以通过配置中心动态调整</li><li>易于测试：可以轻松Mock策略类</li></ul></li></ul><h3 id="具体实现优势" tabindex="-1"><a class="header-anchor" href="#具体实现优势"><span>具体实现优势</span></a></h3><p>这种设计带来的优势：</p><ol><li><strong>开闭原则</strong>：新增消息类型只需实现新策略，无需修改现有代码</li><li><strong>单一职责</strong>：每个策略类只负责一种消息类型的发送逻辑</li><li><strong>依赖倒置</strong>：业务代码依赖抽象接口，不依赖具体实现</li><li><strong>易于测试</strong>：每个策略可以独立测试，提高测试覆盖率</li><li><strong>配置灵活</strong>：通过Nacos配置中心动态调整消息策略</li></ol><h2 id="大学项目-云平台数据分析" tabindex="-1"><a class="header-anchor" href="#大学项目-云平台数据分析"><span>大学项目 - 云平台数据分析</span></a></h2><h3 id="_1-es如何优化的" tabindex="-1"><a class="header-anchor" href="#_1-es如何优化的"><span>1. ES如何优化的</span></a></h3><h4 id="集群" tabindex="-1"><a class="header-anchor" href="#集群"><span>集群</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐</span></span>
<span class="line"><span>│   K8s Node 1   │    │   K8s Node 2   │    │   K8s Node 3   │</span></span>
<span class="line"><span>│                 │    │                 │    │                 │</span></span>
<span class="line"><span>│  ┌───────────┐  │    │  ┌───────────┐  │    │  ┌───────────┐  │</span></span>
<span class="line"><span>│  │ ES实例1   │  │    │  │ ES实例2   │  │    │  │ ES实例3   │  │</span></span>
<span class="line"><span>│  │           │  │    │  │           │  │    │  │           │  │</span></span>
<span class="line"><span>│  │ 主分片1   │  │    │  │ 主分片2   │  │    │  │ 主分片3   │  │</span></span>
<span class="line"><span>│  │ 副本分片3 │  │    │  │ 副本分片1 │  │    │  │ 副本分片2 │  │</span></span>
<span class="line"><span>│  └───────────┘  │    │  └───────────┘  │    │  └───────────┘  │</span></span>
<span class="line"><span>└─────────────────┘    └─────────────────┘    └─────────────────┘</span></span>
<span class="line"><span>         │                       │                       │</span></span>
<span class="line"><span>         └───────────────────────┼───────────────────────┘</span></span>
<span class="line"><span>                                 │</span></span>
<span class="line"><span>                    ┌─────────────────┐</span></span>
<span class="line"><span>                    │   ES集群协调    │</span></span>
<span class="line"><span>                    │                 │</span></span>
<span class="line"><span>                    │  - 分片路由     │</span></span>
<span class="line"><span>                    │  - 负载均衡     │</span></span>
<span class="line"><span>                    │  - 故障转移     │</span></span>
<span class="line"><span>                    └─────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="定时写入优化" tabindex="-1"><a class="header-anchor" href="#定时写入优化"><span>定时写入优化</span></a></h4><ul><li><strong>批量写入策略</strong>：Fission CronJob写入时，设置合适的批量大小（1000-5000条），减少ES写入频率</li><li><strong>刷新间隔调整</strong>：写入期间将refresh_interval设置为60秒，写入完成后恢复为1秒，平衡写入性能和查询实时性</li></ul><h4 id="索引设计优化" tabindex="-1"><a class="header-anchor" href="#索引设计优化"><span>索引设计优化</span></a></h4><ul><li><strong>时间分片策略</strong>：按天或按周创建索引，避免单个索引过大，提升查询性能</li><li><strong>字段映射优化</strong>：社交媒体数据的关键字段（用户ID(keyword)、内容(text)、时间戳(date)）使用合适的类型，避免不必要的分词</li></ul><h4 id="查询性能优化" tabindex="-1"><a class="header-anchor" href="#查询性能优化"><span>查询性能优化</span></a></h4><ul><li><strong>查询缓存</strong>：Python服务频繁查询的数据设置查询缓存，减少重复计算（根据慢日志、查询频率统计、业务场景判断）</li><li><strong>聚合优化</strong>：数据分析常用的聚合查询（如按时间统计、按平台统计）预计算并缓存结果</li><li><strong>分页查询优化</strong>：支持深度分页的search_after机制，避免深度分页的性能问题</li></ul><h4 id="监控和调优" tabindex="-1"><a class="header-anchor" href="#监控和调优"><span>监控和调优</span></a></h4><ul><li><strong>性能监控</strong>：监控写入延迟、查询响应时间、集群资源使用率等关键指标</li><li><strong>慢查询分析</strong>：开启慢查询日志，识别性能瓶颈并进行优化</li><li><strong>资源调优</strong>：根据实际使用情况，动态调整ES集群配置</li></ul><h2 id="加密货币交易平台" tabindex="-1"><a class="header-anchor" href="#加密货币交易平台"><span>加密货币交易平台</span></a></h2><h3 id="_1-困难和解决" tabindex="-1"><a class="header-anchor" href="#_1-困难和解决"><span>1. 困难和解决</span></a></h3><h4 id="架构层面困难" tabindex="-1"><a class="header-anchor" href="#架构层面困难"><span>架构层面困难</span></a></h4><p><strong>1. 高并发撮合引擎设计挑战</strong></p><ul><li><strong>问题</strong>：如何设计支持10万+ TPS的订单撮合系统</li><li><strong>挑战</strong>：订单匹配算法复杂度高，需要保证公平性和实时性</li><li><strong>解决方案</strong>： <ul><li>采用RabbitMQ + Disruptor异步架构，实现订单队列化处理</li><li>设计高效的撮合算法，按价格优先、时间优先原则排序</li><li>使用内存数据结构优化订单匹配性能</li></ul></li></ul><p><strong>2. 微服务架构复杂性管理</strong></p><ul><li><strong>问题</strong>：多个微服务间的协调和通信复杂性（比如订单服务、撮合服务、财务服务、会员服务等）</li><li><strong>挑战</strong>：服务发现、配置管理、负载均衡的统一管理</li><li><strong>解决方案</strong>： <ul><li>基于Nacos实现服务注册发现和配置中心</li><li>使用LoadBalancer实现智能负载均衡</li><li>设计服务间通信的标准化接口</li></ul></li></ul><p><strong>3. 分布式系统一致性保证</strong></p><ul><li><strong>问题</strong>：多服务环境下如何保证数据一致性</li><li><strong>挑战</strong>：订单状态同步、账户余额一致性、分布式事务</li><li><strong>解决方案</strong>： <ul><li>使用JetCache + Redis实现分布式锁</li><li>设计最终一致性的事务模型</li><li>实现补偿机制处理异常情况</li></ul></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>举个具体例子：用户下单买比特币，系统先冻结余额（本地事务），然后发送订单到撮合引擎。如果撮合失败，补偿机制会自动解冻余额并取消订单；如果撮合成功但扣减余额失败，补偿机制会取消撮合结果并解冻余额。这样保证了无论哪个环节失败，用户资金都不会丢失，最终达到数据一致性。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-开发层面困难" tabindex="-1"><a class="header-anchor" href="#_2-开发层面困难"><span>2. 开发层面困难</span></a></h4><p><strong>1. 实时行情推送性能优化</strong></p><ul><li><strong>问题</strong>：WebSocket连接数激增导致性能下降</li><li><strong>挑战</strong>：大量并发连接、消息广播效率、连接管理</li><li><strong>解决方案</strong>： <ul><li>实现连接池管理，复用WebSocket连接</li><li>使用消息压缩减少网络传输</li><li>设计分层推送策略，避免无效推送</li></ul></li></ul><p><strong>2. 分布式ID生成系统设计</strong></p><ul><li><strong>问题</strong>：如何在高并发环境下生成全局唯一ID</li><li><strong>挑战</strong>：ID唯一性、性能要求、时钟回拨问题</li><li><strong>解决方案</strong>： <ul><li>使用Snowflake算法，结合机器ID和序列号</li><li>处理时钟回拨问题，确保ID单调递增</li><li>优化ID生成性能，支持批量生成</li></ul></li></ul><p><strong>3. 安全认证体系实现</strong></p><ul><li><strong>问题</strong>：如何设计跨服务的统一认证授权</li><li><strong>挑战</strong>：JWT令牌管理、权限验证、安全防护</li><li><strong>解决方案</strong>： <ul><li>实现OAuth2 + JWT认证流程</li><li>设计令牌刷新和失效机制</li><li>添加防重放攻击和XSS防护</li></ul></li></ul><p><strong>4. 云原生部署复杂性</strong></p><ul><li><strong>问题</strong>：Docker容器化部署和运维管理</li><li><strong>挑战</strong>：容器编排、服务发现、监控告警</li><li><strong>解决方案</strong>： <ul><li>使用Docker Compose简化多服务部署</li><li>实现健康检查和自动重启机制</li><li>集成监控系统，实时监控服务状态</li></ul></li></ul></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/Crc011220/Crc011220.github.io/edit/main/src/zh/posts/review/复习.md" aria-label="在 GitHub 上编辑此页" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在 GitHub 上编辑此页<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><span class="vp-meta-info" data-allow-mismatch="text">2025/8/13 07:49:24</span></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: ruocchen1220@gmail.com">Ruochen Chen</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/zh/posts/review/%E5%85%B6%E4%BB%96%E9%97%AE%E9%A2%98.html" aria-label="其他问题"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>其他问题</div></a><a class="route-link auto-link next" href="/zh/posts/review/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html" aria-label="操作系统"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">操作系统<span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">学海无涯</div><div class="vp-copyright">Copyright © 2025 Ruochen Chen </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script src="/assets/js/runtime~app.89f26a52.js" defer></script><script src="/assets/js/6312.2d95f1ad.js" defer></script><script src="/assets/js/app.8feda83c.js" defer></script>
  </body>
</html>
