"use strict";(self.webpackChunkpersonalweb=self.webpackChunkpersonalweb||[]).push([[6153],{6262:(i,s)=>{s.A=(i,s)=>{const e=i.__vccOpts||i;for(const[i,a]of s)e[i]=a;return e}},1538:(i,s,e)=>{e.r(s),e.d(s,{comp:()=>l,data:()=>h});var a=e(641);const t=e.p+"assets/img/rollout.0a8b64d2.png",n={},l=(0,e(6262).A)(n,[["render",function(i,s){return(0,a.uX)(),(0,a.CE)("div",null,s[0]||(s[0]=[(0,a.Fv)('<h1 id="label-selector-and-deployment" tabindex="-1"><a class="header-anchor" href="#label-selector-and-deployment"><span>Label,Selector,and Deployment</span></a></h1><h2 id="label-and-selector" tabindex="-1"><a class="header-anchor" href="#label-and-selector"><span>Label and Selector</span></a></h2><h3 id="check-label" tabindex="-1"><a class="header-anchor" href="#check-label"><span>Check label</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> po</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --show-labels</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         READY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   STATUS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    RESTARTS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   AGE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   LABELS</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nginx-demo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   1/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     Running</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">          23h</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   type=app,version=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1.0.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="add-label-temporarily" tabindex="-1"><a class="header-anchor" href="#add-label-temporarily"><span>Add label temporarily</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> label</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> po</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nginx-demo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> author=richard</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pod/nginx-demo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> labeled</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nginx-demo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   1/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     Running</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">          23h</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   type=app,version=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1.0.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="modify-label-temporarily" tabindex="-1"><a class="header-anchor" href="#modify-label-temporarily"><span>Modify label temporarily</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> label</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> po</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nginx-demo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> author=richardchen</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --overwrite</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pod/nginx-demo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> labeled</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="use-selector-to-check-label" tabindex="-1"><a class="header-anchor" href="#use-selector-to-check-label"><span>Use selector to check label</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> po</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;version in (1.0.0, 1.0.1)&#39;</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         READY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   STATUS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    RESTARTS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   AGE</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nginx-demo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   1/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     Running</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">          24h</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="the-l-flag-in-kubernetes-commands-is-used-to-filter-resources-based-on-label-matching-the-conditions-following-l-should-be-enclosed-in-single-quotes-to-ensure-accurate-parsing-especially-when-multiple-conditions-are-involved-multiple-label-conditions-are-combined-with-a-logical-and-i-e-all-conditions-must-be-true-by-separating-each-condition-with-a-comma" tabindex="-1"><a class="header-anchor" href="#the-l-flag-in-kubernetes-commands-is-used-to-filter-resources-based-on-label-matching-the-conditions-following-l-should-be-enclosed-in-single-quotes-to-ensure-accurate-parsing-especially-when-multiple-conditions-are-involved-multiple-label-conditions-are-combined-with-a-logical-and-i-e-all-conditions-must-be-true-by-separating-each-condition-with-a-comma"><span>The -l flag in Kubernetes commands is used to filter resources based on label matching. The conditions following -l should be enclosed in single quotes to ensure accurate parsing, especially when multiple conditions are involved. Multiple label conditions are combined with a logical &quot;AND&quot; (i.e., all conditions must be true) by separating each condition with a comma.</span></a></h4><div class="hint-container info"><p class="hint-container-title">Info</p><ol><li>Exact Match: kubectl get pods -l &#39;app=nginx&#39; – selects all pods with the label app: nginx.</li><li>Multiple Conditions: kubectl get pods -l &#39;app=nginx,env=production&#39; – selects pods labeled with both app: nginx and env: production.</li><li>Range Selection: kubectl get pods -l &#39;version in (1.0.0, 1.0.1)&#39; – selects pods where the version label is either 1.0.0 or 1.0.1.</li></ol></div><h2 id="deployment" tabindex="-1"><a class="header-anchor" href="#deployment"><span>Deployment</span></a></h2><h3 id="for-stateless-applications-it-s-common-to-create-a-deployment-while-for-stateful-applications-a-statefulset-is-typically-used-the-deployment-object-manages-the-replicaset-which-in-turn-manages-the-pod-instances-this-structure-creates-a-nested-hierarchy-with-distinct-names-for-each-layer" tabindex="-1"><a class="header-anchor" href="#for-stateless-applications-it-s-common-to-create-a-deployment-while-for-stateful-applications-a-statefulset-is-typically-used-the-deployment-object-manages-the-replicaset-which-in-turn-manages-the-pod-instances-this-structure-creates-a-nested-hierarchy-with-distinct-names-for-each-layer"><span>For stateless applications, it&#39;s common to create a Deployment, while for stateful applications, a StatefulSet is typically used. The Deployment object manages the ReplicaSet, which in turn manages the Pod instances. This structure creates a nested hierarchy with distinct names for each layer.</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deploy</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           READY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   UP-TO-DATE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   AVAILABLE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   AGE</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nginx-deploy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   1/1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           52s</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> replicaset</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                      DESIRED</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   CURRENT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   READY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   AGE</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nginx-deploy-5cdc97df7f</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       98s</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> po</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                            READY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   STATUS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    RESTARTS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   AGE</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nginx-deploy-5cdc97df7f-z2htj</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   1/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     Running</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">          2m4s</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="get-configuration-and-print-results-by-yaml-format" tabindex="-1"><a class="header-anchor" href="#get-configuration-and-print-results-by-yaml-format"><span>Get configuration and print results by YAML format</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deploy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nginx-deploy</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yaml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="deployment-configuration-yaml" tabindex="-1"><a class="header-anchor" href="#deployment-configuration-yaml"><span>Deployment configuration YAML</span></a></h3><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">apps/v1</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # Specifies the API version of the Deployment object.</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Deployment</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # Declares the type of Kubernetes resource as a Deployment.</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  labels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nginx-deploy</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # Labels for identifying and grouping resources.</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nginx-deploy</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # The name of the Deployment.</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  namespace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">default</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # The namespace in which this Deployment will be created.</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  replicas</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # Number of pod replicas to run.</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  revisionHistoryLimit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # Limits the number of old ReplicaSets to retain for rollback.</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  selector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    matchLabels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nginx-deploy</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # Selects pods with this label for managing updates.</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  strategy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    rollingUpdate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      maxSurge</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">25%</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # Allows up to 25% more pods above the desired number during an update.</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      maxUnavailable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">25%</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # Allows up to 25% of the pods to be unavailable during an update.</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">RollingUpdate</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # Specifies that updates should be done in a rolling update fashion.</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  template</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      labels</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nginx-deploy</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # Labels for the pod template, matching the selector.</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      containers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nginx:latest</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # Specifies the container image to use.</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        imagePullPolicy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Always</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # Ensures the image is pulled every time a pod starts.</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nginx</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # The container&#39;s name.</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      restartPolicy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Always</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # Ensures that the container restarts if it crashes.</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      terminationGracePeriodSeconds</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">30</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # Time in seconds given to the pod to shut down gracefully.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="modify-yaml-configuration-directly" tabindex="-1"><a class="header-anchor" href="#modify-yaml-configuration-directly"><span>Modify YAML configuration directly</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> edit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deploy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nginx-deploy</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="rolling-update" tabindex="-1"><a class="header-anchor" href="#rolling-update"><span>Rolling Update</span></a></h2><h3 id="a-rolling-update-is-triggered-only-when-properties-within-the-template-section-of-the-deployment-configuration-file-are-modified-during-a-rolling-update-a-new-replicaset-rs-is-created" tabindex="-1"><a class="header-anchor" href="#a-rolling-update-is-triggered-only-when-properties-within-the-template-section-of-the-deployment-configuration-file-are-modified-during-a-rolling-update-a-new-replicaset-rs-is-created"><span>A rolling update is triggered only when properties within the template section of the Deployment configuration file are modified. During a rolling update, a new ReplicaSet (RS) is created.</span></a></h3><h3 id="_1-when-pod-1-in-the-new-rs-is-created-the-corresponding-pod-1-in-the-old-rs-is-marked-as-expired" tabindex="-1"><a class="header-anchor" href="#_1-when-pod-1-in-the-new-rs-is-created-the-corresponding-pod-1-in-the-old-rs-is-marked-as-expired"><span>1. When Pod 1 in the new RS is created, the corresponding Pod 1 in the old RS is marked as expired.</span></a></h3><h3 id="_2-this-process-continues-iteratively-for-each-pod-across-the-rss" tabindex="-1"><a class="header-anchor" href="#_2-this-process-continues-iteratively-for-each-pod-across-the-rss"><span>2. This process continues iteratively for each Pod across the RSs.</span></a></h3><figure><img src="'+t+'" alt="rollout.png" tabindex="0" loading="lazy"><figcaption>rollout.png</figcaption></figure><h3 id="as-shown-in-the-image-once-the-update-completes-the-old-rs-is-removed" tabindex="-1"><a class="header-anchor" href="#as-shown-in-the-image-once-the-update-completes-the-old-rs-is-removed"><span>As shown in the image, once the update completes, the old RS is removed.</span></a></h3><h2 id="rollback" tabindex="-1"><a class="header-anchor" href="#rollback"><span>Rollback</span></a></h2><h3 id="to-roll-back-to-a-specific-revision-you-first-need-to-identify-the-desired-revision" tabindex="-1"><a class="header-anchor" href="#to-roll-back-to-a-specific-revision-you-first-need-to-identify-the-desired-revision"><span>To roll back to a specific revision, you first need to identify the desired revision.</span></a></h3><h3 id="use-the-command-below-to-view-the-list-of-available-revisions" tabindex="-1"><a class="header-anchor" href="#use-the-command-below-to-view-the-list-of-available-revisions"><span>Use the command below to view the list of available revisions:</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rollout</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> history</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deployment/nginx-deploy</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="to-view-details-of-a-specific-revision-use" tabindex="-1"><a class="header-anchor" href="#to-view-details-of-a-specific-revision-use"><span>To view details of a specific revision, use:</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rollout</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> history</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deployment/nginx-deploy</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --revision=2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="once-you-ve-identified-the-revision-to-which-you-want-to-roll-back-you-can-use-the-following-command-to-roll-back-to-the-previous-version" tabindex="-1"><a class="header-anchor" href="#once-you-ve-identified-the-revision-to-which-you-want-to-roll-back-you-can-use-the-following-command-to-roll-back-to-the-previous-version"><span>Once you&#39;ve identified the revision to which you want to roll back, you can use the following command to roll back to the previous version:</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rollout</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> undo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deployment/nginx-deploy</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="alternatively-to-roll-back-to-a-specific-revision-use" tabindex="-1"><a class="header-anchor" href="#alternatively-to-roll-back-to-a-specific-revision-use"><span>Alternatively, to roll back to a specific revision, use:</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rollout</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> undo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deployment/nginx-deploy</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --to-revision=x</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="you-can-control-how-many-revisions-are-retained-by-setting-spec-revisionhistorylimit-in-the-deployment-configuration-if-set-to-0-rollbacks-are-not-permitted" tabindex="-1"><a class="header-anchor" href="#you-can-control-how-many-revisions-are-retained-by-setting-spec-revisionhistorylimit-in-the-deployment-configuration-if-set-to-0-rollbacks-are-not-permitted"><span>You can control how many revisions are retained by setting .spec.revisionHistoryLimit in the Deployment configuration. If set to 0, rollbacks are not permitted.</span></a></h3><h2 id="scaling-up-and-down" tabindex="-1"><a class="header-anchor" href="#scaling-up-and-down"><span>Scaling Up and Down</span></a></h2><h3 id="you-can-scale-up-or-down-using-the-kubectl-scale-command-or-by-editing-the-replicas-field-directly-via-kubectl-edit-both-methods-allow-for-adjusting-the-number-of-replicas" tabindex="-1"><a class="header-anchor" href="#you-can-scale-up-or-down-using-the-kubectl-scale-command-or-by-editing-the-replicas-field-directly-via-kubectl-edit-both-methods-allow-for-adjusting-the-number-of-replicas"><span>You can scale up or down using the <code>kubectl scale</code> command, or by editing the <code>replicas</code> field directly via <code>kubectl edit</code>. Both methods allow for adjusting the number of replicas.</span></a></h3><h3 id="scaling-operations-only-adjust-the-replica-count-and-do-not-modify-the-pod-template-so-no-new-replicasets-rs-are-created" tabindex="-1"><a class="header-anchor" href="#scaling-operations-only-adjust-the-replica-count-and-do-not-modify-the-pod-template-so-no-new-replicasets-rs-are-created"><span>Scaling operations only adjust the replica count and do not modify the pod template, so no new ReplicaSets (RS) are created.</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scale</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --replicas=6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deploy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nginx-deploy</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">deployment.apps/nginx-deploy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scaled</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deploy</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           READY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   UP-TO-DATE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   AVAILABLE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   AGE</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nginx-deploy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   6/6</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     6</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           167m</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="pause" tabindex="-1"><a class="header-anchor" href="#pause"><span>Pause</span></a></h2><h3 id="since-any-change-to-the-information-in-the-pod-template-triggers-an-update-to-the-deployment-frequent-modifications-can-lead-to-multiple-unnecessary-updates-in-such-cases-we-can-pause-the-deployment-s-rollout-to-avoid-intermediate-updates-and-only-execute-the-final-update" tabindex="-1"><a class="header-anchor" href="#since-any-change-to-the-information-in-the-pod-template-triggers-an-update-to-the-deployment-frequent-modifications-can-lead-to-multiple-unnecessary-updates-in-such-cases-we-can-pause-the-deployment-s-rollout-to-avoid-intermediate-updates-and-only-execute-the-final-update"><span>Since any change to the information in the pod template triggers an update to the Deployment, frequent modifications can lead to multiple unnecessary updates. In such cases, we can pause the Deployment’s rollout to avoid intermediate updates and only execute the final update.</span></a></h3><h3 id="to-pause-a-deployment-s-rollout-use" tabindex="-1"><a class="header-anchor" href="#to-pause-a-deployment-s-rollout-use"><span>To pause a Deployment&#39;s rollout, use:</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rollout</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pause</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deployment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="this-stops-the-deployment-from-updating-until-you-choose-to-resume-to-continue-the-rollout-use" tabindex="-1"><a class="header-anchor" href="#this-stops-the-deployment-from-updating-until-you-choose-to-resume-to-continue-the-rollout-use"><span>This stops the Deployment from updating until you choose to resume. To continue the rollout, use:</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rollout</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> resume</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deployment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>',48)]))}]]),h=JSON.parse('{"path":"/posts/kubernetes/practices/5.html","title":"Label,Selector,and Deployment","lang":"en-US","frontmatter":{"icon":"pen-to-square","date":"2024-11-09T00:00:00.000Z","category":["Learning Records"],"tag":["Kubernetes"],"description":"Label,Selector,and Deployment Label and Selector Check label Add label temporarily Modify label temporarily Use selector to check label The -l flag in Kubernetes commands is use...","head":[["meta",{"property":"og:url","content":"https://crc011220.github.io/personalweb/personalweb/posts/kubernetes/practices/5.html"}],["meta",{"property":"og:site_name","content":"Richard Chen"}],["meta",{"property":"og:title","content":"Label,Selector,and Deployment"}],["meta",{"property":"og:description","content":"Label,Selector,and Deployment Label and Selector Check label Add label temporarily Modify label temporarily Use selector to check label The -l flag in Kubernetes commands is use..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-11-09T10:53:54.000Z"}],["meta",{"property":"article:tag","content":"Kubernetes"}],["meta",{"property":"article:published_time","content":"2024-11-09T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-09T10:53:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Label,Selector,and Deployment\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-11-09T00:00:00.000Z\\",\\"dateModified\\":\\"2024-11-09T10:53:54.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Richard Chen\\"}]}"]]},"headers":[{"level":2,"title":"Label and Selector","slug":"label-and-selector","link":"#label-and-selector","children":[{"level":3,"title":"Check label","slug":"check-label","link":"#check-label","children":[]},{"level":3,"title":"Add label temporarily","slug":"add-label-temporarily","link":"#add-label-temporarily","children":[]},{"level":3,"title":"Modify label temporarily","slug":"modify-label-temporarily","link":"#modify-label-temporarily","children":[]},{"level":3,"title":"Use selector to check label","slug":"use-selector-to-check-label","link":"#use-selector-to-check-label","children":[]}]},{"level":2,"title":"Deployment","slug":"deployment","link":"#deployment","children":[{"level":3,"title":"For stateless applications, it\'s common to create a Deployment, while for stateful applications, a StatefulSet is typically used. The Deployment object manages the ReplicaSet, which in turn manages the Pod instances. This structure creates a nested hierarchy with distinct names for each layer.","slug":"for-stateless-applications-it-s-common-to-create-a-deployment-while-for-stateful-applications-a-statefulset-is-typically-used-the-deployment-object-manages-the-replicaset-which-in-turn-manages-the-pod-instances-this-structure-creates-a-nested-hierarchy-with-distinct-names-for-each-layer","link":"#for-stateless-applications-it-s-common-to-create-a-deployment-while-for-stateful-applications-a-statefulset-is-typically-used-the-deployment-object-manages-the-replicaset-which-in-turn-manages-the-pod-instances-this-structure-creates-a-nested-hierarchy-with-distinct-names-for-each-layer","children":[]},{"level":3,"title":"Get configuration and print results by YAML format","slug":"get-configuration-and-print-results-by-yaml-format","link":"#get-configuration-and-print-results-by-yaml-format","children":[]},{"level":3,"title":"Deployment configuration YAML","slug":"deployment-configuration-yaml","link":"#deployment-configuration-yaml","children":[]},{"level":3,"title":"Modify YAML configuration directly","slug":"modify-yaml-configuration-directly","link":"#modify-yaml-configuration-directly","children":[]}]},{"level":2,"title":"Rolling Update","slug":"rolling-update","link":"#rolling-update","children":[{"level":3,"title":"A rolling update is triggered only when properties within the template section of the Deployment configuration file are modified. During a rolling update, a new ReplicaSet (RS) is created.","slug":"a-rolling-update-is-triggered-only-when-properties-within-the-template-section-of-the-deployment-configuration-file-are-modified-during-a-rolling-update-a-new-replicaset-rs-is-created","link":"#a-rolling-update-is-triggered-only-when-properties-within-the-template-section-of-the-deployment-configuration-file-are-modified-during-a-rolling-update-a-new-replicaset-rs-is-created","children":[]},{"level":3,"title":"1. When Pod 1 in the new RS is created, the corresponding Pod 1 in the old RS is marked as expired.","slug":"_1-when-pod-1-in-the-new-rs-is-created-the-corresponding-pod-1-in-the-old-rs-is-marked-as-expired","link":"#_1-when-pod-1-in-the-new-rs-is-created-the-corresponding-pod-1-in-the-old-rs-is-marked-as-expired","children":[]},{"level":3,"title":"2. This process continues iteratively for each Pod across the RSs.","slug":"_2-this-process-continues-iteratively-for-each-pod-across-the-rss","link":"#_2-this-process-continues-iteratively-for-each-pod-across-the-rss","children":[]},{"level":3,"title":"As shown in the image, once the update completes, the old RS is removed.","slug":"as-shown-in-the-image-once-the-update-completes-the-old-rs-is-removed","link":"#as-shown-in-the-image-once-the-update-completes-the-old-rs-is-removed","children":[]}]},{"level":2,"title":"Rollback","slug":"rollback","link":"#rollback","children":[{"level":3,"title":"To roll back to a specific revision, you first need to identify the desired revision.","slug":"to-roll-back-to-a-specific-revision-you-first-need-to-identify-the-desired-revision","link":"#to-roll-back-to-a-specific-revision-you-first-need-to-identify-the-desired-revision","children":[]},{"level":3,"title":"Use the command below to view the list of available revisions:","slug":"use-the-command-below-to-view-the-list-of-available-revisions","link":"#use-the-command-below-to-view-the-list-of-available-revisions","children":[]},{"level":3,"title":"To view details of a specific revision, use:","slug":"to-view-details-of-a-specific-revision-use","link":"#to-view-details-of-a-specific-revision-use","children":[]},{"level":3,"title":"Once you\'ve identified the revision to which you want to roll back, you can use the following command to roll back to the previous version:","slug":"once-you-ve-identified-the-revision-to-which-you-want-to-roll-back-you-can-use-the-following-command-to-roll-back-to-the-previous-version","link":"#once-you-ve-identified-the-revision-to-which-you-want-to-roll-back-you-can-use-the-following-command-to-roll-back-to-the-previous-version","children":[]},{"level":3,"title":"Alternatively, to roll back to a specific revision, use:","slug":"alternatively-to-roll-back-to-a-specific-revision-use","link":"#alternatively-to-roll-back-to-a-specific-revision-use","children":[]},{"level":3,"title":"You can control how many revisions are retained by setting .spec.revisionHistoryLimit in the Deployment configuration. If set to 0, rollbacks are not permitted.","slug":"you-can-control-how-many-revisions-are-retained-by-setting-spec-revisionhistorylimit-in-the-deployment-configuration-if-set-to-0-rollbacks-are-not-permitted","link":"#you-can-control-how-many-revisions-are-retained-by-setting-spec-revisionhistorylimit-in-the-deployment-configuration-if-set-to-0-rollbacks-are-not-permitted","children":[]}]},{"level":2,"title":"Scaling Up and Down","slug":"scaling-up-and-down","link":"#scaling-up-and-down","children":[{"level":3,"title":"You can scale up or down using the kubectl scale command, or by editing the replicas field directly via kubectl edit. Both methods allow for adjusting the number of replicas.","slug":"you-can-scale-up-or-down-using-the-kubectl-scale-command-or-by-editing-the-replicas-field-directly-via-kubectl-edit-both-methods-allow-for-adjusting-the-number-of-replicas","link":"#you-can-scale-up-or-down-using-the-kubectl-scale-command-or-by-editing-the-replicas-field-directly-via-kubectl-edit-both-methods-allow-for-adjusting-the-number-of-replicas","children":[]},{"level":3,"title":"Scaling operations only adjust the replica count and do not modify the pod template, so no new ReplicaSets (RS) are created.","slug":"scaling-operations-only-adjust-the-replica-count-and-do-not-modify-the-pod-template-so-no-new-replicasets-rs-are-created","link":"#scaling-operations-only-adjust-the-replica-count-and-do-not-modify-the-pod-template-so-no-new-replicasets-rs-are-created","children":[]}]},{"level":2,"title":"Pause","slug":"pause","link":"#pause","children":[{"level":3,"title":"Since any change to the information in the pod template triggers an update to the Deployment, frequent modifications can lead to multiple unnecessary updates. In such cases, we can pause the Deployment’s rollout to avoid intermediate updates and only execute the final update.","slug":"since-any-change-to-the-information-in-the-pod-template-triggers-an-update-to-the-deployment-frequent-modifications-can-lead-to-multiple-unnecessary-updates-in-such-cases-we-can-pause-the-deployment-s-rollout-to-avoid-intermediate-updates-and-only-execute-the-final-update","link":"#since-any-change-to-the-information-in-the-pod-template-triggers-an-update-to-the-deployment-frequent-modifications-can-lead-to-multiple-unnecessary-updates-in-such-cases-we-can-pause-the-deployment-s-rollout-to-avoid-intermediate-updates-and-only-execute-the-final-update","children":[]},{"level":3,"title":"To pause a Deployment\'s rollout, use:","slug":"to-pause-a-deployment-s-rollout-use","link":"#to-pause-a-deployment-s-rollout-use","children":[]},{"level":3,"title":"This stops the Deployment from updating until you choose to resume. To continue the rollout, use:","slug":"this-stops-the-deployment-from-updating-until-you-choose-to-resume-to-continue-the-rollout-use","link":"#this-stops-the-deployment-from-updating-until-you-choose-to-resume-to-continue-the-rollout-use","children":[]}]}],"git":{"createdTime":1730976593000,"updatedTime":1731149634000,"contributors":[{"name":"Ruochen Chen","email":"ruocchen1220@gmail.com","commits":2}]},"readingTime":{"minutes":3.03,"words":910},"filePathRelative":"posts/kubernetes/practices/5.md","localizedDate":"November 9, 2024","excerpt":"\\n<h2>Label and Selector</h2>\\n<h3>Check label</h3>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" data-title=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">kubectl</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> get</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> po</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> --show-labels</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">NAME</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">         READY</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">   STATUS</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">    RESTARTS</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">   AGE</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">   LABELS</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">nginx-demo</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">   1/1</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">     Running</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">   0</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">          23h</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">   type=app,version=</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">1.0.0</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}')}}]);