"use strict";(self.webpackChunkpersonalweb=self.webpackChunkpersonalweb||[]).push([[669],{1291:(i,s,e)=>{e.r(s),e.d(s,{comp:()=>h,data:()=>r});var a=e(641);const t=e.p+"assets/img/PV_PVC.ba654c36.png",n=e.p+"assets/img/SC.472cdf82.png",l={},h=(0,e(6262).A)(l,[["render",function(i,s){return(0,a.uX)(),(0,a.CE)("div",null,s[0]||(s[0]=[(0,a.Fv)('<h1 id="persist-storage" tabindex="-1"><a class="header-anchor" href="#persist-storage"><span>Persist Storage</span></a></h1><h2 id="volumes" tabindex="-1"><a class="header-anchor" href="#volumes"><span>Volumes</span></a></h2><h3 id="hostpath-allows-you-to-mount-a-file-or-directory-from-the-host-node-into-a-pod-when-using-hostpath-the-specified-directory-on-the-node-serves-as-a-persistent-storage-location-even-if-the-pod-is-deleted-or-restarted-the-data-in-that-directory-remains-intact-and-can-be-reloaded-ensuring-that-files-in-the-directory-are-not-lost" tabindex="-1"><a class="header-anchor" href="#hostpath-allows-you-to-mount-a-file-or-directory-from-the-host-node-into-a-pod-when-using-hostpath-the-specified-directory-on-the-node-serves-as-a-persistent-storage-location-even-if-the-pod-is-deleted-or-restarted-the-data-in-that-directory-remains-intact-and-can-be-reloaded-ensuring-that-files-in-the-directory-are-not-lost"><span>HostPath allows you to mount a file or directory from the host node into a Pod. When using HostPath, the specified directory on the node serves as a persistent storage location. Even if the Pod is deleted or restarted, the data in that directory remains intact and can be reloaded, ensuring that files in the directory are not lost.</span></a></h3><h3 id="emptydir-is-primarily-used-for-sharing-data-between-different-containers-within-the-same-pod-unlike-other-volume-types-an-important-distinction-with-emptydir-is-that-the-data-is-only-accessible-within-the-pod-it-s-attached-to-if-the-pod-is-deleted-the-emptydir-volume-and-all-its-data-are-also-deleted" tabindex="-1"><a class="header-anchor" href="#emptydir-is-primarily-used-for-sharing-data-between-different-containers-within-the-same-pod-unlike-other-volume-types-an-important-distinction-with-emptydir-is-that-the-data-is-only-accessible-within-the-pod-it-s-attached-to-if-the-pod-is-deleted-the-emptydir-volume-and-all-its-data-are-also-deleted"><span>EmptyDir is primarily used for sharing data between different containers within the same Pod. Unlike other volume types, an important distinction with EmptyDir is that the data is only accessible within the Pod it’s attached to. If the Pod is deleted, the EmptyDir volume and all its data are also deleted.</span></a></h3><h2 id="nfs-mounting" tabindex="-1"><a class="header-anchor" href="#nfs-mounting"><span>NFS mounting</span></a></h2><h3 id="an-nfs-network-file-system-volume-can-be-mounted-into-your-pod-unlike-an-emptydir-which-is-deleted-along-with-the-pod-the-contents-of-an-nfs-volume-are-preserved-when-the-pod-is-deleted-with-only-the-volume-being-unmounted-this-means-an-nfs-volume-can-be-pre-populated-with-data-and-this-data-can-be-shared-between-pods" tabindex="-1"><a class="header-anchor" href="#an-nfs-network-file-system-volume-can-be-mounted-into-your-pod-unlike-an-emptydir-which-is-deleted-along-with-the-pod-the-contents-of-an-nfs-volume-are-preserved-when-the-pod-is-deleted-with-only-the-volume-being-unmounted-this-means-an-nfs-volume-can-be-pre-populated-with-data-and-this-data-can-be-shared-between-pods"><span>An NFS (Network File System) volume can be mounted into your Pod. Unlike an emptyDir, which is deleted along with the Pod, the contents of an NFS volume are preserved when the Pod is deleted, with only the volume being unmounted. This means an NFS volume can be pre-populated with data, and this data can be shared between Pods.</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Install NFS</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nfs-utils</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Start NFS</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nfs-server</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Check NFS version</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /proc/fs/nfsd/versions</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Create shared directory</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/nfs</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/nfs</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rw</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ro</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Set up shared directory export</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/exports</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/home/nfs/rw</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.113.0/24</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rw,sync,no_subtree_check,no_root_squash</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/home/nfs/ro</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.113.0/24</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ro,sync,no_subtree_check,no_root_squash</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Reload configuration</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">exportfs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> reload</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nfs-server</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Install nfs-utils on other test nodes and mount for testing</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt/nfs/rw</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mount</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.113.121:/home/nfs/rw</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt/nfs/rw</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="pv-and-pvc" tabindex="-1"><a class="header-anchor" href="#pv-and-pvc"><span>PV and PVC</span></a></h2><figure><img src="'+t+'" alt="PV_and_PVC.png" tabindex="0" loading="lazy"><figcaption>PV_and_PVC.png</figcaption></figure><h2 id="persistent-volume-pv" tabindex="-1"><a class="header-anchor" href="#persistent-volume-pv"><span>Persistent Volume (PV):</span></a></h2><p>A PV is a storage resource in the cluster that is provisioned by administrators or dynamically by storage classes. It represents an actual storage, like an NFS share, Amazon EBS volume, or other storage types. Once created, it exists independently of any Pods that use it.</p><h3 id="reclaim-policies" tabindex="-1"><a class="header-anchor" href="#reclaim-policies"><span>Reclaim Policies</span></a></h3><ol><li><strong>Retain</strong>: The PV is kept and must be manually cleaned or reused after PVC deletion.</li><li><strong>Delete</strong>: The PV and its data are deleted when the PVC is deleted.</li><li><strong>Recycle</strong>: (Deprecated) The PV is scrubbed and made available again after PVC deletion.</li></ol><h3 id="pv-configuration" tabindex="-1"><a class="header-anchor" href="#pv-configuration"><span>PV Configuration</span></a></h3><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">v1</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">PersistentVolume</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pv0001</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  capacity</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    storage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">5Gi</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # pv 的容量</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  volumeMode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Filesystem</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 存储类型为文件系统</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  accessModes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 访问模式：ReadWriteOnce、ReadWriteMany、ReadOnlyMany</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ReadWriteOnce</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 可被单节点独写</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  persistentVolumeReclaimPolicy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Retain</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 回收策略</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  storageClassName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">slow</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 创建 PV 的存储类名，需要与 pvc 的相同</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  mountOptions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 加载配置</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">hard</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nfsvers=4.1</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  nfs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 连接到 nfs</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/data/nfs/rw/test-pv</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 存储路径</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">172.16.217.138</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # nfs 服务地址</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="pv-state" tabindex="-1"><a class="header-anchor" href="#pv-state"><span>PV State</span></a></h3><ol><li><strong>Available</strong>: PV is available and waiting for a PVC to bind.</li><li><strong>Bound</strong>: PV is bound to a PVC and is being used.</li><li><strong>Released</strong>: PVC is deleted, but PV is still available and not yet re-bound.</li><li><strong>Failed</strong>: PV has encountered a failure and is no longer usable.</li></ol><h2 id="persistent-volume-claim-pvc" tabindex="-1"><a class="header-anchor" href="#persistent-volume-claim-pvc"><span>Persistent Volume Claim (PVC):</span></a></h2><p>A PVC is a request for storage by a user. It specifies how much storage is needed and other requirements (such as access modes). Kubernetes then matches this claim to an available PV. PVCs are bound to PVs, allowing users to abstract away storage details while accessing storage resources.</p><h3 id="pvc-configuration" tabindex="-1"><a class="header-anchor" href="#pvc-configuration"><span>PVC Configuration</span></a></h3><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">v1</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">PersistentVolumeClaim</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nfs-pvc</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  accessModes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ReadWriteOnce</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 权限需要与对应的 pv 相同</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  volumeMode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Filesystem</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  resources</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    requests</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      storage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">8Gi</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 资源可以小于 pv 的，但是不能大于，如果大于就会匹配不到 pv</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  storageClassName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">slow</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 名字需要与对应的 pv 相同</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#  selector: # 使用选择器选择对应的 pv</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#    matchLabels:</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#      release: &quot;stable&quot;</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#    matchExpressions:</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#      - {key: environment, operator: In, values: [dev]}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="storageclass-sc" tabindex="-1"><a class="header-anchor" href="#storageclass-sc"><span>StorageClass (SC)</span></a></h2><figure><img src="'+n+'" alt="StorageClass.png" tabindex="0" loading="lazy"><figcaption>StorageClass.png</figcaption></figure>',23)]))}]]),r=JSON.parse('{"path":"/posts/kubernetes/practices/10.html","title":"Persist Storage","lang":"en-US","frontmatter":{"icon":"pen-to-square","date":"2024-11-12T00:00:00.000Z","category":["Learning Records"],"tag":["Kubernetes"],"description":"Persist Storage Volumes HostPath allows you to mount a file or directory from the host node into a Pod. When using HostPath, the specified directory on the node serves as a pers...","head":[["meta",{"property":"og:url","content":"https://crc011220.github.io/personalweb/personalweb/posts/kubernetes/practices/10.html"}],["meta",{"property":"og:site_name","content":"Richard Chen"}],["meta",{"property":"og:title","content":"Persist Storage"}],["meta",{"property":"og:description","content":"Persist Storage Volumes HostPath allows you to mount a file or directory from the host node into a Pod. When using HostPath, the specified directory on the node serves as a pers..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-11-12T11:17:10.000Z"}],["meta",{"property":"article:tag","content":"Kubernetes"}],["meta",{"property":"article:published_time","content":"2024-11-12T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-12T11:17:10.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Persist Storage\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-11-12T00:00:00.000Z\\",\\"dateModified\\":\\"2024-11-12T11:17:10.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Richard Chen\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"Volumes","slug":"volumes","link":"#volumes","children":[{"level":3,"title":"HostPath allows you to mount a file or directory from the host node into a Pod. When using HostPath, the specified directory on the node serves as a persistent storage location. Even if the Pod is deleted or restarted, the data in that directory remains intact and can be reloaded, ensuring that files in the directory are not lost.","slug":"hostpath-allows-you-to-mount-a-file-or-directory-from-the-host-node-into-a-pod-when-using-hostpath-the-specified-directory-on-the-node-serves-as-a-persistent-storage-location-even-if-the-pod-is-deleted-or-restarted-the-data-in-that-directory-remains-intact-and-can-be-reloaded-ensuring-that-files-in-the-directory-are-not-lost","link":"#hostpath-allows-you-to-mount-a-file-or-directory-from-the-host-node-into-a-pod-when-using-hostpath-the-specified-directory-on-the-node-serves-as-a-persistent-storage-location-even-if-the-pod-is-deleted-or-restarted-the-data-in-that-directory-remains-intact-and-can-be-reloaded-ensuring-that-files-in-the-directory-are-not-lost","children":[]},{"level":3,"title":"EmptyDir is primarily used for sharing data between different containers within the same Pod. Unlike other volume types, an important distinction with EmptyDir is that the data is only accessible within the Pod it’s attached to. If the Pod is deleted, the EmptyDir volume and all its data are also deleted.","slug":"emptydir-is-primarily-used-for-sharing-data-between-different-containers-within-the-same-pod-unlike-other-volume-types-an-important-distinction-with-emptydir-is-that-the-data-is-only-accessible-within-the-pod-it-s-attached-to-if-the-pod-is-deleted-the-emptydir-volume-and-all-its-data-are-also-deleted","link":"#emptydir-is-primarily-used-for-sharing-data-between-different-containers-within-the-same-pod-unlike-other-volume-types-an-important-distinction-with-emptydir-is-that-the-data-is-only-accessible-within-the-pod-it-s-attached-to-if-the-pod-is-deleted-the-emptydir-volume-and-all-its-data-are-also-deleted","children":[]}]},{"level":2,"title":"NFS mounting","slug":"nfs-mounting","link":"#nfs-mounting","children":[{"level":3,"title":"An NFS (Network File System) volume can be mounted into your Pod. Unlike an emptyDir, which is deleted along with the Pod, the contents of an NFS volume are preserved when the Pod is deleted, with only the volume being unmounted. This means an NFS volume can be pre-populated with data, and this data can be shared between Pods.","slug":"an-nfs-network-file-system-volume-can-be-mounted-into-your-pod-unlike-an-emptydir-which-is-deleted-along-with-the-pod-the-contents-of-an-nfs-volume-are-preserved-when-the-pod-is-deleted-with-only-the-volume-being-unmounted-this-means-an-nfs-volume-can-be-pre-populated-with-data-and-this-data-can-be-shared-between-pods","link":"#an-nfs-network-file-system-volume-can-be-mounted-into-your-pod-unlike-an-emptydir-which-is-deleted-along-with-the-pod-the-contents-of-an-nfs-volume-are-preserved-when-the-pod-is-deleted-with-only-the-volume-being-unmounted-this-means-an-nfs-volume-can-be-pre-populated-with-data-and-this-data-can-be-shared-between-pods","children":[]}]},{"level":2,"title":"PV and PVC","slug":"pv-and-pvc","link":"#pv-and-pvc","children":[]},{"level":2,"title":"Persistent Volume (PV):","slug":"persistent-volume-pv","link":"#persistent-volume-pv","children":[{"level":3,"title":"Reclaim Policies","slug":"reclaim-policies","link":"#reclaim-policies","children":[]},{"level":3,"title":"PV Configuration","slug":"pv-configuration","link":"#pv-configuration","children":[]},{"level":3,"title":"PV State","slug":"pv-state","link":"#pv-state","children":[]}]},{"level":2,"title":"Persistent Volume Claim (PVC):","slug":"persistent-volume-claim-pvc","link":"#persistent-volume-claim-pvc","children":[{"level":3,"title":"PVC Configuration","slug":"pvc-configuration","link":"#pvc-configuration","children":[]}]},{"level":2,"title":"StorageClass (SC)","slug":"storageclass-sc","link":"#storageclass-sc","children":[]}],"git":{"createdTime":1731410230000,"updatedTime":1731410230000,"contributors":[{"name":"Ruochen Chen","email":"ruocchen1220@gmail.com","commits":1}]},"readingTime":{"minutes":2.21,"words":664},"filePathRelative":"posts/kubernetes/practices/10.md","localizedDate":"November 12, 2024","excerpt":"\\n<h2>Volumes</h2>\\n<h3>HostPath allows you to mount a file or directory from the host node into a Pod. When using HostPath, the specified directory on the node serves as a persistent storage location. Even if the Pod is deleted or restarted, the data in that directory remains intact and can be reloaded, ensuring that files in the directory are not lost.</h3>","autoDesc":true}')},6262:(i,s)=>{s.A=(i,s)=>{const e=i.__vccOpts||i;for(const[i,a]of s)e[i]=a;return e}}}]);