"use strict";(self.webpackChunkpersonalweb=self.webpackChunkpersonalweb||[]).push([[8936],{6262:(e,i)=>{i.A=(e,i)=>{const s=e.__vccOpts||e;for(const[e,a]of i)s[e]=a;return s}},9471:(e,i,s)=>{s.r(i),s.d(i,{comp:()=>r,data:()=>d});var a=s(641);const n=s.p+"assets/img/kube-problem.5f102303.png",t=s.p+"assets/img/k3s-server-modification.100f788e.png",l=s.p+"assets/img/node-result.25aae688.png",h={},r=(0,s(6262).A)(h,[["render",function(e,i){return(0,a.uX)(),(0,a.CE)("div",null,i[0]||(i[0]=[(0,a.Fv)('<h1 id="how-to-enable-kubectl-on-node-nodes" tabindex="-1"><a class="header-anchor" href="#how-to-enable-kubectl-on-node-nodes"><span>How to Enable kubectl on Node Nodes</span></a></h1><ol><li><p>First, on the node, create the directory: <img src="'+n+'" alt="kube-problem.png" loading="lazy"></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/kubernetes</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>Then, open the k3s.yaml file:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/rancher/k3s/k3s.yaml</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/rancher/k3s/k3s.yaml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Modify the server address from 127.0.0.1 to the VM&#39;s IP address. <img src="'+t+'" alt="k3s-server-modification.png" loading="lazy"></p></li><li><p>Next, transfer the k3s.yaml file to the respective nodes:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">scp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/rancher/k3s/k3s.yaml</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root@172.16.217.138:/etc/kubernetes/admin.conf</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">scp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/rancher/k3s/k3s.yaml</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root@172.16.217.139:/etc/kubernetes/admin.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>On the node, configure the kubeconfig file by running:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;export KUBECONFIG=/etc/kubernetes/admin.conf&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">~/.bashrc</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ~/.bashrc</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nodes</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><figure><img src="'+l+'" alt="node-result.png" tabindex="0" loading="lazy"><figcaption>node-result.png</figcaption></figure>',3)]))}]]),d=JSON.parse('{"path":"/posts/kubernetes/practices/2.html","title":"How to Enable kubectl on Node Nodes","lang":"en-US","frontmatter":{"icon":"pen-to-square","date":"2024-11-07T00:00:00.000Z","category":["Learning Records"],"tag":["Kubernetes"],"description":"How to Enable kubectl on Node Nodes First, on the node, create the directory: kube-problem.png Then, open the k3s.yaml file: Modify the server address from 127.0.0.1 to the VM\'s...","head":[["meta",{"property":"og:url","content":"https://crc011220.github.io/posts/kubernetes/practices/2.html"}],["meta",{"property":"og:site_name","content":"Ruochen Chen"}],["meta",{"property":"og:title","content":"How to Enable kubectl on Node Nodes"}],["meta",{"property":"og:description","content":"How to Enable kubectl on Node Nodes First, on the node, create the directory: kube-problem.png Then, open the k3s.yaml file: Modify the server address from 127.0.0.1 to the VM\'s..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-11-07T10:49:53.000Z"}],["meta",{"property":"article:tag","content":"Kubernetes"}],["meta",{"property":"article:published_time","content":"2024-11-07T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-07T10:49:53.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"How to Enable kubectl on Node Nodes\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-11-07T00:00:00.000Z\\",\\"dateModified\\":\\"2024-11-07T10:49:53.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Ruochen Chen\\"}]}"]]},"headers":[],"git":{"createdTime":1730976593000,"updatedTime":1730976593000,"contributors":[{"name":"Ruochen Chen","email":"ruocchen1220@gmail.com","commits":1}]},"readingTime":{"minutes":0.36,"words":109},"filePathRelative":"posts/kubernetes/practices/2.md","localizedDate":"November 7, 2024","excerpt":"\\n<ol>\\n<li>\\n<p>First, on the node, create the directory:\\n</p>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" data-title=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">mkdir</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> -p</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> /etc/kubernetes</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div></li>\\n<li>\\n<p>Then, open the k3s.yaml file:</p>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" data-title=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">cat</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> /etc/rancher/k3s/k3s.yaml</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">vi</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> /etc/rancher/k3s/k3s.yaml</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div><p>Modify the server address from 127.0.0.1 to the VM\'s IP address.\\n</p>\\n</li>\\n<li>\\n<p>Next, transfer the k3s.yaml file to the respective nodes:</p>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" data-title=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">scp</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> /etc/rancher/k3s/k3s.yaml</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> root@172.16.217.138:/etc/kubernetes/admin.conf</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">scp</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> /etc/rancher/k3s/k3s.yaml</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> root@172.16.217.139:/etc/kubernetes/admin.conf</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div></li>\\n<li>\\n<p>On the node, configure the kubeconfig file by running:</p>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" data-title=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\\">echo</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> \\"export KUBECONFIG=/etc/kubernetes/admin.conf\\"</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> &gt;&gt; </span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">~/.bashrc</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\\">source</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> ~/.bashrc</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">kubectl</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> get</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> nodes</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div></li>\\n</ol>","autoDesc":true}')}}]);